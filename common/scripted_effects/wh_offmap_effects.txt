##Daemon Creation
create_bloodletter_effect = {
	remove_race_trait_effect = yes
	set_graphical_culture = bloodletter_khorne
	set_character_flag = ai_flag_refuse_conversion
	culture = bloodletter_khorne
	religion = khorne
	dynasty = none
	recalc_succession = yes
	remove_trait = kind
	remove_trait = chaste
	remove_trait = patient
	remove_trait = content
	remove_trait = humble
	remove_trait = temperate
	remove_trait = diligent
	remove_trait = charitable
	remove_trait = infirm
	remove_trait = incapable
	remove_trait = wounded
	remove_trait = blinded
	remove_trait = weak
	remove_trait = fragile
	remove_trait = soft
	remove_trait = hardy
	remove_trait = tough
	remove_trait = strong
	remove_trait = on_witch_hunt
	remove_trait = has_nurgles_rot
	remove_trait = ill
	add_trait = wroth
	add_trait = honest
	add_trait = khorne_demon
	add_trait = khorne_bloodletter
	health = 25
	random_list = {
		25 = { add_trait = ambitious }
		25 = { add_trait = gregarious }
		25 = { add_trait = diligent }
		25 = { add_trait = proud }
	}
	any_lover = { remove_lover = ROOT }
	any_friend = { remove_friend = ROOT }
	any_spouse = { remove_spouse = ROOT }
	if = {
		limit = {
			NOT = { martial = 20 }
		}
		change_martial = 15
	}
	if = {
		limit = { intrigue = 15 }
		change_intrigue = -7
	}
}
create_plaguebearer_effect = {
	remove_race_trait_effect = yes
	set_graphical_culture = plaguebearer_nurgle
	set_character_flag = ai_flag_refuse_conversion
	culture = plaguebearer_nurgle
	religion = nurgle
	dynasty = none
	recalc_succession = yes
	remove_trait = cruel
	remove_trait = ambitious
	remove_trait = proud
	remove_trait = gluttonous
	remove_trait = diligent
	remove_trait = greedy
	remove_trait = infirm
	remove_trait = incapable
	remove_trait = scarred
	remove_trait = idiot
	remove_trait = imbecile
	remove_trait = dim
	remove_trait = dumb
	remove_trait = bright
	remove_trait = brilliant
	remove_trait = quick
	remove_trait = on_witch_hunt
	add_trait = content
	add_trait = humble
	add_trait = charitable
	add_trait = has_nurgles_rot
	add_trait = leper
	add_trait = nurgle_demon
	add_trait = nurgle_plaguebearer
	add_trait = ill
	health = 25
	random_list = {
		25 = { add_trait = has_tuberculosis }
		25 = { add_trait = has_typhoid_fever }
		25 = { add_trait = has_bubonic_plague }
		25 = { add_trait = has_measles }
	}
	random_list = {
		25 = { add_trait = has_small_pox }
		25 = { add_trait = syphilitic }
		25 = { add_trait = pneumonic }
		25 = { add_trait = has_typhus }
	}
	any_lover = { remove_lover = ROOT }
	any_friend = { remove_friend = ROOT }
	any_spouse = { remove_spouse = ROOT }
	if = {
		limit = {
			NOT = { stewardship = 20 }
		}
		change_stewardship = 15
	}
	if = {
		limit = {
			NOT = { diplomacy = 20 }
		}
		change_diplomacy = 15
	}
	if = {
		limit = { martial = 15 }
		change_martial = -7
	}
}
create_daemonette_effect = {
	remove_race_trait_effect = yes
	set_graphical_culture = daemonette_slaanesh
	set_character_flag = ai_flag_refuse_conversion
	culture = daemonette_slaanesh
	religion = slaanesh
	dynasty = none
	recalc_succession = yes
	remove_trait = kind
	remove_trait = chaste
	remove_trait = celibate
	remove_trait = content
	remove_trait = humble
	remove_trait = temperate
	remove_trait = diligent
	remove_trait = charitable
	remove_trait = infirm
	remove_trait = incapable
	remove_trait = wounded
	remove_trait = blinded
	remove_trait = idiot
	remove_trait = imbecile
	remove_trait = dim
	remove_trait = dumb
	remove_trait = bright
	remove_trait = brilliant
	remove_trait = quick
	remove_trait = on_witch_hunt
	remove_trait = has_nurgles_rot
	remove_trait = ill
	add_trait = cruel
	add_trait = deceitful
	add_trait = slaanesh_demon
	add_trait = slaanesh_daemonette
	health = 25
	random_list = {
		34 = { add_trait = lustful }
		33 = { add_trait = greedy }
		33 = { add_trait = gluttonous }
	}
	random_list = {
		34 = { add_trait = slothful }
		33 = { add_trait = proud }
		33 = { add_trait = envious }
	}
	any_lover = { remove_lover = ROOT }
	any_friend = { remove_friend = ROOT }
	any_spouse = { remove_spouse = ROOT }
	if = {
		limit = {
			NOT = { intrigue = 20 }
		}
		change_intrigue = 15
	}
	if = {
		limit = {
			NOT = { diplomacy = 20 }
		}
		change_diplomacy = 15
	}
	if = {
		limit = { stewardship = 15 }
		change_stewardship = -7
	}
}
create_flamer_effect = {
	remove_race_trait_effect = yes
	set_graphical_culture = flamer_tzeentch
	set_character_flag = ai_flag_refuse_conversion
	culture = flamer_tzeentch
	religion = tzeentch
	dynasty = none
	recalc_succession = yes
	remove_trait = kind
	remove_trait = content
	remove_trait = humble
	remove_trait = temperate
	remove_trait = slothful
	remove_trait = charitable
	remove_trait = infirm
	remove_trait = incapable
	remove_trait = wounded
	remove_trait = blinded
	remove_trait = idiot
	remove_trait = imbecile
	remove_trait = dim
	remove_trait = dumb
	remove_trait = bright
	remove_trait = brilliant
	remove_trait = quick
	remove_trait = on_witch_hunt
	remove_trait = has_nurgles_rot
	add_trait = ambitious
	add_trait = proud
	add_trait = greedy
	add_trait = genius
	add_trait = tzeentch_demon
	add_trait = tzeentch_flamer
	health = 25
	any_lover = { remove_lover = ROOT }
	any_friend = { remove_friend = ROOT }
	any_spouse = { remove_spouse = ROOT }
	if = {
		limit = {
			NOT = { intrigue = 20 }
		}
		change_intrigue = 15
	}
	if = {
		limit = {
			NOT = { learning = 20 }
		}
		change_learning = 15
	}
	if = {
		limit = { martial = 15 }
		change_martial = -7
	}
}

##Add Favour
add_favour_tiny_effect = {
	if = {
		limit = {
			culture_group = beastman_group
		}
		add_offmap_currency = { offmap = brayherd_warp value = 300 }
	}
	if = {
		limit = {
			follower_of_undivided = yes
			NOT = { culture_group = beastman_group }
		}
		add_offmap_currency = { offmap = nurgle_warp value = 100 }
		add_offmap_currency = { offmap = slaanesh_warp value = 100 }
		add_offmap_currency = { offmap = tzeentch_warp value = 100 }
		add_offmap_currency = { offmap = khorne_warp value = 100 }
	}
	else_if = {
		limit = {
			follower_of_nurgle = yes
		}
		add_offmap_currency = { offmap = nurgle_warp value = 300 }
	}
	else_if = {
		limit = {
			follower_of_slaanesh = yes
		}
		add_offmap_currency = { offmap = slaanesh_warp value = 300 }
	}
	else_if = {
		limit = {
			follower_of_tzeentch = yes
		}
		add_offmap_currency = { offmap = tzeentch_warp value = 300 }
	}
	else_if = {
		limit = {
			follower_of_khorne = yes
		}
		add_offmap_currency = { offmap = khorne_warp value = 300 }
	}
}
add_favour_minor_effect = {
	if = {
		limit = {
			culture_group = beastman_group
		}
		add_offmap_currency = { offmap = brayherd_warp value = 500 }
	}
	if = {
		limit = {
			follower_of_undivided = yes
			NOT = { culture_group = beastman_group }
		}
		add_offmap_currency = { offmap = nurgle_warp value = 150 }
		add_offmap_currency = { offmap = slaanesh_warp value = 150 }
		add_offmap_currency = { offmap = tzeentch_warp value = 150 }
		add_offmap_currency = { offmap = khorne_warp value = 150 }
	}
	else_if = {
		limit = {
			follower_of_nurgle = yes
		}
		add_offmap_currency = { offmap = nurgle_warp value = 500 }
	}
	else_if = {
		limit = {
			follower_of_slaanesh = yes
		}
		add_offmap_currency = { offmap = slaanesh_warp value = 500 }
	}
	else_if = {
		limit = {
			follower_of_tzeentch = yes
		}
		add_offmap_currency = { offmap = tzeentch_warp value = 500 }
	}
	else_if = {
		limit = {
			follower_of_khorne = yes
		}
		add_offmap_currency = { offmap = khorne_warp value = 500 }
	}
}
add_favour_medium_effect = {
	if = {
		limit = {
			culture_group = beastman_group
		}
		add_offmap_currency = { offmap = brayherd_warp value = 1000 }
	}
	if = {
		limit = {
			follower_of_undivided = yes
			NOT = { culture_group = beastman_group }
		}
		add_offmap_currency = { offmap = nurgle_warp value = 250 }
		add_offmap_currency = { offmap = slaanesh_warp value = 250 }
		add_offmap_currency = { offmap = tzeentch_warp value = 250 }
		add_offmap_currency = { offmap = khorne_warp value = 250 }
	}
	else_if = {
		limit = {
			follower_of_nurgle = yes
		}
		add_offmap_currency = { offmap = nurgle_warp value = 1000 }
	}
	else_if = {
		limit = {
			follower_of_slaanesh = yes
		}
		add_offmap_currency = { offmap = slaanesh_warp value = 1000 }
	}
	else_if = {
		limit = {
			follower_of_tzeentch = yes
		}
		add_offmap_currency = { offmap = tzeentch_warp value = 1000 }
	}
	else_if = {
		limit = {
			follower_of_khorne = yes
		}
		add_offmap_currency = { offmap = khorne_warp value = 1000 }
	}
}
add_favour_major_effect = {
	if = {
		limit = {
			culture_group = beastman_group
		}
		add_offmap_currency = { offmap = brayherd_warp value = 2500 }
	}
	if = {
		limit = {
			follower_of_undivided = yes
			NOT = { culture_group = beastman_group }
		}
		add_offmap_currency = { offmap = nurgle_warp value = 600 }
		add_offmap_currency = { offmap = slaanesh_warp value = 600 }
		add_offmap_currency = { offmap = tzeentch_warp value = 600 }
		add_offmap_currency = { offmap = khorne_warp value = 600 }
	}
	else_if = {
		limit = {
			follower_of_nurgle = yes
		}
		add_offmap_currency = { offmap = nurgle_warp value = 2500 }
	}
	else_if = {
		limit = {
			follower_of_slaanesh = yes
		}
		add_offmap_currency = { offmap = slaanesh_warp value = 2500 }
	}
	else_if = {
		limit = {
			follower_of_tzeentch = yes
		}
		add_offmap_currency = { offmap = tzeentch_warp value = 2500 }
	}
	else_if = {
		limit = {
			follower_of_khorne = yes
		}
		add_offmap_currency = { offmap = khorne_warp value = 2500 }
	}
}
add_favour_massive_effect = {
	if = {
		limit = {
			culture_group = beastman_group
		}
		add_offmap_currency = { offmap = brayherd_warp value = 5000 }
	}
	if = {
		limit = {
			follower_of_undivided = yes
			NOT = { culture_group = beastman_group }
		}
		add_offmap_currency = { offmap = nurgle_warp value = 1250 }
		add_offmap_currency = { offmap = slaanesh_warp value = 1250 }
		add_offmap_currency = { offmap = tzeentch_warp value = 1250 }
		add_offmap_currency = { offmap = khorne_warp value = 1250 }
	}
	else_if = {
		limit = {
			follower_of_nurgle = yes
		}
		add_offmap_currency = { offmap = nurgle_warp value = 5000 }
	}
	else_if = {
		limit = {
			follower_of_slaanesh = yes
		}
		add_offmap_currency = { offmap = slaanesh_warp value = 5000 }
	}
	else_if = {
		limit = {
			follower_of_tzeentch = yes
		}
		add_offmap_currency = { offmap = tzeentch_warp value = 5000 }
	}
	else_if = {
		limit = {
			follower_of_khorne = yes
		}
		add_offmap_currency = { offmap = khorne_warp value = 5000 }
	}
}

##Remove Favour
reduce_favour_tiny_effect = {
	if = {
		limit = {
			culture_group = beastman_group
		}
		add_offmap_currency = { offmap = brayherd_warp value = -300 }
	}
	if = {
		limit = {
			follower_of_undivided = yes
			NOT = { culture_group = beastman_group }
		}
		add_offmap_currency = { offmap = nurgle_warp value = -100 }
		add_offmap_currency = { offmap = slaanesh_warp value = -100 }
		add_offmap_currency = { offmap = tzeentch_warp value = -100 }
		add_offmap_currency = { offmap = khorne_warp value = -100 }
	}
	else_if = {
		limit = {
			follower_of_nurgle = yes
		}
		add_offmap_currency = { offmap = nurgle_warp value = -300 }
	}
	else_if = {
		limit = {
			follower_of_slaanesh = yes
		}
		add_offmap_currency = { offmap = slaanesh_warp value = -300 }
	}
	else_if = {
		limit = {
			follower_of_tzeentch = yes
		}
		add_offmap_currency = { offmap = tzeentch_warp value = -300 }
	}
	else_if = {
		limit = {
			follower_of_khorne = yes
		}
		add_offmap_currency = { offmap = khorne_warp value = -300 }
	}
}
reduce_favour_minor_effect = {
	if = {
		limit = {
			culture_group = beastman_group
		}
		add_offmap_currency = { offmap = brayherd_warp value = -500 }
	}
	if = {
		limit = {
			follower_of_undivided = yes
			NOT = { culture_group = beastman_group }
		}
		add_offmap_currency = { offmap = nurgle_warp value = -150 }
		add_offmap_currency = { offmap = slaanesh_warp value = -150 }
		add_offmap_currency = { offmap = tzeentch_warp value = -150 }
		add_offmap_currency = { offmap = khorne_warp value = -150 }
	}
	else_if = {
		limit = {
			follower_of_nurgle = yes
		}
		add_offmap_currency = { offmap = nurgle_warp value = -500 }
	}
	else_if = {
		limit = {
			follower_of_slaanesh = yes
		}
		add_offmap_currency = { offmap = slaanesh_warp value = -500 }
	}
	else_if = {
		limit = {
			follower_of_tzeentch = yes
		}
		add_offmap_currency = { offmap = tzeentch_warp value = -500 }
	}
	else_if = {
		limit = {
			follower_of_khorne = yes
		}
		add_offmap_currency = { offmap = khorne_warp value = -500 }
	}
}
reduce_favour_medium_effect = {
	if = {
		limit = {
			culture_group = beastman_group
		}
		add_offmap_currency = { offmap = brayherd_warp value = -1000 }
	}
	if = {
		limit = {
			follower_of_undivided = yes
			NOT = { culture_group = beastman_group }
		}
		add_offmap_currency = { offmap = nurgle_warp value = -250 }
		add_offmap_currency = { offmap = slaanesh_warp value = -250 }
		add_offmap_currency = { offmap = tzeentch_warp value = -250 }
		add_offmap_currency = { offmap = khorne_warp value = -250 }
	}
	else_if = {
		limit = {
			follower_of_nurgle = yes
		}
		add_offmap_currency = { offmap = nurgle_warp value = -1000 }
	}
	else_if = {
		limit = {
			follower_of_slaanesh = yes
		}
		add_offmap_currency = { offmap = slaanesh_warp value = -1000 }
	}
	else_if = {
		limit = {
			follower_of_tzeentch = yes
		}
		add_offmap_currency = { offmap = tzeentch_warp value = -1000 }
	}
	else_if = {
		limit = {
			follower_of_khorne = yes
		}
		add_offmap_currency = { offmap = khorne_warp value = -1000 }
	}
}
reduce_favour_major_effect = {
	if = {
		limit = {
			culture_group = beastman_group
		}
		add_offmap_currency = { offmap = brayherd_warp value = -2500 }
	}
	if = {
		limit = {
			follower_of_undivided = yes
			NOT = { culture_group = beastman_group }
		}
		add_offmap_currency = { offmap = nurgle_warp value = -600 }
		add_offmap_currency = { offmap = slaanesh_warp value = -600 }
		add_offmap_currency = { offmap = tzeentch_warp value = -600 }
		add_offmap_currency = { offmap = khorne_warp value = -600 }
	}
	else_if = {
		limit = {
			follower_of_nurgle = yes
		}
		add_offmap_currency = { offmap = nurgle_warp value = -2500 }
	}
	else_if = {
		limit = {
			follower_of_slaanesh = yes
		}
		add_offmap_currency = { offmap = slaanesh_warp value = -2500 }
	}
	else_if = {
		limit = {
			follower_of_tzeentch = yes
		}
		add_offmap_currency = { offmap = tzeentch_warp value = -2500 }
	}
	else_if = {
		limit = {
			follower_of_khorne = yes
		}
		add_offmap_currency = { offmap = khorne_warp value = -2500 }
	}
}
reduce_favour_massive_effect = {
	if = {
		limit = {
			culture_group = beastman_group
		}
		add_offmap_currency = { offmap = brayherd_warp value = -5000 }
	}
	if = {
		limit = {
			follower_of_undivided = yes
			NOT = { culture_group = beastman_group }
		}
		add_offmap_currency = { offmap = nurgle_warp value = -1250 }
		add_offmap_currency = { offmap = slaanesh_warp value = -1250 }
		add_offmap_currency = { offmap = tzeentch_warp value = -1250 }
		add_offmap_currency = { offmap = khorne_warp value = -1250 }
	}
	else_if = {
		limit = {
			follower_of_nurgle = yes
		}
		add_offmap_currency = { offmap = nurgle_warp value = -5000 }
	}
	else_if = {
		limit = {
			follower_of_slaanesh = yes
		}
		add_offmap_currency = { offmap = slaanesh_warp value = -5000 }
	}
	else_if = {
		limit = {
			follower_of_tzeentch = yes
		}
		add_offmap_currency = { offmap = tzeentch_warp value = -5000 }
	}
	else_if = {
		limit = {
			follower_of_khorne = yes
		}
		add_offmap_currency = { offmap = khorne_warp value = -5000 }
	}
}

clear_favour_effect = {
	set_offmap_currency = {
		offmap = undivided_warp
		value = 0
	}
	set_offmap_currency = {
		offmap = slaanesh_warp
		value = 0
	}
	set_offmap_currency = {
		offmap = nurgle_warp
		value = 0
	}
	set_offmap_currency = {
		offmap = tzeentch_warp
		value = 0
	}
	set_offmap_currency = {
		offmap = khorne_warp
		value = 0
	}
}

##Misc
add_beastman_artifact_effect = {
	random_list = {
		10 = {
			trigger = { NOT = { has_artifact = beastmen_artifact_beast_banner } }
			add_artifact = beastmen_artifact_beast_banner
		}
		10 = {
			trigger = { NOT = { has_artifact = beastmen_artifact_dark_heart } }
			add_artifact = beastmen_artifact_dark_heart
		}
		10 = {
			trigger = { NOT = { has_artifact = beastmen_artifact_shard_herd_stone } }
			add_artifact = beastmen_artifact_shard_herd_stone
		}
		10 = {
			trigger = { NOT = { has_artifact = beastmen_artifact_dark_rain_chalice } }
			add_artifact = beastmen_artifact_dark_rain_chalice
		}
		10 = {
			trigger = { NOT = { has_artifact = beastmen_artifact_ramhorn_helm } }
			add_artifact = beastmen_artifact_ramhorn_helm
		}
		10 = {
			trigger = { NOT = { has_artifact = beastmen_artifact_fur_sharrgu } }
			add_artifact = beastmen_artifact_fur_sharrgu
		}
		10 = {
			trigger = { NOT = { has_artifact = beastmen_artifact_great_fang } }
			add_artifact = beastmen_artifact_great_fang
		}
		10 = {
			trigger = { NOT = { has_artifact = beastmen_artifact_stonecrusher_mace } }
			add_artifact = beastmen_artifact_stonecrusher_mace
		}
		10 = {
			trigger = { NOT = { has_artifact = beastmen_artifact_black_maul } }
			add_artifact = beastmen_artifact_black_maul
		}
		5 = {
			trigger = { NOT = { has_artifact = beastmen_artifact_chaos_armour } }
			add_artifact = beastmen_artifact_chaos_armour
		}
	}
}

##Magic
magic_resist_test_effect = {
	if = {
		limit = {
			event_target:magic_target = {
				check_variable = { which = MagicPool value > 4	}
			}
		}
		event_target:magic_target = {
			subtract_variable = { which = MagicPool value = 4 }
			set_character_flag = resist_success
		}
	}
	else = {
		set_character_flag = resist_failed
	}
}
add_necro_power_effect = {
	if = {
		limit = {
			trait = lore_necromancy
			NOR = {
				has_character_modifier = necromantic_power_1
				has_character_modifier = necromantic_power_2
				has_character_modifier = necromantic_power_3
				has_character_modifier = necromantic_power_4
				has_character_modifier = necromantic_power_5
			}
		}
		add_character_modifier = { name = necromantic_power_1 duration = -1 }
	}
	else_if = {
		limit = {
			trait = lore_necromancy
			has_character_modifier = necromantic_power_1
		}
		remove_character_modifier = necromantic_power_1
		add_character_modifier = { name = necromantic_power_2 duration = -1 }
	}
	else_if = {
		limit = {
			trait = lore_necromancy
			has_character_modifier = necromantic_power_2
		}
		remove_character_modifier = necromantic_power_2
		add_character_modifier = { name = necromantic_power_3 duration = -1 }
	}
	else_if = {
		limit = {
			trait = lore_necromancy
			has_character_modifier = necromantic_power_3
		}
		remove_character_modifier = necromantic_power_3
		add_character_modifier = { name = necromantic_power_4 duration = -1 }
	}
	else_if = {
		limit = {
			trait = lore_necromancy
			has_character_modifier = necromantic_power_4
		}
		remove_character_modifier = necromantic_power_4
		add_character_modifier = { name = necromantic_power_5 duration = -1 }
	}
}
remove_necro_power_effect = {
	if = {
		limit = { has_character_modifier = necromantic_power_5 }
		remove_character_modifier = necromantic_power_5
		add_character_modifier = { name = necromantic_power_2 duration = -1 }
	}
	else_if = {
		limit = { has_character_modifier = necromantic_power_4 }
		remove_character_modifier = necromantic_power_4
		add_character_modifier = { name = necromantic_power_1 duration = -1 }
	}
	else_if = {
		limit = {
			OR = {
				has_character_modifier = necromantic_power_3
				has_character_modifier = necromantic_power_2
				has_character_modifier = necromantic_power_1
			}
		}
		remove_character_modifier = necromantic_power_3
		remove_character_modifier = necromantic_power_2
		remove_character_modifier = necromantic_power_1
	}
}
foresight_plot_protection_effect = {
	plot_power_modifier = 0.5
	plot_discovery_chance = 1.0
}
channeling_effect = {
	if = {
		limit = { trait = lore_necromancy }
		random_list = {
			20 = {
				modifier = {
					factor = 2.0
					is_doom_very_low_trigger = yes
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 3
				}
			}
			20 = {
				modifier = {
					factor = 2.0
					OR = {
						is_doom_low_trigger = yes
						is_doom_medium_trigger = yes
					}
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 4
				}
			}
			20 = {
				modifier = {
					factor = 2.0
					OR = {
						is_doom_high_trigger = yes
						is_doom_very_high_trigger = yes
					}
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 5
				}
			}
		}
	}
	else_if = {
		limit = { trait = lore_maw }
		random_list = {
			20 = {
				modifier = {
					factor = 2.0
					is_doom_very_low_trigger = yes
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 3
				}
			}
			20 = {
				modifier = {
					factor = 2.0
					OR = {
						is_doom_low_trigger = yes
						is_doom_medium_trigger = yes
					}
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 4
				}
			}
			20 = {
				modifier = {
					factor = 2.0
					OR = {
						is_doom_high_trigger = yes
						is_doom_very_high_trigger = yes
					}
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 5
				}
			}
		}
	}
	else_if = {
		limit = { trait = magic_potential_1 }
		random_list = {
			20 = {
				modifier = {
					factor = 2.0
					is_doom_very_low_trigger = yes
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 2
				}
			}
			20 = {
				modifier = {
					factor = 2.0
					is_doom_low_trigger = yes
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 3
				}
			}
			20 = {
				modifier = {
					factor = 2.0
					is_doom_medium_trigger = yes
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 4
				}
			}
			20 = {
				modifier = {
					factor = 2.0
					is_doom_high_trigger = yes
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 5
				}
			}
			20 = {
				modifier = {
					factor = 2.0
					is_doom_very_high_trigger = yes
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 6
				}
			}
		}
	}
	else_if = {
		limit = { trait = magic_potential_2 }
		random_list = {
			20 = {
				modifier = {
					factor = 2.0
					is_doom_very_low_trigger = yes
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 3
				}
			}
			20 = {
				modifier = {
					factor = 2.0
					is_doom_low_trigger = yes
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 4
				}
			}
			20 = {
				modifier = {
					factor = 2.0
					is_doom_medium_trigger = yes
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 5
				}
			}
			20 = {
				modifier = {
					factor = 2.0
					is_doom_high_trigger = yes
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 6
				}
			}
			20 = {
				modifier = {
					factor = 2.0
					is_doom_very_high_trigger = yes
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 7
				}
			}
		}
	}
	else_if = {
		limit = { trait = magic_potential_3 }
		random_list = {
			20 = {
				modifier = {
					factor = 2.0
					is_doom_very_low_trigger = yes
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 4
				}
			}
			20 = {
				modifier = {
					factor = 2.0
					is_doom_low_trigger = yes
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 5
				}
			}
			20 = {
				modifier = {
					factor = 2.0
					is_doom_medium_trigger = yes
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 6
				}
			}
			20 = {
				modifier = {
					factor = 2.0
					is_doom_high_trigger = yes
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 7
				}
			}
			20 = {
				modifier = {
					factor = 2.0
					is_doom_very_high_trigger = yes
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 8
				}
			}
		}
	}
	else_if = {
		limit = { trait = magic_potential_4 }
		random_list = {
			20 = {
				modifier = {
					factor = 2.0
					is_doom_very_low_trigger = yes
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 5
				}
			}
			20 = {
				modifier = {
					factor = 2.0
					is_doom_low_trigger = yes
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 6
				}
			}
			20 = {
				modifier = {
					factor = 2.0
					is_doom_medium_trigger = yes
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 7
				}
			}
			20 = {
				modifier = {
					factor = 2.0
					is_doom_high_trigger = yes
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 8
				}
			}
			20 = {
				modifier = {
					factor = 2.0
					is_doom_very_high_trigger = yes
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 9
				}
			}
		}
	}
	else = {
		random_list = {
			20 = {
				modifier = {
					factor = 2.0
					is_doom_very_low_trigger = yes
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 3
				}
			}
			20 = {
				modifier = {
					factor = 2.0
					OR = {
						is_doom_low_trigger = yes
						is_doom_medium_trigger = yes
					}
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 4
				}
			}
			20 = {
				modifier = {
					factor = 2.0
					OR = {
						is_doom_high_trigger = yes
						is_doom_very_high_trigger = yes
					}
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 5
				}
			}
		}
	}
}
greenskin_channeling_effect = {
	if = {
		limit = {
			has_instances_of_character_modifier = {
				name = greenskin_fightiness
				amount > 2
			}
		}
		reduce_fightiness = yes
		random_list = {
			20 = {
				modifier = {
					factor = 2.0
					is_doom_very_low_trigger = yes
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 2
				}
			}
			20 = {
				modifier = {
					factor = 2.0
					is_doom_low_trigger = yes
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 3
				}
			}
			20 = {
				modifier = {
					factor = 2.0
					is_doom_medium_trigger = yes
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 4
				}
			}
			20 = {
				modifier = {
					factor = 2.0
					is_doom_high_trigger = yes
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 5
				}
			}
			20 = {
				modifier = {
					factor = 2.0
					is_doom_very_high_trigger = yes
				}
				add_offmap_currency = {
					offmap = offmap_magic
					value = 6
				}
			}
		}
	}
}
life_leach_effect = {
	random_list = {
		50 = {
			set_variable = {
				which = age_variable
				value = 3
			}
			add_age = age_variable
			health = -0.6
		}
		30 = {
			set_variable = {
				which = age_variable
				value = 5
			}
			add_age = age_variable
			health = -1.0
		}
		15 = {
			set_variable = {
				which = age_variable
				value = 7
			}
			add_age = age_variable
			health = -1.4
		}
		5 = {
			set_variable = {
				which = age_variable
				value = 10
			}
			add_age = age_variable
			health = -2.0
		}
	}
	if = {
		limit = { health < 3 }
		add_trait = infirm
	}
}
healing_effect = {
	add_character_modifier = {
		name = invigorated
		years = 1
	}
	if = { #Most Pressing Wounds first
		limit = { trait = severely_injured }
		remove_trait = severely_injured
	} 
	if = { #Most Pressing Wounds first
		limit = { trait = maimed }
		remove_trait = maimed
		break = yes
	}
	else_if = { #Harmful for Nurglites
		limit = {
			true_religion = nurgle
			trait = food_poisoning 
		}
		remove_trait = food_poisoning
	}
	else_if = { #Incureables
		limit = { trait = has_bubonic_plague }
		remove_trait = has_bubonic_plague
	}
	else_if = {
		limit = { 
			NOT = { true_religion = nurgle }
			trait = has_nurgles_rot 
		}
		remove_trait = has_nurgles_rot
	}
	else_if = {
		limit = { trait = rabies }
		remove_trait = rabies
	}
	else_if = { #Regular
		limit = { trait = has_typhus }
		remove_trait = has_typhus
	}
	else_if = {
		limit = { trait = has_bone_auge }
		remove_trait = has_bone_auge
	}
	else_if = {
		limit = { trait = has_creeping_buboes }
		remove_trait = has_creeping_buboes
	}
	else_if = {
		limit = { trait = dysentery }
		remove_trait = dysentery
	}
	else_if = {
		limit = { trait = pneumonic }
		remove_trait = pneumonic
	}
	else_if = {
		limit = { trait = has_red_pox }
		remove_trait = has_red_pox
	}
	else_if = {
		limit = { trait = has_rattlelung }
		remove_trait = has_rattlelung
	}
	else_if = {
		limit = { trait = has_small_pox }
		remove_trait = has_small_pox
	}
	else_if = {
		limit = { trait = has_typhoid_fever }
		remove_trait = has_typhoid_fever
	}
	else_if = {
		limit = { trait = has_green_pox }
		remove_trait = has_green_pox
	}
	else_if = {
		limit = { trait = has_measles }
		remove_trait = has_measles
	}
	else_if = {
		limit = { trait = has_tuberculosis }
		remove_trait = has_tuberculosis
	}
	else_if = { #Life Style Diseases
		limit = { trait = food_poisoning }
		remove_trait = food_poisoning
	}
	else_if = {
		limit = { trait = scurvy }
		remove_trait = scurvy
	}
	else_if = {
		limit = { trait = gout }
		remove_trait = gout
	}
	else_if = {
		limit = { trait = has_tomb_rot }
		remove_trait = has_tomb_rot
	}
	else_if = {
		limit = { trait = syphilitic }
		remove_trait = syphilitic
	}
	else_if = {
		limit = { trait = flu }
		remove_trait = flu
	}
	else_if = {
		limit = { trait = ill }
		remove_trait = ill
	}
	else_if = { #Regular wounds
		limit = { trait = wounded }
		remove_trait = wounded
		break = yes
	}
	else_if = { #Regular wounds
		limit = { trait = incapable }
		remove_trait = incapable
		add_trait = infirm
		break = yes
	}
	else_if = {
		limit = { trait = infirm }
		remove_trait = infirm
		break = yes
	}
	else_if = { #Regular wounds
		limit = { trait = disfigured }
		remove_trait = disfigured
		remove_trait = scarred_mid
		remove_trait = scarred
		add_trait = scarred_high
		break = yes
	}
	else = {
		remove_trait = abdominal_pain
		remove_trait = chest_pain
		remove_trait = cough
		remove_trait = cramps
		remove_trait = diarrhea
		remove_trait = fatigue
		remove_trait = fever
		remove_trait = headache
		remove_trait = infection
		remove_trait = malaise
		remove_trait = rash
		remove_trait = vomiting
	}
	#remove_trait = cancer You think you can Escape cancer y-y? git real #3
	#remove_trait = eunuch #Create Regeneration  Potion?
	#remove_trait = blinded
	#remove_trait = mangled
	#remove_trait = one_eyed
	#remove_trait = one_handed
	#remove_trait = one_legged
	remove_treatment_modifiers_effect = yes
	remove_disease_flags_effect = yes
}
reveal_plots_effect = {
	random_unknown_plotter = {
		limit = {
			has_plot = yes
			NOT = { ROOT = { any_known_plotter = { character = PREVPREV } } }
		}
		save_event_target_as = plot_reveal_magic
		break = yes
	}
	random_child = {
		limit = {
			any_unknown_plotter = {
				has_plot = yes
				NOT = { ROOT = { any_known_plotter = { character = PREVPREV } } }
			}
		}
		random_unknown_plotter = {
			limit = {
				has_plot = yes
				NOT = { ROOT = { any_known_plotter = { character = PREVPREV } } }
				}
			save_event_target_as = plot_reveal_magic
			break = yes
		}
	}
	random_spouse = {
		limit = {
			any_unknown_plotter = {
				has_plot = yes
				NOT = { ROOT = { any_known_plotter = { character = PREVPREV } } }
			}
		}
		random_unknown_plotter = {
			limit = {
				has_plot = yes
				NOT = { ROOT = { any_known_plotter = { character = PREVPREV } } }
			}
			save_event_target_as = plot_reveal_magic
			break = yes
		}
	}
	random_sibling = {
		limit = {
			any_unknown_plotter = {
				has_plot = yes
				NOT = { ROOT = { any_known_plotter = { character = PREVPREV } } }
			}
		}
		random_unknown_plotter = {
			limit = {
				has_plot = yes
				NOT = { ROOT = { any_known_plotter = { character = PREVPREV } } }
			}
			save_event_target_as = plot_reveal_magic
			break = yes
		}
	}
}
enhanced_ability_necro_effect = {
	add_character_modifier = { name = unnatural_aura months = 8 }
}
enhanced_ability_dreadknight_effect = {
	add_character_modifier = { name = dreadknight_aspect months = 6 }
}
enhanced_ability_joyous_aspect_effect = {
	add_character_modifier = { name = joyous_aspect months = 6 }
}
enhanced_ability_titillating_delusions_effect = {
	add_character_modifier = { name = titillating_delusions months = 6 }
}
enhanced_ability_charisma_effect = {
	add_character_modifier = { name = enhanced_charisma months = 6 }
}
enhanced_ability_defensive_effect = {
	add_character_modifier = { name = enhanced_defensive months = 6 }
}
enhanced_ability_strength_effect = {
	add_character_modifier = { name = enhanced_strength months = 6 }
}
enhanced_ability_speed_effect = {
	add_character_modifier = { name = enhanced_speed months = 6 }
}
enhanced_beauty_effect = {
	if = {
		limit = {
			OR = {
				trait = plain
				trait = ugly
				trait = unsightly
				trait = disfigured
				trait = uncouth
				trait = clubfooted
				trait = harelip
				trait = hunchback
				trait = lisp
				trait = stutter
			}
		}
		hidden_tooltip = {
			remove_trait = plain
			remove_trait = ugly
			remove_trait = unsightly
			remove_trait = disfigured
			remove_trait = uncouth
			remove_trait = clubfooted
			remove_trait = harelip
			remove_trait = hunchback
			remove_trait = lisp
			remove_trait = stutter
		}
		add_trait = fair
		add_trait = groomed
	}
	else_if = {
		limit = {
			NOR = {
				trait = beautiful
				trait = pretty
				trait = fair
				trait = groomed
			}
		}
		add_trait = fair
		add_trait = groomed
	}
	else_if = {
		limit = { trait = fair }
		remove_trait = fair
		add_trait = pretty
	}
	else_if = {
		limit = { trait = pretty }
		remove_trait = pretty
		add_trait = beautiful
	}
}
heal_effect = {
	while = {
		count = 3
		limit = {
			event_target:magic_caster = {
				check_variable = { which = MagicPool value > 0	}
			}
		}
		event_target:magic_caster = {
			subtract_variable = { which = MagicPool value = 1 }
		}
		random_list = {
			40 = {
				damage_unit = {
					percentage = -0.20
				}
			}
			20 = {
				damage_unit = {
					percentage = -0.25
				}
			}
			15 = {
				damage_unit = {
					percentage = -0.30
				}
			}
			15 = {
				damage_unit = {
					percentage = -0.35
				}
			}
			10 = {
				damage_unit = {
					percentage = -0.40
				}
			}
		}
	}
}
morale_heal_effect = {
	random_list = {
		10 = {
		}
		40 = {
			damage_unit_morale = -0.15
		}
		20 = {
			damage_unit_morale = -0.20
		}
		10 = {
			damage_unit_morale = -0.25
		}
		10 = {
			damage_unit_morale = -0.30
		}
		10 = {
			damage_unit_morale = -0.35
		}
	}
}
magic_dmg_effect = {
	while = {
		count = 3
		limit = {
			event_target:magic_caster = {
				check_variable = { which = MagicPool value > 0	}
			}
		}
		event_target:magic_caster = {
			subtract_variable = { which = MagicPool value = 1 }
		}
		random_list = {
			40 = {
				damage_unit = {
					percentage = 0.15
				}
			}
			20 = {
				damage_unit = {
					percentage = 0.20
				}
			}
			15 = {
				damage_unit = {
					percentage = 0.30
				}
			}
			15 = {
				damage_unit = {
					percentage = 0.35
				}
			}
			10 = {
				damage_unit = {
					percentage = 0.40
				}
			}
		}
	}
}
magic_dmg_special_effect = {
	while = {
		count = 5
		limit = {
			event_target:magic_caster = {
				check_variable = { which = MagicPool value > 0	}
			}
		}
		event_target:magic_caster = {
			subtract_variable = { which = MagicPool value = 1 }
		}
		random_list = {
			40 = {
				damage_unit = {
					percentage = 0.10
				}
			}
			20 = {
				damage_unit = {
					percentage = 0.15
				}
			}
			15 = {
				damage_unit = {
					percentage = 0.20
				}
			}
			15 = {
				damage_unit = {
					percentage = 0.25
				}
			}
			10 = {
				damage_unit = {
					percentage = 0.30
				}
			}
		}
		random_list = {
			40 = {
				damage_unit = {
					percentage = 0.05
					type = heavy_infantry
				}
			}
			20 = {
				damage_unit = {
					percentage = 0.10
					type = heavy_infantry
				}
			}
			10 = {
				damage_unit = {
					percentage = 0.15
					type = heavy_infantry
				}
			}
			10 = {
				damage_unit = {
					percentage = 0.20
					type = heavy_infantry
				}
			}
			10 = {
				damage_unit = {
					percentage = 0.25
					type = heavy_infantry
				}
			}
		}
		random_list = {
			40 = {
				damage_unit = {
					percentage = 0.05
					type = pikemen
				}
			}
			20 = {
				damage_unit = {
					percentage = 0.10
					type = pikemen
				}
			}
			15 = {
				damage_unit = {
					percentage = 0.15
					type = pikemen
				}
			}
			15 = {
				damage_unit = {
					percentage = 0.20
					type = pikemen
				}
			}
			10 = {
				damage_unit = {
					percentage = 0.25
					type = pikemen
				}
			}
		}
		random_list = {
			40 = {
				damage_unit = {
					percentage = 0.05
					type = knights
				}
			}
			20 = {
				damage_unit = {
					percentage = 0.10
					type = knights
				}
			}
			15 = {
				damage_unit = {
					percentage = 0.15
					type = knights
				}
			}
			15 = {
				damage_unit = {
					percentage = 0.20
					type = knights
				}
			}
			10 = {
				damage_unit = {
					percentage = 0.25
					type = knights
				}
			}
		}
	}
}
morale_dmg_effect = {
	random_list = {
		40 = {
			damage_unit_morale = 0.15
		}
		30 = {
			damage_unit_morale = 0.20
		}
		10 = {
			damage_unit_morale = 0.25
		}
		10 = {
			damage_unit_morale = 0.30
		}
		10 = {
			damage_unit_morale = 0.35
		}
	}
	if = {
		limit = {
			event_target:magic_caster = {
				 in_siege = yes
			}
		}
		random_list = {
			40 = {
				morale = -0.02
			}
			20 = {
				morale = -0.03
			}
			15 = {
				morale = -0.04
			}
			15 = {
				morale = -0.05
			}
			10 = {
				morale = -0.10
			}
		}
	}
}
dispel_effect = {
	event_target:magic_caster = {
		if = {
			limit = {
				check_variable = { which = MagicPool value > 0 }
			}
			subtract_variable = { which = MagicPool value = 1 }
			event_target:magic_target = {
				disband_event_forces = summoned_daemons
				disband_event_forces = summoned_zombiehorde_1
				disband_event_forces = summoned_zombiehorde_2
				disband_event_forces = summoned_zombiehorde_3
				disband_event_forces = summoned_zombiehorde_4
				disband_event_forces = summoned_zombiehorde_5
				disband_event_forces = summoned_zombiehorde_6
				disband_event_forces = summoned_zombiehorde_7
				disband_event_forces = summoned_zombiehorde_8
				disband_event_forces = summoned_zombiehorde_9
				disband_event_forces = summoned_zombiehorde_10
			}
		}
	}
}
enhance_province_effect = {
	magic_prosperity_increase_effect = yes
	if = {
		limit = {
			has_province_modifier = prosperity_modifier_3
		}
		random_list = {
			50 = {
				magic_holding_slot_minor_increase_effect = yes
			}
			50 = {}
		}
	}
}
enhance_province_strong_effect = {
	magic_prosperity_increase_effect = yes
	if = {
		limit = {
			has_province_modifier = prosperity_modifier_3
		}
		random_list = {
			50 = {
				magic_holding_slot_increase_effect = yes
			}
			50 = {}
		}
	}
}
magic_prosperity_increase_effect = {
	if = {
		limit = {
			NOR = {
				has_province_modifier = prosperity_modifier_3
				has_province_modifier = prosperity_modifier_2
				has_province_modifier = prosperity_modifier_1
			}
		}
		add_province_modifier = { name = prosperity_modifier_1 duration = -1}
	}
	else_if = {
		limit = {
			has_province_modifier = prosperity_modifier_1
		}
		remove_province_modifier = prosperity_modifier_1
		add_province_modifier = { name = prosperity_modifier_2 duration = -1}
	}
	else_if = {
		limit = {
			has_province_modifier = prosperity_modifier_2
		}
		remove_province_modifier = prosperity_modifier_2
		add_province_modifier = { name = prosperity_modifier_3 duration = -1}
	}
}
magic_prosperity_decrease_effect = {
	if = {
		limit = {
			has_province_modifier = prosperity_modifier_1
		}
		remove_province_modifier = prosperity_modifier_1
	}
	else_if = {
		limit = {
			has_province_modifier = prosperity_modifier_2
		}
		remove_province_modifier = prosperity_modifier_2
		add_province_modifier = { name = prosperity_modifier_1 duration = -1}
	}
	else_if = {
		limit = {
			has_province_modifier = prosperity_modifier_3
		}
		remove_province_modifier = prosperity_modifier_3
		add_province_modifier = { name = prosperity_modifier_2 duration = -1}
	}
}
magic_holding_slot_minor_increase_effect = {
	limit = {
		NOT = { num_of_max_settlements = 5 }
	}
	add_holding_slot = 1
}
magic_holding_slot_increase_effect = {
	limit = {
		NOT = { num_of_max_settlements = 7 }
	}
	add_holding_slot = 1
}
magic_spawn_disease_effect = {
	random_list = {
		10 = {
			spawn_disease = green_pox
		}
		10 = {
			spawn_disease = red_pox
		}
		5 = {
			spawn_disease = nurgles_rot
		}
		15 = {
			spawn_disease = rattlelung
		}
		10 = {
			spawn_disease = creeping_buboes
		}
		10 = {
			spawn_disease = tuberculosis
		}
		10 = {
			spawn_disease = typhoid_fever
		}
		5 = {
			spawn_disease = typhus
		}
		10 = {
			spawn_disease = measles
		}
		5 = {
			spawn_disease = small_pox
		}
		5 = {
			spawn_disease = syphilis
		}
		5 = {
			spawn_disease = dancing_plague
		}
	}
}
magic_reduce_disease_effect = {
	random_list = {
		10 = {
			reduce_disease = 0.10
		}
		10 = {
			reduce_disease = 0.15
		}
		5 = {
			reduce_disease = 0.20
		}
		15 = {
			reduce_disease = 0.25
		}
		10 = {
			reduce_disease = 0.30
		}
		10 = {
			reduce_disease = 0.35
		}
		10 = {
			reduce_disease = 0.40
		}
		5 = {
			reduce_disease = 0.50
		}
		10 = {
			reduce_disease = 0.60
		}
		5 = {
			reduce_disease = 0.75
		}
		5 = {
			reduce_disease = 0.80
		}
		5 = {
			reduce_disease = 1.00
		}
	}
}
drain_magic_effect = {
	set_variable = { which = MagicPool value = 0 }
	set_offmap_currency = {
		offmap = offmap_magic
		value = 0
	}
}
#Transformation System
magic_transform_effect = {
	magic_resist_test_effect = yes
	random_list = {
		30 = {
			magic_toad_effect = yes
		}
		30 = {
			magic_pig_effect = yes
		}
		40 = {
			magic_monstrous_effect = yes
		}
	}
}
magic_monstrous_effect = {
	event_target:magic_target = {
		if = {
			limit = {
				NOT = {	has_character_flag = resist_success }
			}
			character_event = { id = mageproc.14 }
			clr_character_flag = resist_failed
		}
		else_if = {
			limit = {
				event_target:magic_target = {
					has_character_flag = resist_success
				}
			}
			clr_character_flag = resist_success
			random_list = {
				95 = {
					character_event = { id = mageproc.22 }
				}
				5 = {
					character_event = { id = mageproc.24 }
				}
			}
		}
	}
}
magic_toad_effect = {
	event_target:magic_target = {
		if = {
			limit = {
				NOT = {	has_character_flag = resist_success }
			}
			character_event = { id = mageproc.16 }
			clr_character_flag = resist_failed
		}
		else_if = {
			limit = {
				event_target:magic_target = {
					has_character_flag = resist_success
				}
			}
			clr_character_flag = resist_success
			random_list = {
				95 = {
					character_event = { id = mageproc.22 }
				}
				5 = {
					character_event = { id = mageproc.24 }
				}
			}
		}
	}
}
magic_pig_effect = {
	event_target:magic_target = {
		if = {
			limit = {
				NOT = {	has_character_flag = resist_success }
			}
			character_event = { id = mageproc.19 }
			clr_character_flag = resist_failed
		}
		else_if = {
			limit = {
				event_target:magic_target = {
					has_character_flag = resist_success
				}
			}
			clr_character_flag = resist_success
			random_list = {
				95 = {
					character_event = { id = mageproc.22 }
				}
				5 = {
					character_event = { id = mageproc.24 }
				}
			}
		}
	}
}
#Influence Opinion System
influence_opinion_effect = {
	magic_resist_test_effect = yes
	if = {
		limit = {
			event_target:magic_caster = {
				has_character_flag = magic_positive_influence
			}
		}
		magic_influence_positive_effect = yes
		magic_clr_mind_influence_effect = yes
	}
	else_if = {
		limit = {
			event_target:magic_caster = {
				has_character_flag = magic_negative_influence
			}
		}
		magic_influence_negative_effect = yes
		magic_clr_mind_influence_effect = yes
	}
}
magic_influence_positive_effect = {
	event_target:magic_target = {
		if = {
			limit = {
				NOT = {	has_character_flag = resist_success }
			}
			opinion = { modifier = mental_whispers_positive who = event_target:magic_caster years = 5 }
			clr_character_flag = resist_failed
		}
		if = {
			limit = {
				event_target:magic_target = {
					has_character_flag = resist_success
				}
			}
			character_event = { id = mageproc.22 }
			clr_character_flag = resist_success
		}
	}
}
magic_influence_negative_effect = {
	event_target:magic_target = {
		if = {
			limit = {
				NOT = {	has_character_flag = resist_success }
			}
			opinion = { modifier = mental_whispers_negative who = event_target:magic_caster years = 5 }
			clr_character_flag = resist_failed
		}
		if = {
			limit = {
				event_target:magic_target = {
					has_character_flag = resist_success
				}
			}
			character_event = { id = mageproc.22 }
			clr_character_flag = resist_success
		}
	}
}
magic_clr_mind_influence_effect = {
	event_target:magic_caster = {
		clr_character_flag = magic_positive_influence
		clr_character_flag = magic_negative_influence
	}
}
#Spawn Animal
spawn_magic_creature_effect = {
	random_list = {
		25 = {
			create_random_soldier = {
				random_traits = yes
				culture = bear
				dynasty = actually_culture
				female = no
				attributes = {
					diplomacy = 4
					learning = 4
					stewardship = 4
					intrigue = 4
					martial = 12
				}
			}
		}
		10 = {
			create_random_soldier = {
				random_traits = yes
				culture = cat
				dynasty = actually_culture
				female = no
				attributes = {
					diplomacy = 4
					learning = 4
					stewardship = 4
					intrigue = 4
					martial = 12
				}
			}
		}
		15 = {
			create_random_soldier = {
				random_traits = yes
				culture = hedgehog_culture
				dynasty = actually_culture
				female = no
				attributes = {
					diplomacy = 4
					learning = 4
					stewardship = 4
					intrigue = 4
					martial = 12
				}
			}
		}
		15 = {
			create_random_soldier = {
				random_traits = yes
				culture = duck_culture
				dynasty = actually_culture
				female = no
				attributes = {
					diplomacy = 4
					learning = 4
					stewardship = 4
					intrigue = 4
					martial = 12
				}
			}
		}
		15 = {
			create_random_soldier = {
				random_traits = yes
				culture = dog_culture
				dynasty = actually_culture
				female = no
				attributes = {
					diplomacy = 4
					learning = 4
					stewardship = 4
					intrigue = 4
					martial = 12
				}
			}
		}
		15 = {
			create_random_soldier = {
				random_traits = yes
				culture = red_panda
				dynasty = actually_culture
				female = no
				attributes = {
					diplomacy = 4
					learning = 4
					stewardship = 4
					intrigue = 4
					martial = 12
				}
			}
		}
		5 = {
			create_random_soldier = {
				random_traits = yes
				culture = elephant_culture
				dynasty = actually_culture
				female = no
				attributes = {
					diplomacy = 4
					learning = 4
					stewardship = 4
					intrigue = 4
					martial = 12
				}
			}
		}
	}
	new_character = {
		# Set Racial Trait
		character_event = {
			id = aiclean.31
		}
		remove_trait = weak
		remove_trait = slow
		remove_trait = imbecile
		remove_trait = dull
		remove_trait = dwarf
		remove_trait = giant
		remove_trait = hunchback
		remove_trait = clubfooted
		remove_trait = craven
		remove_trait = paranoid

		remove_trait = mystic
		remove_trait = socializer
		remove_trait = gamer
		remove_trait = hedonist
		remove_trait = duelist
		remove_trait = hunter
		remove_trait = strategist
		remove_trait = administrator
		remove_trait = architect
		remove_trait = gardener
		remove_trait = schemer
		remove_trait = impaler
		remove_trait = seducer
		remove_trait = seductress
		remove_trait = theologian
		remove_trait = scholar

		remove_trait = misguided_warrior
		remove_trait = tough_soldier
		remove_trait = skilled_tactician

		add_trait = brilliant_strategist

		add_trait = robust
		add_trait = strong
		add_trait = creature_monster

		random_list = { # Give them a pet, for fun
			10 = {
				add_character_modifier = {
					name = pet_hunting_dog
					duration = -1
				}
				hidden_tooltip = {
					character_event = { id = WoL.5290 days = 2555 random = 1000 } # Dog dies
				}
			}
			10 = {
				add_character_modifier = {
					name = pet_hunting_eagle
					duration = -1
				}
				hidden_effect = {
					character_event = { id = HF.25631 days = 7300 random = 1500 } #Death.
				}
			}
			10 = {
				add_character_modifier = {
					name = pet_cat
					duration = -1
				}
				hidden_tooltip = {
					character_event = { id = 77802 days = 2555 random = 1000 }  # Cat dies
				}
			}
		}
		random_list = {
			10 = {
				add_trait = narrow_flank_leader
			}
			10 = {
				add_trait = defensive_leader
			}
			10 = {
				add_trait = experimenter
			}
			10 = {
				add_trait = flanker
			}
			10 = {
				add_trait = heavy_infantry_leader
			}
			10 = {
				add_trait = inspiring_leader
			}
			10 = {
				add_trait = organizer
			}
			10 = {
				add_trait = siege_leader
			}
			10 = {
				add_trait = trickster
			}
			10 = {
				add_trait = aggressive_leader
			}
		}
		random_list = { # Flavor Randomization
			20 = {
				add_trait = giant
				add_trait = robust
				add_trait = hunter
				change_martial = 2
				give_nickname = nick_the_giant
			}
			20 = {
				modifier = {
					factor = 0
					NOT = {
						has_dlc = "Reapers"
					}
				}
				add_trait = giant
				add_trait = robust
				add_trait = strategist
				add_trait = one_eyed
				change_martial = 1
				give_nickname = nick_the_cyclops
			}
			20 = {
				add_trait = holy_warrior
				add_trait = scarred
				change_martial = 3
				give_nickname = nick_the_hammer
			}
			20 = {
				add_trait = charitable
				add_trait = poet
				change_martial = 2
				give_nickname = nick_the_generous
			}
			20 = {
				add_trait = robust
				remove_trait = temperate
				add_trait = wroth
				add_trait = falconer
				change_martial = 1
				give_nickname = nick_the_ill_tempered
			}
			20 = {
				add_trait = unyielding_leader
				remove_trait = wroth
				add_trait = patient
				change_martial = 2
				give_nickname = nick_the_defender
			}
			20 = {
				add_trait = aggressive_leader
				remove_trait = patient
				add_trait = wroth
				change_martial = 3
				give_nickname = nick_the_destroyer
			}
			20 = {
				add_trait = shrewd
				add_trait = brave
				change_martial = 2
				give_nickname = nick_the_brave
			}
			20 = {
				add_trait = robust
				add_trait = hunter
				add_trait = gregarious
				change_martial = 1
				give_nickname = nick_the_jolly
			}
			20 = {
				add_trait = genius
				add_trait = socializer
				add_trait = poet
				change_martial = 4
				give_nickname = nick_the_noble
			}
			20 = {
				if = {
					limit = {
						religion_group = old_world_group
					}
				}
				add_trait = zealous
				add_trait = duelist
				add_trait = genius
				change_martial = 4
				give_nickname = nick_the_witch_hunter
			}
			20 = {
				remove_trait = humble
				add_trait = proud
				add_trait = duelist
				change_martial = 2
				give_nickname = nick_the_proud
			}
			20 = {
				add_trait = hunter
				add_trait = shrewd
				change_martial = 3
				give_nickname = nick_the_hunter
			}
			20 = {
				modifier = {
					factor = 0
					NOT = {
						has_dlc = "Reapers"
					}
				}
				add_trait = disfigured
				add_trait = scarred
				add_trait = genius
				change_martial = 2
				change_intrigue = 12
				give_nickname = nick_of_a_thousand_faces
			}
			20 = {
				add_trait = genius
				add_trait = clubfooted
				change_martial = 1
				give_nickname = nick_the_bear
			}
			20 = {
				add_trait = trusting
				add_trait = quick
				change_martial = 4
				give_nickname = nick_the_loyal
			}
			20 = {
				add_trait = ugly
				add_trait = strong
				add_trait = duelist
				change_martial = 1
				give_nickname = nick_the_boar
			}
			20 = {
				add_trait = fair
				add_trait = strategist
				change_martial = 4
				give_nickname = nick_the_lion
			}
			20 = {
				add_trait = brave
				add_trait = duelist
				change_martial = 3
				give_nickname = nick_the_dragon
			}
			20 = {
				add_trait = shrewd
				add_trait = hedonist
				change_martial = 4
				give_nickname = nick_the_quarreller
			}
			20 = {
				add_trait = shrewd
				add_trait = cavalry_leader
				change_martial = 2
				give_nickname = nick_the_wolf
			}
		}
		hidden_tooltip = {
			if = {
				limit = {
				OR = {
					religion = norscan_gods
					religion = norscan_gods_reformed
				}
				}
				random_list = {
					15 = {
						add_trait = norscan_patron_tchar
					}
					15 = {
						add_trait = norscan_patron_kharneth
					}
					15 = {
						add_trait = norscan_patron_nurgleth
					}
					15 = {
						add_trait = norscan_patron_shornaal
					}
					20 = {
						add_trait = norscan_patron_ulric
					}
					20 = {
						add_trait = norscan_patron_ursun
					}
				}
			}
		}
		set_character_flag = invited_soldier
		set_character_flag = invited_animal_soldier
		save_event_target_as = invited_character
		hidden_tooltip = {
			character_event = { id = mageproc.37 days = 365 random = 1000 } # Returns to wild
		}
	}
}
