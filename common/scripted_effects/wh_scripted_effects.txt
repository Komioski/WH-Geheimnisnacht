#	Example:
#
#	example_effect = {
#		treasury = 100
#		prestige = 50
#	}
#
#
#	In a script file:
#
#	effect = {
#		example_effect = yes
#	}
#
# Naming convention:  xxxx_effect
#
join_prev_norscan_society_society = {
	#join the society that own the button you pressed to join...
	if = {
		#if your mod have several societies, you can copy this "if" and make use it for the second society, this way this scripted effect will work for both society.
		limit = {
			PREV = {
				society_member_of = norscan_society
			}
		}
		join_society = norscan_society
	}
	# if = { #example of using this scripted effect for 2 society
	# limit = { PREV = { society_member_of = norscan_society_example } }
	# join_society = norscan_society_example
	# }
}

join_from_norscan_society_society = {
	#join the society of someone
	FROM = {
		if = {
			limit = {
				society_member_of = norscan_society
			}
			ROOT = {
				join_society = norscan_society
			}
		}
	}
}

# Cancel current Witch Hunt
abort_witch_hunt_effect = {
	if = {
		limit = {
			NOT = {
				has_character_flag = kow_tow_hide_abort_notification
			}
		}
		character_event = {
			id = JD.32299
		}
	}
	clear_delayed_event = {
		id = JD.32005
	}
	clear_delayed_event = {
		id = JD.32200
	}
	clear_delayed_event = {
		id = JD.32113
	}
	clear_delayed_event = {
		id = JD.32111
	}
	clear_delayed_event = {
		id = JD.32210
	}
	clear_delayed_event = {
		id = JD.32290
	}
	clr_character_flag = went_on_kow_tow_pilgrimage
	clean_up_after_kow_tow_effect = yes
}

return_to_travel_tombola_effect = {
	hidden_effect = {
		event_target:kow_tow_traveler = {
			subtract_variable = {
				which = cathay_kow_tow_travel_events
				value = 1
			}
			character_event = {
				id = JD.32005
				days = 90
				random = 60
			}
		}
	}
}

de_jure_realm_drakwald_effect = {
	d_carroburg = {
		de_jure_liege = k_drakwald
	}
	d_kristal = {
		de_jure_liege = k_drakwald
	}
	d_drakwald = {
		de_jure_liege = k_drakwald
	}
	d_mirror_moor = {
		de_jure_liege = k_drakwald
	}
	d_laurelorn = {
		de_jure_liege = k_drakwald
	}
	d_schadenmarsch = {
		de_jure_liege = k_drakwald
	}
	set_global_flag = de_jure_realm_drakwald_formed
	add_artifact = beast_slayer
}

de_jure_realm_solland_effect = {
	d_soell = {
		de_jure_liege = k_solland
	}
	d_pfeildorf = {
		de_jure_liege = k_solland
	}
	d_sudenland = {
		de_jure_liege = k_solland
	}
	set_global_flag = de_jure_realm_solland_formed
	add_artifact = grudge_settler
}

DR_generate_male_child_effect = {
	if = {
		limit = {
			NOT = {
				culture_group = skaven_group
				age = 22
			}
			age = 17
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 1
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 2
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 3
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If younger than 26, but older than 21
			NOT = {
				culture_group = skaven_group
				age = 26
			}
			age = 22
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 4
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 5
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 6
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If younger than 29, but older than 25
			NOT = {
				culture_group = skaven_group
				age = 29
			}
			age = 26
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 7
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 8
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 9
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If younger than 32, but older than 28
			NOT = {
				culture_group = skaven_group
				age = 32
			}
			age = 29
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 10
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 11
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 12
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If younger than 35, but older than 31
			NOT = {
				age = 35
			}
			age = 32
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 13
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 14
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 15
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If younger than 38, but older than 34
			NOT = {
				culture_group = skaven_group
				age = 38
			}
			age = 35
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 19
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 20
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 21
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If older than 37
			age = 38
			NOT = {
				age = 48
			}
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 25
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 26
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 27
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If older than 37
			age = 38
			NOT = {
				culture_group = skaven_group
				age = 48
			}
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 25
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 26
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 27
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If older than 37
			age = 48
			NOT = {
				culture_group = skaven_group
				age = 58
			}
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 35
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 36
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 37
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If older than 37
			age = 58
			NOT = {
				culture_group = skaven_group
				age = 68
			}
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 45
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 46
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 47
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If older than 37
			age = 68
			NOT = {
				culture_group = skaven_group
				age = 78
			}
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 55
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 56
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 57
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If older than 37
			age = 78
			NOT = {
				culture_group = skaven_group
				age = 88
			}
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 65
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 66
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 67
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If older than 37
			age = 88
			NOT = {
				culture_group = skaven_group
				age = 98
			}
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 75
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 76
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 77
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If older than 37
			age = 98
			NOT = {
				culture_group = skaven_group
				age = 108
			}
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 85
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 86
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 87
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If older than 37
			age = 100
			NOT = {
				culture_group = skaven_group
				age = 150
			}
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 115
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 112
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 113
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If older than 37
			age = 150
			NOT = {
				culture_group = skaven_group
				age = 200
			}
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 125
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 122
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 123
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If older than 37
			age = 200
			NOT = { culture_group = skaven_group }
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 155
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 152
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 153
					female = no
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	new_character = {
		# Set Racial Trait
		character_event = {
			id = aiclean.31
		}
		set_father = event_target:father_target
		set_mother = event_target:mother_target
		if = {
			limit = {
				ROOT = { trait = creature_human }
			}
			add_trait = creature_human
		}
		if = {
			#Elfs
			limit = {
				ROOT = { trait = creature_elf }
			}
			add_trait = creature_elf
		}
		if = {
			#Dwarfs
			limit = {
				ROOT = { trait = creature_dwarf }
			}
			add_trait = creature_dwarf
		}
		if = {
			#Dwarfs under the age of 75 are beardlings
			limit = {
				culture_group = dwarf_group
				NOT = {
					trait = beardling
					age = 75
				}
			}
			add_trait = beardling
		}
		if = {
			#Some dwarfs become warriors
			limit = {
				culture_group = dwarf_group
				age = 75
				NOT = {
					trait = thunderer
					trait = quarreller
					trait = dwarf_warrior
					trait = hammerer
					trait = ironbreaker
					trait = longbeard
					has_character_flag = dwarf_did_not_become_warrior
					has_character_flag = becoming_thunderer
					has_character_flag = becoming_quarreller
					has_character_flag = becoming_dwarf_warrior
				}
			}
			random_list = {
				15 = {
					modifier = {
						factor = 4
						martial = 10
						NOT = {
							trait = craven
						}
					}
					add_trait = dwarf_warrior
				}
				5 = {
					modifier = {
						factor = 4
						martial = 10
						NOT = {
							trait = craven
						}
					}
					add_trait = quarreller
				}
				5 = {
					modifier = {
						factor = 4
						martial = 10
						NOT = {
							trait = craven
						}
					}
					add_trait = thunderer
				}
				75 = {
					modifier = {
						factor = 0
						trait = craven
					}
					set_character_flag = dwarf_did_not_become_warrior
				}
			}
		}
		if = {
			#Chaos Dwarfs
			limit = {
				ROOT = { trait = creature_chaos_dwarf }
			}
			add_trait = creature_chaos_dwarf
		}
		if = {
			#Halflings
			limit = {
				ROOT = { trait = creature_halfling }
			}
			add_trait = creature_halfling
		}
		if = {
			#Skaven
			limit = {
				ROOT = { 
					OR = {
						culture_group = skaven_group
						trait = creature_skaven 
					}
				}
			}
			add_trait = creature_skaven
			if = {
				limit = {
					graphical_culture = skavenwhitegfx
					age = 16
				}
				add_trait = grey_seer
			}
			if = {
				limit = {
					graphical_culture = skavenwhitegfx
				}
				add_trait = white_skaven
			}
			if = {
				limit = {
					graphical_culture = skavenblackgfx
				}
				add_trait = black_skaven
			}
		}
		if = {
			#Beastman
			limit = {
				ROOT = { trait = creature_beastman }
			}
			add_trait = creature_beastman
			random_list = {
				10 = {
					add_trait = horns_none
				}
				40 = {
					add_trait = horns_small
				}
				45 = {
					add_trait = horns_average
				}
				5 = {
					add_trait = horns_big
				}
			}
		}
		if = {
			#Ogre
			limit = {
				ROOT = { trait = creature_ogre }
			}
			add_trait = creature_ogre
		}
		if = {
			limit = {
				ROOT = {
					OR = {
						trait = magic_potential_4
						trait = magic_potential_3
						trait = magic_potential_2
						trait = magic_potential_1
						has_character_flag = recessive_mage
						has_character_flag = magic_potential_flag_1
						has_character_flag = magic_potential_flag_2
						has_character_flag = magic_potential_flag_3
						has_character_flag = magic_potential_flag_4
					}
				}
			}
			random_list = {
				30 = {
					#bad luck
					modifier = {
						factor = 0
						ROOT = {
							trait = magic_potential_4
						}
					}
					modifier = {
						factor = 0.25
						ROOT = {
							trait = magic_potential_3
						}
					}
					modifier = {
						factor = 0.5
						ROOT = {
							trait = magic_potential_2
						}
					}
					modifier = {
						factor = 0.75
						ROOT = {
							trait = magic_potential_1
						}
					}
					modifier = {
						factor = 0
						ROOT = {
							has_character_flag = magic_potential_flag_4
						}
					}
					modifier = {
						factor = 0.45
						ROOT = {
							has_character_flag = magic_potential_flag_3
						}
					}
					modifier = {
						factor = 0.75
						ROOT = {
							has_character_flag = magic_potential_flag_2
						}
					}
					modifier = {
						factor = 0.85
						ROOT = {
							has_character_flag = magic_potential_flag_1
						}
					}
					modifier = {
						factor = 0.25
						ROOT = {
							has_character_modifier = magic_power_4
						}
					}
					modifier = {
						factor = 0.5
						ROOT = {
							has_character_modifier = magic_power_3
						}
					}
					modifier = {
						factor = 0.75
						ROOT = {
							has_character_modifier = magic_power_2
						}
					}
					modifier = {
						factor = 0.95
						ROOT = {
							has_character_modifier = magic_power_1
						}
					}
					modifier = {
						factor = 0.5
						ROOT = {
							has_character_flag = recessive_mage
						}
					}
					modifier = {
						factor = 0.95
						ROOT = {
							trait = creature_elf
						}
					}
					modifier = {
						factor = 0.95
						ROOT = {
							religion = tzeentch
						}
					}
					modifier = {
						factor = 1.25
						ROOT = {
							religion = khorne
						}
					}
					set_character_flag = recessive_mage						#flag only used in the trigger of this event
				}
				35 = {
					modifier = {
						factor = 1.25
						ROOT = {
							trait = magic_potential_1
						}
					}
					modifier = {
						factor = 1.35
						ROOT = {
							trait = magic_potential_2
						}
					}
					modifier = {
						factor = 1.5
						ROOT = {
							trait = magic_potential_3
						}
					}
					modifier = {
						factor = 1.75
						ROOT = {
							trait = magic_potential_4
						}
					}
					modifier = {
						factor = 0.75
						ROOT = {
							NOR = {
								trait = magic_potential_1
								trait = magic_potential_2
								trait = magic_potential_3
								trait = magic_potential_4
								has_character_flag = magic_potential_flag_1
								has_character_flag = magic_potential_flag_2
								has_character_flag = magic_potential_flag_3
								has_character_flag = magic_potential_flag_4
							}
						}
					}
					modifier = {
						factor = 1.15
						ROOT = {
							has_character_flag = magic_potential_flag_1
						}
					}
					modifier = {
						factor = 1.25
						ROOT = {
							has_character_flag = magic_potential_flag_2
						}
					}
					modifier = {
						factor = 1.35
						ROOT = {
							has_character_flag = magic_potential_flag_3
						}
					}
					modifier = {
						factor = 1.5
						ROOT = {
							has_character_flag = magic_potential_flag_4
						}
					}
					modifier = {
						factor = 1.05
						ROOT = {
							has_character_modifier = magic_power_1
						}
					}
					modifier = {
						factor = 1.15
						ROOT = {
							has_character_modifier = magic_power_2
						}
					}
					modifier = {
						factor = 1.25
						ROOT = {
							has_character_modifier = magic_power_3
						}
					}
					modifier = {
						factor = 1.35
						ROOT = {
							has_character_modifier = magic_power_4
						}
					}
					modifier = {
						factor = 1.5
						ROOT = {
							has_character_flag = recessive_mage
						}
					}
					set_character_flag = magic_potential_flag_1
				}
				25 = {
					modifier = {
						factor = 1.5
						ROOT = {
							trait = magic_potential_2
						}
					}
					modifier = {
						factor = 1.75
						ROOT = {
							trait = magic_potential_3
						}
					}
					modifier = {
						factor = 1.95
						ROOT = {
							trait = magic_potential_4
						}
					}
					modifier = {
						factor = 0.5
						ROOT = {
							NOR = {
								trait = magic_potential_1
								trait = magic_potential_2
								trait = magic_potential_3
								trait = magic_potential_4
								has_character_flag = magic_potential_flag_1
								has_character_flag = magic_potential_flag_2
								has_character_flag = magic_potential_flag_3
								has_character_flag = magic_potential_flag_4
							}
						}
					}
					modifier = {
						factor = 1.35
						ROOT = {
							has_character_flag = magic_potential_flag_2
						}
					}
					modifier = {
						factor = 1.5
						ROOT = {
							has_character_flag = magic_potential_flag_3
						}
					}
					modifier = {
						factor = 1.75
						ROOT = {
							has_character_flag = magic_potential_flag_4
						}
					}
					modifier = {
						factor = 1.25
						ROOT = {
							has_character_modifier = magic_power_2
						}
					}
					modifier = {
						factor = 1.35
						ROOT = {
							has_character_modifier = magic_power_3
						}
					}
					modifier = {
						factor = 1.45
						ROOT = {
							has_character_modifier = magic_power_4
						}
					}
					set_character_flag = magic_potential_flag_2
				}
				10 = {
					modifier = {
						factor = 2
						ROOT = {
							trait = magic_potential_3
						}
					}
					modifier = {
						factor = 2.5
						ROOT = {
							trait = magic_potential_4
						}
					}
					modifier = {
						factor = 0.25
						ROOT = {
							NOR = {
								trait = magic_potential_2
								trait = magic_potential_3
								trait = magic_potential_4
								has_character_flag = magic_potential_flag_2
								has_character_flag = magic_potential_flag_3
								has_character_flag = magic_potential_flag_4
							}
						}
					}
					modifier = {
						factor = 1.75
						ROOT = {
							has_character_flag = magic_potential_flag_3
						}
					}
					modifier = {
						factor = 2
						ROOT = {
							has_character_flag = magic_potential_flag_4
						}
					}
					modifier = {
						factor = 1.45
						ROOT = {
							has_character_modifier = magic_power_3
						}
					}
					modifier = {
						factor = 1.5
						ROOT = {
							has_character_modifier = magic_power_4
						}
					}
					set_character_flag = magic_potential_flag_3
				}
				5 = {
					modifier = {
						factor = 2.75
						ROOT = {
							trait = magic_potential_4
						}
					}
					modifier = {
						factor = 0.15
						ROOT = {
							NOR = {
								trait = magic_potential_3
								trait = magic_potential_4
								has_character_flag = magic_potential_flag_3
								has_character_flag = magic_potential_flag_4
							}
						}
					}
					modifier = {
						factor = 2.25
						ROOT = {
							has_character_flag = magic_potential_flag_4
						}
					}
					modifier = {
						factor = 1.65
						ROOT = {
							has_character_modifier = magic_power_4
						}
					}
					modifier = {
						factor = 1.25
						ROOT = { religion = tzeentch }
					}
					set_character_flag = magic_potential_flag_4
				}
			}
		}
		recalc_succession = yes
	}
}

DR_generate_female_child_effect = {
	if = {
		limit = {
			NOT = {
				age = 22
				culture_group = skaven_group
			}
			age = 17
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 1
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 2
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 3
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If younger than 26, but older than 21
			NOT = {
				age = 26
				culture_group = skaven_group
			}
			age = 22
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 4
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 5
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 6
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If younger than 29, but older than 25
			NOT = {
				age = 29
				culture_group = skaven_group
			}
			age = 26
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 7
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 8
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 9
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If younger than 32, but older than 28
			NOT = {
				age = 32
				culture_group = skaven_group
			}
			age = 29
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 10
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 11
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 12
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If younger than 35, but older than 31
			NOT = {
				age = 35
			}
			age = 32
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 13
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 14
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 15
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If younger than 38, but older than 34
			NOT = {
				culture_group = skaven_group
				age = 38
			}
			age = 35
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 19
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 20
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 21
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If older than 37
			age = 38
			NOT = {
				culture_group = skaven_group
				age = 48
			}
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 25
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 26
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 27
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If older than 37
			age = 38
			NOT = {
				culture_group = skaven_group
				age = 48
			}
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 25
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 26
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 27
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If older than 37
			age = 48
			NOT = {
				culture_group = skaven_group
				age = 58
			}
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 35
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 36
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 37
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If older than 37
			age = 58
			NOT = {
				culture_group = skaven_group
				age = 68
			}
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 45
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 46
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 47
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If older than 37
			age = 68
			NOT = {
				culture_group = skaven_group
				age = 78
			}
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 55
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 56
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 57
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If older than 37
			age = 78
			NOT = {
				culture_group = skaven_group
				age = 88
			}
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 65
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 66
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 67
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If older than 37
			age = 88
			NOT = {
				culture_group = skaven_group
				age = 98
			}
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 75
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 76
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 77
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If older than 37
			age = 98
			NOT = {
				culture_group = skaven_group
				age = 108
			}
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 85
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 86
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 87
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If older than 37
			age = 100
			NOT = {
				culture_group = skaven_group
				age = 150
			}
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 115
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 112
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 113
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If older than 37
			age = 150
			NOT = {
				culture_group = skaven_group
				age = 200
			}
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 125
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 122
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 123
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	if = {
		limit = {
			# If older than 37
			NOT = { culture_group = skaven_group }
			age = 200
		}
		random_list = {
			34 = {
				create_character = {
					random_traits = yes
					age = 155
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 152
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
			33 = {
				create_character = {
					random_traits = yes
					age = 153
					female = yes
					culture = ROOT
					religion = ROOT
					dynasty = ROOT
				}
			}
		}
	}
	new_character = {
		# Set Racial Trait
		character_event = {
			id = aiclean.31
		}
		set_father = event_target:father_target
		set_mother = event_target:mother_target
		if = {
			limit = {
				ROOT = { trait = creature_human }
			}
			add_trait = creature_human
		}
		if = {
			#Amazons
			limit = {
				ROOT = { trait = creature_amazon }
			}
			add_trait = creature_amazon
		}
		if = {
			#Elfs
			limit = {
				ROOT = { trait = creature_elf }
			}
			add_trait = creature_elf
		}
		if = {
			#Dwarfs
			limit = {
				ROOT = { trait = creature_dwarf }
			}
			add_trait = creature_dwarf
		}
		if = {
			#Dwarfs under the age of 75 are beardlings
			limit = {
				culture_group = dwarf_group
				NOT = {
					trait = beardling
					age = 75
				}
			}
			add_trait = beardling
		}
		if = {
			#Chaos Dwarfs
			limit = {
				ROOT = { trait = creature_chaos_dwarf }
			}
			add_trait = creature_chaos_dwarf
		}
		if = {
			#Halflings
			limit = {
				ROOT = { trait = creature_halfling }
			}
			add_trait = creature_halfling
		}
		if = {
			#Skaven
			limit = {
				ROOT = { culture_group = skaven_group }
			}
			add_trait = creature_skaven
			add_trait = skaven_breeder
		}
		if = {
			#Beastman
			limit = {
				ROOT = { culture_group = beastman_group }
			}
			add_trait = creature_beastman
		}
		if = {
			#Ogre
			limit = {
				ROOT = { trait = creature_ogre }
			}
			add_trait = creature_ogre
		}
		if = {
			limit = {
				ROOT = {
					OR = {
						trait = magic_potential_4
						trait = magic_potential_3
						trait = magic_potential_2
						trait = magic_potential_1
						has_character_flag = recessive_mage
						has_character_flag = magic_potential_flag_1
						has_character_flag = magic_potential_flag_2
						has_character_flag = magic_potential_flag_3
						has_character_flag = magic_potential_flag_4
					}
				}
			}
			random_list = {
				30 = {
					#bad luck
					modifier = {
						factor = 0
						ROOT = {
							trait = magic_potential_4
						}
					}
					modifier = {
						factor = 0.25
						ROOT = {
							trait = magic_potential_3
						}
					}
					modifier = {
						factor = 0.5
						ROOT = {
							trait = magic_potential_2
						}
					}
					modifier = {
						factor = 0.75
						ROOT = {
							trait = magic_potential_1
						}
					}
					modifier = {
						factor = 0
						ROOT = {
							has_character_flag = magic_potential_flag_4
						}
					}
					modifier = {
						factor = 0.45
						ROOT = {
							has_character_flag = magic_potential_flag_3
						}
					}
					modifier = {
						factor = 0.75
						ROOT = {
							has_character_flag = magic_potential_flag_2
						}
					}
					modifier = {
						factor = 0.85
						ROOT = {
							has_character_flag = magic_potential_flag_1
						}
					}
					modifier = {
						factor = 0.25
						ROOT = {
							has_character_modifier = magic_power_4
						}
					}
					modifier = {
						factor = 0.5
						ROOT = {
							has_character_modifier = magic_power_3
						}
					}
					modifier = {
						factor = 0.75
						ROOT = {
							has_character_modifier = magic_power_2
						}
					}
					modifier = {
						factor = 0.95
						ROOT = {
							has_character_modifier = magic_power_1
						}
					}
					modifier = {
						factor = 0.5
						ROOT = {
							has_character_flag = recessive_mage
						}
					}
					modifier = {
						factor = 0.95
						ROOT = {
							trait = creature_elf
						}
					}
					modifier = {
						factor = 0.95
						ROOT = {
							religion = tzeentch
						}
					}
					modifier = {
						factor = 1.25
						ROOT = {
							religion = khorne
						}
					}
					set_character_flag = recessive_mage						#flag only used in the trigger of this event
				}
				35 = {
					modifier = {
						factor = 1.25
						ROOT = {
							trait = magic_potential_1
						}
					}
					modifier = {
						factor = 1.35
						ROOT = {
							trait = magic_potential_2
						}
					}
					modifier = {
						factor = 1.5
						ROOT = {
							trait = magic_potential_3
						}
					}
					modifier = {
						factor = 1.75
						ROOT = {
							trait = magic_potential_4
						}
					}
					modifier = {
						factor = 0.75
						ROOT = {
							NOR = {
								trait = magic_potential_1
								trait = magic_potential_2
								trait = magic_potential_3
								trait = magic_potential_4
								has_character_flag = magic_potential_flag_1
								has_character_flag = magic_potential_flag_2
								has_character_flag = magic_potential_flag_3
								has_character_flag = magic_potential_flag_4
							}
						}
					}
					modifier = {
						factor = 1.15
						ROOT = {
							has_character_flag = magic_potential_flag_1
						}
					}
					modifier = {
						factor = 1.25
						ROOT = {
							has_character_flag = magic_potential_flag_2
						}
					}
					modifier = {
						factor = 1.35
						ROOT = {
							has_character_flag = magic_potential_flag_3
						}
					}
					modifier = {
						factor = 1.5
						ROOT = {
							has_character_flag = magic_potential_flag_4
						}
					}
					modifier = {
						factor = 1.05
						ROOT = {
							has_character_modifier = magic_power_1
						}
					}
					modifier = {
						factor = 1.15
						ROOT = {
							has_character_modifier = magic_power_2
						}
					}
					modifier = {
						factor = 1.25
						ROOT = {
							has_character_modifier = magic_power_3
						}
					}
					modifier = {
						factor = 1.35
						ROOT = {
							has_character_modifier = magic_power_4
						}
					}
					modifier = {
						factor = 1.5
						ROOT = {
							has_character_flag = recessive_mage
						}
					}
					set_character_flag = magic_potential_flag_1
				}
				25 = {
					modifier = {
						factor = 1.5
						ROOT = {
							trait = magic_potential_2
						}
					}
					modifier = {
						factor = 1.75
						ROOT = {
							trait = magic_potential_3
						}
					}
					modifier = {
						factor = 1.95
						ROOT = {
							trait = magic_potential_4
						}
					}
					modifier = {
						factor = 0.5
						ROOT = {
							NOR = {
								trait = magic_potential_2
								trait = magic_potential_3
								trait = magic_potential_4
								has_character_flag = magic_potential_flag_2
								has_character_flag = magic_potential_flag_3
								has_character_flag = magic_potential_flag_4
							}
						}
					}
					modifier = {
						factor = 1.35
						ROOT = {
							has_character_flag = magic_potential_flag_2
						}
					}
					modifier = {
						factor = 1.5
						ROOT = {
							has_character_flag = magic_potential_flag_3
						}
					}
					modifier = {
						factor = 1.75
						ROOT = {
							has_character_flag = magic_potential_flag_4
						}
					}
					modifier = {
						factor = 1.25
						ROOT = {
							has_character_modifier = magic_power_2
						}
					}
					modifier = {
						factor = 1.35
						ROOT = {
							has_character_modifier = magic_power_3
						}
					}
					modifier = {
						factor = 1.45
						ROOT = {
							has_character_modifier = magic_power_4
						}
					}
					set_character_flag = magic_potential_flag_2
				}
				10 = {
					modifier = {
						factor = 2
						ROOT = {
							trait = magic_potential_3
						}
					}
					modifier = {
						factor = 2.5
						ROOT = {
							trait = magic_potential_4
						}
					}
					modifier = {
						factor = 0.25
						ROOT = {
							NOR = {
								trait = magic_potential_3
								trait = magic_potential_4
								has_character_flag = magic_potential_flag_3
								has_character_flag = magic_potential_flag_4
							}
						}
					}
					modifier = {
						factor = 1.75
						ROOT = {
							has_character_flag = magic_potential_flag_3
						}
					}
					modifier = {
						factor = 2
						ROOT = {
							has_character_flag = magic_potential_flag_4
						}
					}
					modifier = {
						factor = 1.45
						ROOT = {
							has_character_modifier = magic_power_3
						}
					}
					modifier = {
						factor = 1.5
						ROOT = {
							has_character_modifier = magic_power_4
						}
					}
					set_character_flag = magic_potential_flag_3
				}
				5 = {
					modifier = {
						factor = 2.75
						ROOT = {
							trait = magic_potential_4
						}
					}
					modifier = {
						factor = 0.15
						ROOT = {
							NOR = {
								trait = magic_potential_4
								has_character_flag = magic_potential_flag_4
							}
						}
					}
					modifier = {
						factor = 2.25
						ROOT = {
							has_character_flag = magic_potential_flag_4
						}
					}
					modifier = {
						factor = 1.65
						ROOT = {
							has_character_modifier = magic_power_4
						}
					}
					modifier = {
						factor = 1.25
						ROOT = {
							religion = tzeentch
						}
					}
					set_character_flag = magic_potential_flag_4
				}
			}
		}
	}
	recalc_succession = yes
}

major_chaos_corruption_effect = {
	custom_tooltip = {
		text = major_chaos_corruption_effect_tooltip
	}
	hidden_effect = {
		if = {
			limit = {
				society_member_of = cult_of_khorne
			}
			random_list = {
				20 = {
					modifier = {
						factor = 0
						OR = {
							NOT = {
								trait = kind
							}
							trait = cruel
						}
					}
					remove_trait = kind
					add_trait = cruel
				}
				20 = {
					modifier = {
						factor = 0
						trait = wroth
					}
					remove_trait = kind
					add_trait = wroth
				}
				20 = {
					modifier = {
						factor = 0
						OR = {
							NOT = {
								trait = weak
							}
							trait = strong
						}
					}
					remove_trait = weak
					add_trait = strong
				}
				20 = {
					custom_tooltip = {
						text = mutations_test_tt
						mutation_toughness_test_effect = yes
					}
				}
				20 = {
				}
			}
		}
		if = {
			limit = {
				society_member_of = cult_of_nurgle
			}
			random_list = {
				10 = {
					modifier = {
						factor = 0
						OR = {
							NOT = {
								trait = cruel
							}
							trait = kind
						}
					}
					remove_trait = cruel
					add_trait = kind
				}
				5 = {
					modifier = {
						factor = 0
						OR = {
							NOT = {
								trait = ambitious
							}
							trait = content
						}
					}
					remove_trait = ambitious
					add_trait = content
				}
				5 = {
					give_pneumonic_effect = yes
				}
				5 = {
					give_has_tuberculosis_effect = yes
				}
				5 = {
					give_has_typhoid_fever_effect = yes
				}
				5 = {
					give_has_bubonic_plague_effect = yes
				}
				5 = {
					give_has_measles_effect = yes
				}
				5 = {
					give_has_small_pox_effect = yes
				}
				5 = {
					give_has_aztec_disease_effect = yes
				}
				5 = {
					give_syphilitic_effect = yes
				}
				5 = {
					give_flu_effect = yes
				}
				5 = {
					give_dysentery_effect = yes
				}
				5 = {
					give_gout_effect = yes
				}
				5 = {
					give_food_poisoning_effect = yes
				}
				5 = {
					give_rabies_effect = yes
				}
				5 = {
					give_cancer_effect = yes
				}
				5 = {
					give_ill_effect = yes
				}
				5 = {
					custom_tooltip = {
						text = mutations_test_tt
						mutation_toughness_test_effect = yes
					}
				}
				5 = {
				}
			}
		}
		if = {
			limit = {
				society_member_of = cult_of_tzeentch
			}
			random_list = {
				30 = {
					modifier = {
						factor = 0
						OR = {
							NOT = {
								trait = honest
							}
							trait = deceitful
						}
					}
					remove_trait = honest
					add_trait = deceitful
				}
				30 = {
					modifier = {
						factor = 0
						OR = {
							NOT = {
								trait = content
							}
							trait = ambitious
						}
					}
					remove_trait = content
					add_trait = ambitious
				}
				20 = {
					custom_tooltip = {
						text = mutations_test_tt
						mutation_toughness_test_effect = yes
					}
				}
				20 = {
				}
			}
		}
		if = {
			limit = {
				society_member_of = cult_of_slaanesh
			}
			random_list = {
				14 = {
					modifier = {
						factor = 0
						OR = {
							NOT = {
								trait = chaste
							}
							trait = lustful
						}
					}
					remove_trait = chaste
					add_trait = lustful
				}
				14 = {
					modifier = {
						factor = 0
						trait = gluttonous
					}
					remove_trait = temperate
					add_trait = gluttonous
				}
				14 = {
					modifier = {
						factor = 0
						trait = homosexual
					}
					add_trait = homosexual
				}
				14 = {
					modifier = {
						factor = 0
						OR = {
							NOT = {
								trait = weak
							}
							trait = strong
						}
					}
					remove_trait = weak
					add_trait = strong
				}
				22 = {
					custom_tooltip = {
						text = mutations_test_tt
						mutation_toughness_test_effect = yes
					}
				}
				22 = {
				}
			}
		}
		if = {
			limit = {
				society_member_of = cult_of_undivided
			}
			random_list = {
				20 = {
					modifier = {
						factor = 0
						OR = {
							NOT = {
								trait = chaste
							}
							trait = lustful
						}
					}
					remove_trait = chaste
					add_trait = lustful
				}
				20 = {
					modifier = {
						factor = 0
						trait = gluttonous
					}
					remove_trait = temperate
					add_trait = gluttonous
				}
				20 = {
					modifier = {
						factor = 0
						OR = {
							NOT = {
								trait = weak
							}
							trait = strong
						}
					}
					remove_trait = weak
					add_trait = strong
				}
				20 = {
					custom_tooltip = {
						text = mutations_test_tt
						mutation_toughness_test_effect = yes
					}
				}
				20 = {
				}
			}
		}
	}
}

minor_chaos_corruption_effect = {
	custom_tooltip = {
		text = minor_chaos_corruption_effect_tooltip
	}
	if = {
		limit = {
			society_member_of = cult_of_khorne
		}
		random_list = {
			25 = {
				modifier = {
					factor = 0
					OR = {
						NOT = {
							trait = kind
						}
						trait = cruel
					}
				}
				remove_trait = kind
				add_trait = cruel
			}
			15 = {
				modifier = {
					factor = 0
					trait = wroth
				}
				remove_trait = kind
				add_trait = wroth
			}
			20 = {
				modifier = {
					factor = 0
					OR = {
						NOT = {
							trait = weak
						}
						trait = strong
					}
				}
				remove_trait = weak
				add_trait = strong
			}
			20 = {
				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
			}
			20 = {
			}
		}
	}
	if = {
		limit = {
			society_member_of = cult_of_nurgle
		}
		random_list = {
			20 = {
				modifier = {
					factor = 0
					OR = {
						NOT = {
							trait = cruel
						}
						trait = kind
					}
				}
				remove_trait = cruel
				add_trait = kind
			}
			20 = {
				modifier = {
					factor = 0
					OR = {
						NOT = {
							trait = ambitious
						}
						trait = content
					}
				}
				remove_trait = ambitious
				add_trait = content
			}
			6 = {
				give_pneumonic_effect = yes
			}
			6 = {
				give_has_tuberculosis_effect = yes
			}
			6 = {
				give_has_typhoid_fever_effect = yes
			}
			6 = {
				give_has_bubonic_plague_effect = yes
			}
			6 = {
				give_has_measles_effect = yes
			}
			6 = {
				give_has_small_pox_effect = yes
			}
			6 = {
				give_has_aztec_disease_effect = yes
			}
			6 = {
				give_syphilitic_effect = yes
			}
			6 = {
				give_flu_effect = yes
			}
			6 = {
				give_dysentery_effect = yes
			}
			6 = {
				give_gout_effect = yes
			}
			6 = {
				give_food_poisoning_effect = yes
			}
			6 = {
				give_rabies_effect = yes
			}
			6 = {
				give_cancer_effect = yes
			}
			6 = {
				give_ill_effect = yes
			}
			80 = {
			}
		}
	}
	if = {
		limit = {
			society_member_of = cult_of_tzeentch
		}
		random_list = {
			25 = {
				modifier = {
					factor = 0
					OR = {
						NOT = {
							trait = honest
						}
						trait = deceitful
					}
				}
				remove_trait = honest
				add_trait = deceitful
			}
			25 = {
				modifier = {
					factor = 0
					OR = {
						NOT = {
							trait = content
						}
						trait = ambitious
					}
				}
				remove_trait = content
				add_trait = ambitious
			}
			25 = {
				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
			}
			25 = {
			}
		}
	}
	if = {
		limit = {
			society_member_of = cult_of_slaanesh
		}
		random_list = {
			20 = {
				modifier = {
					factor = 0
					OR = {
						NOT = {
							trait = chaste
						}
						trait = lustful
					}
				}
				remove_trait = chaste
				add_trait = lustful
			}
			10 = {
				modifier = {
					factor = 0
					trait = gluttonous
				}
				remove_trait = temperate
				add_trait = gluttonous
			}
			10 = {
				modifier = {
					factor = 0
					trait = homosexual
				}
				add_trait = homosexual
			}
			20 = {
				modifier = {
					factor = 0
					OR = {
						NOT = {
							trait = weak
						}
						trait = strong
					}
				}
				remove_trait = weak
				add_trait = strong
			}
			20 = {
				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
			}
			20 = {
			}
		}
	}
	if = {
		limit = {
			society_member_of = cult_of_undivided
		}
		random_list = {
			25 = {
				modifier = {
					factor = 0
					OR = {
						NOT = {
							trait = chaste
						}
						trait = lustful
					}
				}
				remove_trait = chaste
				add_trait = lustful
			}
			10 = {
				modifier = {
					factor = 0
					trait = gluttonous
				}
				remove_trait = temperate
				add_trait = gluttonous
			}
			25 = {
				modifier = {
					factor = 0
					OR = {
						NOT = {
							trait = weak
						}
						trait = strong
					}
				}
				remove_trait = weak
				add_trait = strong
			}
			20 = {
				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
			}
			20 = {
			}
		}
	}
}

root_makes_from_vampire_effect = {
	hidden_tooltip = {
		FROM = {
			set_offmap_currency = {
				offmap = undivided_warp
				value = 0
			}
			set_offmap_currency = {
				offmap = slaanesh_warp
				value = 0
			}
			set_offmap_currency = {
				offmap = nurgle_warp
				value = 0
			}
			set_offmap_currency = {
				offmap = tzeentch_warp
				value = 0
			}
			set_offmap_currency = {
				offmap = khorne_warp
				value = 0
			}
			clr_character_flag = hidden_cultist_tzeentch
			clr_character_flag = hidden_cultist_nurgle
			clr_character_flag = hidden_cultist_slaanesh
			clr_character_flag = hidden_cultist_khorne
			clr_character_flag = hidden_cultist_undivided
			clear_secret_religion = yes
		}
	}
	if = {
		limit = {
			FROM = {
				dynasty = 0
			}
			ROOT = {
				is_female = no
			}
		}
		FROM = {
			dynasty = ROOT
			set_father = ROOT
		}
	}
	if = {
		limit = {
			FROM = {
				dynasty = 0
			}
			ROOT = {
				is_female = yes
			}
		}
		FROM = {
			dynasty = ROOT
			set_mother = ROOT
		}
	}
	if = {
		limit = {
			OR = {
				trait = vampire_lahmian_visible
				trait = vampire_lahmian_hidden
			}
			FROM = {
				age = 16
			}
		}
		FROM = {
			add_trait = vampire_lahmian_visible
			set_graphical_culture = lahmian_vampire
		}
		FROM = {
			religion = vampiric
		}
	}
	if = {
		limit = {
			OR = {
				trait = vampire_lahmian_visible
				trait = vampire_lahmian_hidden
			}
			FROM = {
				NOT = {
					age = 16
				}
			}
		}
		FROM = {
			add_trait = vampire_lahmian_visible
			set_graphical_culture = kid_vampire_lahmian
		}
		FROM = {
			religion = vampiric
		}
	}
	if = {
		limit = {
			OR = {
				trait = vampire_strigoi_visible
				trait = vampire_strigoi_hidden
			}
		}
		FROM = {
			add_trait = vampire_strigoi_visible
			set_graphical_culture = strigoi_vampire
		}
		FROM = {
			religion = vampiric
		}
	}
	if = {
		limit = {
			OR = {
				trait = vampire_carstein_visible
				trait = vampire_carstein_hidden
			}
			FROM = {
				age = 16
			}
		}
		FROM = {
			add_trait = vampire_carstein_visible
			set_graphical_culture = generic_vampire
		}
		FROM = {
			religion = vampiric
		}
	}
	if = {
		limit = {
			OR = {
				trait = vampire_carstein_visible
				trait = vampire_carstein_hidden
			}
			FROM = {
				NOT = {
					age = 16
				}
			}
		}
		FROM = {
			add_trait = vampire_carstein_visible
			set_graphical_culture = kid_vampire
		}
		FROM = {
			religion = vampiric
		}
	}
	if = {
		limit = {
			OR = {
				trait = vampire_blood_visible
				trait = vampire_blood_hidden
			}
			culture = blooddragons_culture
		}
		FROM = {
			add_trait = vampire_blood_visible
			culture = blooddragons_culture
			set_graphical_culture = blood_vampire
		}
		FROM = {
			religion = vampiric
		}
	}
	if = {
		limit = {
			OR = {
				trait = vampire_blood_visible
				trait = vampire_blood_hidden
			}
			culture_group = sartosan_group
			has_character_flag = vampire_pirate
		}
		FROM = {
			add_trait = vampire_blood_visible
			set_character_flag = vampire_pirate
			culture = ROOT
			set_graphical_culture = blood_vampire
		}
		FROM = {
			religion = vampiric
		}
	}
	if = {
		limit = {
			OR = {
				trait = vampire_necrarch_visible
				trait = vampire_necrarch_hidden
			}
		}
		FROM = {
			add_trait = vampire_necrarch_visible
			set_graphical_culture = necrarch_vampire
		}
		FROM = {
			religion = nagashi
		}
	}
	if = {
		limit = {
			OR = {
				trait = vampire_jade_visible
				trait = vampire_jade_hidden
			}
		}
		FROM = {
			add_trait = vampire_jade_visible
			culture = living_jade
			set_graphical_culture = jade_vampire
			random_list = {
				25 = {
					add_trait = celibate
				}
				25 = {
					add_trait = chaste
				}
				50 = {
				}
			}
		}
		FROM = {
			religion = ROOT
		}
	}
	if = {
		limit = {
			OR = {
				trait = vampire_mahtmasi_visible
				trait = vampire_mahtmasi_hidden
			}
		}
		random_list = {
			60 = {
				ROOT = {
					character_event = {
						id = svampires.79001
						days = 1
						random = 1
					}
				}
				FROM = {
					character_event = {
						id = svampires.79
						days = 1
						random = 1
					}
				}
			}
			#Success
			40 = {
				modifier = {
					factor = 0.5
					FROM = {
						trait = strong
					}
				}
				modifier = {
					factor = 0.75
					FROM = {
						trait = tough
					}
				}
				modifier = {
					factor = 0.85
					FROM = {
						trait = hardy
					}
				}
				modifier = {
					factor = 1.25
					FROM = {
						trait = soft
					}
				}
				modifier = {
					factor = 1.5
					FROM = {
						trait = fragile
					}
				}
				modifier = {
					factor = 1.75
					FROM = {
						trait = weak
					}
				}
				modifier = {
					factor = 1.5
					FROM = {
						trait = stressed
					}
				}
				modifier = {
					factor = 1.5
					FROM = {
						is_ill = yes
					}
				}
				modifier = {
					factor = 1.5
					FROM = {
						trait = infirm
					}
				}
				modifier = {
					factor = 1.5
					FROM = {
						trait = maimed
					}
				}
				ROOT = {
					character_event = {
						id = svampires.80001
						days = 1
						random = 1
					}
				}
				FROM = {
					character_event = {
						id = svampires.80
						days = 1
						random = 1
					}
				}
			}
			#Failure
		}
		FROM = {
			add_trait = vampire_mahtmasi_visible
			set_graphical_culture = mahtmasi_vampire
			add_trait = incapable
		}
		FROM = {
			religion = shadowmen
		}
	}
	hidden_tooltip = {
		FROM = {
			remove_trait = old_1
			remove_trait = old_2
			remove_trait = old_3
			remove_trait = old_4
		}
	}
	if = {
		limit = {
			OR = {
				trait = vampire_blood_visible
				trait = vampire_blood_hidden
			}
			FROM = {
				NOR = {
					trait = weak
					trait = fragile
					trait = soft
					trait = maimed
					trait = incapable
					trait = blinded
					trait = eunuch
					trait = is_malnourished
					trait = is_fat
					trait = addict
					NOT = {
						martial = 10
					}
				}
			}
		}
		change_variable = {
			which = "blooddragon_reserve"
			value = 1
		}
	}
}

from_makes_root_vampire_effect = {
	hidden_tooltip = {
		FROM = {
			set_offmap_currency = {
				offmap = undivided_warp
				value = 0
			}
			set_offmap_currency = {
				offmap = slaanesh_warp
				value = 0
			}
			set_offmap_currency = {
				offmap = nurgle_warp
				value = 0
			}
			set_offmap_currency = {
				offmap = tzeentch_warp
				value = 0
			}
			set_offmap_currency = {
				offmap = khorne_warp
				value = 0
			}
			clr_character_flag = hidden_cultist_tzeentch
			clr_character_flag = hidden_cultist_nurgle
			clr_character_flag = hidden_cultist_slaanesh
			clr_character_flag = hidden_cultist_khorne
			clr_character_flag = hidden_cultist_undivided
		}
	}
	if = {
		limit = {
			ROOT = {
				dynasty = 0
			}
			FROM = {
				is_female = no
			}
		}
		ROOT = {
			dynasty = FROM
			set_father = FROM
		}
	}
	if = {
		limit = {
			ROOT = {
				dynasty = 0
			}
			FROM = {
				is_female = yes
			}
		}
		ROOT = {
			dynasty = FROM
			set_mother = FROM
		}
	}
	if = {
		limit = {
			FROM = {
				OR = {
					trait = vampire_lahmian_visible
					trait = vampire_lahmian_hidden
				}
			}
			age = 16
		}
		add_trait = vampire_lahmian_visible
		set_graphical_culture = lahmian_vampire
		religion = vampiric
	}
	if = {
		limit = {
			FROM = {
				OR = {
					trait = vampire_lahmian_visible
					trait = vampire_lahmian_hidden
				}
			}
			NOT = {
				age = 16
			}
		}
		add_trait = vampire_lahmian_visible
		set_graphical_culture = kid_vampire_lahmian
		religion = vampiric
	}
	if = {
		limit = {
			FROM = {
				OR = {
					trait = vampire_carstein_visible
					trait = vampire_carstein_hidden
				}
			}
			age = 16
		}
		add_trait = vampire_carstein_visible
		set_graphical_culture = generic_vampire
		religion = vampiric
	}
	if = {
		limit = {
			FROM = {
				OR = {
					trait = vampire_carstein_visible
					trait = vampire_carstein_hidden
				}
			}
			NOT = {
				age = 16
			}
		}
		add_trait = vampire_carstein_visible
		set_graphical_culture = kid_vampire
		religion = vampiric
	}
	if = {
		limit = {
			FROM = {
				OR = {
					trait = vampire_strigoi_visible
					trait = vampire_strigoi_hidden
				}
			}
		}
		add_trait = vampire_strigoi_visible
		set_graphical_culture = strigoi_vampire
		religion = vampiric
	}
	if = {
		limit = {
			FROM = {
				OR = {
					trait = vampire_blood_visible
					trait = vampire_blood_hidden
				}
				culture = blooddragons_culture
			}
		}
		add_trait = vampire_blood_visible
		set_graphical_culture = blood_vampire
		culture = blooddragons_culture
		religion = vampiric
	}
	if = {
		limit = {
			FROM = {
				OR = {
					trait = vampire_blood_visible
					trait = vampire_blood_hidden
				}
				culture_group = sartosan_group
				has_character_flag = vampire_pirate
			}
		}
		add_trait = vampire_blood_visible
		set_character_flag = vampire_pirate
		set_graphical_culture = blood_vampire
		culture = FROM
		religion = vampiric
	}
	if = {
		limit = {
			FROM = {
				OR = {
					trait = vampire_necrarch_visible
					trait = vampire_necrarch_hidden
				}
			}
		}
		add_trait = vampire_necrarch_visible
		set_graphical_culture = necrarch_vampire
		religion = nagashi
	}
	if = {
		limit = {
			FROM = {
				OR = {
					trait = vampire_jade_visible
					trait = vampire_jade_hidden
				}
			}
		}
		add_trait = vampire_jade_visible
		culture = living_jade
		set_graphical_culture = jade_vampire
		religion = FROM
		random_list = {
			25 = {
				add_trait = celibate
			}
			25 = {
				add_trait = chaste
			}
			50 = {
			}
		}
	}
	if = {
		limit = {
			FROM = {
				OR = {
					trait = vampire_mahtmasi_visible
					trait = vampire_mahtmasi_hidden
				}
			}
		}
		add_trait = vampire_mahtmasi_visible
		set_graphical_culture = mahtmasi_vampire
		religion = shadowmen
		random_list = {
			60 = {
				character_event = {
					id = svampires.79
					days = 1
					random = 1
				}
				FROM = {
					character_event = {
						id = svampires.79001
						days = 1
						random = 1
					}
				}
			}
			#Success
			40 = {
				modifier = {
					factor = 0.5
					trait = strong
				}
				modifier = {
					factor = 0.75
					trait = tough
				}
				modifier = {
					factor = 0.85
					trait = hardy
				}
				modifier = {
					factor = 1.25
					trait = soft
				}
				modifier = {
					factor = 1.5
					trait = fragile
				}
				modifier = {
					factor = 1.75
					trait = weak
				}
				modifier = {
					factor = 1.5
					trait = stressed
				}
				modifier = {
					factor = 1.5
					is_ill = yes
				}
				modifier = {
					factor = 1.5
					trait = infirm
				}
				modifier = {
					factor = 1.5
					trait = maimed
				}
				character_event = {
					id = svampires.80
					days = 1
					random = 1
				}
				FROM = {
					character_event = {
						id = svampires.80001
						days = 1
						random = 1
					}
				}
			}
			#Failure
		}
		add_trait = incapable
	}
	hidden_tooltip = {
		remove_trait = old_1
		remove_trait = old_2
		remove_trait = old_3
		remove_trait = old_4
	}
	if = {
		limit = {
			FROM = {
				OR = {
					trait = vampire_blood_visible
					trait = vampire_blood_hidden
				}
			}
			NOR = {
				trait = weak
				trait = fragile
				trait = soft
				trait = maimed
				trait = incapable
				trait = blinded
				trait = eunuch
				trait = is_malnourished
				trait = is_fat
				trait = addict
				NOT = {
					martial = 10
				}
			}
		}
		FROM = {
			change_variable = {
				which = "blooddragon_reserve"
				value = 1
			}
		}
	}
}

fromfrom_makes_root_vampire_effect = {
	hidden_tooltip = {
		FROM = {
			set_offmap_currency = {
				offmap = undivided_warp
				value = 0
			}
			set_offmap_currency = {
				offmap = slaanesh_warp
				value = 0
			}
			set_offmap_currency = {
				offmap = nurgle_warp
				value = 0
			}
			set_offmap_currency = {
				offmap = tzeentch_warp
				value = 0
			}
			set_offmap_currency = {
				offmap = khorne_warp
				value = 0
			}
			clr_character_flag = hidden_cultist_tzeentch
			clr_character_flag = hidden_cultist_nurgle
			clr_character_flag = hidden_cultist_slaanesh
			clr_character_flag = hidden_cultist_khorne
			clr_character_flag = hidden_cultist_undivided
		}
	}
	if = {
		limit = {
			ROOT = {
				dynasty = 0
			}
			FROMFROM = {
				is_female = no
			}
		}
		ROOT = {
			dynasty = FROMFROM
			set_father = FROMFROM
		}
	}
	if = {
		limit = {
			ROOT = {
				dynasty = 0
			}
			FROMFROM = {
				is_female = yes
			}
		}
		ROOT = {
			dynasty = FROMFROM
			set_mother = FROMFROM
		}
	}
	if = {
		limit = {
			FROMFROM = {
				OR = {
					trait = vampire_lahmian_visible
					trait = vampire_lahmian_hidden
				}
			}
			age = 16
		}
		add_trait = vampire_lahmian_visible
		set_graphical_culture = lahmian_vampire
		religion = vampiric
	}
	if = {
		limit = {
			FROMFROM = {
				OR = {
					trait = vampire_lahmian_visible
					trait = vampire_lahmian_hidden
				}
			}
			NOT = {
				age = 16
			}
		}
		add_trait = vampire_lahmian_visible
		set_graphical_culture = kid_lahmian_vampire
		religion = vampiric
	}
	if = {
		limit = {
			FROMFROM = {
				OR = {
					trait = vampire_strigoi_visible
					trait = vampire_strigoi_hidden
				}
			}
		}
		add_trait = vampire_strigoi_visible
		set_graphical_culture = strigoi_vampire
		religion = vampiric
	}
	if = {
		limit = {
			FROMFROM = {
				OR = {
					trait = vampire_carstein_visible
					trait = vampire_carstein_hidden
				}
			}
			age = 16
		}
		add_trait = vampire_carstein_visible
		set_graphical_culture = generic_vampire
		religion = vampiric
	}
	if = {
		limit = {
			FROMFROM = {
				OR = {
					trait = vampire_carstein_visible
					trait = vampire_carstein_hidden
				}
			}
			NOT = {
				age = 16
			}
		}
		add_trait = vampire_carstein_visible
		set_graphical_culture = kid_vampire
		religion = vampiric
	}
	if = {
		limit = {
			FROMFROM = {
				OR = {
					trait = vampire_blood_visible
					trait = vampire_blood_hidden
				}
				culture = blooddragons_culture
			}
		}
		add_trait = vampire_blood_visible
		set_graphical_culture = blood_vampire
		culture = blooddragons_culture
		religion = vampiric
	}
	if = {
		limit = {
			FROMFROM = {
				OR = {
					trait = vampire_blood_visible
					trait = vampire_blood_hidden
				}
				culture_group = sartosan_group
				has_character_flag = vampire_pirate
			}
		}
		add_trait = vampire_blood_visible
		set_graphical_culture = blood_vampire
		set_character_flag = vampire_pirate
		culture = FROMFROM
		religion = vampiric
	}
	if = {
		limit = {
			FROMFROM = {
				OR = {
					trait = vampire_necrarch_visible
					trait = vampire_necrarch_hidden
				}
			}
		}
		add_trait = vampire_necrarch_visible
		set_graphical_culture = necrarch_vampire
		religion = nagashi
	}
	if = {
		limit = {
			FROMFROM = {
				OR = {
					trait = vampire_jade_visible
					trait = vampire_jade_hidden
				}
			}
		}
		add_trait = vampire_jade_visible
		culture = living_jade
		set_graphical_culture = jade_vampire
		religion = FROMFROM
		random_list = {
			25 = {
				add_trait = celibate
			}
			25 = {
				add_trait = chaste
			}
			50 = {
			}
		}
	}
	if = {
		limit = {
			FROMFROM = {
				OR = {
					trait = vampire_mahtmasi_visible
					trait = vampire_mahtmasi_hidden
				}
			}
		}
		add_trait = vampire_mahtmasi_visible
		set_graphical_culture = mahtmasi_vampire
		religion = shadowmen
		random_list = {
			60 = {
				character_event = {
					id = svampires.79
					days = 1
					random = 1
				}
				FROMFROM = {
					character_event = {
						id = svampires.79001
						days = 1
						random = 1
					}
				}
			}
			#Success
			40 = {
				modifier = {
					factor = 0.5
					trait = strong
				}
				modifier = {
					factor = 0.75
					trait = tough
				}
				modifier = {
					factor = 0.85
					trait = hardy
				}
				modifier = {
					factor = 1.25
					trait = soft
				}
				modifier = {
					factor = 1.5
					trait = fragile
				}
				modifier = {
					factor = 1.75
					trait = weak
				}
				modifier = {
					factor = 1.5
					trait = stressed
				}
				modifier = {
					factor = 1.5
					is_ill = yes
				}
				modifier = {
					factor = 1.5
					trait = infirm
				}
				modifier = {
					factor = 1.5
					trait = maimed
				}
				character_event = {
					id = svampires.80
					days = 1
					random = 1
				}
				FROMFROM = {
					character_event = {
						id = svampires.80001
						days = 1
						random = 1
					}
				}
			}
			#Failure
		}
		add_trait = incapable
	}
	remove_trait = old_1
	remove_trait = old_2
	remove_trait = old_3
	remove_trait = old_4
	if = {
		limit = {
			FROMFROM = {
				OR = {
					trait = vampire_blood_visible
					trait = vampire_blood_hidden
				}
			}
			NOR = {
				trait = weak
				trait = fragile
				trait = soft
				trait = maimed
				trait = incapable
				trait = blinded
				trait = eunuch
				trait = is_malnourished
				trait = is_fat
				trait = addict
				NOT = {
					martial = 10
				}
			}
		}
		FROMFROM = {
			change_variable = {
				which = "blooddragon_reserve"
				value = 1
			}
		}
	}
}

antideath_effect = {
	change_variable = {
		which = cheated_death
		value = 1
	}
	if = {
		limit = {
			has_artifact = carstein_ring
		}
		character_event = {
			id = carstein.13
			days = 1
		}
		break = yes
	}
	if = {
		limit = {
			trait = creature_celdragon
		}
		break = yes
	}
	if = {
		limit = {
			trait = khemri_tomb_king
		}
		character_event = {
			id = snehekharan.1
			days = 1
		}
		break = yes
	}
	if = {
		limit = {
			trait = black_arkhan
		}
		character_event = {
			id = snehekharan.1
			days = 1
		}
		break = yes
	}
	if = {
		limit = {
			trait = sisters_of_twilight
		}
		character_event = {
			id = snehekharan.1
			days = 1
		}
		break = yes
	}
	if = {
		limit = {
			trait = avatar_isha
		}
		character_event = {
			id = snehekharan.1
			days = 1
		}
		break = yes
	}
	if = {
		limit = {
			trait = avatar_kurnous
		}
		character_event = {
			id = snehekharan.1
			days = 1
		}
		break = yes
	}
	if = {
		limit = {
			trait = malekith
		}
		character_event = {
			id = snehekharan.1
			days = 1
		}
		break = yes
	}
	if = {
		limit = {
			trait = nurgle_maggot_lord
		}
		character_event = {
			id = TAMUR.4
			days = 1
		}
		break = yes
	}
	if = {
		limit = {
			has_artifact = heart_of_avelorn_everqueen
			any_artifact={
				artifact = heart_of_avelorn_everqueen
				is_artifact_active = yes
			}
			NOT={ has_character_flag = exhausted_heart }
		}
		character_event = {
			id = snehekharan.1
			days = 1
		}
		set_character_flag=exhausted_heart
		break = yes
	}
	if = {
		limit = {
			trait = fay_enchantress
		}
		character_event = {
			id = snehekharan.1
			days = 1
		}
		break = yes
	}
	if = {
		limit = {
			trait = chaos_dwarf_sorcerer
			NOT = {
				trait = chaos_dwarf_petrification_2
			}
			NAND = {
				trait = chaos_dwarf_petrification_1
				check_variable = {
					which = hashut_favor
					value <= 5
				}
			}
		}
		character_event = {
			id = DR_chaos_dwarf.8
			days = 1
		}
		break = yes
	}
}

send_duel_result_tournament_effect = {
	# Runs via the attacker/combatant_1
	### Disclaimer: Assumes combatant_1 is ROOT. combatant_2 is referred to as its event_target-name.
	###############################
	#duel_result_score/duelist_skill legend...
	# -0 	: the worst	: low 		: (result_score: attacker is way WORSE than defender)
	# 0-15	: terrible 	: low
	# 15-30	: bad 		: low
	# 30-45	: ok 		: medium
	# 45-60	: decent 	: medium 	: the closer result_score is to here, the more evenly matched
	# 60-75	: good 		: medium
	# 75-90	: great 	: high
	# 90-105: fantastic	: high
	# +105	: the best 	: high 		: (result_score: attacker is way BETTER than defender)
	################################
	###  Flags used:
	# title_challenge_duel			(NOT YET USED)
	# is_legendary_duel				(used in hf_warrior_lodge_legends_events)
	# mock_duel						(induction for Warrior Lodges)
	# intrigue_options_available
	## Flags I MIGHT use (but most likely for triggered descs, etc)
	# is_friendly_fight
	# is_family_fight
	# is_rival_fight
	# fight_could_spark_romance
	# fight_could_spark_rivalry
	# fight_could_spark_friendship
	#### 1. Not without war focus or Warrior lodges (LETHAL)
	#### 2. Make sure there is some kind of gating that checks whether a duel is:
	# A. For Honor (default, available for anyone)
	# B. To the Death (against your foes)
	# C. A Sparring Match (against anyone)
	# (D. Something else?)
	random_list = {
		# 	#mostly to deal with Kinslayer effect and tooltips...
		# 	set_character_flag = someone_died
		# 	event_target:combatant_2 = { set_character_flag = someone_died }
		# 	#to determine custom loc outcomes...
		# 	set_character_flag = actually_injured
		# 	set_character_flag = injury_kills
		# 	event_target:combatant_2 = {
		# 		set_character_flag = actually_injured
		# 		set_character_flag = injury_kills
		# 	}
		# 	character_event = { id = schaosfl.3002 } #double death event (attacker)
		# 	event_target:combatant_2 = { character_event = { id = schaosfl.3002 days = 1 } } #double death event (defender)
		# }
		5 = {
			#LETHAL for attacker...
			trigger = {
				NOR = {
					has_character_flag = mock_duel
					has_character_flag = is_legendary_duel
				}
				OR = {
					has_character_flag = claim_duel@event_target:combatant_2
					has_character_flag = is_battlefield_duel
					is_member_of_any_warband_trigger = yes
					is_member_of_any_warrior_lodge = yes
					has_focus = focus_war
					event_target:combatant_1 = {
						has_character_flag = flag_duel_no_draws
					}					#Special triggered event duels.
					event_target:combatant_2 = {
						has_character_flag = flag_duel_no_draws
					}
					event_target:combatant_1 = {
						has_character_flag = deadly_duel@event_target:combatant_2
					}
				}
			}
			additive_modifier = {
				duel_result_score_low_group_trigger = yes				#Score: you were outmatched
				value = 5
			}
			additive_modifier = {
				duel_result_score_the_worst_trigger = yes				#Score: REALLY outmatched
				value = 10
			}
			additive_modifier = {
				is_bad_duelist_trigger = yes				#Skill: bad
				value = 20
			}
			additive_modifier = {
				is_terrible_duelist_trigger = yes				#Skill: terrible
				value = 30
			}
			additive_modifier = {
				is_the_worst_duelist_trigger = yes				#Skill: the worst
				value = 40
			}
			additive_modifier = {
				has_character_flag = defender_using_poison@event_target:combatant_1				#Defender used poison
				value = 30
			}
			additive_modifier = {
				has_character_flag = poison_can_fail_against@event_target:combatant_1				#Attacker might catch the poison
				value = -25
			}
			additive_modifier = {
				event_target:dueling_weapon_2 = {
					#Defender is using a *gun*
					has_artifact_flag = gun
				}
				NOT = {
					event_target:dueling_weapon_1 = {
						has_artifact_flag = gun
					}
				}
				value = 30
			}
			if = {
				#this fight is taking place on the battlefield!
				limit = {
					has_character_flag = is_battlefield_duel
				}
				log = "BATTLE EVENTS: [combatant_1.GetBestName] should have died, but gets to offer themselves up as prisoner, to [combatant_2.GetBestName] instead."
				character_event = {
					id = HFP.11042
				}				#You can offer yourself up as their prisoner instead-event
			}
			else = {
				#Otherwise, regular duel death for the attacker...
				set_character_flag = someone_died
				set_character_flag = actually_injured
				set_character_flag = injury_kills
				event_target:combatant_2 = {
					set_character_flag = someone_died
					character_event = {
						id = schaosfl.3001
						days = 1
					}					#"I decapitated someone!" event sent to winner...
				}
			}
		}
		5 = {
			#LETHAL for defender...
			trigger = {
				NOR = {
					has_character_flag = mock_duel
					has_character_flag = is_legendary_duel
				}
				OR = {
					has_character_flag = claim_duel@event_target:combatant_2
					has_character_flag = is_battlefield_duel
					is_member_of_any_warband_trigger = yes
					is_member_of_any_warrior_lodge_trigger = yes
					has_focus = focus_war
					event_target:combatant_1 = {
						has_character_flag = flag_duel_no_draws
					}					#Special triggered event duels.
					event_target:combatant_2 = {
						has_character_flag = flag_duel_no_draws
					}
					event_target:combatant_1 = {
						has_character_flag = deadly_duel@event_target:combatant_2
					}
				}
			}
			additive_modifier = {
				duel_result_score_high_group_trigger = yes				#Score: they were outmatched
				value = 5
			}
			additive_modifier = {
				duel_result_score_the_best_trigger = yes				#Score: REALLY outmatched
				value = 10
			}
			additive_modifier = {
				event_target:combatant_2 = {
					is_bad_duelist_trigger = yes
				}				#Their Skill: bad
				value = 20
			}
			additive_modifier = {
				event_target:combatant_2 = {
					is_terrible_duelist_trigger = yes
				}				#Their Skill: terrible
				value = 30
			}
			additive_modifier = {
				event_target:combatant_2 = {
					is_the_worst_duelist_trigger = yes
				}				#Their Skill: the worst
				value = 40
			}
			additive_modifier = {
				has_character_flag = attacker_using_poison@event_target:combatant_2				#Attacker used poison
				value = 30
			}
			additive_modifier = {
				has_character_flag = poison_can_fail_against@event_target:combatant_2				#Defender might catch the poison
				value = -25
			}
			additive_modifier = {
				event_target:dueling_weapon_1 = {
					#Attacker is using a *gun*
					has_artifact_flag = gun
				}
				NOT = {
					event_target:dueling_weapon_2 = {
						has_artifact_flag = gun
					}
				}
				value = 30
			}
			set_character_flag = someone_died
			event_target:combatant_2 = {
				set_character_flag = someone_died
				set_character_flag = actually_injured
				set_character_flag = injury_kills
			}
			character_event = {
				id = schaosfl.3001
			}			#"I decapitated someone!" event sent to winner...
		}
		#10 = {
		#OTHER OUTCOMES? ADD HERE!
		#}
	}
}

flag_new_colony_lords = {
	any_realm_lord = {
		limit = {
			capital_scope = {
				NOT = {
					region = world_ulthuan
				}
			}
		}
		set_character_flag = NewColonyLord
	}
}

create_colony = {
	hidden_tooltip = {
		if = {
			limit = {
				any_realm_lord = {
					limit = {
						has_character_flag = NewColonyLord
					}
					any_demesne_title = {
						limit = {
							tier = king
						}
						count = 2
					}
					event_target:NewColonyRuler = {
						set_character_flag = create_colony_empire
					}
				}
			}
		}
		else = {
			event_target:NewColonyRuler = {
				set_character_flag = create_colony_kingdom
			}
		}
		event_target:NewColonyRuler = {
			set_defacto_liege = THIS
		}
		make_tributary = {
			who = event_target:NewColonyRuler
			percentage = 0.25
		}
		event_target:NewColonyRuler = {
			primary_title = {
				if = {
					limit = {
						event_target:NewColonyRuler = {
							has_character_flag = create_colony_empire
						}
					}
					create_title = {
						tier = emperor
						landless = yes
						temporary = no
						custom_created = yes
						culture = event_target:NewColonyRuler
						holder = event_target:NewColonyRuler
						base_title = THIS
						copy_title_laws = yes
					}
				}
				else_if = {
					limit = {
						event_target:NewColonyRuler = {
							has_character_flag = create_colony_kingdom
						}
					}
					create_title = {
						tier = KING
						landless = yes
						temporary = no
						custom_created = yes
						culture = event_target:NewColonyRuler
						holder = event_target:NewColonyRuler
						base_title = THIS
						copy_title_laws = yes
					}
				}
			}
		}
		any_realm_lord = {
			limit = {
				has_character_flag = NewColonyLord
			}
			set_defacto_liege = event_target:NewColonyRuler
		}
		event_target:NewColonyRuler = {
			any_realm_province = {
				limit = {
					region = world_ulthuan
				}
				county = {
					grant_title = ROOT
				}
			}
		}
		any_realm_province = {
			limit = {
				NOT = {
					region = world_ulthuan
				}
			}
			holder_scope = {
				set_character_flag = LandUsurpedForColony
				change_variable = {
					which = countys_given_away_value
					value = 200
				}
				random_dynasty_member = {
					limit = {
						is_alive = yes
						is_landed = no
						is_adult = yes
						holy_order = no
						NOT = {
							trait = elven_scion
							trait = elven_maiden
						}
					}
					preferred_limit = {
						NOT = {
							any_heir_title = {
								always = yes
							}
						}
					}
					preferred_limit = {
						NOT = {
							is_close_relative = PREV
						}
					}
					preferred_limit = {
						has_children = yes
					}
					preferred_limit = {
						any_child_even_if_dead = {
							has_children = yes
						}
					}
					preferred_limit = {
						any_child_even_if_dead = {
							NOT = {
								any_heir_title = {
									always = yes
								}
							}
						}
					}
					set_character_flag = RelativeGrantedTitleInColony@PREV
				}
				if = {
					limit = {
						any_dynasty_member = {
							limit = {
								has_character_flag = RelativeGrantedTitleInColony@PREV
							}
							character = yes
						}
					}
					any_dynasty_member = {
						limit = {
							has_character_flag = RelativeGrantedTitleInColony@PREV
						}
						PREV = {
							county = {
								usurp_title = PREV
							}
						}
					}
				}
				else = {
					PREV = {
						county = {
							usurp_title = event_target:NewColonyRuler
						}
					}
				}
			}
		}
		narrative_event = {
			id = HighElfColony.1
		}
		any_realm_lord = {
			narrative_event = {
				id = HighElfColony.1
			}
		}
		event_target:NewColonyRuler = {
			narrative_event = {
				id = HighElfColony.1
			}
			any_realm_lord = {
				narrative_event = {
					id = HighElfColony.1
				}
			}
		}
	}
}

pick_colony_leader = {
	random_realm_lord = {
		limit = {
			has_character_flag = NewColonyLord
			religion = ROOT
			trait = creature_elf
			is_feudal = yes
			higher_tier_than = BARON
		}
		preferred_limit = {
			is_lover = ROOT
		}
		preferred_limit = {
			is_friend = ROOT
		}
		preferred_limit = {
			culture = ROOT
		}
		preferred_limit = {
			real_tier = king
		}
		preferred_limit = {
			real_tier = duke
		}
		preferred_limit = {
			real_tier = count
		}
		preferred_limit = {
			demesne_size = 2
		}
		save_event_target_as = NewColonyRuler
	}
	if = {
		limit = {
			event_target:NewColonyRuler = {
				character = no
			}
		}
		create_character = {
			random_traits = no
			dynasty = RANDOM
			religion = ROOT
			culture = ROOT
			female = no
			age = 60
			attributes = {
				diplomacy = 12
				stewardship = 10
			}
		}
		new_character = {
			# Set Racial Trait
			character_event = {
				id = aiclean.31
			}
			save_event_target_as = NewColonyRuler
		}
	}
}

pick_new_colony_ruler_options = {
	random_realm_lord = {
		limit = {
			has_character_flag = NewColonyLord
			religion = ROOT
			trait = creature_elf
			is_feudal = yes
			higher_tier_than = BARON
		}
		preferred_limit = {
			is_lover = ROOT
		}
		preferred_limit = {
			is_friend = ROOT
		}
		preferred_limit = {
			culture = ROOT
		}
		preferred_limit = {
			real_tier = king
		}
		preferred_limit = {
			real_tier = duke
		}
		preferred_limit = {
			real_tier = count
		}
		preferred_limit = {
			demesne_size = 2
		}
		save_event_target_as = ColonyRuler1
	}
	random_realm_lord = {
		limit = {
			has_character_flag = NewColonyLord
			religion = ROOT
			trait = creature_elf
			is_feudal = yes
			higher_tier_than = BARON
			NOT = {
				character = event_target:ColonyRuler1
			}
		}
		preferred_limit = {
			is_lover = ROOT
		}
		preferred_limit = {
			is_friend = ROOT
		}
		preferred_limit = {
			culture = ROOT
		}
		preferred_limit = {
			real_tier = king
		}
		preferred_limit = {
			real_tier = duke
		}
		preferred_limit = {
			real_tier = count
		}
		preferred_limit = {
			demesne_size = 2
		}
		save_event_target_as = ColonyRuler2
	}
	random_realm_lord = {
		limit = {
			has_character_flag = NewColonyLord
			religion = ROOT
			trait = creature_elf
			is_feudal = yes
			higher_tier_than = BARON
			NOT = {
				character = event_target:ColonyRuler1
			}
			NOT = {
				character = event_target:ColonyRuler2
			}
		}
		preferred_limit = {
			is_lover = ROOT
		}
		preferred_limit = {
			is_friend = ROOT
		}
		preferred_limit = {
			culture = ROOT
		}
		preferred_limit = {
			real_tier = king
		}
		preferred_limit = {
			real_tier = duke
		}
		preferred_limit = {
			real_tier = count
		}
		preferred_limit = {
			demesne_size = 2
		}
		save_event_target_as = ColonyRuler3
	}
}

colony_cleanup = {
	hidden_tooltip = {
		clr_character_flag = LandUsurpedForColony
		clr_character_flag = NewColonyLord
		set_variable = {
			which = countys_given_away_value
			which = 0
		}
	}
}

join_cult_as_member_or_sleeper_agent = {
	trigger_switch = {
		on_trigger = has_character_flag
		being_recruited_by_khorne = {
			if = {
				limit = {
					OR = {
						event_target:chaos_cult_recruiter = {
							ai = no
						}
						can_join_society = cult_of_khorne
						ai = no
					}
					OR = {
						ai = no
						is_in_society = no
					}
				}
				join_society = cult_of_khorne
			}
			else = {
				event_target:chaos_cult_recruiter = {
					set_character_flag = recruitment_success_sleeper_agent
				}
				set_character_flag = chaos_cult_sleeper_agent
			}
			set_secret_religion = khorne
		}
		being_recruited_by_nurgle = {
			if = {
				limit = {
					OR = {
						event_target:chaos_cult_recruiter = {
							ai = no
						}
						can_join_society = cult_of_nurgle
						ai = no
					}
					OR = {
						ai = no
						is_in_society = no
					}
				}
				join_society = cult_of_nurgle
			}
			else = {
				event_target:chaos_cult_recruiter = {
					set_character_flag = recruitment_success_sleeper_agent
				}
				set_character_flag = chaos_cult_sleeper_agent
			}
			set_secret_religion = nurgle
		}
		being_recruited_by_tzeentch = {
			if = {
				limit = {
					OR = {
						event_target:chaos_cult_recruiter = {
							ai = no
						}
						can_join_society = cult_of_tzeentch
						ai = no
					}
					OR = {
						ai = no
						is_in_society = no
					}
				}
				join_society = cult_of_tzeentch
			}
			else = {
				event_target:chaos_cult_recruiter = {
					set_character_flag = recruitment_success_sleeper_agent
				}
				set_character_flag = chaos_cult_sleeper_agent
			}
			set_secret_religion = tzeentch
		}
		being_recruited_by_slaanesh = {
			if = {
				limit = {
					OR = {
						event_target:chaos_cult_recruiter = {
							ai = no
						}
						can_join_society = cult_of_slaanesh
						ai = no
					}
					OR = {
						ai = no
						is_in_society = no
					}
				}
				join_society = cult_of_slaanesh
			}
			else = {
				event_target:chaos_cult_recruiter = {
					set_character_flag = recruitment_success_sleeper_agent
				}
				set_character_flag = chaos_cult_sleeper_agent
			}
			set_secret_religion = slaanesh
		}
		being_recruited_by_undivided = {
			if = {
				limit = {
					OR = {
						event_target:chaos_cult_recruiter = {
							ai = no
						}
						can_join_society = cult_of_undivided
						ai = no
					}
					OR = {
						ai = no
						is_in_society = no
					}
				}
				join_society = cult_of_undivided
			}
			else = {
				event_target:chaos_cult_recruiter = {
					set_character_flag = recruitment_success_sleeper_agent
				}
				set_character_flag = chaos_cult_sleeper_agent
			}
			set_secret_religion = chaos
		}
	}
}

create_cultists_crossing_border = {
	random_independent_ruler = {
		limit = {
			OR = {
				religion_group = old_world_group
				religion_group = ormazd_gods_group
				religion_group = oriental_gods_group
			}
			is_human = yes
			is_landed = yes
			higher_tier_than = BARON
			is_feudal = yes
			NOT = {
				government = congregation_government
			}
			OR = {
				shares_realm_border_with = event_target:chaos_ruler
				any_realm_province = {
					event_target:chaos_ruler = {
						any_realm_province = {
							can_naval_path_to = {
								target = PREVPREV
								distance < 300
							}
						}
					}
				}
			}
		}
		save_event_target_as = the_target
	}
	if = {
		limit = {
			event_target:the_target = {
				character = no
			}
		}
		break = yes
	}
	event_target:chaos_ruler = {
		set_variable = {
			which = cultists_to_move
			value = 5
		}
		while = {
			limit = {
				check_variable = {
					which = cultists_to_move
					value > 0
				}
			}
			subtract_variable = {
				which = cultists_to_move
				value = 1
			}
			random_realm_character = {
				limit = {
					is_human = yes
					is_adult = yes
					open_follower_of_any_chaos_gods = yes
					is_unimportant_trigger = yes
					is_chaos_champion_chosen_or_prince_trigger = no
					is_in_society = no
					is_sick_or_injured_trigger = no
					is_ill = no
					is_incapable = no
				}
				preferred_limit = {
					is_attractive_trigger = yes
					is_smart_trigger = yes
					is_strong_trigger = yes
				}
				set_character_flag = chaos_cult_from@event_target:chaos_ruler
				save_event_target_as = chosen_cultist
				event_target:the_target = {
					random_realm_lord = {
						limit = {
							OR = {
								religion_group = old_world_group
								religion_group = ormazd_gods_group
								religion_group = oriental_gods_group
							}
							is_human = yes
						}
						preferred_limit = {
							OR = {
								has_focus = focus_seduction
								has_focus = focus_carousing
							}
							NOT = {
								secret_religion_group = chaos_gods_group
							}
						}
						event_target:chosen_cultist = {
							move_character = PREV
							religion = PREV
							culture = PREV
							try_join_random_society = yes
						}
					}
				}
				clear_event_target = chosen_cultist
			}
		}
		set_variable = {
			which = cultists_to_move
			value = 0
		}
	}
	event_target:the_target = {
		random_list = {
			35 = {
				any_realm_character = {
					limit = {
						has_character_flag = chaos_cult_from@event_target:chaos_ruler
					}
					set_character_flag = chaos_cult_infiltrator_successful
				}
			}
			15 = {
				modifier = {
					factor = 0
					has_character_modifier = expelled_k_witch_hunters_order
				}
				modifier = {
					factor = 0.2
					NOT = {
						realm_intrigue = 15
					}
				}
				modifier = {
					factor = 1.2
					NOT = {
						any_courtier = {
							has_job_title = job_spymaster
							secret_religion_group = chaos_gods_group
						}
					}
					realm_intrigue = 15
					NOT = {
						realm_intrigue = 20
					}
				}
				modifier = {
					factor = 1.5
					NOT = {
						any_courtier = {
							has_job_title = job_spymaster
							secret_religion_group = chaos_gods_group
						}
					}
					realm_intrigue = 20
					NOT = {
						realm_intrigue = 25
					}
				}
				modifier = {
					factor = 2
					NOT = {
						any_courtier = {
							has_job_title = job_spymaster
							secret_religion_group = chaos_gods_group
						}
					}
					realm_intrigue = 25
					NOT = {
						realm_intrigue = 30
					}
				}
				modifier = {
					factor = 2.5
					NOT = {
						any_courtier = {
							has_job_title = job_spymaster
							secret_religion_group = chaos_gods_group
						}
					}
					realm_intrigue = 30
					NOT = {
						realm_intrigue = 35
					}
				}
				modifier = {
					factor = 3
					NOT = {
						any_courtier = {
							has_job_title = job_spymaster
							secret_religion_group = chaos_gods_group
						}
					}
					realm_intrigue = 35
					NOT = {
						realm_intrigue = 40
					}
				}
				modifier = {
					factor = 4
					NOT = {
						any_courtier = {
							has_job_title = job_spymaster
							secret_religion_group = chaos_gods_group
						}
					}
					realm_intrigue = 40
					NOT = {
						realm_intrigue = 50
					}
				}
				modifier = {
					factor = 6
					NOT = {
						any_courtier = {
							has_job_title = job_spymaster
							secret_religion_group = chaos_gods_group
						}
					}
					realm_intrigue = 50
				}
				character_event = {
					id = DR_cults.60001
				}
			}
		}
	}
}

create_random_cultist = {
	random_list = {
		50 = {
			create_character = {
				religion = ROOT
				culture = ROOT
				dynasty = random
				random_traits = yes
				health = 5
				fertility = 0.5
			}
			new_character = {
				# Set Racial Trait
				character_event = {
					id = aiclean.31
				}
				set_character_flag = chaos_cult_from@event_target:chaos_ruler
				culture = event_target:the_target
				religion = event_target:the_target
				remove_trait = just
				remove_trait = craven
				try_join_random_society = yes
			}
		}
		50 = {
			create_character = {
				religion = ROOT
				culture = ROOT
				female = yes
				dynasty = random
				random_traits = yes
				health = 5
				fertility = 0.5
			}
			new_character = {
				# Set Racial Trait
				character_event = {
					id = aiclean.31
				}
				set_character_flag = chaos_cult_from@event_target:chaos_ruler
				culture = event_target:the_target
				religion = event_target:the_target
				remove_trait = just
				remove_trait = craven
				try_join_random_society = yes
			}
		}
	}
}

try_join_random_society = {
	if = {
		limit = {
			can_join_society = cult_of_undivided
		}
		join_society = cult_of_undivided
		set_secret_religion = chaos
	}
	else_if = {
		limit = {
			can_join_society = cult_of_tzeentch
		}
		join_society = cult_of_tzeentch
		set_secret_religion = tzeentch
	}
	else_if = {
		limit = {
			can_join_society = cult_of_slaanesh
		}
		join_society = cult_of_slaanesh
		set_secret_religion = slaanesh
	}
	else_if = {
		limit = {
			can_join_society = cult_of_nurgle
		}
		join_society = cult_of_nurgle
		set_secret_religion = nurgle
	}
	else_if = {
		limit = {
			can_join_society = cult_of_khorne
		}
		join_society = cult_of_khorne
		set_secret_religion = khorne
	}
	else = {
		set_character_flag = chaos_cult_sleeper_agent
		random_list = {
			20 = {
				set_secret_religion = chaos
			}
			20 = {
				set_secret_religion = tzeentch
			}
			20 = {
				set_secret_religion = slaanesh
			}
			20 = {
				set_secret_religion = nurgle
			}
			20 = {
				set_secret_religion = khorne
			}
		}
	}
}

burn_captured_infiltrator = {
	any_realm_character = {
		limit = {
			has_character_flag = chaos_cult_from@event_target:chaos_ruler
			NOT = {
				has_character_flag = chaos_cult_infiltrator_successful
			}
		}
		add_trait = staked
		death = {
			show_portrait = yes
			death_reason = death_execution_burning
			killer = ROOT
		}
	}
}

set_amazon_male_to_female = {
	if = {
		limit = {
			OR = {
				culture_group = amazon_group
				religion = amazon
			}
		}
		set_gender = female
		culture = amazon_main
		religion = amazon
		remove_trait = in_stock
		remove_trait = disinherited_amazon
		clr_character_flag = disinherited_by_amazon_laws
		set_government_type = tribal_government
	}
}

evaluate_chaos_settlement_progress_effect = {
	event_target:chaos_settlement_province = {
		if = {
			# You're just starting out...
			limit = {
				check_variable = {
					which = chaos_settlement_event_progress
					value = 0
				}
				NOT = {
					check_variable = {
						which = chaos_settlement_event_progress
						value = 2
					}
				}
			}
			set_province_flag = start_bracket
		}
		else_if = {
			# You're making some progress
			limit = {
				check_variable = {
					which = chaos_settlement_event_progress
					value = 2
				}
				NOT = {
					check_variable = {
						which = chaos_settlement_event_progress
						value = 4
					}
				}
			}
			clr_province_flag = start_bracket
			set_province_flag = mid_bracket
		}
		else_if = {
			# Get to dueling!
			limit = {
				check_variable = {
					which = chaos_settlement_event_progress
					value = 4
				}
				NOT = {
					check_variable = {
						which = chaos_settlement_event_progress
						value = 6
					}
				}
			}
			clr_province_flag = start_bracket
			clr_province_flag = mid_bracket
			set_province_flag = top_bracket
			if = {
				limit = {
					#Stream linin' for player runs...
					check_variable = {
						which = chaos_settlement_event_progress
						value = 6
					}					#Nepotism values
				}
				clr_province_flag = start_bracket
				clr_province_flag = mid_bracket
				clr_province_flag = top_bracket
				set_province_flag = development_is_done
			}
		}
		else_if = {
			# Consider yourself victorious, you champ.
			limit = {
				check_variable = {
					which = chaos_settlement_event_progress
					value = 6
				}
			}
			clr_province_flag = start_bracket
			clr_province_flag = mid_bracket
			clr_province_flag = top_bracket
			set_province_flag = development_is_done
		}
	}
}

add_1_point_to_chaos_settlement_progress_effect = {
	event_target:chaos_settlement_province = {
		custom_tooltip = {
			text = good_progress_tt
			event_target:chaos_settlement_province = {
				change_variable = {
					which = chaos_settlement_event_progress
					value = 1
				}
			}
		}
	}
}

lose_1_point_to_chaos_settlement_progress_effect = {
	event_target:chaos_settlement_province = {
		custom_tooltip = {
			text = good_progress_tt
			event_target:chaos_settlement_province = {
				subtract_variable = {
					which = chaos_settlement_event_progress
					value = 1
				}
			}
		}
	}
}

remove_magic_effect = {
	remove_trait = magic_potential_1
	remove_trait = magic_potential_2
	remove_trait = magic_potential_3
	remove_trait = magic_potential_4
	remove_trait = witch
	remove_trait = warlock
	remove_trait = hag_witch
	remove_trait = hedge_wizard
	remove_trait = ice_witch
	remove_trait = asrai_spellsinger
	remove_trait = asur_mage
	remove_trait = chaos_dwarf_sorcerer
	remove_trait = greenskin_shaman
	remove_trait = druchii_mage
	remove_trait = druchii_sorceress
	remove_trait = skink_priest
	remove_trait = bray_shaman
	remove_trait = lore_ice
	remove_trait = lore_hag
	remove_trait = lore_fire
	remove_trait = lore_beasts
	remove_trait = lore_metal
	remove_trait = lore_light
	remove_trait = lore_life
	remove_trait = lore_heavens
	remove_trait = lore_death
	remove_trait = lore_shadows
	remove_trait = lore_high_magic
	remove_trait = lore_dark_magic
	remove_trait = lore_chaos
	remove_trait = lore_nurgle
	remove_trait = lore_slaanesh
	remove_trait = lore_tzeentch
	remove_trait = lore_necromancy
	remove_trait = lore_waaagh
	remove_trait = lore_vermin
	remove_trait = beast_transformation
}

hashut_favor_trivial_penalty_effect = {
	change_variable = {
		which = hashut_favor
		value = -1
	}
}

hashut_favor_small_penalty_effect = {
	change_variable = {
		which = hashut_favor
		value = -2
	}
}

hashut_favor_medium_penalty_effect = {
	change_variable = {
		which = hashut_favor
		value = -5
	}
}

hashut_favor_major_penalty_effect = {
	change_variable = {
		which = hashut_favor
		value = -10
	}
}

hashut_favor_trivial_bonus_effect = {
	change_variable = {
		which = hashut_favor
		value = 1
	}
}

hashut_favor_small_bonus_effect = {
	change_variable = {
		which = hashut_favor
		value = 2
	}
}

hashut_favor_medium_bonus_effect = {
	change_variable = {
		which = hashut_favor
		value = 5
	}
}

hashut_favor_major_bonus_effect = {
	change_variable = {
		which = hashut_favor
		value = 10
	}
}

spawn_bull_centaur_effect = {
	create_random_soldier = {
		random_traits = yes
		dynasty = random
		female = no
		religion = hashut
		culture = dwarf_chaos
		attributes = {
			diplomacy = 3
			learning = 3
			stewardship = 3
			intrigue = 3
			martial = 9
		}
	}
	new_character = {
		remove_trait = soft
		remove_trait = fragile
		remove_trait = weak
		remove_trait = feeble
		remove_trait = slow
		remove_trait = imbecile
		remove_trait = dull
		remove_trait = dim
		remove_trait = dumb
		remove_trait = idiot
		remove_trait = dwarf
		remove_trait = giant
		remove_trait = hunchback
		remove_trait = clubfooted
		remove_trait = craven
		remove_trait = mystic
		remove_trait = socializer
		remove_trait = gamer
		remove_trait = hedonist
		remove_trait = duelist
		remove_trait = hunter
		remove_trait = strategist
		remove_trait = administrator
		remove_trait = architect
		remove_trait = gardener
		remove_trait = schemer
		remove_trait = impaler
		remove_trait = seducer
		remove_trait = seductress
		remove_trait = theologian
		remove_trait = scholar
		remove_trait = misguided_warrior
		remove_trait = tough_soldier
		remove_trait = skilled_tactician
		remove_trait = brilliant_strategist
		add_trait = creature_chaos_dwarf
		add_trait = chaos_dwarf_bull_centaur
		#guarantee that Bull Centaur is old enough to be a commander
		add_age = 40
		random_list = {
			5 = {
				add_trait = misguided_warrior
			}
			10 = {
				add_trait = tough_soldier
			}
			20 = {
				add_trait = skilled_tactician
			}
			30 = {
				add_trait = brilliant_strategist
			}
		}
		random_list = {
			# Flavor Randomization
			35 = {
				# Nothing
			}
			15 = {
				change_martial = 2
			}
			10 = {
				add_trait = robust
			}
			10 = {
				add_trait = duelist
			}
			10 = {
				add_trait = hunter
			}
			5 = {
				add_trait = strategist
			}
			5 = {
				change_martial = 4
			}
			5 = {
				if = {
					limit = {
						has_dlc = "Reapers"
					}
					add_trait = one_eyed
				}
			}
			5 = {
				add_trait = shrewd
			}
			1 = {
				add_trait = giant
			}
		}
		random_list = {
			50 = {
				#Nothing
			}
			10 = {
				add_trait = narrow_flank_leader
			}
			10 = {
				add_trait = defensive_leader
			}
			10 = {
				add_trait = experimenter
			}
			10 = {
				add_trait = flanker
			}
			10 = {
				add_trait = cavalry_leader
			}
			10 = {
				add_trait = inspiring_leader
			}
			10 = {
				add_trait = organizer
			}
			10 = {
				add_trait = siege_leader
			}
			10 = {
				add_trait = trickster
			}
			10 = {
				add_trait = aggressive_leader
			}
		}
	}
}

join_demonspawn_socity_or_warband_effect = {
	if = {
		limit = {
			has_dlc = "Mystics"
			ROOT = {
				has_character_flag = slaanesh_birth
			}
		}
		religion = ROOT
		join_society = cult_of_slaanesh
		set_secret_religion = slaanesh
	}
	if = {
		limit = {
			has_dlc = "Mystics"
			ROOT = {
				has_character_flag = khorne_birth
			}
		}
		religion = ROOT
		join_society = cult_of_khorne
		set_secret_religion = khorne
	}
	if = {
		limit = {
			has_dlc = "Mystics"
			ROOT = {
				has_character_flag = nurgle_birth
			}
		}
		religion = ROOT
		join_society = cult_of_nurgle
		set_secret_religion = nurgle
	}
	if = {
		limit = {
			has_dlc = "Mystics"
			ROOT = {
				has_character_flag = tzeentch_birth
			}
		}
		religion = ROOT
		join_society = cult_of_tzeentch
		set_secret_religion = tzeentch
	}
	if = {
		limit = {
			has_dlc = "Mystics"
			ROOT = {
				has_character_flag = undivided_birth
			}
		}
		religion = ROOT
		join_society = cult_of_undivided
		set_secret_religion = undivided
	}
	if = {
		limit = {
			has_dlc = "Mystics"
			ROOT = {
				has_character_flag = warband_undivided_birth
			}
		}
		religion = ROOT
		join_society = warband_of_chaos
	}
	if = {
		limit = {
			has_dlc = "Mystics"
			ROOT = {
				has_character_flag = warband_slaanesh_birth
			}
		}
		religion = ROOT
		join_society = warband_of_slaanesh
	}
	if = {
		limit = {
			has_dlc = "Mystics"
			ROOT = {
				has_character_flag = warband_tzeentch_birth
			}
		}
		religion = ROOT
		join_society = warband_of_tzeentch
	}
	if = {
		limit = {
			has_dlc = "Mystics"
			ROOT = {
				has_character_flag = warband_khorne_birth
			}
		}
		religion = ROOT
		join_society = warband_of_khorne
	}
	if = {
		limit = {
			has_dlc = "Mystics"
			ROOT = {
				has_character_flag = warband_nurgle_birth
			}
		}
		religion = ROOT
		join_society = warband_of_nurgle
	}
}

nurgle_blessing_check_effect = {
	if = {
		limit = {
			OR = {
				trait = everchosen
				society_member_of = cult_of_nurgle
				follower_of_nurgle = yes
				culture = pestilens
				has_character_flag = plague_bearer
			}
		}
		character_event = { id = nurgleb.1 }
	}
}