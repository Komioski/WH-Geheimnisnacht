decisions = {
	join_black_crusade = {
		ai_check_interval = 12
		is_high_prio = yes
		only_playable = yes

	 	potential = {
			open_follower_of_any_chaos_gods = yes
			mercenary = no
			is_playable = yes
			NOT = {
				any_war = {
					using_cb = new_crusade
				}
			}
			any_independent_ruler = {
				controls_religion = yes
				religion_group = chaos_gods_group
				any_war = {
					using_cb = new_crusade
				}
				is_within_diplo_range = ROOT
			}
		}

		allow = {
			OR = {
				ai = no
				war = no
			}
		}

		effect = {
			any_independent_ruler = {
				limit = {
					controls_religion = yes
					religion_group = chaos_gods_group
					any_war = {
						using_cb = new_crusade
					}
				}
				save_event_target_as = crusade_leader
			}

			if = {
				limit = {
					event_target:crusade_leader = {
						any_war = {
							using_cb = new_crusade
						}
					}
				}
				if = {
					limit = { religion = event_target:crusade_leader }
					pledge_crusade_effect = yes
				}

				join_attacker_wars = event_target:crusade_leader
			}
			else = {
				pledge_crusade_effect = yes
			}
		}

		ai_will_do = {
			factor = 0.5
			modifier = {
				factor = 0.01
				independent = no
			}
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 5
				is_chaos_champion_chosen_or_prince_trigger = yes
			}
			modifier = {
				factor = 5
				core_chaos_realms_occupied = yes
			}
			modifier = {
				factor = 0
				trait = craven
			}
			modifier = {
				factor = 0
				#Isolated realms should not join
				independent = yes
				NOT = {
					any_realm_province = {
						any_neighbor_province = {
							has_owner = yes
							holder_scope = {
								top_liege = {
									religion_group = chaos_gods_group
									NOT = { same_realm = ROOT }
								}
							}
						}
					}
				}
			}
			modifier = {
				factor = 3
				rightful_religious_head_scope = {
					ROOT = {
						any_liege = {
							character = PREVPREV
						}
					}
				}
			}
		}
	}
	declare_black_crusade = {
		ai_check_interval = 12
		is_high_prio = yes
		only_independent = yes

	 	potential = {
			uses_new_crusade = yes
			is_adult = yes
			mercenary = no
			OR = {
				religion = chaos
				AND = {
					has_game_rule = { name = warhammer_black_crusades value = default }
					religion_group = chaos_gods_group
				}
			}
			NOT = { religion = norscan_gods }
			NOT = { religion = hashut }
			OR = {
				higher_tier_than = COUNT
				ai = no
			}
		}

		allow = {
			can_call_black_crusade = yes
			wealth = 0
			higher_tier_than = COUNT
			war = no
			OR = {
				is_doom_medium_trigger = yes
				is_doom_high_trigger = yes
				is_doom_very_high_trigger = yes
				can_call_low_doom_black_crusade = yes
			}
			custom_tooltip = {
				text = no_chaos_religious_head_tt
				NOT = {
					rightful_religious_head_scope = {
						character = yes
					}
				}
			}
			OR = {
				trait = everchosen
				AND = {
					OR = {
						is_doom_low_trigger = yes
						is_doom_medium_trigger = yes
					}
					OR = {
						AND = {
							is_chaos_champion_chosen_or_prince_trigger = no
							prestige = 10000
							piety = 1000
						}
						AND = {
							is_chaos_champion_chosen_or_prince_trigger = yes
							prestige = 5000
							piety = 500
						}
					}
				}
				AND = {
					is_doom_high_trigger = yes
					OR = {
						AND = {
							is_chaos_champion_chosen_or_prince_trigger = no
							prestige = 5000
							piety = 500
						}
						AND = {
							is_chaos_champion_chosen_or_prince_trigger = yes
							prestige = 2500
							piety = 250
						}
					}
				}
				AND = {
					is_doom_very_high_trigger = yes
					prestige = 2500
					piety = 250
				}
				AND = {
					is_nomadic = yes
					realm_size = 25
					is_chaos_champion_chosen_or_prince_trigger = yes
				}
				AND = {
					core_chaos_realms_occupied = yes
					is_chaos_champion_chosen_or_prince_trigger = yes
				}
			}
		}

		effect = {
			character_event = { id = blckcs.6 }
			hidden_tooltip = {
				change_variable = { which = "global_black_crusades_declared" value = 1 }
				if = {
					limit = { religion = chaos }
					change_variable = { which = "global_undivided_black_crusades_declared" value = 1 }
				}
				else_if = {
					limit = { religion = tzeentch }
					change_variable = { which = "global_tzeentch_black_crusades_declared" value = 1 }
				}
				else_if = {
					limit = { religion = nurgle }
					change_variable = { which = "global_nurgle_black_crusades_declared" value = 1 }
				}
				else_if = {
					limit = { religion = khorne }
					change_variable = { which = "global_khorne_black_crusades_declared" value = 1 }
				}
				else_if = {
					limit = { religion = slaanesh }
					change_variable = { which = "global_slaanesh_black_crusades_declared" value = 1 }
				}
			}

			if = {
				limit = {
					NOT = { trait = everchosen }
					core_chaos_realms_occupied = no
					OR = {
						is_doom_low_trigger = yes
						is_doom_medium_trigger = yes
					}
					is_nomadic = no
					is_chaos_champion_chosen_or_prince_trigger = no
				}
				prestige = -10000
				piety = -1000
			}
			else_if = {
				limit = {
					NOT = { trait = everchosen }
					core_chaos_realms_occupied = no
					OR = {
						is_doom_high_trigger = yes
						AND = {
							OR = {
								is_doom_low_trigger = yes
								is_doom_medium_trigger = yes
							}
							is_chaos_champion_chosen_or_prince_trigger = no
						}
					}
				}
				prestige = -5000
				piety = -500
			}
			else_if = {
				limit = {
					NOT = { trait = everchosen }
					core_chaos_realms_occupied = no
					OR = {
						is_doom_very_high_trigger = yes
						AND = {
							is_doom_high_trigger = yes
							is_chaos_champion_chosen_or_prince_trigger = no
						}
					}
				}
				prestige = -2500
				piety = -250
			}
			set_character_flag = must_declare_black_crusade
			if = {
				limit = {
					is_doom_low_trigger = yes
				}
				set_character_flag = low_doom_black_crusade
			}
			primary_title = {
				ROOT = {
					religion_scope = {
						set_religion_head = PREVPREV
					}
				}
				set_title_flag = temp_religion_head
			}
			set_global_flag = self_declared_black_crusade
			character_event = { id = blckcs.1 days = 3650 }
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.01
				NOT = { total_years_played = 25 }
			}
		}
	}
	join_black_crusade_defenders = {
		ai = no
		is_high_prio = yes

	 	potential = {
			open_follower_of_any_chaos_gods = no
			mercenary = no
			is_playable = yes
			any_independent_ruler = {
				controls_religion = yes
				religion_group = chaos_gods_group
				any_war = {
					using_cb = new_crusade
				}
				is_within_diplo_range = ROOT
			}
		}

		allow = {
				war = no
		}

		effect = {
			any_independent_ruler = {
				limit = {
					NOT = { religion_group = chaos_gods_group }
					any_war = {
						using_cb = new_crusade
					}
					is_within_diplo_range = ROOT
					is_primary_war_defender = yes
				}
				save_event_target_as = crusade_character
			}

			join_defender_wars = event_target:crusade_character
		}

		ai_will_do = {
			factor = 0.5
			modifier = {
				factor = 0.5
				independent = no
			}
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 0
				trait = craven
			}
			modifier = {
				factor = 0
				#Isolated realms should not join
				independent = yes
				NOT = {
					any_realm_province = {
						any_neighbor_province = {
							has_owner = yes
							holder_scope = {
								top_liege = {
									religion_group = old_world_group
									NOT = { same_realm = ROOT }
								}
							}
						}
					}
				}
			}
			modifier = {
				factor = 3
				rightful_religious_head_scope = {
					ROOT = {
						any_liege = {
							character = PREVPREV
						}
					}
				}
			}
		}
	}
	become_chaos_horde_government = {
		ai_check_interval = 60
		is_high_prio = yes
		only_rulers = yes
		potential = {
			NOT = { has_character_flag = converted_to_chaos_horde }
			NOR = {
				culture_group = daemonic_group
				culture_group = beastman_group
			}
			is_nomadic = no
			independent = yes
			is_government_potential = chaos_host_government
			OR = {
				ai = yes
				has_dlc = "Horse Lords"
			}
			capital_scope = {
				region = world_chaos_wastes
			}
			#Only available if you only live in the wastes.
			NOT = {
				any_realm_province = {
					NOT = { region = world_chaos_wastes }
				}
			}
			is_ruler = yes
			religion_group = chaos_gods_group
			NOT = { religion = hashut }
			NOT = { tier = baron }
			OR = {
				ai = no
				independent = yes
				AND = {
					higher_tier_than = DUKE
					top_liege = { government = chaos_host_government }
				}
			}
		}

		allow = {
			OR = {
				independent = yes
				AND = {
				higher_tier_than = DUKE
				top_liege = { government = chaos_host_government }
				}
			}
			war = no
			prisoner = no
		}

		effect = {
			set_character_flag = converted_to_chaos_horde
			character_event = { id = schaos.1 }
		}

		ai_will_do = {
			factor = 0.1
			modifier = {
				factor = 0
				wealth = 50
			}
			modifier = {
				factor = 5
				wealth < 0
			}
			modifier = {
				factor = 2
				is_traditional_nomad = yes
			}
		}
	}
	become_warherd_government = {
		ai_check_interval = 12
		is_high_prio = yes
		only_rulers = yes

		potential = {
			culture_group = beastman_group
			NOT = { has_character_flag = converted_to_warherd }
			NOT = { culture_group = daemonic_group }
			is_nomadic = no
			is_government_potential = beastman_government
			OR = {
				ai = yes
				has_dlc = "Horse Lords"
			}
			is_ruler = yes
		}

		allow = {
			war = no
			prisoner = no
		}

		effect = {
			set_character_flag = converted_to_warherd
			character_event = { id = schaos.106 }
		}

		ai_will_do = {
			factor = 0.5
			modifier = {
				factor = 10
				is_traditional_nomad = yes
			}
		}
	}
	summon_daemon_host = {
		ai_check_interval = 12
		is_high_prio = yes
		only_playable = yes

		potential = {
			is_ruler = yes
			age = 16
			prisoner = no
			OR = {
				trait = prince_khorne
				trait = prince_nurgle
				trait = prince_slaanesh
				trait = prince_undivided
				trait = prince_tzeentch
			}
			primary_title = { higher_tier_than = BARON }
			NOT = { has_character_modifier = summoned_daemons_timer }
		}

		allow = {
			war = yes
			OR = {
				trait = prince_khorne
				trait = prince_nurgle
				trait = prince_slaanesh
				trait = prince_undivided
				trait = prince_tzeentch
			}
			piety = 500
			prisoner = no
		}
		effect = {
			piety = -500
			add_character_modifier = {
				name = summoned_daemons_timer
				duration = 1200
				hidden = yes
			}
			hidden_tooltip = {
				character_event = { id = schaos.102 }
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 10
				war = yes
			}
			modifier = {
				factor = 0.5
				NOT = { piety = 800 }
			}
			modifier = {
				factor = 0.5
				trait = brave
			}
			modifier = {
				factor = 1.5
				trait = prince_tzeentch
			}
			modifier = {
				factor = 1.5
				trait = craven
			} #endmodifier
		} #endaiwilldo
	}
	tzeentchian_sacrifice = {
		ai_check_interval = 6
		is_high_prio = yes
		only_rulers = yes

		potential = {
			prisoner = no
			is_ruler = yes
			religion = tzeentch
			age = 12
			trait = creature_human
			NOR = {
				trait = khorne_demon
				trait = nurgle_demon
				trait = slaanesh_demon
				trait = undivided_demon
				trait = tzeentch_demon
				trait = incapable
				trait = questing
				trait = studying_magic
				trait = monster_hunting
			}
		}

		allow = {
			any_courtier = {
				prisoner = yes
				OR = {
					dynasty = ROOT
					any_lover = { character = ROOT }
					any_friend = { character = ROOT }
					any_spouse = { character = ROOT }
				}
				count = 9
				NOR = {
					trait = incapable
					trait = infirm
					trait = blinded
					age = 50
					trait = ill
					trait = leper
					trait = eunuch
					trait = dim
					trait = dumb
					trait = slow
					trait = idiot
					trait = imbecile
					trait = is_fat
					trait = is_malnourished
					trait = fragile
					trait = weak
					trait = dwarf
					trait = hunchback
				}
			}
		}

		effect = {
			prestige = -400
			piety = -400
			hidden_tooltip = {
				random_list = {
					50 = {
						character_event = { id = schaosfl.6001 }
					}
					50 = {
						character_event = { id = schaosfl.6002 }
					}
				}
				any_courtier = {
					limit = {
						prisoner = yes
						OR = {
							dynasty = ROOT
							any_lover = { character = ROOT }
							any_friend = { character = ROOT }
							any_spouse = { character = ROOT }
						}
						count = 9
						NOR = {
							trait = incapable
							trait = infirm
							trait = blinded
							age = 50
							trait = ill
							trait = leper
							trait = eunuch
							trait = dim
							trait = dumb
							trait = slow
							trait = idiot
							trait = imbecile
							trait = is_fat
							trait = is_malnourished
							trait = fragile
							trait = weak
							trait = dwarf
							trait = hunchback
						}
					}
					if = {
						limit = { is_invincible_trigger = yes }
						antideath_effect = yes
						break = yes
					}
					else_if = {
						death = { death_reason = death_sacrificed killer = ROOT }
					}
				}
			} #closes hiddentooltip
		} #closes effect

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 2.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = cynical
			}
			modifier = {
				factor = 0.5
			}
		}
	}
	khorne_death_tournament = {
		ai_check_interval = 36
		is_high_prio = yes
		only_playable = yes

		potential = {
			age = 16
			OR = {
				trait = creature_human
				trait = prince_khorne
			}
			OR = {
				is_tribal = yes
				is_nomadic = yes
			}
			higher_tier_than = COUNT
			is_ruler = yes
			custom_tooltip = {
				text = IS_NOT_INCAPACITATED
				is_incapacitated_trigger = no
			}
			prisoner = no
			open_follower_of_khorne = yes
			war = no
			NOR = {
				has_character_flag = khornetournament_participant
				has_character_modifier = kh_tournament_cooldown
		 		trait = pregnant
		 		trait = questing
	 		}
			OR = {
				any_courtier = {
					OR = {
						trait = creature_human
						trait = prince_khorne
					}
					custom_tooltip = {
						text = IS_NOT_INCAPACITATED
						is_incapacitated_trigger = no
					}
					prisoner = no
					open_follower_of_khorne = yes
					war = no
					age = 16
					NOR = {
						has_character_flag = khornetournament_participant
					 	trait = pregnant
					}
					count = 2
				}
				any_vassal = {
					OR = {
						trait = creature_human
						trait = prince_khorne
					}
					custom_tooltip = {
						text = IS_NOT_INCAPACITATED
						is_incapacitated_trigger = no
					}
					open_follower_of_khorne = yes
					war = no
					age = 16
					NOR = {
						has_character_flag = khornetournament_participant
						trait = pregnant
					}
					count = 2
				}
			}
		}

		allow = {
			prestige = 250
			wealth = 25
			independent = yes
			war = no
			prisoner = no
			custom_tooltip = {
				text = IS_NOT_INCAPACITATED
				is_incapacitated_trigger = no
			}
		}

		effect = {
			prestige = -250
			wealth = -25
			hidden_tooltip = {
				set_variable = { which = "khtournament_player" value = 0 }
				set_character_flag = khornetournament_participant
				set_character_flag = kh_tournament_host
				set_character_flag = do_not_disturb
				clr_character_flag = kh_fight_1
				clr_character_flag = kh_fight_2
				clr_character_flag = kh_fight_3
				clr_character_flag = kh_fight_4
				clr_character_flag = kh_fight_5
				clr_character_flag = kh_fight_6
				clr_character_flag = kh_fight_7
				clr_character_flag = kh_fight_8
				clr_character_flag = kh_fight_9
				clr_character_flag = kh_fight_10
				clr_character_flag = kh_fight_11
				diplomatic_immunity = yes
				character_event = { id = schaosfl.1 }
				character_event = { id = schaosfl.1900 days = 30 } #Cleanup flags and stuff
				add_character_modifier = {
					name = kh_tournament_cooldown
					hidden = yes
					duration = 72000
				}
				any_vassal = {
					limit = {
						OR = {
							trait = creature_human
							trait = prince_khorne
						}
						custom_tooltip = {
							text = IS_NOT_INCAPACITATED
							is_incapacitated_trigger = no
						}
						open_follower_of_khorne = yes
						NOT = { trait = in_hiding }
						prisoner = no
						war = no
						age = 16
						NOR = {
							has_character_flag = khornetournament_participant
							trait = pregnant
						}
					}
					letter_event = { id = schaosfl.1001 days = 2 random = 5 }
					set_character_flag = do_not_disturb
					diplomatic_immunity = yes
					character_event = { id = schaosfl.1900 days = 30 }
				} #Cleanup flags and stuff
				any_courtier = {
					limit = {
						OR = {
							trait = creature_human
							trait = prince_khorne
						}
						custom_tooltip = {
							text = IS_NOT_INCAPACITATED
							is_incapacitated_trigger = no
						}
						open_follower_of_khorne = yes
						war = no
						age = 16
						NOR = {
							has_character_flag = khornetournament_participant
							trait = pregnant
						}
					}
					letter_event = { id = schaosfl.1001 days = 2 random = 5 }
					set_character_flag = do_not_disturb
					diplomatic_immunity = yes
					character_event = { id = schaosfl.1900 days = 30 }
				} #Cleanup flags and stuff
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.1
			}
			modifier = {
				factor = 1.5
				trait = brave
			}
			modifier = {
				factor = 1.5
				trait = wroth
			}
			modifier = {
				factor = 0.15
				trait = craven
			}
			modifier = {
				factor = 0
				trait = maimed
			}
			modifier = {
				factor = 0.25
				trait = wounded
			}
			modifier = {
				factor = 3
				trait = champion_khorne
			}
			modifier = {
				factor = 10
				trait = chosen_khorne
			}
		} #closesaiwilldo
	}
	join_harem_decision = {
		ai = no
		only_rulers = yes
		is_high_prio = yes

		potential = {
			NOR = {
				is_pregnant = yes
				trait = incapable
				trait = incapacitated
				trait = studying_magic
				trait = infirm
				trait = maimed
				trait = retired_with_harem
				trait = in_hiding
				trait = questing
				trait = blood_questing
				trait = monster_hunting
			}
			is_ruler = yes
			age = 14
			OR = {
				religion = cult_of_pleasure
				religion = atharti
				religion = slaanesh
			}
			any_consort = {
				NOT = { trait = eunuch }
				count = 2
			}
		}

		allow = {
			NOT = { trait = celibate }
			NOT = { trait = pregnant }
			NOT = { trait = chaste }
			custom_tooltip = { text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no }
			prisoner = no
			is_ill = no
			war = no }
		effect = {
		hidden_tooltip = { add_trait = retired_with_harem
				character_event = { id = haremsins.001 }
				if = { limit = { NOT = { trait = lustful } }
				random = { chance = 25
					add_trait = lustful
					character_event = { id = 38272 }
						}
					}
				}
		}

		ai_will_do = { factor = 0 }
	}
	out_harem_decision = {
		ai = no
		is_high_prio = yes

		potential = {
			trait = retired_with_harem
		}

		allow = {
			NOR = {
				trait = lustful
				trait = hedonist
				trait = slothful
			}
		}

		effect = {
			remove_trait = retired_with_harem
			hidden_tooltip = {
				character_event = { id = haremsins.002 }
				clr_character_flag = harem_event_happened
				remove_character_modifier = horny_harem_mod
				random = {
					chance = 25
					remove_trait = drunkard
					remove_trait = gluttonous
					remove_trait = slothful
				}
			}
		}

		ai_will_do = { factor = 0 }
	}
}
targetted_decisions = {
	vassal_eat_soul = {
		ai_check_interval = 12
		filter = court
		ai_target_filter = court
		only_playable = yes

		from_potential = {
			primary_title = { higher_tier_than = BARON }
			NOT = { trait = incapable }
			age = 14
			OR = {
				trait = prince_khorne
				trait = prince_nurgle
				trait = prince_slaanesh
				trait = prince_tzeentch
				trait = prince_undivided
			}
		}

		potential = {
			prisoner = yes
			host = { character = FROM }
			NOR = {
				trait = creature_nehekharan
				trait = khorne_demon
				trait = nurgle_demon
				trait = slaanesh_demon
				trait = undivided_demon
				trait = tzeentch_demon
			}
			is_invincible_trigger = no
			is_vampire_trigger = no
		}

		allow = {
			prisoner = yes
			FROM = { prestige = 10 }
		}

		effect = {
			hidden_tooltip = {
				FROM = {
					prestige = 50
					character_event = { id = schaos.100 }
				}
			}
			prisoner = no
			if = {
				limit = { is_invincible_trigger = yes }
				antideath_effect = yes
				break = yes
			}
			ROOT = {
				character_event = { id = schaos.101 }
			}
			death = { death_reason = death_execution killer = FROM }
			hidden_tooltip = {
				FROM = {
					any_vassal = {
						limit = { religion = cadai }
						opinion = {
							modifier = opinion_barbaric
							who = FROM
						}
					} #closes anyvassal
				} #closes from
				any_dynasty_member = {
					limit = { religion_group = cytharai_group }
					opinion = {
						modifier = opinion_soulsucked_family_druchii
						who = FROM
					}
				} #closes anydynastyme
				any_dynasty_member = {
					limit = { NOT = { religion_group = cytharai_group } }
					opinion = {
						modifier = opinion_soulsucked_family
						who = FROM
					}
				} #closes anydynastyme
			} #closes hiddentooltip
			FROM = {
				remove_opinion = { who = ROOT modifier = opinion_traitor }
				remove_opinion = { who = ROOT modifier = opinion_rebel_traitor }
				remove_opinion = { who = ROOT modifier = opinion_dishonorable }
			}
			FROM = {
				if = {
					limit = {magic_offmap_enabled_trigger = yes}
					sound_effect = china_grace_gain
					hidden_tooltip = {
						add_character_modifier = {
							name = channeling_cooldown
							months = 3
						}
						channeling_effect = yes
						custom_tooltip = {
							text = mutations_test_tt
							mutation_toughness_test_effect = yes
						}
					}
				}
			}
			FROM = {
				if = {
					limit = { NOT = { trait = cruel } }
					add_trait = cruel
					hidden_tooltip = {
						character_event = { id = 38259 } #Notify Cruel
					}
				} #closes if
			} #closesfrom
		} #closes effect

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.25
			}
			modifier = {
				factor = 0.4
				reverse_opinion = { who = FROM value = 20 }
			}
			modifier = {
				factor = 0
				FROM = { war = yes }
			}
			modifier = {
				factor = 0.25
				reverse_opinion = { who = FROM value = 40 }
			}
			modifier = {
				factor = 5
				NOT = { reverse_opinion = { who = FROM value = -25 } }
			}
			modifier = {
				factor = 0.75
				prestige = 200
			}
			modifier = {
				factor = 0.05
				prestige = 1000
			}
			modifier = {
				factor = 0
				FROM = { trait = kind }
			}
			modifier = {
				factor = 2
				ROOT = { trait = cruel }
			}
		}
	}
	vassal_spread_disease = {
		ai_check_interval = 12
		filter = court
		ai_target_filter = court
		only_playable = yes

		from_potential = {
			primary_title = { higher_tier_than = BARON }
			NOT = { trait = incapable }
			age = 14
			OR = {
				trait = has_nurgles_rot
				trait = champion_nurgle
				trait = chosen_nurgle
				trait = prince_nurgle
				trait = lore_nurgle
			}
			NOT = { has_character_modifier = magic_cooldown }
		}

		potential = {
			OR = {
				trait = creature_human
				trait = creature_elf
				trait = creature_dwarf
				trait = creature_chaos_dwarf
				trait = creature_halfling
				trait = creature_beastman
				trait = creature_skaven
				trait = creature_ogre
			}
			OR = {
				prisoner = yes
				religion = nurgle
			}
			primary_title = { higher_tier_than = BARON }
			NOR = {
				trait = creature_nehekharan
				trait = khorne_demon
				trait = nurgle_demon
				trait = slaanesh_demon
				trait = undivided_demon
				trait = tzeentch_demon
			}
			NOT = { character = FROM }
			is_undead_trigger = no
		}

		allow = {
			FROM = {
				prestige = 10
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
			}
		}

		effect = {
			hidden_tooltip = {
				FROM = {
					character_event = { id = schaosfl.8 }
				}
				add_character_modifier = {
					name = magic_cooldown
					duration = 300
					hidden = yes
				}
				random = {
					chance = 50
					add_offmap_currency = {
						offmap = nurgle_warp
						value = 250
					}
				}
			}
		} #closes effect

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.05
			}
			modifier = {
				factor = 1.5
				reverse_opinion = { who = FROM value = 20 }
			}
			modifier = {
				factor = 0
				FROM = { war = yes }
			}
			modifier = {
				factor = 2
				reverse_opinion = { who = FROM value = 40 }
			}
			modifier = {
				factor = 0.15
				NOT = { reverse_opinion = { who = FROM value = -25 } }
			}
			modifier = {
				factor = 0.75
				prestige = 200
			}
			modifier = {
				factor = 0.05
				prestige = 1000
			}
			modifier = {
				factor = 2
				FROM = { trait = kind }
			}
			modifier = {
				factor = 0
				ROOT = { trait = greedy }
			}
		}
	}
	make_noble_concubine = { #To cover male rulers wanting to take landed/underage females as consorts
		ai_check_interval = 12
		filter = court
		ai_target_filter = court
		only_rulers = yes

		from_potential = {
			is_ruler = yes
			age = 14
			is_female = no
			NOT = { trait = incapable }
			OR = {
				NOT = { num_of_consorts = 6 }
				AND = {
					religion = slaanesh
					NOT = { num_of_consorts = 8 }
				}
			}
			OR = {
				religion = cult_of_pleasure
				religion = atharti
				religion = slaanesh
				religion = amazon
		  }
		}

		potential = {
			prisoner = yes
			host = { character = FROM }
			NOR = {
				is_disease_immune_race = yes
			}
			OR = {
				trait = creature_human
				trait = creature_elf
				trait = creature_dwarf
				trait = creature_chaos_dwarf
				trait = creature_halfling
				trait = creature_ogre
				trait = creature_amazon
			}
			is_female = yes
			OR = {
				is_ruler = yes
				NOT = { age = 16 }
			}
			OR = {
				age = 16
				AND = {
					FROM = {
						OR = {
							religion = cult_of_pleasure
							religion = atharti
							religion = slaanesh
						}
					}
					age = 10
				}
			}
			NOT = { character = FROM }                            # Can't do this decision on yourself...
			NOT = { trait = incapable }
		}

		allow = {
			prisoner = yes
		}

		effect = {
			if = {
				limit = { is_ruler = yes }
				abdicate = yes
			}
			add_consort = FROM
			add_lover = FROM
			move_character = FROM
			clr_character_flag = captured_in_battle
			opinion = {
				who = FROM
				modifier = opinion_forced_consort
			}
			hidden_tooltip = {
				character_event = { id = rape.0004 }
				spouse = {
					character_event = { id = rape.0006 }
				}
				any_child = {
					character_event = { id = rape.0005 }
				}
				any_sibling = {
					character_event = { id = rape.0005 }
				}
				father = {
					character_event = { id = rape.0005 }
				}
				mother = {
					character_event = { id = rape.0005 }
				}
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.05 # Less likely to do it
			}
			modifier = {
				factor = 0
				reverse_opinion = { who = FROM value = 20 }
			}
			modifier = {
				factor = 0.05
				age = 40
			}
			modifier = {
				factor = 0.05
				trait = ugly
			}
			modifier = {
				factor = 2
				trait = fair
			}
			modifier = {
				factor = 1.2
				prestige = 100
			}
			modifier = {
				factor = 1.2
				prestige = 200
			}
			modifier = {
				factor = 1.2
				prestige = 300
			}
			modifier = {
				factor = 1.2
				prestige = 400
			}
			modifier = {
				factor = 1.2
				prestige = 500
			}
			modifier = {
				factor = 0.1
				FROM = {
					NOT = { trait = homosexual }
					is_female = no
				}
				is_female = no
			}
			modifier = {
				factor = 0.1
				FROM = {
					NOT = { trait = homosexual }
					is_female = yes
				}
				is_female = yes
			}
			modifier = {
				factor = 0.1
				FROM = {
					trait = homosexual
					is_female = no
				}
				is_female = yes
			}
			modifier = {
				factor = 0.1
				FROM = {
					trait = homosexual
					is_female = yes
				}
				is_female = no
			}
			modifier = {
				factor = 0 #Enemy has your relative
				FROM = {
					any_current_enemy = {
						dynasty = ROOT
						is_close_relative = ROOT
						any_courtier = {
							is_close_relative = FROM
							dynasty = FROM
						}
					}
				}
			}
			modifier = {
				factor = 0.1
				FROM = {
					OR = {
						trait = kind
						trait = just
					}
				}
			}
			modifier = {
				factor = 2
				FROM = {
					OR = {
						trait = cruel
						trait = zealous
					}
				}
			}
			modifier = {
				factor = 0.2
				any_consort = { always = yes }
			}
		}
	}
	make_pet_consort = {
		ai_check_interval = 12
		filter = court
		ai_target_filter = court
		only_rulers = yes

		from_potential = {
			is_ruler = yes
			age = 14
			#NOT = { trait = incapable }
			OR = {
				religion = cult_of_pleasure
				religion = atharti
				religion = slaanesh
				religion = amazon
				religion = vampiric
			}
			OR = {
				NOT = { num_of_consorts = 6 }
				  AND = {
					religion = slaanesh
					NOT = {
						num_of_consorts = 8
					}
				}
			}
		}

		potential = {
			NOT = {
				is_close_relative = FROM
			}
			AND = {
				host = { character = FROM }
				NOT = { character = FROM }
				age = 16
				OR = {
					AND = {
						FROM = {
							religion = amazon
							is_female = yes
						}
						ROOT = { is_female = no }
					}
					AND = {
						ROOT = { is_female = no }
						FROM = { is_female = yes }
					}
				}
				OR = {
					trait = creature_human
					trait = creature_elf
					trait = creature_dwarf
					trait = creature_chaos_dwarf
					trait = creature_halfling
					trait = creature_ogre
					trait = creature_amazon
				}
			}
			NOT = { trait = incapable }
			NOR = {
				is_married = FROM
				is_consort = FROM
			}
			NOR = {
				trait = vampire_carstein_visible
				trait = vampire_blood_visible
				trait = vampire_lahmian_visible
				trait = vampire_strigoi_visible
				trait = vampire_necrarch_visible
				trait = vampire_jade_visible
				trait = vampire_mahtmasi_visible
				trait = khemri_tomb_king
				trait = khorne_demon
				trait = undivided_demon
				trait = nurgle_demon
				trait = tzeentch_demon
				trait = slaanesh_demon
				trait = druchii_witch_elf
				trait = druchii_assassin
				trait = creature_beastman
			}
			NAND = {
				FROM = { religion_group = cytharai_group }
				trait = druchii_sorceress
			}
		}

		allow = {
			OR = {
				prisoner = yes
				is_ruler = no
			}
		}

		effect = {
			if = {
				limit = { is_ruler = yes }
				abdicate = yes
			}
			if = {
				limit = {
					FROM = { religion = amazon }
				}
				set_character_flag = amazon_exception
				religion = amazon
			}
			if = {
				limit = { is_married = yes }
				any_spouse = { remove_spouse = ROOT }
			}
			if = {
				limit = {
					FROM = { is_female = yes }
					is_female = no
				}
				FROM = {
					add_consort = ROOT
				}
			}
			if = {
				limit = {
					FROM = { is_female = no }
					is_female = yes
				}
				FROM = {
					add_consort = ROOT
				}
			}
			if = {
				limit = {
					FROM = { is_female = yes }
					is_female = yes
				}
				hidden_effect = {
					set_gender = male
				}
				FROM = {
					add_consort = ROOT
				}
				hidden_effect = {
					set_gender = female
				}
				add_lover = FROM
			}
			if = {
				limit = {
					FROM = { is_female = no }
					is_female = no
				}
				hidden_effect = {
					set_gender = female
				}
				FROM = {
					add_consort = ROOT
				}
				hidden_effect = {
					set_gender = male
				}
				add_lover = FROM
			}
			if = {
				limit = { FROM = { trait = creature_amazon } }
				FROM = { decadence = 1 }
			}
			move_character = FROM
			clr_character_flag = captured_in_battle
			opinion = {
				who = FROM
				modifier = opinion_forced_consort
			}
			hidden_tooltip = {
				character_event = { id = rape.0004 }
				spouse = {
					character_event = { id = rape.0006 }
				}
				any_child = {
					character_event = { id = rape.0005 }
				}
				any_sibling = {
					character_event = { id = rape.0005 }
				}
				father = {
					character_event = { id = rape.0005 }
				}
				mother = {
					character_event = { id = rape.0005 }
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 1.2
				prestige = 500
			}
			modifier = {
				factor = 0.5
				FROM = { decadence = 50 }
			}
			modifier = {
				factor = 2
				FROM = { trait = lustful }
			}
			modifier = {
				factor = 0
				FROM = { trait = celibate }
			}
			modifier = {
				factor = 1.2
				FROM = { trait = proud }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = chaste }
			}
			modifier = {
				factor = 0.75
				FROM = { is_married = yes }
			}
			modifier = {
				factor = 0
				FROM = { num_of_lovers = 3 }
			}
			modifier = {
				factor = 0
				FROM = {
					NOT = { trait = homosexual }
					is_female = no
				}
				is_female = no
			}
			modifier = {
				factor = 0
				FROM = {
					NOT = { trait = homosexual }
					is_female = yes
				}
				is_female = yes
			}
			modifier = {
				factor = 0
				FROM = {
					trait = homosexual
					is_female = no
				}
				is_female = yes
			}
			modifier = {
				factor = 0
				FROM = {
					trait = homosexual
					is_female = yes
				}
				is_female = no
			}

		}
	}
	manage_pet_consort = { #For all concubinages, mostly used for Slaaneshi flavor
		ai_check_interval = 12
		filter = court
		ai_target_filter = court
		only_rulers = yes

		from_potential = {
			is_ruler = yes
			NOT = { has_character_flag = handling_consort }
			ai = no
			OR = {
				religion = cult_of_pleasure
				religion = atharti
				religion = slaanesh
				religion = amazon
			}
			age = 14
		}

		potential = {
			age = 10
			host = { character = FROM }
			NOR = {
				has_character_modifier = consort_cooldown
				character = FROM
			}
			is_consort = FROM
			FROM = {
				OR = {
					religion = cult_of_pleasure
					religion = atharti
					religion = slaanesh
				}
			}
		}

		allow = {
			FROM = { prestige = 10 }
		}

		#pinging consort and giving options
		effect = {
			FROM = {
				prestige = -10
				set_character_flag = handling_consort
			}
			character_event = { id = rape.0012 }
			add_character_modifier = {
				name = consort_cooldown
				duration = 90
				hidden = yes
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.02 # Less likely to do it
			}
			modifier = {
				factor = 0.01
				NOT = { reverse_opinion = { who = FROM value = 0 } }
			}
			modifier = {
				factor = 1.2
				NOT = { age = 40 }
			}
			modifier = {
				factor = 1.5
				FROM = { trait = cruel }
			}
			modifier = {
				factor = 1.5
				trait = ugly
			}
			modifier = {
				factor = 0.5
				trait = fair
			}
			modifier = {
				factor = 0.5
				trait = strong
			}
			modifier = {
				factor = 0.75
				trait = tall
			}
			modifier = {
				factor = 1.25
				FROM = { trait = lustful }
			}
			modifier = {
				factor = 1.1
				FROM = { trait = proud }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = chaste }
			}
			modifier = {
				factor = 0.75
				FROM = { is_married = yes }
			}
			modifier = {
				factor = 1.5
				FROM = { any_consort = { count = 3 } }
			}
			modifier = {
				factor = 2.75
				FROM = { age = 30
					NOT = { age = 40 } }
			}
			modifier = {
				factor = 0.5
				FROM = { age = 40 }
			}
			modifier = {
				factor = 0.2 #Enemy has your relative
				FROM = {
					any_current_enemy = {
						dynasty = ROOT
						is_close_relative = ROOT
						any_courtier = {
							is_close_relative = FROM
							dynasty = FROM
						}
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					OR = {
						trait = kind
						trait = just
					}
				}
			}
		}
	}
	dismiss_concubine = { #The vanilla option is no longer avaiable to ai to avoid rabbit-elves
		ai_check_interval = 12
		filter = court
		ai_target_filter = court
		only_rulers = yes

		from_potential = {
			is_ruler = yes
			ai = no
			age = 16
			is_female = no
			FROM = {
				NOR = {
					religion = cult_of_pleasure
					religion = atharti
					religion = slaanesh
				}
			}
		}

		potential = {
			is_consort = FROM
			host = { character = FROM }
			NOT = { character = FROM }
		}

		allow = {
			FROM = { prestige = 10 }
		}

		effect = {
			FROM = {
				prestige = -10
				remove_consort = ROOT
			}
			opinion = {
				modifier = opinion_set_aside
				who = FROM
			}
		}

		ai_will_do = {
			factor = 0
		}
	}
	pleasure_twist = { #For perverting other characters as a cultist
		ai_check_interval = 12
		ai_target_filter = realm
		only_rulers = yes
		from_potential = {
			is_ruler = yes
			custom_tooltip = {
				text = IS_NOT_INCAPACITATED
				is_incapacitated_trigger = no
			}
			society_member_of = cult_of_pleasure
			NOR = {
				has_any_opinion_modifier = opinion_twisting
				religion = atharti
				religion = slaanesh
			}
			age = 16
		}

		potential = {
			is_within_diplo_range = FROM
			age = 14
			NOR = {
				character = FROM
				society_member_of = cult_of_pleasure
				religion = atharti
				religion = slaanesh
				has_any_opinion_modifier = opinion_recently_twisted
				has_any_opinion_modifier = opinion_twisting
				is_demon_trigger = yes
				NOT = { trait = everqueen }
				NOT = { trait = everqueen_heir }
			}
		}

		allow = {
			FROM = {
				prestige = 10
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
					has_impious_trait_trigger = yes
				}
			}
		}

		# pinging target and giving options
		effect = {
			FROM = {
				hidden_tooltip = {
					random = {
						chance = 5	#Mutation chance
						character_event = { id = spleasure.57 days = 40 random = 20 }
					}
				}
				prestige = -10
				opinion = {
					who = ROOT
					modifier = opinion_twisting
					months = 12000
				}
			}
			character_event = { id = spleasure.68 }
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.015 # Less likely to do it
			}
			modifier = {
				factor = 1.5
				FROM = { trait = cruel }
			}
			modifier = {
				factor = 1.5
				trait = ugly
			}
			modifier = {
				factor = 0.5
				trait = fair
			}
			modifier = {
				factor = 0.5
				trait = strong
			}
			modifier = {
				factor = 0.75
				trait = tall
			}
			modifier = {
				factor = 1.25
				FROM = { trait = lustful }
			}
			modifier = {
				factor = 1.25
				FROM = { trait = deceitful }
			}
			modifier = {
				factor = 1.1
				FROM = { trait = proud }
			}
			modifier = {
				factor = 1.5
				trait = chaste
			}
			modifier = {
				factor = 1.5
				trait = celibate
			}
			modifier = {
				factor = 1.5
				trait = temperate
			}
			modifier = {
				factor = 1.5
				trait = diligent
			}
			modifier = {
				factor = 1.5
				trait = kind
			}
			modifier = {
				factor = 0.5
				trait = gluttonous
			}
			modifier = {
				factor = 0.5
				trait = wroth
			}
			modifier = {
				factor = 0.5
				trait = envious
			}
			modifier = {
				factor = 0.5
				trait = lustful
			}
			modifier = {
				factor = 0.5
				trait = slothful
			}
			modifier = {
				factor = 1.25
				is_married = yes
			}
			modifier = {
				factor = 0
				FROM = {
					OR = {
						trait = kind
						trait = just
					}
				}
			}
		}
	}
	slaanesh_quirk = { #Slaaneshi having fun with their friends and relatives
		ai_check_interval = 12
		filter = court
		ai_target_filter = court
		from_potential = {
			is_incapacitated_trigger = no
			NOT = { has_character_modifier = ai_quirking_cooldown }
			NOT = { has_any_opinion_modifier = opinion_quirking }
			OR = {
				AND = {
					society_member_of = cult_of_pleasure
					society_rank >= 2
				}
				AND = {
					society_member_of = cult_of_slaanesh
					society_rank >= 2
				}
				religion = atharti
				religion = slaanesh
			}
			OR = {
				trait = creature_elf
				trait = creature_chaos_dwarf
				trait = creature_dwarf
				trait = creature_human
				trait = creature_amazon
				trait = slaanesh_demon
			}
			age = 16
		}

		potential = {
			is_within_diplo_range = FROM
			age = 16	#For now...
			prisoner = no
			NOT = { trait = incapacitated }
			NOT = { trait = in_hiding }
			OR = {
				trait = creature_elf
				trait = creature_chaos_dwarf
				trait = creature_dwarf
				trait = creature_human
				trait = creature_amazon
				trait = slaanesh_demon
			}
			OR = {
				liege = { character = FROM }
				FROM = { any_consort = { character = ROOT } }
				any_lover = { character = FROM }
				spouse = { character = FROM }
				FROM = { trait = slaanesh_demon }
			}
			NOT = { character = FROM }
			custom_tooltip = {
				text = IS_NOT_INCAPACITATED
				is_incapacitated_trigger = no
			}
			NOT = { has_any_opinion_modifier = opinion_recently_quirked }
			NOT = { has_any_opinion_modifier = opinion_quirking }
			NOT = { is_demon_trigger = yes }
		}

		allow = {
			FROM = { piety = 10 }
		}

		# pinging target and giving options
		effect = {
			FROM = {
				piety = -10
				hidden_tooltip = {
					random = {
						chance = 5	#Mutation chance
						character_event = { id = spleasure.57 days = 140 random = 200 }
					}
				}
				if = {
					limit = { ai = yes }
					add_character_modifier = {
						name = ai_quirking_cooldown
						duration = 1800
						hidden = yes
					}
				}
				opinion = {
					who = ROOT
					modifier = opinion_quirking
					months = 18000
				}
			}
			character_event = { id = spleasure.92 }
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.15
			}
			modifier = {
				factor = 2
				spouse = { character = FROM }
			}
			modifier = {
				factor = 2
				ai = no	#players beware
			}
			modifier = {
				factor = 1.5
				FROM = { trait = cruel }
			}
			modifier = {
				factor = 1.5
				trait = ugly
			}
			modifier = {
				factor = 0.5
				trait = fair
			}
			modifier = {
				factor = 0.5
				trait = strong
			}
			modifier = {
				factor = 0.75
				trait = tall
			}
			modifier = {
				factor = 1.25
				FROM = { trait = lustful }
			}
			modifier = {
				factor = 1.25
				FROM = { trait = deceitful }
			}
			modifier = {
				factor = 1.1
				FROM = { trait = proud }
			}
			modifier = {
				factor = 1.5
				trait = chaste
			}
			modifier = {
				factor = 1.5
				trait = celibate
			}
			modifier = {
				factor = 1.5
				trait = temperate
			}
			modifier = {
				factor = 1.5
				trait = diligent
			}
			modifier = {
				factor = 1.5
				trait = kind
			}
			modifier = {
				factor = 0.5
				trait = gluttonous
			}
			modifier = {
				factor = 0.5
				trait = wroth
			}
			modifier = {
				factor = 0.5
				trait = envious
			}
			modifier = {
				factor = 0.5
				trait = lustful
			}
			modifier = {
				factor = 0.5
				trait = slothful
			}
			modifier = {
				factor = 1.25
				is_married = yes
			}
			modifier = {
				factor = 0.05
				trait = malekith #Too scary
			}
			modifier = {
				factor = 0
				FROM = {
					OR = {
						trait = kind
						trait = just
					}
				}
			}
		}
	}
	vassal_polymorph = {
		ai_check_interval = 12
		filter = court
		ai_target_filter = court
		only_playable = yes

		from_potential = {
			primary_title = { higher_tier_than = BARON }
			is_incapacitated_trigger = no
			NOT = { has_character_modifier = magic_cooldown }
			OR = {
				society_member_of = cult_of_pleasure
				religion = atharti
				religion = slaanesh
			}
			OR = {
				has_character_modifier = magic_power_1
				has_character_modifier = magic_power_2
				has_character_modifier = magic_power_3
				has_character_modifier = magic_power_4
			}
		}

		potential = {
			prisoner = yes
			host = { character = FROM }
			OR = {
				trait = creature_elf
				trait = creature_chaos_dwarf
				trait = creature_dwarf
				trait = creature_human
				trait = creature_amazon
				trait = creature_beastman
			}
		}

		allow = {
			prisoner = yes
			FROM = { piety = 20 }
		}

		#receive event and decide what to do
		effect = {
			hidden_tooltip = {
				FROM = {
					hidden_tooltip = {
						random = {
							chance = 20
							character_event = { id = spleasure.57 days = 100 random = 100 }
						}
					}
					add_character_modifier = {
						name = magic_cooldown
						duration = 300
						hidden = yes
					}
					character_event = { id = spleasure.160 }
				}
			}
			FROM = {
				remove_opinion = { who = ROOT modifier = opinion_traitor }
				remove_opinion = { who = ROOT modifier = opinion_rebel_traitor }
				remove_opinion = { who = ROOT modifier = opinion_dishonorable }
			}
			prestige = -20
			FROM = {
				if = {
					limit = { NOT = { trait = cruel } }
					random = {
						chance = 10
						add_trait = cruel
						hidden_tooltip = {
							character_event = { id = 38259 } #Notify Cruel
						}
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.15
			}
			modifier = {
				factor = 0.4
				reverse_opinion = { who = FROM value = 20 }
			}
			modifier = {
				factor = 0.25
				reverse_opinion = { who = FROM value = 40 }
			}
			modifier = {
				factor = 2
				NOT = { reverse_opinion = { who = FROM value = -75 } }
			}
			modifier = {
				factor = 0
				FROM = { war = yes }
			}
			modifier = {
				factor = 1.5
				FROM = { religion = slaanesh }
			}
			modifier = {
				factor = 0.75
				prestige = 200
			}
			modifier = {
				factor = 0.05
				prestige = 1000
			}
			modifier = {
				factor = 0.05
				OR = {
					has_character_modifier = magic_power_2
					has_character_modifier = magic_power_3
					has_character_modifier = magic_power_4
				}
			}
			modifier = {
				factor = 0
				FROM = { trait = kind }
			}
			modifier = {
				factor = 2
				ROOT = { trait = cruel }
			}
			modifier = {
				factor = 0.25
				ROOT = { trait = creature_elf }
				FROM = { trait = creature_elf }
			}
			modifier = {
				factor = 0.1
				ROOT = { trait = plain }
			}
			modifier = {
				factor = 0.1
				ROOT = { trait = ugly }
				}
			modifier = {
				factor = 0
				ROOT = { trait = unsightly }
			}
			modifier = {
				factor = 2
				FROM = { trait = envious }
				ROOT = {
					OR = {
						trait = beautiful
						trait = fair
						trait = pretty
					}
				}
			}
		}
	}
	transgender_marriage = {
		ai_check_interval = 12
		filter = court
		ai_target_filter = court
		only_playable = yes

		from_potential = {
			is_married = no
			trait = transgender
			primary_title = { higher_tier_than = BARON }
			NOT = { trait = incapable }
			OR = {
				trait = creature_elf
				trait = creature_chaos_dwarf
				trait = creature_dwarf
				trait = creature_human
				trait = creature_amazon
				trait = creature_beastman
			}
		}

		potential = {
			same_sex = yes
			NOT = { character = FROM }
			host = { character = FROM }
			OR = {
				trait = creature_elf
				trait = creature_chaos_dwarf
				trait = creature_dwarf
				trait = creature_human
				trait = creature_amazon
				trait = creature_beastman
			}
		}

		allow = {
			FROM = { piety = 20 }
		}

		effect = {
			hidden_tooltip = {
				FROM = {
					add_spouse = ROOT
					add_trait = transgender #new spouse might remove the trait automatically
				}
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.05
			}
			modifier = {
				factor = 0
				NOT = { trait = homosexual } #which in this case means he/she IS homosexual...
			}
			modifier = {
				factor = 0.25
				reverse_opinion = { who = FROM value = 40 }
			}
			modifier = {
				factor = 2
				NOT = { reverse_opinion = { who = FROM value = -75 } }
			}
			modifier = {
				factor = 0
				FROM = { war = yes }
			}
			modifier = {
				factor = 2
				FROM = { religion = slaanesh }
			}
			modifier = {
				factor = 0.75
				prestige = 200
			}
			modifier = {
				factor = 0.05
				prestige = 1000
			}
			modifier = {
				factor = 0
				FROM = { trait = chaste }
			}
			modifier = {
				factor = 2
				ROOT = { trait = lustful }
			}
			modifier = {
				factor = 0
				NOT = { trait = creature_elf }
				FROM = { trait = creature_elf }
			}
			modifier = {
				factor = 0
				NOT = { trait = creature_dwarf }
				FROM = { trait = creature_dwarf }
			}
			modifier = {
				factor = 0
				NOT = { trait = creature_human }
				FROM = { trait = creature_human }
			}
			modifier = {
				factor = 0.25
				ROOT = { trait = plain }
			}
			modifier = {
				factor = 0.25
				ROOT = { trait = ugly }
			}
			modifier = {
				factor = 0.25
				ROOT = { trait = unsightly }
			}
			modifier = {
				factor = 2
				ROOT = {
					OR = {
						trait = beautiful
						trait = fair
						trait = pretty
					}
				}
			}
		}
	}
}
settlement_decisions = {
	establish_tribe = {
		ai_check_interval = 60
		filter = sub_realm_owned
		from_potential = {
			NOR = {
				culture_group = daemonic_group
				culture_group = beastman_group
			}
			population >= 10000
			government = chaos_horde_government
			#Only available if you only live in the wastes.
			capital_scope = {
				region = world_chaos_wastes
			}
			is_playable = yes
			religion_group = chaos_gods_group
		}
		potential = {
			#Only available if you only live in the wastes.
			location = {region = world_chaos_wastes}
			is_capital = yes
			OR = {
				FROM = { ai = no }
				location = { num_of_max_settlements >= 5 }
			}
			holding_type = nomad
		}

		allow = {
			FROM = {
				war = no
				population >= 13000
				prisoner = no
			}
			location={
				has_tribal = no
				num_of_max_settlements > 3
				num_of_settlements <= 4
			}
		}

		effect = {
			set_character_flag = converted_to_chaos_horde
			FROM = { population = -6000 }
			create_random_steward = {
				random_traits = yes
				religion = FROM
				culture = ROOT
				age = 34
				female = no
				attributes = {
					martial = 10
					diplomacy = 8
					stewardship = 10
					intrigue = 12
					learning = 12
				}
			}
			new_character = {
				save_event_target_as = chaos_chief
				add_trait = fortune_builder
				remove_trait = midas_touched
				remove_trait = thrifty_clerk
				remove_trait = indulgent_wastrel
				random_list = {
					20 = { religion = slaanesh }
					20 = { religion = nurgle }
					20 = { religion = khorne }
					15 = { religion = tzeentch }
					10 = {}
					15 = { religion = chaos }
				}
			}
			location = {
				build_holding = {
					type = tribal
					holder = new_character
				}
			}
			location = {
				province_event = { id = chaosr.2 }
			}
			hidden_effect = {
				random_list = {
					33 = {
						create_character = {
							random_traits = yes
							dynasty = event_target:chaos_chief
							religion = event_target:chaos_chief
							culture = event_target:chaos_chief
							age = 12
							female = no
						}
						new_character = {
							set_father = event_target:chaos_chief
							set_defacto_liege = event_target:chaos_chief
						}
					}
					33 = {
						create_character = {
							random_traits = yes
							dynasty = event_target:chaos_chief
							religion = event_target:chaos_chief
							culture = event_target:chaos_chief
							age = 16
							female = no
							genetic_father = event_target:chaos_chief
							trait = brave
						}
						new_character = {
							set_father = event_target:chaos_chief
							set_defacto_liege = event_target:chaos_chief
						}
						create_character = {
							random_traits = yes
							dynasty = event_target:chaos_chief
							religion = event_target:chaos_chief
							culture = event_target:chaos_chief
							age = 4
							female = yes
							genetic_father = event_target:chaos_chief
						}
						new_character = {
							set_father = event_target:chaos_chief
							set_defacto_liege = event_target:chaos_chief
						}
					}
					33 = {
						create_character = {
							random_traits = yes
							dynasty =event_target:chaos_chief
							religion = event_target:chaos_chief
							culture = event_target:chaos_chief
							age = 16
							female = no
							genetic_father = event_target:chaos_chief
						}
						new_character = {
							set_father = event_target:chaos_chief
							set_defacto_liege = event_target:chaos_chief
						}
						create_character = {
							random_traits = yes
							dynasty = event_target:chaos_chief
							religion = event_target:chaos_chief
							culture = event_target:chaos_chief
							age = 17
							female = yes
							genetic_father = event_target:chaos_chief
						}
						new_character = {
							set_father = event_target:chaos_chief
							set_defacto_liege = event_target:chaos_chief
						}
					}
				}
			}
			event_target:chaos_chief = { set_defacto_liege = FROM }
		}

		ai_will_do = {
			factor = 0.2
			modifier = {
				factor = 0
				NOT = { population <= 15000 }
			}
			modifier = {
				factor = 0.5
				tier = EMPEROR
				NOT = { population <= 25000 }
			}
			modifier = {
				factor = 0.5
				NOT = { population <= 20000 }
			}
		}
	}
}
###GRACE INTERACTION DECISIONS FOR THE WARP###
#Add the decisions in a nice order which will make sense in the menu! For example, ranked by cost/reward.
#UNDIVIDED
offmap_decisions = {
	#KHORNE
	make_offer_khorne = {
		only_playable = yes
		button_name = offmap_khorne_button
		ai_check_interval = 12

		from_potential = {
			#has_dlc = "Jade Dragon"
			undivided_offmap_enabled_trigger = yes
			is_playable = yes
			follower_of_undivided = yes
			prisoner = no
			religion_group = chaos_gods_group
			age = 12
			NOT = { religion = hashut }
			NOR = {
				trait = creature_beastman
				trait = incapable
				trait = undivided_demon
				trait = khorne_demon
				trait = nurgle_demon
				trait = slaanesh_demon
				trait = tzeentch_demon
 			}
		}

		potential = {
			is_offmap_tag = undivided_warp
		}

		allow = {
			FROM = {
				piety = 500
				wealth = 250
				higher_tier_than = COUNT
			}
		}

		effect = {
			FROM = {
				character_event = { id = schaos.92 }
			}
		}

		ai_will_do = {
			factor = 2
			modifier = {
				factor = 5
				FROM = {
					OR = {
						ai_zeal = 100
						ai_ambition = 100
					}
				}
			}
			modifier = {
				factor = 0.2
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	warp_artifact_khorne_undivided = {

		only_playable = yes
		button_name = offmap_khorne_button
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			undivided_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = undivided_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#khorne_offmap_decisions_enabled_trigger = yes
			FROM = {
				follower_of_undivided = yes
				show_scope_change = no
				has_offmap_currency = { offmap = khorne_warp value = 1000 }
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		effect = {
			FROM = {
				show_scope_change = no

				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend
				add_offmap_currency = {
					offmap = khorne_warp
					value = -1000
				}
				character_event = { id = RS_offmapK.20001 }
			}
			hidden_effect = { FROM = { set_china_boon_cd_effect = yes } }
		}


		ai_will_do = {
			factor = 1

			modifier = {
				factor = 0.1 # slow down
			}
			modifier = {
				factor = 0.1
				FROM = {
					NOT = {
						trait = greedy
					}
				}
			}
			modifier = {
				factor = 100
				FROM = {
					has_offmap_currency = { offmap = khorne_warp value = 5000 }
				}
			}
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	warp_servant_khorne_undivided = {
		only_playable = yes
		button_name = offmap_khorne_button
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			undivided_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = undivided_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#khorne_offmap_decisions_enabled_trigger = yes
			FROM = {
				follower_of_undivided = yes
				has_secret_religion = no
				show_scope_change = no
				has_offmap_currency = { offmap = khorne_warp value = 1000 }
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		effect = {
			FROM = {
				show_scope_change = no

				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend
				add_offmap_currency = {
					offmap = khorne_warp
					value = -1000
				}
				hidden_effect = { character_event = { id = RS_offmapK.10001 } }
				#custom_tooltip = { text =  }
			}

		}


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
			modifier = {
				factor = 0
				FROM = {
					any_friend = {
						trait = khorne_bloodletter
					}
				}
			}
		}
	}
	warp_mark_decision_khorne_undivided = {
		ai = no
		only_playable = yes
		button_name = offmap_khorne_button
		ai_check_interval = 12

		potential = {
			is_offmap_tag = undivided_warp
		}

		from_potential = {
			ai = no
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			NOR = {
				trait = mark_khorne
				trait = mark_nurgle
				trait = mark_tzeentch
				trait = mark_slaanesh
				trait = everchosen
			}
			undivided_offmap_enabled_trigger = yes
		}

		allow = {
			##show_only_failed_conditions = yes
			#khorne_offmap_tribute_decisions_enabled_trigger = yes # Allow is checked for each valid 3rd party, so it is cheaper to check it here for the AI
			FROM = {
				follower_of_undivided = yes
				show_scope_change = no
				prestige = 1500
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				NOR = {
					trait = mark_khorne
					trait = mark_nurgle
					trait = mark_tzeentch
					trait = mark_slaanesh
				}
			}
		}
		effect = {
			FROM = {
				add_offmap_currency = {
					offmap = khorne_warp
					value = 500
				}
				add_trait = mark_khorne
			}
		}
	}
	claim_championship_khorne_undivided = {
		ai = no
		only_playable = yes
		button_name = offmap_khorne_button
		ai_check_interval = 60

		from_potential = {
			ai = no
			#has_dlc = "Jade Dragon"
			is_playable = yes
			undivided_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = undivided_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#khorne_offmap_decisions_enabled_trigger = yes
			FROM = {
				follower_of_undivided = yes
				has_secret_religion = no
				show_scope_change = no
				prestige = 2500
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				is_chaos_champion_trigger = no
				NOR = {
					trait = chosen_khorne
					trait = prince_khorne
					trait = everchosen
				}
				trigger_if={
					limit = { ai=yes }
					has_offmap_currency = { offmap= khorne_warp value = 500}
				}
				trigger_else = {
						has_offmap_currency = { offmap = khorne_warp value = 2000 }
				}
			}
		}
		effect = {
			FROM = {
				if = {
					limit = {
						ai = yes
					}
					add_offmap_currency = {
						offmap = khorne_warp
						value = -500
					}
				}
				else = {
					add_offmap_currency = {
						offmap = khorne_warp
						value = -2000
					}
				}
			}
			FROM = { add_trait = champion_khorne }
		}
	}
	warp_shift_to_khorne = {
		ai = no
		only_playable = yes
		button_name = offmap_khorne_button

		potential = {
			is_offmap_tag = undivided_warp
		}

		from_potential = {
			religion = chaos
			is_theocracy = no
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			undivided_offmap_enabled_trigger = yes
		}

		allow = {
			FROM = {
				is_adult = yes
				prestige = 500
			OR = {
				trait = mark_khorne
				trait = champion_khorne
			}
			religion = chaos
			}
		}

		effect = {
			FROM = {
				if = {
					limit = { higher_tier_than = BARON }
					religion_authority = {
						modifier = ruler_converted_from
					}
				}
				religion = khorne
				if = {
					limit = { higher_tier_than = BARON }
					hidden_tooltip = {
						religion_authority = {
							modifier = ruler_converted_to
						}
					}
				}
				custom_tooltip = {
					text = chaos_god_please_displease_conversion
					hidden_tooltip = {
						add_offmap_currency = {
							offmap = tzeentch_warp
							value = -500
						}
						add_offmap_currency = {
							offmap = nurgle_warp
							value = -500
						}
						add_offmap_currency = {
							offmap = khorne_warp
							value = 500
						}
						add_offmap_currency = {
							offmap = slaanesh_warp
							value = -500
						}
					}
				}
			}
		}
	}
	#NURGLE
	make_offer_nurgle = {
		only_playable = yes
		button_name = offmap_nurgle_button
		ai_check_interval = 12

		from_potential = {
			#has_dlc = "Jade Dragon"
			undivided_offmap_enabled_trigger = yes
			is_playable = yes
			follower_of_undivided = yes
			prisoner = no
			religion_group = chaos_gods_group
			age = 12
			NOT = { religion = hashut }
			NOR = {
				trait = creature_beastman
				trait = incapable
				trait = undivided_demon
				trait = khorne_demon
				trait = nurgle_demon
				trait = slaanesh_demon
				trait = tzeentch_demon
 			}
		}

		potential = {
			is_offmap_tag = undivided_warp
		}

		allow = {
			FROM = {
				piety = 500
				wealth = 250
				higher_tier_than = COUNT
			}
		}

		effect = {
			FROM = {
				character_event = { id = schaos.93 }
			}
		}

		ai_will_do = {
			factor = 2
			modifier = {
				factor = 5
				FROM = {
					OR = {
						ai_zeal = 100
						ai_ambition = 100
					}
				}
			}
			modifier = {
				factor = 0.2
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	warp_artifact_nurgle_undivided = {
		only_playable = yes
		button_name = offmap_nurgle_button
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			undivided_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = undivided_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#nurgle_offmap_decisions_enabled_trigger = yes

			FROM = {
				show_scope_change = no
				has_offmap_currency = { offmap = nurgle_warp value = 1000 }
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		effect = {
			FROM = {
				show_scope_change = no

				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend
				add_offmap_currency = {
					offmap = nurgle_warp
					value = -1000
				}
				character_event = { id = RS_offmapN.20001 }
			}
			hidden_effect = { FROM = { set_china_boon_cd_effect = yes } }
		}


		ai_will_do = {
			factor = 1

			modifier = {
				factor = 0.1 # slow down
			}
			modifier = {
				factor = 0.1
				FROM = {
					NOT = {
						trait = greedy
					}
				}
			}
			modifier = {
				factor = 100
				FROM = {
					has_offmap_currency = { offmap = nurgle_warp value = 5000 }
				}
			}
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	warp_servant_nurgle_undivided = {
		only_playable = yes
		button_name = offmap_nurgle_button
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			undivided_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = undivided_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#nurgle_offmap_decisions_enabled_trigger = yes

			FROM = {
				show_scope_change = no
				has_offmap_currency = { offmap = nurgle_warp value = 1000 }
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		effect = {
			FROM = {
				has_secret_religion = no
				show_scope_change = no

				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend
				add_offmap_currency = {
					offmap = nurgle_warp
					value = -1000
				}
				hidden_effect = { character_event = { id = RS_offmapN.10001 } }
				#Scustom_tooltip = { text =  }
			}

		}


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
			modifier = {
				factor = 0
				FROM = {
					any_friend = {
						trait = slaanesh_daemonette
					}
				}
			}
		}
	}
	warp_mark_decision_nurgle_undivided = {
		ai = no
		only_playable = yes
		button_name = offmap_nurgle_button
		ai_check_interval = 12

		potential = {
			is_offmap_tag = undivided_warp
		}

		from_potential = {
			ai = no
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			NOR = {
				trait = mark_khorne
				trait = mark_nurgle
				trait = mark_tzeentch
				trait = mark_slaanesh
				trait = everchosen
			}
			undivided_offmap_enabled_trigger = yes
		}

		allow = {
			#show_only_failed_conditions = yes
			#nurgle_offmap_tribute_decisions_enabled_trigger = yes
			FROM = {
				show_scope_change = no
				prestige = 1500
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				NOR = {
					trait = mark_khorne
					trait = mark_nurgle
					trait = mark_tzeentch
					trait = mark_slaanesh
				}
			}
		}
		effect = {
			FROM = {
				add_offmap_currency = {
					offmap = nurgle_warp
					value = 500
				}
				add_trait = mark_nurgle
			}
		}
	}
	claim_championship_nurgle_undivided = {
		ai = no
		only_playable = yes
		button_name = offmap_nurgle_button
		ai_check_interval = 60

		from_potential = {
			ai = no
			#has_dlc = "Jade Dragon"
			is_playable = yes
			undivided_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = undivided_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#nurgle_offmap_decisions_enabled_trigger = yes
			FROM = {
				follower_of_undivided = yes
				has_secret_religion = no
				show_scope_change = no
				prestige = 2500
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				is_chaos_champion_trigger = no
				NOR = {
					trait = chosen_nurgle
					trait = prince_nurgle
					trait = everchosen
				}
				trigger_if={
					limit = { ai=yes }
					has_offmap_currency = { offmap= nurgle_warp value = 500}
				}
				trigger_else = {
						has_offmap_currency = { offmap = nurgle_warp value = 2000 }
				}
			}
		}
		effect = {
			FROM = {
				if = {
					limit = {
						ai = yes
					}
					add_offmap_currency = {
						offmap = nurgle_warp
						value = -500
					}
				}
				else = {
					add_offmap_currency = {
						offmap = nurgle_warp
						value = -2000
					}
				}
			}
			FROM = { add_trait = champion_nurgle}
		}
	}
	warp_shift_to_nurgle = {
		ai = no
		only_playable = yes
		button_name = offmap_nurgle_button

		potential = {
			is_offmap_tag = undivided_warp
		}

		from_potential = {
			religion = chaos
			is_theocracy = no
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			undivided_offmap_enabled_trigger = yes
		}

		allow = {
			FROM = {
				is_adult = yes
				prestige = 500
			OR = {
				trait = mark_nurgle
				trait = champion_nurgle
			}
			religion = chaos
			}
		}

		effect = {
			FROM = {
				if = {
					limit = { higher_tier_than = BARON }
					religion_authority = {
						modifier = ruler_converted_from
					}
				}
				religion = nurgle
				if = {
					limit = { higher_tier_than = BARON }
					hidden_tooltip = {
						religion_authority = {
							modifier = ruler_converted_to
						}
					}
				}
				custom_tooltip = {
					text = chaos_god_please_displease_conversion
					hidden_tooltip = {
						add_offmap_currency = {
							offmap = tzeentch_warp
							value = -500
						}
						add_offmap_currency = {
							offmap = nurgle_warp
							value = 500
						}
						add_offmap_currency = {
							offmap = khorne_warp
							value = -500
						}
						add_offmap_currency = {
							offmap = slaanesh_warp
							value = -500
						}
					}
				}
			}
		}
	}
	#SLAANESH
	make_offer_slaanesh = {
		only_playable = yes
		button_name = offmap_slaanesh_button
		ai_check_interval = 12

		from_potential = {
			#has_dlc = "Jade Dragon"
			undivided_offmap_enabled_trigger = yes
			is_playable = yes
			follower_of_undivided = yes
			prisoner = no
			religion_group = chaos_gods_group
			age = 12
			NOT = { religion = hashut }
			NOR = {
				trait = creature_beastman
				trait = incapable
				trait = undivided_demon
				trait = khorne_demon
				trait = nurgle_demon
				trait = slaanesh_demon
				trait = tzeentch_demon
 			}
		}

		potential = {
			is_offmap_tag = undivided_warp
		}

		allow = {
			FROM = {
				piety = 500
				wealth = 250
				higher_tier_than = COUNT
			}
		}

		effect = {
			FROM = {
				character_event = { id = schaos.94 }
			}
		}

		ai_will_do = {
			factor = 2
			modifier = {
				factor = 5
				FROM = {
					OR = {
						ai_zeal = 100
						ai_ambition = 100
					}
				}
			}
			modifier = {
				factor = 0.2
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	warp_artifact_slaanesh_undivided = {
		only_playable = yes
		button_name = offmap_slaanesh_button
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			undivided_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = undivided_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#slaanesh_offmap_decisions_enabled_trigger = yes

			FROM = {
				show_scope_change = no
				has_offmap_currency = { offmap = slaanesh_warp value = 1000 }
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		effect = {
			FROM = {
				show_scope_change = no

				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend
				add_offmap_currency = {
					offmap = slaanesh_warp
					value = -1000
				}
				character_event = { id = RS_offmapS.20001 }
			}
			hidden_effect = { FROM = { set_china_boon_cd_effect = yes } }
		}


		ai_will_do = {
			factor = 1

			modifier = {
				factor = 0.1 # slow down
			}
			modifier = {
				factor = 0.1
				FROM = {
					NOT = {
						trait = greedy
					}
				}
			}
			modifier = {
				factor = 100
				FROM = {
					has_offmap_currency = { offmap = slaanesh_warp value = 5000 }
				}
			}
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	warp_servant_slaanesh_undivided = {
		only_playable = yes
		button_name = offmap_slaanesh_button
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			undivided_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = undivided_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#slaanesh_offmap_decisions_enabled_trigger = yes

			FROM = {
				has_secret_religion = no
				show_scope_change = no
				has_offmap_currency = { offmap = slaanesh_warp value = 1000 }
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		effect = {
			FROM = {
				show_scope_change = no

				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend
				add_offmap_currency = {
					offmap = slaanesh_warp
					value = -1000
				}
				hidden_effect = { character_event = { id = RS_offmapS.10001 } }
			}

		}


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
			modifier = {
				factor = 0
				FROM = {
					any_friend = {
						trait = slaanesh_daemonette
					}
				}
			}
		}
	}
	warp_mark_decision_slaanesh_undivided = {
		ai = no
		only_playable = yes
		button_name = offmap_slaanesh_button
		ai_check_interval = 12

		potential = {
			is_offmap_tag = undivided_warp
		}

		from_potential = {
			ai = no
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			NOR = {
				trait = mark_khorne
				trait = mark_nurgle
				trait = mark_tzeentch
				trait = mark_slaanesh
				trait = everchosen
			}
			undivided_offmap_enabled_trigger = yes
		}

		allow = {
			#show_only_failed_conditions = yes
			#slaanesh_offmap_tribute_decisions_enabled_trigger = yes
			FROM = {
				show_scope_change = no
				prestige = 1500
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				NOR = {
					trait = mark_khorne
					trait = mark_nurgle
					trait = mark_tzeentch
					trait = mark_slaanesh
				}
			}
		}
		effect = {
			FROM = {
				add_offmap_currency = {
					offmap = slaanesh_warp
					value = 500
				}
				add_trait = mark_slaanesh
			}
		}
	}
	claim_championship_slaanesh_undivided = {
		ai = no
		only_playable = yes
		button_name = offmap_slaanesh_button
		ai_check_interval = 60

		from_potential = {
			ai = no
			#has_dlc = "Jade Dragon"
			is_playable = yes
			undivided_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = undivided_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#slaanesh_offmap_decisions_enabled_trigger = yes

			FROM = {
				follower_of_undivided = yes
				has_secret_religion = no
				show_scope_change = no
				prestige = 2500
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				is_chaos_champion_trigger = no
				NOR = {
					trait = chosen_slaanesh
			 		trait = prince_slaanesh
			 		trait = everchosen
				}
				trigger_if={
					limit = { ai=yes }
					has_offmap_currency = { offmap= slaanesh_warp value = 500}
				}
				trigger_else = {
					has_offmap_currency = { offmap = slaanesh_warp value = 2000 }
				}
			}
		}
		effect = {
			FROM = {
				if = {
					limit = {
						ai = yes
					}
					add_offmap_currency = {
						offmap = slaanesh_warp
						value = -500
					}
				}
				else = {
					add_offmap_currency = {
						offmap = slaanesh_warp
						value = -2000
					}
				}
			}
			FROM = { add_trait = champion_slaanesh}
		}
	}
	warp_shift_to_slaanesh = {
		ai = no
		only_playable = yes
		button_name = offmap_slaanesh_button

		potential = {
			is_offmap_tag = undivided_warp
		}

		from_potential = {
			religion = chaos
			is_theocracy = no
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			undivided_offmap_enabled_trigger = yes
		}

		allow = {
			FROM = {
				is_adult = yes
				prestige = 500
			OR = {
				trait = mark_slaanesh
				trait = champion_slaanesh
			}
			religion = chaos
			}
		}

		effect = {
			FROM = {
				if = {
					limit = { higher_tier_than = BARON }
					religion_authority = {
						modifier = ruler_converted_from
					}
				}
				religion = slaanesh
				if = {
					limit = { higher_tier_than = BARON }
					hidden_tooltip = {
						religion_authority = {
							modifier = ruler_converted_to
						}
					}
				}
				custom_tooltip = {
					text = chaos_god_please_displease_conversion
					hidden_tooltip = {
						add_offmap_currency = {
							offmap = tzeentch_warp
							value = -500
						}
						add_offmap_currency = {
							offmap = nurgle_warp
							value = -500
						}
						add_offmap_currency = {
							offmap = khorne_warp
							value = -500
						}
						add_offmap_currency = {
							offmap = slaanesh_warp
							value = 500
						}
					}
				}
			}
		}
	}
	#TZEENTCH
	make_offer_tzeentch = {
		only_playable = yes
		button_name = offmap_tzeentch_button
		ai_check_interval = 12

		from_potential = {
			#has_dlc = "Jade Dragon"
			undivided_offmap_enabled_trigger = yes
			is_playable = yes
			follower_of_undivided = yes
			prisoner = no
			religion_group = chaos_gods_group
			age = 12
			NOT = { religion = hashut }
			NOR = {
				trait = creature_beastman
				trait = incapable
				trait = undivided_demon
				trait = khorne_demon
				trait = nurgle_demon
				trait = slaanesh_demon
				trait = tzeentch_demon
 			}
		}

		potential = {
			is_offmap_tag = undivided_warp
		}

		allow = {
			FROM = {
				piety = 500
				wealth = 250
				higher_tier_than = COUNT
			}
		}

		effect = {
			FROM = {
				character_event = { id = schaos.95 }
			}
		}

		ai_will_do = {
			factor = 2
			modifier = {
				factor = 5
				FROM = {
					OR = {
						ai_zeal = 100
						ai_ambition = 100
					}
				}
			}
			modifier = {
				factor = 0.2
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	warp_artifact_tzeentch_undivided = {
		only_playable = yes
		button_name = offmap_tzeentch_button
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			undivided_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = undivided_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#tzeentch_offmap_decisions_enabled_trigger = yes
			FROM = {
				show_scope_change = no
				has_offmap_currency = { offmap = tzeentch_warp value = 1000 }
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		effect = {
			FROM = {
				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend
				if = {
					limit = { follower_of_tzeentch = yes increased_boon_cost = no }
					add_offmap_currency = {
						offmap = tzeentch_warp
						value = -500
					}
				}
				else = {
					add_offmap_currency = {
						offmap = tzeentch_warp
						value = -1000
					}
				}
				character_event = { id = RS_offmapT.20001 }
			}
			hidden_effect = { FROM = { set_china_boon_cd_effect = yes } }
		}


		ai_will_do = {
			factor = 1

			modifier = {
				factor = 0.1 # slow down
			}
			modifier = {
				factor = 0.1
				FROM = {
					NOT = {
						trait = greedy
					}
				}
			}
			modifier = {
				factor = 100
				FROM = {
					has_offmap_currency = { offmap = tzeentch_warp value = 5000 }
				}
			}
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	warp_servant_tzeentch_undivided = {
		only_playable = yes
		button_name = offmap_tzeentch_button
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			undivided_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = undivided_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#tzeentch_offmap_decisions_enabled_trigger = yes
			FROM = {
				has_secret_religion = no
				show_scope_change = no
				has_offmap_currency = { offmap = tzeentch_warp value = 1000 }
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		effect = {
			FROM = {
				show_scope_change = no
				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend
				add_offmap_currency = {
					offmap = tzeentch_warp
					value = -1000
				}
				hidden_effect = { character_event = { id = RS_offmapT.10001 } }
				#custom_tooltip = { text =   }
			}

		}


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
			modifier = {
				factor = 0
				FROM = {
					any_friend = {
						trait = nurgle_plaguebearer
					}
				}
			}
		}
	}
	warp_mark_decision_tzeentch_undivided = {
		ai = no
		only_playable = yes
		button_name = offmap_tzeentch_button
		ai_check_interval = 12

		potential = {
			is_offmap_tag = undivided_warp
		}

		from_potential = {
			ai = no
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			NOR = {
				trait = mark_khorne
				trait = mark_nurgle
				trait = mark_tzeentch
				trait = mark_slaanesh
				trait = everchosen
			}
			undivided_offmap_enabled_trigger = yes
		}

		allow = {
			#show_only_failed_conditions = yes
			#tzeentch_offmap_tribute_decisions_enabled_trigger = yes
			FROM = {
				show_scope_change = no
				prestige = 1500
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				NOR = {
					trait = mark_khorne
					trait = mark_nurgle
					trait = mark_tzeentch
					trait = mark_slaanesh
				}
			}
		}
		effect = {
			FROM = {
				add_offmap_currency = {
					offmap = tzeentch_warp
					value = 500
				}
				add_trait = mark_tzeentch
			}
		}
	}
	claim_championship_tzeentch_undivided = {
		ai = no
		only_playable = yes
		button_name = offmap_tzeentch_button
		ai_check_interval = 60

		from_potential = {
			ai = no
			#has_dlc = "Jade Dragon"
			is_playable = yes
			undivided_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = undivided_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#tzeentch_offmap_decisions_enabled_trigger = yes
			FROM = {
				follower_of_undivided = yes
				has_secret_religion = no
				show_scope_change = no
				prestige = 2500
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				is_chaos_champion_trigger = no
				NOR = {
					trait = chosen_tzeentch
					trait = prince_tzeentch
			 		trait = everchosen
				}
				trigger_if={
					limit = { ai=yes }
					has_offmap_currency = { offmap= tzeentch_warp value = 500}
				}
				trigger_else = {
						has_offmap_currency = { offmap = tzeentch_warp value = 2000 }
				}
			}
		}
		effect = {
			FROM = {
				if = {
					limit = {
						ai = yes
					}
					add_offmap_currency = {
						offmap = tzeentch_warp
						value = -500
					}
				}
				else = {
						add_offmap_currency = {
						offmap = tzeentch_warp
						value = -2000
					}
				}
			}
			FROM = { add_trait = champion_tzeentch}
		}
	}
	warp_shift_to_tzeentch = {
		ai = no
		only_playable = yes
		button_name = offmap_tzeentch_button

		potential = {
			is_offmap_tag = undivided_warp
		}

		from_potential = {
			religion = chaos
			is_theocracy = no
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			undivided_offmap_enabled_trigger = yes
		}

		allow = {
			FROM = {
				is_adult = yes
				prestige = 500
			OR = {
				trait = mark_tzeentch
				trait = champion_tzeentch
			}
			religion = chaos
			}
		}

		effect = {
			FROM = {
				if = {
					limit = { higher_tier_than = BARON }
					religion_authority = {
						modifier = ruler_converted_from
					}
				}
				religion = tzeentch
				if = {
					limit = { higher_tier_than = BARON }
					hidden_tooltip = {
						religion_authority = {
							modifier = ruler_converted_to
						}
					}
				}
				custom_tooltip = {
					text = chaos_god_please_displease_conversion
					hidden_tooltip = {
						add_offmap_currency = {
							offmap = tzeentch_warp
							value = 500
						}
						add_offmap_currency = {
							offmap = nurgle_warp
							value = -500
						}
						add_offmap_currency = {
							offmap = khorne_warp
							value = -500
						}
						add_offmap_currency = {
							offmap = slaanesh_warp
							value = -500
						}
					}
				}
			}
		}
	}
}
#PAYING TRIBUTE DECISIONS (GAIN GRACE)
offmap_decisions = {
	warp_offer_sacrifice_undivided = {
		only_playable = yes
		button_name = offmap_gifts

		third_party_filter = home_court
		ai_third_party_filter = home_court
		third_party = FROM
		ai_check_interval = 12
		show_third_party_potential = yes

		potential = {
			is_offmap_tag = undivided_warp
		}

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			undivided_offmap_enabled_trigger = yes
		}

		allow = {
			##show_only_failed_conditions = yes
			#khorne_offmap_tribute_decisions_enabled_trigger = yes # Allow is checked for each valid 3rd party, so it is cheaper to check it here for the AI
			FROM = {
				show_scope_change = no
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		third_party_potential = {
			#show_only_failed_conditions = yes
			FROMFROM = {
				host = { character = ROOT_FROM }
				show_scope_change = no
				prisoner = yes
				is_invincible_trigger = no
				NOT = { is_heir = yes }
			}
		}

		third_party_allow = {
			#show_only_failed_conditions = yes
			FROM = {
				any_courtier = {
					character = FROMFROM
				}
			}
		}

		effect = {
			save_event_target_as = target_governor
			FROM = {
				sound_effect = china_grace_gain
				save_event_target_as = target_tribute_sender
			}
			khorne_warp = {
				offmap_ruler = {
					FROMFROM = {
						save_event_target_as = person_sent_as_tribute
						death = { death_reason = death_sacrificed killer = PREV }
					}
				}
			}

			FROM = {
				show_scope_change = no
				add_offmap_currency = {
					offmap = undivided_warp
					value = 50
				}
				hidden_tooltip = {
				change_variable = { which = burned_hearts_points value = 2 }
				bloodthirsty_tiered_traits_effect = yes
				}
			}
			#################################
		}


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 2
				FROM = {
					OR = {
						trait = zealous
						ai_zeal = 50
					}
				}
			}
		}
	}
	exchange_favor_slaanesh = {
		only_playable = yes
		button_name = offmap_gifts
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			undivided_offmap_enabled_trigger = yes
			is_playable = yes
			follower_of_undivided = yes
		}

		potential = {
			is_offmap_tag = undivided_warp
		}

		allow = {
			FROM = {
				has_offmap_currency = { offmap = slaanesh_warp value = 250 }
			}
		}

		effect = {
			FROM = {
				add_offmap_currency = {
					offmap = slaanesh_warp
					value = -250
				}
				add_offmap_currency = {
					offmap = undivided_warp
					value = 100
				}
			}
		}

		ai_will_do = {
			factor = 2
			modifier = {
				factor = 5
				FROM = {
					OR = {
						ai_zeal = 100
						ai_ambition = 100
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	exchange_favor_khorne = {
		only_playable = yes
		button_name = offmap_gifts
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			undivided_offmap_enabled_trigger = yes
			is_playable = yes
			follower_of_undivided = yes
		}

		potential = {
			is_offmap_tag = undivided_warp
		}

		allow = {
			FROM = {
				has_offmap_currency = { offmap = khorne_warp value = 250 }
			}
		}
		effect = {
			FROM = {
				add_offmap_currency = {
					offmap = khorne_warp
					value = -250
				}
				add_offmap_currency = {
					offmap = undivided_warp
					value = 100
				}
			}
		}

		ai_will_do = {
			factor = 2
			modifier = {
				factor = 5
				FROM = {
					OR = {
						ai_zeal = 100
						ai_ambition = 100
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	exchange_favor_nurgle = {
		only_playable = yes
		button_name = offmap_gifts
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			undivided_offmap_enabled_trigger = yes
			is_playable = yes
			follower_of_undivided = yes
		}

		potential = {
			is_offmap_tag = undivided_warp
		}

		allow = {
			FROM = {
				has_offmap_currency = { offmap = nurgle_warp value = 250 }
			}
		}
		effect = {
			FROM = {
				add_offmap_currency = {
					offmap = nurgle_warp
					value = -250
				}
				add_offmap_currency = {
					offmap = undivided_warp
					value = 100
				}
			}
		}

		ai_will_do = {
			factor = 2
			modifier = {
				factor = 5
				FROM = {
					OR = {
						ai_zeal = 100
						ai_ambition = 100
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	exchange_favor_tzeentch = {
		only_playable = yes
		button_name = offmap_gifts
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			undivided_offmap_enabled_trigger = yes
			is_playable = yes
			follower_of_undivided = yes
		}

		potential = {
			is_offmap_tag = undivided_warp
		}

		allow = {
			FROM = {
				has_offmap_currency = { offmap = tzeentch_warp value = 250 }
			}
		}
		effect = {
			FROM = {
				add_offmap_currency = {
					offmap = tzeentch_warp
					value = -250
				}
				add_offmap_currency = {
					offmap = undivided_warp
					value = 100
				}
			}
		}

		ai_will_do = {
			factor = 2
			modifier = {
				factor = 5
				FROM = {
					OR = {
						ai_zeal = 100
						ai_ambition = 100
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	parlay_with_chaos_gods = {
		only_playable = yes
		button_name = offmap_gifts
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			undivided_offmap_enabled_trigger = yes
			is_playable = yes
			follower_of_undivided = yes
		}

		potential = {
			is_offmap_tag = undivided_warp
		}

		allow = {
			FROM = {
				OR={
					secret_religion = chaos
					has_secret_religion = no
				}
				has_offmap_currency = { offmap = undivided_warp value = 500 }
			}
		}
		effect = {
			FROM = {
				add_offmap_currency = {
					offmap = slaanesh_warp
					value = 100
				}
				add_offmap_currency = {
					offmap = nurgle_warp
					value = 100
				}
				add_offmap_currency = {
					offmap = tzeentch_warp
					value = 100
				}
				add_offmap_currency = {
					offmap = khorne_warp
					value = 100
				}
				add_offmap_currency = {
					offmap = undivided_warp
					value = -500
				}
			}
		}

		ai_will_do = {
			factor = 2
			modifier = {
				factor = 5
				FROM = {
					OR = {
						ai_zeal = 100
						ai_ambition = 100
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
}
#REQUESTING BOON DECISIONS (PENDING GRACE)
offmap_decisions = {
	#Gifts
	warp_artifact_undivided = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			undivided_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = undivided_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#khorne_offmap_decisions_enabled_trigger = yes
			FROM = {
				follower_of_undivided = yes
				show_scope_change = no
				has_offmap_currency = { offmap = undivided_warp value = 500 }
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		effect = {
			FROM = {
				show_scope_change = no

				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend
				add_offmap_currency = {
					offmap = undivided_warp
					value = -500
				}
				character_event = { id = RS_offmapU.20001 }
			}
			hidden_effect = { FROM = { set_china_boon_cd_effect = yes } }
		}


		ai_will_do = {
			factor = 1

			modifier = {
				factor = 0.1 # slow down
			}
			modifier = {
				factor = 0.1
				FROM = {
					NOT = {
						trait = greedy
					}
				}
			}
			modifier = {
				factor = 100
				FROM = {
					has_offmap_currency = { offmap = undivided_warp value = 5000 }
				}
			}
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	warp_claim_steed_undivided = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			undivided_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = undivided_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#khorne_offmap_decisions_enabled_trigger = yes
			FROM = {
				follower_of_undivided = yes
				has_secret_religion = no
				show_scope_change = no
				has_offmap_currency = { offmap = undivided_warp value = 1000 }
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				NOT = { has_artifact = chaos_destrier }
			}
		}

		effect = {
			FROM = {
				show_scope_change = no

				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend
				add_artifact = chaos_destrier
				add_offmap_currency = {
					offmap = undivided_warp
					value = -1000
				}
			}

		}


		ai_will_do = {
			factor = 0.2
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
			modifier = {
				factor = 0
				FROM = {
					OR = {
						has_artifact = khorne_juggernaut
						has_artifact = nurgle_fly
						has_artifact = disc_tzeentch
						has_artifact = slaanesh_steed
					}
				}
			}
		}
	}
	warp_champion_undivided = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			undivided_offmap_enabled_trigger = yes
			mercenary = no
			holy_order = no
			is_playable = yes
			follower_of_undivided = yes
		}

		potential = {
			is_offmap_tag = undivided_warp
		}

		allow = {
			FROM = {
				has_secret_religion = no
				show_scope_change = no
				follower_of_undivided = yes
				has_offmap_currency = { offmap = undivided_warp value = 1500 }
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		effect = {
			FROM = {
				show_scope_change = no
				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend
				add_offmap_currency = {
					offmap = undivided_warp
					value = -1500
				}
				hidden_effect = { character_event = { id = RS_offmapU.30001 } }
				#custom_tooltip = { text =  }
			}

		}


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	warp_summon_army_undivided = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 18

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			undivided_offmap_enabled_trigger = yes
			follower_of_undivided = yes
		}

		potential = {
			is_offmap_tag = undivided_warp
		}
		allow = {
			#show_only_failed_conditions = yes
			#khorne_offmap_decisions_enabled_trigger = yes
			FROM = {
				has_secret_religion = no
				show_scope_change = no
				has_offmap_currency = { offmap = undivided_warp value = 2500 }
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				follower_of_undivided = yes
			}
		}

		effect = {
			FROM = {
				show_scope_change = no
				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend
				add_offmap_currency = {
					offmap = undivided_warp
					value = -2500
				}
				capital_scope = {
					PREV = {
						spawn_unit = {
							owner = FROM
							province = PREV
							home = PREV
							earmark = summoned_daemons
							troops = {
								daemonic_host = { 1000 1000 }
								daemonic_host = { 1000 1000 }
							}
							attrition = 0
							disband_on_peace = no
							maintenance_multiplier = 0
						}
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
			modifier = {
				factor = 0.3
				FROM = {
					war = no
					NOT = { has_offmap_currency = { offmap = undivided_warp value = 5000 } }
				}
			}
			modifier = {
				factor = 0.3
				FROM = {
					war = yes
					NOR = {
						is_primary_war_defender = yes
						is_primary_war_attacker = yes
						any_war = {
							using_cb = new_crusade
						}
						has_offmap_currency = { offmap = undivided_warp value = 5000 }
					}
				}
			}
			modifier = {
				factor = 10
				FROM = {
					war = yes
					OR = {
						is_primary_war_defender = yes
						is_primary_war_attacker = yes
						any_war = {
							using_cb = new_crusade
						}
					}
				}
			}
		}
	}
	learn_lore_chaos = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			undivided_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = undivided_warp
		}
		allow = {
			#show_only_failed_conditions = yes
			#nurgle_offmap_decisions_enabled_trigger = yes

			FROM = {
				has_secret_religion = no
				show_scope_change = no
				is_trained_mage = no
				OR = {
					AND = {
						follower_of_undivided = yes
						has_offmap_currency = { offmap = undivided_warp value = 2500 }
					}
					AND = {
						increased_boon_cost = yes
						has_offmap_currency = { offmap = undivided_warp value = 4000 }
					}
				}
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				NOR = {
					is_trained_mage = yes
					trait = khorne_berserker
				}
			}
		}
		effect = {
			FROM = {
				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend
				random_lore_mage_effect = yes
				if = {
					limit = { follower_of_undivided = yes increased_boon_cost = no }
					add_offmap_currency = {
						offmap = undivided_warp
						value = -2500
					}
				}
				else = {
					add_offmap_currency = {
						offmap = undivided_warp
						value = -4000
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	claim_championship_undivided = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			undivided_offmap_enabled_trigger = yes
			is_playable = yes
			follower_of_undivided = yes
		}

		potential = {
			is_offmap_tag = undivided_warp
		}

		allow = {
			FROM = {
				has_secret_religion = no
				follower_of_undivided = yes
				show_scope_change = no
				prestige = 2500
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				is_chaos_champion_trigger = no
				NOR = {
					trait = chaos_chosen
					trait = prince_undivided
					trait = everchosen
				}
				trigger_if={
					limit = { ai=yes }
					has_offmap_currency = { offmap= undivided_warp value = 500}
				}
				trigger_else = {
					has_offmap_currency = { offmap = undivided_warp value = 2000 }
				}
			}
		}
		effect = {
			FROM = {
				if = {
					limit = {
						ai = yes
					}
					add_offmap_currency = {
						offmap = undivided_warp
						value = -500
					}
				}
				else = {
					add_offmap_currency = {
						offmap = undivided_warp
						value = -2000
					}
				}
			}
			FROM = { add_trait = champion_undivided}
		}

		ai_will_do = {
			factor = 2
			modifier = {
				factor = 5
				FROM = {
					OR = {
						ai_zeal = 100
						ai_ambition = 100
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	claim_chosenhood_undivided = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			is_playable = yes
			undivided_offmap_enabled_trigger = yes
			follower_of_undivided = yes
		}

		potential = {
			is_offmap_tag = undivided_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#khorne_offmap_decisions_enabled_trigger = yes
			FROM = {
				has_secret_religion = no
				follower_of_undivided = yes
				show_scope_change = no
				prestige = 5000
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				trait = champion_undivided
				NOR = {
					trait = chosen_khorne
					trait = prince_khorne
				 	trait = everchosen
				}
				trigger_if={
					limit = { ai=yes }
					has_offmap_currency = { offmap= undivided_warp value = 500}
				}
				trigger_else = {
					has_offmap_currency = { offmap = undivided_warp value = 3000 }
				}
			}
		}

		effect = {
			FROM = {
				if = {
					limit = {
						ai = yes
					}
					add_offmap_currency = {
						offmap = undivided_warp
						value = -500
					}
				}
				else = {
					add_offmap_currency = {
						offmap = undivided_warp
						value = -3000
					}
				}
			}
			FROM = { add_trait = chaos_chosen }
		}

		ai_will_do = {
			factor = 3
			modifier = {
				factor = 5
				FROM = {
					OR = {
						ai_zeal = 100
						ai_ambition = 100
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	claim_divinity_undivided = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			undivided_offmap_enabled_trigger = yes
			is_playable = yes
			religion = chaos
			NOR = {
				trait = creature_beastman
				trait = creature_dwarf
				trait = creature_chaos_dwarf
				trait = creature_fimir
			}
		}

		potential = {
			is_offmap_tag = undivided_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#khorne_offmap_decisions_enabled_trigger = yes
			FROM = {
				has_secret_religion = no
				show_scope_change = no
				prestige = 10000
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				OR = {
					trait = champion_undivided
					trait = chaos_chosen
				}
				NOT = { is_daemon_prince_trigger = yes }
				NOT = { trait = everchosen }
				trigger_if={
					limit = { ai=yes }
					has_offmap_currency = { offmap= undivided_warp value = 2500}
				}
				trigger_else = {
						has_offmap_currency = { offmap = undivided_warp value = 5000 }
				}
			}
		}
		effect = {
			FROM = {
				if = {
					limit = {
						ai = yes
					}
					add_offmap_currency = {
						offmap = undivided_warp
						value = -2500
					}
				}
				else = {
				add_offmap_currency = {
					offmap = undivided_warp
					value = -5000
					}
				}
			}
			FROM = {
				hidden_effect = {
					remove_trait = chosen_khorne
					remove_trait = chosen_nurgle
					remove_trait = chosen_slaanesh
					remove_trait = chosen_tzeentch
					remove_trait = champion_undivided
					remove_trait = chaos_chosen
					set_graphical_culture = prince_undivided
					remove_race_trait_effect = yes
				}
				add_trait = undivided_demon
				add_trait = prince_undivided
				religion = chaos
				character_event = { id = schaosfl.8005 }
			}
		}

		ai_will_do = {
			factor = 999
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	seektobecomeeverchosen = {
		ai = no
		button_name = offmap_boons

		from_potential = {
			is_playable = yes
			undivided_offmap_enabled_trigger = yes
			follower_of_undivided = yes
			NOR = {
				trait = creature_beastman
				trait = forsaken
				trait = creature_chaosspawn
			}
		}

		potential = {
			is_offmap_tag = undivided_warp
		}

		allow = {
			is_doom_very_high_trigger = yes
			NOT = { has_global_flag = everchosen_exists }
			NOT = { has_global_flag = everchosen_died }
			NOT = { has_character_flag = potential_everchosen }
			FROM = {
				has_offmap_currency = { offmap = undivided_warp value = 5000 }
				has_offmap_currency = { offmap = khorne_warp value = 1250 }
				has_offmap_currency = { offmap = nurgle_warp value = 1250 }
				has_offmap_currency = { offmap = slaanesh_warp value = 1250 }
				has_offmap_currency = { offmap = tzeentch_warp value = 1250 }
				age > 16
				OR = {
					trait = brave
					trait = proud
					trait = ambitious
				}
				NOR = {
					any_war = {
						using_cb = new_crusade
					}
					trait = on_pilgrimage
				}
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
			}
		}

		effect = {
			FROM = {
				character_event = { id = chaos.0 }
				add_offmap_currency = {
					offmap = undivided_warp
					value = -5000
				}
				add_offmap_currency = {
					offmap = khorne_warp
					value = -1250
				}
				add_offmap_currency = {
					offmap = nurgle_warp
					value = -1250
				}
				add_offmap_currency = {
					offmap = slaanesh_warp
					value = -1250
				}
				add_offmap_currency = {
					offmap = tzeentch_warp
					value = -1250
				}
			}
		}
	}
}
#KHORNE
#PAYING TRIBUTE DECISIONS (GAIN GRACE)
offmap_decisions = {
	warp_offering_khorne = {
		only_playable = yes
		button_name = offmap_gifts
		ai_check_interval = 12

		potential = {
			is_offmap_tag = khorne_warp
		}

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			khorne_offmap_enabled_trigger = yes
		}

		allow = {
			#show_only_failed_conditions = yes
			#khorne_offmap_tribute_decisions_enabled_trigger = yes # Allow is checked for each valid 3rd party, so it is cheaper to check it here for the AI
			FROM = {
				show_scope_change = no
				scaled_wealth = { value = 4 min = 250 max = 2500 }
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		effect = {
			FROM = {
				sound_effect = china_grace_gain
				scaled_wealth = { value = -4 min = -250 } #If this changes the ai chances should probably be adjusted
				add_offmap_currency = {
					offmap = khorne_warp
					value = 100
				}
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.66 # slow down
			}
			modifier = {
				factor = 0.1
				FROM = { NOT = { monthly_income = 10 } } #I.e. it would take more than 4 years to collect the 500 gold
			}
			modifier = {
				factor = 1.1
				FROM = {
					OR = {
						trait = zealous
						trait = chosen_khorne
						trait = champion_khorne
						trait = prince_khorne
						ai_zeal = 75
					}
				}
			}
		}
	}
	warp_offer_sacrifice_khorne = {
		only_playable = yes
		button_name = offmap_gifts

		third_party_filter = home_court
		ai_third_party_filter = home_court
		third_party = FROM
		ai_check_interval = 12
		show_third_party_potential = yes

		potential = {
			is_offmap_tag = khorne_warp
		}

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			khorne_offmap_enabled_trigger = yes
		}

		allow = {
			##show_only_failed_conditions = yes
			#khorne_offmap_tribute_decisions_enabled_trigger = yes # Allow is checked for each valid 3rd party, so it is cheaper to check it here for the AI
			FROM = {
				show_scope_change = no
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		third_party_potential = {
			#show_only_failed_conditions = yes
			FROMFROM = {
				host = { character = ROOT_FROM }
				show_scope_change = no
				prisoner = yes
				is_invincible_trigger = no
				NOT = { is_heir = yes }
			}
		}

		third_party_allow = {
			#show_only_failed_conditions = yes
			FROM = {
				any_courtier = {
					character = FROMFROM
				}
			}
		}

		effect = {
			save_event_target_as = target_governor
			FROM = {
				sound_effect = china_grace_gain
				save_event_target_as = target_tribute_sender
			}
			khorne_warp = {
				offmap_ruler = {
					FROMFROM = {
						save_event_target_as = person_sent_as_tribute
						death = { death_reason = death_sacrificed killer = PREV }
					}
				}
			}

			FROM = {
				show_scope_change = no
				add_offmap_currency = {
					offmap = khorne_warp
					value = 50
				}
				hidden_tooltip = {
				change_variable = { which = burned_hearts_points value = 2 }
				bloodthirsty_tiered_traits_effect = yes
				}

			}
			#################################
		}


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 2
				FROM = {
					OR = {
						trait = zealous
						trait = chosen_khorne
						trait = champion_khorne
						trait = prince_khorne
						ai_zeal = 50
					}
				}
			}
		}
	}
	warp_offer_artifact_khorne = {
		only_playable = yes
		button_name = offmap_gifts

		third_party_filter = artifacts
		ai_third_party_filter = artifacts
		third_party = FROM
		ai_check_interval = 60
		show_third_party_potential = yes

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			khorne_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = khorne_warp
		}

		allow = {
			##show_only_failed_conditions = yes
			#khorne_offmap_tribute_decisions_enabled_trigger = yes # Allow is checked for each valid 3rd party, so it is cheaper to check it here for the AI
			FROM = {
				show_scope_change = no
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		third_party_potential = {
			#show_only_failed_conditions = yes
			FROMFROM = {
				show_scope_change = no
				custom_tooltip = {
					text = send_artifact_potential_tt
					OR = {
						has_artifact_flag = skulls_for_khorne
						quality > 2
					}
					NOR = {
						has_artifact_flag = flag_considering_donation
						has_artifact_flag = curse
						has_artifact_flag = cannot_gift_to_warp
					}
				}
			}
		}

		third_party_allow = {

		}

		third_party_score = {
			factor = 50

			additive_modifier = {
				value = 100
				FROMFROM = {
					has_artifact_flag = skulls_for_khorne
				}
			}
			additive_modifier = {
				value = 50
				FROMFROM = {
					quality == 4
				}
			}
			additive_modifier = {
				value = 100
				FROMFROM = {
					quality == 5
				}
			}
			additive_modifier = {
				value = 150
				FROMFROM = {
					quality == 6
				}
			}
			additive_modifier = {
				value = 200
				FROMFROM = {
					quality == 7
				}
			}
			additive_modifier = {
				value = 300
				FROMFROM = {
					quality == 8
				}
			}
			additive_modifier = {
				value = 400
				FROMFROM = {
					quality == 9
				}
			}
			additive_modifier = {
				value = 500
				FROMFROM = {
					quality == 10
				}
			}
			additive_modifier = {
				value = -50
				FROMFROM = {
					quality < 4
					has_artifact_flag = lore #Magnum Opus book
				}
			}
			additive_modifier = {
				value = -100
				FROMFROM = {
					quality == 4
					has_artifact_flag = lore #Magnum Opus book
				}
			}
			additive_modifier = {
				value = -25
				FROMFROM = {
					quality < 4
					has_artifact_flag = created
				}
			}
			additive_modifier = {
				value = -100
				FROMFROM = {
					quality == 4
					has_artifact_flag = created
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					show_scope_change = no
					liked_by_offmap = {
						type = khorne_warp
					}
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					show_scope_change = no
					disliked_by_offmap = {
						type = khorne_warp
					}
				}
			}
		}

		effect = {
			FROM = {
				show_scope_change = no
				add_offmap_currency = {
					offmap = khorne_warp
					value = local_third_party_score
				}
			}

			# Like/Dislike effect description
			#################################
			if = {
				limit = {
					OR = {
						FROM = {
							liked_by_offmap = {
								type = khorne_warp
							}
						}
						khorne_warp = {
							offmap_has_like = likes_wealth
						}
					}
					NOR = {
						FROM = {
							disliked_by_offmap = {
								type = khorne_warp
							}
						}
						khorne_warp = {
							offmap_has_dislike = likes_wealth
						}
					}
				}
				e_realm_of_khorne = {
					show_scope_change = no
					offmap_power = {
						show_scope_change = no
						custom_tooltip = { text = likes_tt }
					}
				}
			}
			#################################
			hidden_tooltip = {
				if = {
					limit = {
						FROM = {
							ai = no
						}
						FROMFROM = {
							quality > 3
						}
					}
					FROM = {
						set_character_flag = achievement_a_curious_trinket
					}
				}
			}
			save_event_target_as = target_governor
			FROM = {
				sound_effect = china_grace_gain
				save_event_target_as = target_tribute_sender
			}

			hidden_effect = { #to reduce cluttered tooltip (effect already heavily implied...)
				khorne_warp = {
					offmap_ruler = {
						ROOT_FROMFROM = {
							show_scope_change = no
							tooltip = {
								transfer_artifact = {
									to = PREV
									from = ROOT_FROM
								}
							}
							hidden_effect = { unsafe_destroy_artifact = yes }
						}
					}
				}
			}

			hidden_effect = {
				FROM = {
					set_character_flag = jd_gifting_artifact
				}
				hidden_effect = { khorne_warp = { governor = { character_event = { id = JD.20023 } } } }
			}
		}


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				FROMFROM = {
					quality > 3
				}
			}
			modifier = {
				factor = 0.1 # slow down
			}
		}
	}
	warp_mark_decision_khorne = {
		only_playable = yes
		button_name = offmap_gifts
		ai_check_interval = 12

		potential = {
			is_offmap_tag = khorne_warp
		}

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			NOR = {
				trait = mark_khorne
				trait = mark_nurgle
				trait = mark_tzeentch
				trait = mark_slaanesh
				trait = everchosen
			}
			khorne_offmap_enabled_trigger = yes
		}

		allow = {
			##show_only_failed_conditions = yes
			#khorne_offmap_tribute_decisions_enabled_trigger = yes # Allow is checked for each valid 3rd party, so it is cheaper to check it here for the AI
			FROM = {
				show_scope_change = no
				prestige = 1500
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				NOR = {
					trait = mark_khorne
					trait = mark_nurgle
					trait = mark_tzeentch
					trait = mark_slaanesh
				}
			}
		}
		effect = {
			FROM = {
				add_offmap_currency = {
					offmap = khorne_warp
					value = 500
				}
				add_trait = mark_khorne
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 2
				FROM = {
					OR = {
						ai_zeal = 35
						ai_ambition = 50
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
}
#REQUESTING BOON DECISIONS (PENDING GRACE)
offmap_decisions = {
	#If your grace decisions will spawn a character then give them an appropriate flag eg: is_chinese_administrator and add them to the JD.60310 trigger switch to refund grace if they die early
	# Chinese Artifact
	warp_artifact_khorne = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			khorne_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = khorne_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#khorne_offmap_decisions_enabled_trigger = yes
			FROM = {
				show_scope_change = no
				OR = {
					AND = {
						follower_of_khorne = yes
						has_offmap_currency = { offmap = khorne_warp value = 500 }
					}
					AND = {
						increased_boon_cost = yes
						has_offmap_currency = { offmap = khorne_warp value = 1500 }
					}
				}
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		effect = {
			FROM = {
				show_scope_change = no

				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend
				if = {
					limit = { follower_of_khorne = yes increased_boon_cost = no }
					add_offmap_currency = {
						offmap = khorne_warp
						value = -500
					}
				}
				else = {
					add_offmap_currency = {
						offmap = khorne_warp
						value = -1500
					}
				}
				character_event = { id = RS_offmapK.20001 }
			}
			hidden_effect = { FROM = { set_china_boon_cd_effect = yes } }
		}


		ai_will_do = {
			factor = 1

			modifier = {
				factor = 0.1 # slow down
			}
			modifier = {
				factor = 0.1
				FROM = {
					NOT = {
						trait = greedy
					}
				}
			}
			modifier = {
				factor = 100
				FROM = {
					has_offmap_currency = { offmap = khorne_warp value = 5000 }
				}
			}
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	warp_servant_khorne = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			khorne_offmap_enabled_trigger = yes

		}

		potential = {
			is_offmap_tag = khorne_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#khorne_offmap_decisions_enabled_trigger = yes
			FROM = {
				has_secret_religion = no
				show_scope_change = no
				OR = {
					AND = {
						follower_of_khorne = yes
						has_offmap_currency = { offmap = khorne_warp value = 750 }
					}
					AND = {
						increased_boon_cost = yes
						has_offmap_currency = { offmap = khorne_warp value = 1500 }
					}
				}
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		effect = {
			FROM = {
				show_scope_change = no

				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend

				if = {
					limit = { follower_of_khorne = yes increased_boon_cost = no }
					add_offmap_currency = {
						offmap = khorne_warp
						value = -750
					}
				}
				else = {
					add_offmap_currency = {
						offmap = khorne_warp
						value = -1500
					}
				}
				hidden_effect = { character_event = { id = RS_offmapK.10001 } }
				#custom_tooltip = { text =  }
			}

		}


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
			modifier = {
				factor = 0
				FROM = {
					any_friend = {
						trait = khorne_bloodletter
					}
				}
			}
		}
	}
	warp_champion_khorne = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			khorne_offmap_enabled_trigger = yes
		}
		potential = {
			is_offmap_tag = khorne_warp
		}
		allow = {
			#show_only_failed_conditions = yes
			#khorne_offmap_decisions_enabled_trigger = yes
			FROM = {
				OR = {
					trait = chosen_khorne
					trait = khorne_demon
				}
				has_secret_religion = no
				show_scope_change = no
				OR = {
					AND = {
						follower_of_khorne = yes
						has_offmap_currency = { offmap = khorne_warp value = 1250 }
					}
					AND = {
						increased_boon_cost = yes
						has_offmap_currency = { offmap = khorne_warp value = 3750 }
					}
				}
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}
		effect = {
			FROM = {
				show_scope_change = no

				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend

				if = {
					limit = { follower_of_khorne = yes increased_boon_cost = no }
					add_offmap_currency = {
						offmap = khorne_warp
						value = -1250
					}
				}
				else = {
					add_offmap_currency = {
						offmap = khorne_warp
						value = -3750
					}
				}
				hidden_effect = { character_event = { id = RS_offmapK.30001 } }
			}

		}
		ai_will_do = {
			factor = 0.3
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
			modifier = {
				factor = 0
				FROM = {
					any_courtier = {
						is_chaos_champion_trigger = yes
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					is_chaos_champion_trigger = no
				}
			}
		}
	}
	warp_claim_steed_khorne = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			khorne_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = khorne_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#khorne_offmap_decisions_enabled_trigger = yes
			FROM = {
				has_secret_religion = no
				show_scope_change = no
				OR = {
					AND = {
						follower_of_khorne = yes
						has_offmap_currency = { offmap = khorne_warp value = 1250 }
					}
					AND = {
						increased_boon_cost = yes
						has_offmap_currency = { offmap = khorne_warp value = 2000 }
					}
				}
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				NOT = { has_artifact = khorne_juggernaut }
			}
		}

		effect = {
			FROM = {
				show_scope_change = no

				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend
				add_artifact = khorne_juggernaut
				if = {
					limit = { follower_of_khorne = yes increased_boon_cost = no }
					add_offmap_currency = {
						offmap = khorne_warp
						value = -1250
					}
				}
				else = {
					add_offmap_currency = {
						offmap = khorne_warp
						value = -2000
					}
				}
			}

		}


		ai_will_do = {
			factor = 0.2
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
			modifier = {
				factor = 0
				FROM = {
					OR = {
						has_artifact = khorne_juggernaut
						has_artifact = nurgle_fly
						has_artifact = disc_tzeentch
						has_artifact = slaanesh_steed
					}
				}
			}
		}
	}
	warp_summon_army_khorne = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 18

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			khorne_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = khorne_warp
		}
		allow = {
			#show_only_failed_conditions = yes
			#khorne_offmap_decisions_enabled_trigger = yes
			FROM = {
				has_secret_religion = no
				show_scope_change = no
				OR = {
					AND = {
						follower_of_khorne = yes
						has_offmap_currency = { offmap = khorne_warp value = 1000 }
					}
					AND = {
						increased_boon_cost = yes
						has_offmap_currency = { offmap = khorne_warp value = 2500 }
					}
				}
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		effect = {
			FROM = {
				show_scope_change = no
				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend
				if = {
					limit = { follower_of_khorne = yes increased_boon_cost = no }
					add_offmap_currency = {
						offmap = khorne_warp
						value = -1000
					}
				}
				else = {
					add_offmap_currency = {
						offmap = khorne_warp
						value = -2500
					}
				}
				capital_scope = {
					PREV = {
						spawn_unit = {
							owner = FROM
							province = PREV
							home = PREV
							earmark = summoned_daemons
							troops = {
								daemonic_host = { 1000 1000 }
								daemonic_host = { 1000 1000 }
							}
							attrition = 0
							disband_on_peace = no
							maintenance_multiplier = 0
						}
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
			modifier = {
				factor = 0.3
				FROM = {
					war = no
					NOT = { has_offmap_currency = { offmap = khorne_warp value = 5000 } }
				}
			}
			modifier = {
				factor = 0.3
				FROM = {
					war = yes
					NOR = {
						is_primary_war_defender = yes
						is_primary_war_attacker = yes
						any_war = {
							using_cb = new_crusade
						}
						has_offmap_currency = { offmap = khorne_warp value = 5000 }
					}
				}
			}
			modifier = {
				factor = 10
				FROM = {
					war = yes
					OR = {
						is_primary_war_defender = yes
						is_primary_war_attacker = yes
						any_war = {
							using_cb = new_crusade
						}
					}
				}
			}
		}
	}
	learn_fighting_khorne = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			khorne_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = khorne_warp
		}
		allow = {
			#show_only_failed_conditions = yes
			#khorne_offmap_decisions_enabled_trigger = yes
			FROM = {
				has_secret_religion = no
				show_scope_change = no
				OR = {
					AND = {
						follower_of_khorne = yes
						has_offmap_currency = { offmap = khorne_warp value = 2500 }
					}
					AND = {
						increased_boon_cost = yes
						has_offmap_currency = { offmap = khorne_warp value = 4000 }
					}
				}
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				NOR = {
					is_trained_mage = yes
					trait = khorne_berserker
				}
			}
		}
		effect = {
			FROM = {
				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend
				add_trait = khorne_berserker
				if = {
					limit = { follower_of_khorne = yes increased_boon_cost = no }
					add_offmap_currency = {
						offmap = khorne_warp
						value = -2500
					}
				}
				else = {
					add_offmap_currency = {
						offmap = khorne_warp
						value = -4000
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	claim_championship_khorne = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			is_playable = yes
			khorne_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = khorne_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#khorne_offmap_decisions_enabled_trigger = yes
			FROM = {
				has_secret_religion = no
				follower_of_khorne = yes
				show_scope_change = no
				prestige = 2500
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				is_chaos_champion_trigger = no
				NOR = {
					trait = chosen_khorne
					trait = prince_khorne
					trait = everchosen
				}
				trigger_if={
					limit = { ai=yes }
					has_offmap_currency = { offmap= khorne_warp value = 250}
				}
				trigger_else = {
						has_offmap_currency = { offmap = khorne_warp value = 1000 }
				}
			}
		}
		effect = {
			FROM = {
				if = {
					limit = {
						ai = yes
					}
					add_offmap_currency = {
						offmap = khorne_warp
						value = -250
					}
				}
				else = {
					add_offmap_currency = {
						offmap = khorne_warp
						value = -1000
					}
				}
			}
			FROM = { add_trait = champion_khorne }
		}

		ai_will_do = {
			factor = 2
			modifier = {
				factor = 5
				FROM = {
					OR = {
						ai_zeal = 100
						ai_ambition = 100
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	claim_chosenhood_khorne = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			is_playable = yes
			khorne_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = khorne_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#khorne_offmap_decisions_enabled_trigger = yes
			FROM = {
				has_secret_religion = no
				follower_of_khorne = yes
				show_scope_change = no
				prestige = 5000
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				trait = champion_khorne
				NOT = { trait = chosen_khorne }
				NOT = { trait = prince_khorne }
				NOT = { trait = everchosen }
				trigger_if={
					limit = { ai=yes }
					has_offmap_currency = { offmap= khorne_warp value = 250}
				}
				trigger_else = {
						has_offmap_currency = { offmap = khorne_warp value = 1500 }
				}
			}
		}
		effect = {
			FROM = {
				if = {
					limit = {
						ai = yes
					}
					add_offmap_currency = {
						offmap = khorne_warp
						value = -250
					}
				}
				else = {
					add_offmap_currency = {
						offmap = khorne_warp
						value = -1500
					}
				}
			}
			FROM = {add_trait = chosen_khorne }
		}

		ai_will_do = {
			factor = 3
			modifier = {
				factor = 5
				FROM = {
					OR = {
						ai_zeal = 100
						ai_ambition = 100
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	claim_divinity_khorne = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			is_playable = yes
			khorne_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = khorne_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#khorne_offmap_decisions_enabled_trigger = yes
			FROM = {
				has_secret_religion = no
				follower_of_khorne = yes
				show_scope_change = no
				prestige = 10000
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				trait = chosen_khorne
				NOT = { trait = prince_khorne }
				NOT = { trait = everchosen }
				NOT = { is_daemon_prince_trigger = yes }
				trigger_if={
					limit = { ai=yes }
					has_offmap_currency = { offmap = khorne_warp value = 1000}
				}
				trigger_else = {
						has_offmap_currency = { offmap = khorne_warp value = 2000 }
				}
			}
		}
		effect = {
			FROM = {
				if = {
					limit = {
						ai = yes
					}
					add_offmap_currency = {
						offmap = khorne_warp
						value = -1000
					}
				}
				else = {
					add_offmap_currency = {
						offmap = khorne_warp
						value = -2000
					}
				}
			}
			FROM = {
				hidden_effect = {
					remove_trait = chosen_khorne
					remove_trait = chosen_nurgle
					remove_trait = chosen_slaanesh
					remove_trait = chosen_tzeentch
					remove_trait = champion_undivided
					remove_trait = chaos_chosen
					set_graphical_culture = prince_khorne
					remove_race_trait_effect = yes
				}
				add_trait = khorne_demon
				add_trait = prince_khorne
				religion = khorne
				character_event = { id = schaosfl.8005 }
			}
		}

		ai_will_do = {
			factor = 999
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
}
#NURGLE
#PAYING TRIBUTE DECISIONS (GAIN GRACE)
offmap_decisions = {
	warp_offering_nurgle = {
		only_playable = yes
		button_name = offmap_gifts
		ai_check_interval = 12

		potential = {
			is_offmap_tag = nurgle_warp
		}

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			nurgle_offmap_enabled_trigger = yes
		}

		allow = {
			#show_only_failed_conditions = yes
			#nurgle_offmap_tribute_decisions_enabled_trigger = yes

			FROM = {
				show_scope_change = no
				scaled_wealth = { value = 4 min = 250 max = 2500 }
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}
		effect = {
			FROM = {
				sound_effect = china_grace_gain
				scaled_wealth = { value = -4 min = -250 } #If this changes the ai chances should probably be adjusted
				add_offmap_currency = {
							offmap = nurgle_warp
							value = 100
						}
			}
		}


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.66 # slow down
			}
			modifier = {
				factor = 0.1
				FROM = { NOT = { monthly_income = 10 } } #I.e. it would take more than 4 years to collect the 500 gold
			}
			modifier = {
				factor = 1.1
				FROM = {
					OR = {
						trait = zealous
						trait = chosen_nurgle
						trait = champion_nurgle
						trait = prince_nurgle
						ai_zeal = 75
					}
				}
			}
		}
	}
	warp_offer_sacrifice_nurgle = {
		only_playable = yes
		button_name = offmap_gifts

		third_party_filter = home_court
		ai_third_party_filter = home_court
		third_party = FROM
		ai_check_interval = 12
		show_third_party_potential = yes

		potential = {
			is_offmap_tag = nurgle_warp
		}

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			nurgle_offmap_enabled_trigger = yes
		}

		allow = {
			#show_only_failed_conditions = yes
			#nurgle_offmap_tribute_decisions_enabled_trigger = yes

			FROM = {
				show_scope_change = no
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		third_party_potential = {
			#show_only_failed_conditions = yes
			FROMFROM = {
				host = { character = ROOT_FROM }
				show_scope_change = no
				prisoner = yes
				is_invincible_trigger = no
				NOT = { is_heir = yes }

			}
		}

		third_party_allow = {
			#show_only_failed_conditions = yes
			FROM = {
				any_courtier = {
					character = FROMFROM
				}
			}
		}

		effect = {
			save_event_target_as = target_governor
			FROM = {
				sound_effect = china_grace_gain
				save_event_target_as = target_tribute_sender
			}
			nurgle_warp = {
				offmap_ruler = {
					FROMFROM = {
						save_event_target_as = person_sent_as_tribute
						death = { death_reason = death_sacrificed killer = PREV }
					}
				}
			}

			FROM = {
				show_scope_change = no
				add_offmap_currency = {
					offmap = nurgle_warp
					value = 50
				}
				hidden_tooltip = {
				change_variable = { which = burned_hearts_points value = 2 }
				bloodthirsty_tiered_traits_effect = yes
				}

			}
			#################################
		}


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 2
				FROM = {
					OR = {
						trait = zealous
						trait = chosen_nurgle
						trait = champion_nurgle
						trait = prince_nurgle
						ai_zeal = 50
					}
				}
			}
		}
	}
	warp_offer_artifact_nurgle = {
		only_playable = yes
		button_name = offmap_gifts

		third_party_filter = artifacts
		ai_third_party_filter = artifacts
		third_party = FROM
		ai_check_interval = 60
		show_third_party_potential = yes

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			nurgle_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = nurgle_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#nurgle_offmap_tribute_decisions_enabled_trigger = yes
			FROM = {
				show_scope_change = no
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		third_party_potential = {
			#show_only_failed_conditions = yes
			FROMFROM = {
				show_scope_change = no
				custom_tooltip = {
					text = send_artifact_potential_tt
					quality > 2
					NOR = {
						has_artifact_flag = flag_considering_donation
						has_artifact_flag = curse
						has_artifact_flag = cannot_gift_to_warp
					}
				}
			}
		}

		third_party_allow = {

		}

		third_party_score = {
			factor = 50

			additive_modifier = {
				value = 50
				FROMFROM = {
					quality == 4
				}
			}
			additive_modifier = {
				value = 100
				FROMFROM = {
					quality == 5
				}
			}
			additive_modifier = {
				value = 150
				FROMFROM = {
					quality == 6
				}
			}
			additive_modifier = {
				value = 200
				FROMFROM = {
					quality == 7
				}
			}
			additive_modifier = {
				value = 300
				FROMFROM = {
					quality == 8
				}
			}
			additive_modifier = {
				value = 400
				FROMFROM = {
					quality == 9
				}
			}
			additive_modifier = {
				value = 500
				FROMFROM = {
					quality == 10
				}
			}
			additive_modifier = {
				value = -50
				FROMFROM = {
					quality < 4
					has_artifact_flag = lore #Magnum Opus book
				}
			}
			additive_modifier = {
				value = -100
				FROMFROM = {
					quality == 4
					has_artifact_flag = lore #Magnum Opus book
				}
			}
			additive_modifier = {
				value = -25
				FROMFROM = {
					quality < 4
					has_artifact_flag = created
				}
			}
			additive_modifier = {
				value = -100
				FROMFROM = {
					quality == 4
					has_artifact_flag = created
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					show_scope_change = no
					liked_by_offmap = {
						type = nurgle_warp
					}
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					show_scope_change = no
					disliked_by_offmap = {
						type = nurgle_warp
					}
				}
			}
		}

		effect = {
			FROM = {
				show_scope_change = no
				add_offmap_currency = {
					offmap = nurgle_warp
					value = local_third_party_score
				}
			}

			# Like/Dislike effect description
			#################################
			if = {
				limit = {
					OR = {
						FROM = {
							liked_by_offmap = {
								type = nurgle_warp
							}
						}
						nurgle_warp = {
							offmap_has_like = likes_wealth
						}
					}
					NOR = {
						FROM = {
							disliked_by_offmap = {
								type = nurgle_warp
							}
						}
						nurgle_warp = {
							offmap_has_dislike = likes_wealth
						}
					}
				}
				e_realm_of_nurgle = {
					show_scope_change = no
					offmap_power = {
						show_scope_change = no
						custom_tooltip = { text = likes_tt }
					}
				}
			}
			#################################
			hidden_tooltip = {
				if = {
					limit = {
						FROM = {
							ai = no
						}
						FROMFROM = {
							quality > 3
						}
					}
					FROM = {
						set_character_flag = achievement_a_curious_trinket
					}
				}
			}
			save_event_target_as = target_governor
			FROM = {
				sound_effect = china_grace_gain
				save_event_target_as = target_tribute_sender
			}

			hidden_effect = { #to reduce cluttered tooltip (effect already heavily implied...)
				nurgle_warp = {
					offmap_ruler = {
						ROOT_FROMFROM = {
							show_scope_change = no
							tooltip = {
								transfer_artifact = {
									to = PREV
									from = ROOT_FROM
								}
							}
							hidden_effect = { unsafe_destroy_artifact = yes }
						}
					}
				}
			}

			hidden_effect = {
				FROM = {
					set_character_flag = jd_gifting_artifact
				}
				hidden_effect = { nurgle_warp = { governor = { character_event = { id = JD.20023 } } } }
			}
		}


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				FROMFROM = {
					quality > 3
				}
			}
			modifier = {
				factor = 0.1 # slow down
			}
		}
	}
	warp_mark_decision_nurgle = {
		only_playable = yes
		button_name = offmap_gifts
		ai_check_interval = 12

		potential = {
			is_offmap_tag = nurgle_warp
		}

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			NOR = {
				trait = mark_khorne
				trait = mark_nurgle
				trait = mark_tzeentch
				trait = mark_slaanesh
				trait = everchosen
			}
			nurgle_offmap_enabled_trigger = yes
		}

		allow = {
			#show_only_failed_conditions = yes
			#nurgle_offmap_tribute_decisions_enabled_trigger = yes

			FROM = {
				show_scope_change = no
				prestige = 1500
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				NOR = {
					trait = mark_khorne
					trait = mark_nurgle
					trait = mark_tzeentch
					trait = mark_slaanesh
				}
			}
		}
		effect = {
			FROM = {
				add_offmap_currency = {
					offmap = nurgle_warp
					value = 500
				}
				add_trait = mark_nurgle
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 2
				FROM = {
					OR = {
						ai_zeal = 35
						ai_ambition = 50
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
}
#REQUESTING BOON DECISIONS (PENDING GRACE)
offmap_decisions = {
	#If your grace decisions will spawn a character then give them an appropriate flag eg: is_chinese_administrator and add them to the JD.60310 trigger switch to refund grace if they die early
	warp_artifact_nurgle = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			nurgle_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = nurgle_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#nurgle_offmap_decisions_enabled_trigger = yes

			FROM = {
				show_scope_change = no
				OR = {
					AND = {
						follower_of_nurgle = yes
						has_offmap_currency = { offmap = nurgle_warp value = 500 }
					}
					AND = {
						increased_boon_cost = yes
						has_offmap_currency = { offmap = nurgle_warp value = 1500 }
					}
				}
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		effect = {
			FROM = {
				show_scope_change = no

				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend
				if = {
					limit = { follower_of_nurgle = yes increased_boon_cost = no }
					add_offmap_currency = {
						offmap = nurgle_warp
						value = -500
					}
				}
				else = {
					add_offmap_currency = {
						offmap = nurgle_warp
						value = -1500
					}
				}
				character_event = { id = RS_offmapN.20001 }
			}
			hidden_effect = { FROM = { set_china_boon_cd_effect = yes } }
		}


		ai_will_do = {
			factor = 1

			modifier = {
				factor = 0.1 # slow down
			}
			modifier = {
				factor = 0.1
				FROM = {
					NOT = {
						trait = greedy
					}
				}
			}
			modifier = {
				factor = 100
				FROM = {
					has_offmap_currency = { offmap = nurgle_warp value = 5000 }
				}
			}
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	warp_servant_nurgle = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			nurgle_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = nurgle_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#nurgle_offmap_decisions_enabled_trigger = yes

			FROM = {
				show_scope_change = no
				OR = {
					AND = {
						follower_of_nurgle = yes
						has_offmap_currency = { offmap = nurgle_warp value = 750 }
					}
					AND = {
						increased_boon_cost = yes
						has_offmap_currency = { offmap = nurgle_warp value = 1500 }
					}
				}
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		effect = {
			FROM = {
				has_secret_religion = no
				show_scope_change = no

				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend

				if = {
					limit = { follower_of_nurgle = yes increased_boon_cost = no }
					add_offmap_currency = {
						offmap = nurgle_warp
						value = -750
					}
				}
				else = {
					add_offmap_currency = {
						offmap = nurgle_warp
						value = -1500
					}
				}
				hidden_effect = { character_event = { id = RS_offmapN.10001 } }
				#Scustom_tooltip = { text =  }
			}

		}


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
			modifier = {
				factor = 0
				FROM = {
					any_friend = {
						trait = slaanesh_daemonette
					}
				}
			}
		}
	}
	warp_champion_nurgle = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			nurgle_offmap_enabled_trigger = yes
		}
		potential = {
			is_offmap_tag = nurgle_warp
		}
		allow = {
			#show_only_failed_conditions = yes
			#nurgle_offmap_decisions_enabled_trigger = yes

			FROM = {
				OR={
				trait = chosen_nurgle
				trait = nurgle_demon
				}
				has_secret_religion = no
				show_scope_change = no
				OR = {
					AND = {
						follower_of_nurgle = yes
						has_offmap_currency = { offmap = nurgle_warp value = 1250 }
					}
					AND = {
						increased_boon_cost = yes
						has_offmap_currency = { offmap = nurgle_warp value = 3750 }
					}
				}
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}
		effect = {
			FROM = {
				show_scope_change = no

				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend

				if = {
					limit = { follower_of_nurgle = yes increased_boon_cost = no }
					add_offmap_currency = {
						offmap = nurgle_warp
						value = -1250
					}
				}
				else = {
					add_offmap_currency = {
						offmap = nurgle_warp
						value = -3750
					}
				}
				hidden_effect = { character_event = { id = RS_offmapN.30001 } }
			}

		}
		ai_will_do = {
			factor = 0.3
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
			modifier = {
				factor = 0
				FROM = {
					any_courtier = {
						is_chaos_champion_trigger = yes
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					is_chaos_champion_trigger = no
				}
			}
		}
	}
	warp_claim_steed_nurgle = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			nurgle_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = nurgle_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#nurgle_offmap_decisions_enabled_trigger = yes

			FROM = {
				has_secret_religion = no
				show_scope_change = no
				OR = {
					AND = {
						follower_of_nurgle = yes
						has_offmap_currency = { offmap = nurgle_warp value = 1250 }
					}
					AND = {
						increased_boon_cost = yes
						has_offmap_currency = { offmap = nurgle_warp value = 2000 }
					}
				}
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				NOT = { has_artifact = nurgle_fly }
			}
		}

		effect = {
			FROM = {
				show_scope_change = no

				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend
				add_artifact = nurgle_fly
				if = {
					limit = { follower_of_nurgle = yes increased_boon_cost = no }
					add_offmap_currency = {
						offmap = nurgle_warp
						value = -1250
					}
				}
				else = {
					add_offmap_currency = {
						offmap = nurgle_warp
						value = -2000
					}
				}
			}

		}


		ai_will_do = {
			factor = 0.2
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
			modifier = {
				factor = 0
				FROM = {
					OR = {
						has_artifact = khorne_juggernaut
						has_artifact = nurgle_fly
						has_artifact = disc_tzeentch
						has_artifact = slaanesh_steed
					}
				}
			}
		}
	}
	warp_summon_army_nurgle = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 18

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			nurgle_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = nurgle_warp
		}
		allow = {
			#show_only_failed_conditions = yes
			#nurgle_offmap_decisions_enabled_trigger = yes

			FROM = {
				has_secret_religion = no
				show_scope_change = no
				OR = {
					AND = {
						follower_of_nurgle = yes
						has_offmap_currency = { offmap = nurgle_warp value = 1000 }
					}
					AND = {
						increased_boon_cost = yes
						has_offmap_currency = { offmap = nurgle_warp value = 2500 }
					}
				}
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		effect = {
			FROM = {
				show_scope_change = no

				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend

				if = {
					limit = { follower_of_nurgle = yes increased_boon_cost = no }
					add_offmap_currency = {
						offmap = nurgle_warp
						value = -1000
					}
				}
				else = {
					add_offmap_currency = {
						offmap = nurgle_warp
						value = -2500
					}
				}
				capital_scope = {
					PREV = {
						spawn_unit = {
							owner = FROM
							province = PREV
							home = PREV
							earmark = summoned_daemons
							troops = {
								daemonic_host = { 1000 1000 }
								daemonic_host = { 1000 1000 }
							}
							attrition = 0
							disband_on_peace = no
							maintenance_multiplier = 0
						}
					}
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
			modifier = {
				factor = 0.3
				FROM = {
					war = no
					NOT = { has_offmap_currency = { offmap = nurgle_warp value = 5000 } }
				}
			}
			modifier = {
				factor = 0.3
				FROM = {
					war = yes
					NOR = {
						is_primary_war_defender = yes
						is_primary_war_attacker = yes
						any_war = {
							using_cb = new_crusade
						}
						has_offmap_currency = { offmap = nurgle_warp value = 5000 }
					}
				}
			}
			modifier = {
				factor = 10
				FROM = {
					war = yes
					OR = {
						is_primary_war_defender = yes
						is_primary_war_attacker = yes
						any_war = {
							using_cb = new_crusade
						}
					}
				}
			}
		}
	}
	learn_lore_nurgle = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			nurgle_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = nurgle_warp
		}
		allow = {
			#show_only_failed_conditions = yes
			#nurgle_offmap_decisions_enabled_trigger = yes

			FROM = {
				has_secret_religion = no
				show_scope_change = no
				is_trained_mage = no
				OR = {
					AND = {
						follower_of_nurgle = yes
						has_offmap_currency = { offmap = nurgle_warp value = 2500 }
					}
					AND = {
						increased_boon_cost = yes
						has_offmap_currency = { offmap = nurgle_warp value = 4000 }
					}
				}
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				NOR = {
					is_trained_mage = yes
					trait = khorne_berserker
				}
			}
		}
		effect = {
			FROM = {
				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend
				random_lore_mage_effect = yes
				if = {
					limit = { follower_of_nurgle = yes increased_boon_cost = no }
					add_offmap_currency = {
						offmap = nurgle_warp
						value = -2500
					}
				}
				else = {
					add_offmap_currency = {
						offmap = nurgle_warp
						value = -4000
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	claim_championship_nurgle = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			is_playable = yes
			nurgle_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = nurgle_warp
		}

		allow = {
			follower_of_nurgle = yes
			#show_only_failed_conditions = yes
			#nurgle_offmap_decisions_enabled_trigger = yes

			FROM = {
				has_secret_religion = no
				follower_of_nurgle = yes
				show_scope_change = no
				prestige = 2500
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				is_chaos_champion_trigger = no
				NOT = { trait = chosen_nurgle }
				NOT = { trait = prince_nurgle }
				NOT = { trait = everchosen }
				trigger_if={
					limit = { ai=yes }
					has_offmap_currency = { offmap= nurgle_warp value = 250}
				}
				trigger_else = {
					has_offmap_currency = { offmap = nurgle_warp value = 1000 }
				}
			}
		}
		effect = {
			FROM = {
				if = {
					limit = {
						ai = yes
					}
					add_offmap_currency = {
						offmap = khorne_warp
						value = -500
					}
				}
				else = {
					add_offmap_currency = {
						offmap = khorne_warp
						value = -1000
					}
				}
			}
			FROM = { add_trait = champion_khorne }
		}

		ai_will_do = {
			factor = 2
			modifier = {
				factor = 5
				FROM = {
					OR = {
						ai_zeal = 100
						ai_ambition = 100
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	claim_chosenhood_nurgle = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			is_playable = yes
			nurgle_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = nurgle_warp
		}

		allow = {
			follower_of_nurgle = yes
			#show_only_failed_conditions = yes
			#nurgle_offmap_decisions_enabled_trigger = yes

			FROM = {
				has_secret_religion = no
				follower_of_nurgle = yes
				show_scope_change = no
				prestige = 5000
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				trait = champion_nurgle
				NOT = { trait = chosen_nurgle }
				NOT = { trait = prince_nurgle }
				NOT = { trait = everchosen }
				trigger_if={
					limit = { ai=yes }
					has_offmap_currency = { offmap= nurgle_warp value = 250}
				}
				trigger_else = {
					has_offmap_currency = { offmap = nurgle_warp value = 1500 }
				}
			}
		}
		effect = {
			FROM = {
				if = {
					limit = {
						ai = yes
					}
					add_offmap_currency = {
						offmap = nurgle_warp
						value = -250
					}
				}
				else = {
					add_offmap_currency = {
						offmap = nurgle_warp
						value = -1500
					}
				}
			}
			FROM = {add_trait = chosen_nurgle}
		}

		ai_will_do = {
			factor = 3
			modifier = {
				factor = 5
				FROM = {
					OR = {
						ai_zeal = 100
						ai_ambition = 100
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	claim_divinity_nurgle = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			is_playable = yes
			nurgle_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = nurgle_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#nurgle_offmap_decisions_enabled_trigger = yes

			FROM = {
				has_secret_religion = no
				follower_of_nurgle = yes
				show_scope_change = no
				prestige = 10000
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				trait = chosen_nurgle
				NOT = { trait = prince_nurgle }
				NOT = { trait = everchosen }
				NOT = { is_daemon_prince_trigger = yes }
				trigger_if={
					limit = { ai=yes }
					has_offmap_currency = { offmap= nurgle_warp value = 1000}
				}
				trigger_else = {
					has_offmap_currency = { offmap = nurgle_warp value = 2000 }
				}
			}
		}
		effect = {
			FROM = {
				if = {
					limit = {
						 ai = yes
					}
					add_offmap_currency = {
						offmap = nurgle_warp
						value = -1000
					}
				}
				else = {
				add_offmap_currency = {
					offmap = nurgle_warp
					value = -2000
					}
				}
			}
			FROM = {
				hidden_effect = {
					remove_trait = chosen_khorne
					remove_trait = chosen_nurgle
					remove_trait = chosen_slaanesh
					remove_trait = chosen_tzeentch
					remove_trait = champion_undivided
					remove_trait = chaos_chosen
					set_graphical_culture = prince_nurgle
					remove_race_trait_effect = yes
				}
				add_trait = nurgle_demon
				add_trait = prince_nurgle
				religion = nurgle
				character_event = { id = schaosfl.8005 }
			}
		}

		ai_will_do = {
			factor = 999
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
}
#SLAANESH
#PAYING TRIBUTE DECISIONS (GAIN GRACE)
offmap_decisions = {
	warp_offering_slaanesh = {
		only_playable = yes
		button_name = offmap_gifts
		ai_check_interval = 12

		potential = {
			is_offmap_tag = slaanesh_warp
		}

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			slaanesh_offmap_enabled_trigger = yes
		}

		allow = {
			#show_only_failed_conditions = yes
			#slaanesh_offmap_tribute_decisions_enabled_trigger = yes

			FROM = {
				show_scope_change = no
				scaled_wealth = { value = 4 min = 250 max = 2500 }
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}
		effect = {
			FROM = {
				sound_effect = china_grace_gain
				scaled_wealth = { value = -4 min = -250 } #If this changes the ai chances should probably be adjusted
				add_offmap_currency = {
							offmap = slaanesh_warp
							value = 100
						}
			}
		}


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.66 # slow down
			}
			modifier = {
				factor = 0.1
				FROM = { NOT = { monthly_income = 10 } } #I.e. it would take more than 4 years to collect the 500 gold
			}
			modifier = {
				factor = 1.1
				FROM = {
					OR = {
						trait = zealous
						trait = chosen_slaanesh
						trait = champion_slaanesh
						trait = prince_slaanesh
						ai_zeal = 75
					}
				}
			}
		}
	}
	warp_offer_sacrifice_slaanesh = {
		only_playable = yes
		button_name = offmap_gifts

		third_party_filter = home_court
		ai_third_party_filter = home_court
		third_party = FROM
		ai_check_interval = 12
		show_third_party_potential = yes

		potential = {
			is_offmap_tag = slaanesh_warp
		}

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			slaanesh_offmap_enabled_trigger = yes
		}

		allow = {
			#show_only_failed_conditions = yes
			#slaanesh_offmap_tribute_decisions_enabled_trigger = yes
			FROM = {
				show_scope_change = no
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		third_party_potential = {
			#show_only_failed_conditions = yes
			FROMFROM = {
				host = { character = ROOT_FROM }
				show_scope_change = no
				prisoner = yes
				is_invincible_trigger = no
				NOT = { is_heir = yes }
			}
		}

		third_party_allow = {
			#show_only_failed_conditions = yes
			FROM = {
				any_courtier = {
					character = FROMFROM
				}
			}
		}

		effect = {
			save_event_target_as = target_governor
			FROM = {
				sound_effect = china_grace_gain
				save_event_target_as = target_tribute_sender
			}
			slaanesh_warp = {
				offmap_ruler = {
					FROMFROM = {
						save_event_target_as = person_sent_as_tribute
						death = { death_reason = death_sacrificed killer = PREV }
					}
				}
			}

			FROM = {
				show_scope_change = no
				add_offmap_currency = {
					offmap = slaanesh_warp
					value = 50
				}
				hidden_tooltip = {
				change_variable = { which = burned_hearts_points value = 2 }
				bloodthirsty_tiered_traits_effect = yes
				}

			}
			#################################
		}


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 2
				FROM = {
					OR = {
						trait = zealous
						trait = chosen_slaanesh
						trait = champion_slaanesh
						trait = prince_slaanesh
						ai_zeal = 50
					}
				}
			}
		}
	}
	warp_offer_artifact_slaanesh = {
		only_playable = yes
		button_name = offmap_gifts

		third_party_filter = artifacts
		ai_third_party_filter = artifacts
		third_party = FROM
		ai_check_interval = 60
		show_third_party_potential = yes

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			slaanesh_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = slaanesh_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#slaanesh_offmap_tribute_decisions_enabled_trigger = yes
			FROM = {
				show_scope_change = no
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		third_party_potential = {
			#show_only_failed_conditions = yes
			FROMFROM = {
				show_scope_change = no
				custom_tooltip = {
					text = send_artifact_potential_tt
					quality > 2
					NOR = {
						has_artifact_flag = flag_considering_donation
						has_artifact_flag = curse
						has_artifact_flag = cannot_gift_to_warp
					}
				}
			}
		}

		third_party_allow = {

		}

		third_party_score = {
			factor = 50

			additive_modifier = {
				value = 50
				FROMFROM = {
					quality == 4
				}
			}
			additive_modifier = {
				value = 100
				FROMFROM = {
					quality == 5
				}
			}
			additive_modifier = {
				value = 150
				FROMFROM = {
					quality == 6
				}
			}
			additive_modifier = {
				value = 200
				FROMFROM = {
					quality == 7
				}
			}
			additive_modifier = {
				value = 300
				FROMFROM = {
					quality == 8
				}
			}
			additive_modifier = {
				value = 400
				FROMFROM = {
					quality == 9
				}
			}
			additive_modifier = {
				value = 500
				FROMFROM = {
					quality == 10
				}
			}
			additive_modifier = {
				value = -50
				FROMFROM = {
					quality < 4
					has_artifact_flag = lore #Magnum Opus book
				}
			}
			additive_modifier = {
				value = -100
				FROMFROM = {
					quality == 4
					has_artifact_flag = lore #Magnum Opus book
				}
			}
			additive_modifier = {
				value = -25
				FROMFROM = {
					quality < 4
					has_artifact_flag = created
				}
			}
			additive_modifier = {
				value = -100
				FROMFROM = {
					quality == 4
					has_artifact_flag = created
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					show_scope_change = no
					liked_by_offmap = {
						type = slaanesh_warp
					}
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					show_scope_change = no
					disliked_by_offmap = {
						type = slaanesh_warp
					}
				}
			}
		}

		effect = {
			FROM = {
				show_scope_change = no
				add_offmap_currency = {
					offmap = slaanesh_warp
					value = local_third_party_score
				}
			}

			# Like/Dislike effect description
			#################################
			if = {
				limit = {
					OR = {
						FROM = {
							liked_by_offmap = {
								type = slaanesh_warp
							}
						}
						slaanesh_warp = {
							offmap_has_like = likes_wealth
						}
					}
					NOR = {
						FROM = {
							disliked_by_offmap = {
								type = slaanesh_warp
							}
						}
						slaanesh_warp = {
							offmap_has_dislike = likes_wealth
						}
					}
				}
				e_realm_of_slaanesh = {
					show_scope_change = no
					offmap_power = {
						show_scope_change = no
						custom_tooltip = { text = likes_tt }
					}
				}
			}
			#################################
			hidden_tooltip = {
				if = {
					limit = {
						FROM = {
							ai = no
						}
						FROMFROM = {
							quality > 3
						}
					}
					FROM = {
						set_character_flag = achievement_a_curious_trinket
					}
				}
			}
			save_event_target_as = target_governor
			FROM = {
				sound_effect = china_grace_gain
				save_event_target_as = target_tribute_sender
			}

			hidden_effect = { #to reduce cluttered tooltip (effect already heavily implied...)
				slaanesh_warp = {
					offmap_ruler = {
						ROOT_FROMFROM = {
							show_scope_change = no
							tooltip = {
								transfer_artifact = {
									to = PREV
									from = ROOT_FROM
								}
							}
							hidden_effect = { unsafe_destroy_artifact = yes }
						}
					}
				}
			}

			hidden_effect = {
				FROM = {
					set_character_flag = jd_gifting_artifact
				}
				hidden_effect = { slaanesh_warp = { governor = { character_event = { id = JD.20023 } } } }
			}
		}


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				FROMFROM = {
					quality > 3
				}
			}
			modifier = {
				factor = 0.1 # slow down
			}
		}
	}
	warp_mark_decision_slaanesh = {
		only_playable = yes
		button_name = offmap_gifts
		ai_check_interval = 12

		potential = {
			is_offmap_tag = slaanesh_warp
		}

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			NOR = {
				trait = mark_khorne
				trait = mark_nurgle
				trait = mark_tzeentch
				trait = mark_slaanesh
				trait = everchosen
			}
			slaanesh_offmap_enabled_trigger = yes
		}

		allow = {
			#show_only_failed_conditions = yes
			#slaanesh_offmap_tribute_decisions_enabled_trigger = yes
			FROM = {
				show_scope_change = no
				prestige = 1500
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				NOR = {
					trait = mark_khorne
					trait = mark_nurgle
					trait = mark_tzeentch
					trait = mark_slaanesh
				}
			}
		}
		effect = {
			FROM = {
				add_offmap_currency = {
					offmap = slaanesh_warp
					value = 500
				}
				add_trait = mark_slaanesh
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 2
				FROM = {
					OR = {
						ai_zeal = 35
						ai_ambition = 50
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
}
#REQUESTING BOON DECISIONS (PENDING GRACE)
offmap_decisions = {
	#If your grace decisions will spawn a character then give them an appropriate flag eg: is_chinese_administrator and add them to the JD.60310 trigger switch to refund grace if they die early
	warp_artifact_slaanesh = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			slaanesh_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = slaanesh_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#slaanesh_offmap_decisions_enabled_trigger = yes

			FROM = {
				show_scope_change = no
				has_offmap_currency = { offmap = slaanesh_warp value = 500 }
				OR = {
					AND = {
						follower_of_slaanesh = yes
						has_offmap_currency = { offmap = slaanesh_warp value = 500 }
					}
					AND = {
						increased_boon_cost = yes
						has_offmap_currency = { offmap = slaanesh_warp value = 1500 }
					}
				}
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		effect = {
			FROM = {
				show_scope_change = no

				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend
				if = {
					limit = { follower_of_slaanesh = yes increased_boon_cost = no }
					add_offmap_currency = {
						offmap = slaanesh_warp
						value = -500
					}
				}
				else = {
					add_offmap_currency = {
						offmap = slaanesh_warp
						value = -1500
					}
				}
				character_event = { id = RS_offmapS.20001 }
			}
			hidden_effect = { FROM = { set_china_boon_cd_effect = yes } }
		}


		ai_will_do = {
			factor = 1

			modifier = {
				factor = 0.1 # slow down
			}
			modifier = {
				factor = 0.1
				FROM = {
					NOT = {
						trait = greedy
					}
				}
			}
			modifier = {
				factor = 100
				FROM = {
					has_offmap_currency = { offmap = slaanesh_warp value = 5000 }
				}
			}
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	warp_servant_slaanesh = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			slaanesh_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = slaanesh_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#slaanesh_offmap_decisions_enabled_trigger = yes

			FROM = {
				has_secret_religion = no
				show_scope_change = no
				OR = {
					AND = {
						follower_of_slaanesh = yes
						has_offmap_currency = { offmap = slaanesh_warp value = 750 }
					}
					AND = {
						increased_boon_cost = yes
						has_offmap_currency = { offmap = slaanesh_warp value = 1500 }
					}
				}
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		effect = {
			FROM = {
				show_scope_change = no

				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend

				if = {
					limit = { follower_of_slaanesh = yes increased_boon_cost = no }
					add_offmap_currency = {
						offmap = slaanesh_warp
						value = -750
					}
				}
				else = {
					add_offmap_currency = {
						offmap = slaanesh_warp
						value = -1500
					}
				}
				hidden_effect = { character_event = { id = RS_offmapS.10001 } }
			}

		}


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
			modifier = {
				factor = 0
				FROM = {
					any_friend = {
						trait = slaanesh_daemonette
					}
				}
			}
		}
	}
	warp_champion_slaanesh = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			slaanesh_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = slaanesh_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#slaanesh_offmap_decisions_enabled_trigger = yes

			FROM = {
				OR={
				trait = chosen_slaanesh
				trait = slaanesh_demon
				}
				has_secret_religion = no
				show_scope_change = no
				OR = {
					AND = {
						follower_of_slaanesh = yes
						has_offmap_currency = { offmap = slaanesh_warp value = 1250 }
					}
					AND = {
						increased_boon_cost = yes
						has_offmap_currency = { offmap = slaanesh_warp value = 3750 }
					}
				}
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		effect = {
			FROM = {
				show_scope_change = no

				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend

				if = {
					limit = { follower_of_slaanesh = yes increased_boon_cost = no }
					add_offmap_currency = {
						offmap = slaanesh_warp
						value = -1250
					}
				}
				else = {
					add_offmap_currency = {
						offmap = slaanesh_warp
						value = -3750
					}
				}
				hidden_effect = { character_event = { id = RS_offmapS.30001 } }
			}

		}


		ai_will_do = {
			factor = 0.3
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
			modifier = {
				factor = 0
				FROM = {
					any_courtier = {
						is_chaos_champion_trigger = yes
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					is_chaos_champion_trigger = no
				}
			}
		}
	}
	warp_claim_steed_slaanesh = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			slaanesh_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = slaanesh_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#slaanesh_offmap_decisions_enabled_trigger = yes

			FROM = {
				show_scope_change = no
				OR = {
					AND = {
						follower_of_slaanesh = yes
						has_offmap_currency = { offmap = slaanesh_warp value = 1250 }
					}
					AND = {
						increased_boon_cost = yes
						has_offmap_currency = { offmap = slaanesh_warp value = 2000 }
					}
				}
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				NOT = { has_artifact = slaanesh_steed }
			}
		}

		effect = {
			FROM = {
				has_secret_religion = no
				show_scope_change = no

				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend
				add_artifact = slaanesh_steed
				if = {
					limit = { follower_of_slaanesh = yes increased_boon_cost = no }
					add_offmap_currency = {
						offmap = slaanesh_warp
						value = -1250
					}
				}
				else = {
					add_offmap_currency = {
						offmap = slaanesh_warp
						value = -2000
					}
				}
			}

		}


		ai_will_do = {
			factor = 0.2
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
			modifier = {
				factor = 0
				FROM = {
					OR = {
						has_artifact = khorne_juggernaut
						has_artifact = nurgle_fly
						has_artifact = disc_tzeentch
						has_artifact = slaanesh_steed
					}
				}
			}
		}
	}
	warp_summon_army_slaanesh = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 18

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			slaanesh_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = slaanesh_warp
		}
		allow = {
			#show_only_failed_conditions = yes
			#slaanesh_offmap_decisions_enabled_trigger = yes

			FROM = {
				has_secret_religion = no
				show_scope_change = no
				OR = {
					AND = {
						follower_of_slaanesh = yes
						has_offmap_currency = { offmap = slaanesh_warp value = 1000 }
					}
					AND = {
						increased_boon_cost = yes
						has_offmap_currency = { offmap = slaanesh_warp value = 2500 }
					}
				}
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		effect = {
			FROM = {
				show_scope_change = no

				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend

				if = {
					limit = { follower_of_slaanesh = yes increased_boon_cost = no }
					add_offmap_currency = {
						offmap = slaanesh_warp
						value = -1000
					}
				}
				else = {
					add_offmap_currency = {
						offmap = slaanesh_warp
						value = -2500
					}
				}
				capital_scope = {
					PREV = {
						spawn_unit = {
							owner = FROM
							province = PREV
							home = PREV
							earmark = summoned_daemons
							troops = {
								daemonic_host = { 1000 1000 }
							}
							attrition = 0
							disband_on_peace = no
							maintenance_multiplier = 0
						}
					}
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
			modifier = {
				factor = 0.3
				FROM = {
					war = no
					NOT = { has_offmap_currency = { offmap = slaanesh_warp value = 5000 } }
				}
			}
			modifier = {
				factor = 0.3
				FROM = {
					war = yes
					NOR = {
						is_primary_war_defender = yes
						is_primary_war_attacker = yes
						any_war = {
							using_cb = new_crusade
						}
						has_offmap_currency = { offmap = slaanesh_warp value = 5000 }
					}
				}
			}
			modifier = {
				factor = 10
				FROM = {
					war = yes
					OR = {
						is_primary_war_defender = yes
						is_primary_war_attacker = yes
						any_war = {
							using_cb = new_crusade
						}
					}
				}
			}
		}
	}
	learn_lore_slaanesh = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			slaanesh_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = slaanesh_warp
		}
		allow = {
			#show_only_failed_conditions = yes
			#slaanesh_offmap_decisions_enabled_trigger = yes

			FROM = {
				has_secret_religion = no
				show_scope_change = no
				is_trained_mage = no
				OR = {
					AND = {
						follower_of_slaanesh = yes
						has_offmap_currency = { offmap = slaanesh_warp value = 2500 }
					}
					AND = {
						increased_boon_cost = yes
						has_offmap_currency = { offmap = slaanesh_warp value = 4000 }
					}
				}
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				NOR = {
					is_trained_mage = yes
					trait = khorne_berserker
				}
			}
		}
		effect = {
			FROM = {
				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend
				random_lore_mage_effect = yes
				if = {
					limit = { follower_of_slaanesh = yes increased_boon_cost = no }
					add_offmap_currency = {
						offmap = slaanesh_warp
						value = -2500
					}
				}
				else = {
					add_offmap_currency = {
						offmap = slaanesh_warp
						value = -4000
					}
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	claim_championship_slaanesh = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			is_playable = yes
			slaanesh_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = slaanesh_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#slaanesh_offmap_decisions_enabled_trigger = yes

			FROM = {
				has_secret_religion = no
				follower_of_slaanesh = yes
				show_scope_change = no
				prestige = 2500
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				is_chaos_champion_trigger = no
				NOR = {
					trait = chosen_slaanesh
				 	trait = prince_slaanesh
			 		trait = everchosen
				}
				trigger_if={
					limit = { ai=yes }
					has_offmap_currency = { offmap = slaanesh_warp value = 250}
				}
				trigger_else = {
					has_offmap_currency = { offmap = slaanesh_warp value = 1000 }
				}
			}
		}
		effect = {
			FROM = {
				if = {
					limit = {
						 ai = yes
					}
					add_offmap_currency = {
						offmap = slaanesh_warp
						value = -500
					}
				}
				else = {
				add_offmap_currency = {
					offmap = slaanesh_warp
					value = -1000
					}
				}
			}
			FROM = { add_trait = champion_slaanesh }
		}

		ai_will_do = {
			factor = 2
			modifier = {
				factor = 5
				FROM = {
					OR = {
						ai_zeal = 100
						ai_ambition = 100
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	claim_chosenhood_slaanesh = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			is_playable = yes
			slaanesh_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = slaanesh_warp
		}

		allow = {

			#show_only_failed_conditions = yes
			#slaanesh_offmap_decisions_enabled_trigger = yes
			FROM = {
				has_secret_religion = no
				follower_of_slaanesh = yes
				show_scope_change = no
				prestige = 5000
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				trait = champion_slaanesh
				NOT = { trait = chosen_slaanesh }
				NOT = { trait = prince_slaanesh }
				NOT = { trait = everchosen }
				trigger_if={
					limit = { ai=yes }
					has_offmap_currency = { offmap= slaanesh_warp value = 250}
				}
				trigger_else = {
					has_offmap_currency = { offmap = slaanesh_warp value = 1500 }
				}
			}
		}
		effect = {
			FROM = {
				if = {
					limit = {
						ai = yes
					}
					add_offmap_currency = {
						offmap = slaanesh_warp
						value = -250
					}
				}
				else = {
					add_offmap_currency = {
						offmap = slaanesh_warp
						value = -1500
					}
				}
			}
			FROM = {add_trait = chosen_slaanesh }
		}

		ai_will_do = {
			factor = 3
			modifier = {
				factor = 5
				FROM = {
					OR = {
						ai_zeal = 100
						ai_ambition = 100
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	claim_divinity_slaanesh = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			is_playable = yes
			slaanesh_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = slaanesh_warp
		}

		allow = {

			#show_only_failed_conditions = yes
			#slaanesh_offmap_decisions_enabled_trigger = yes

			FROM = {
				has_secret_religion = no
				follower_of_slaanesh = yes
				show_scope_change = no
				prestige = 10000
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				trait = chosen_slaanesh
				NOT = { trait = prince_slaanesh }
				NOT = { trait = everchosen }
				NOT = { trait = slaanesh_demon }
				NOT = { is_daemon_prince_trigger = yes }
				trigger_if={
					limit = { ai=yes }
					has_offmap_currency = { offmap=slaanesh_warp value = 1000}
				}
				trigger_else = {
					has_offmap_currency = { offmap = slaanesh_warp value = 2000 }
				}
			}
		}
		effect = {
			FROM = {
				if = {
					limit = {
						ai = yes
					}
					add_offmap_currency = {
						offmap = slaanesh_warp
						value = -1000
					}
				}
				else = {
				add_offmap_currency = {
					offmap = slaanesh_warp
					value = -2000
					}
				}
			}
			FROM = {
				hidden_effect = {
					remove_trait = chosen_khorne
					remove_trait = chosen_nurgle
					remove_trait = chosen_slaanesh
					remove_trait = chosen_tzeentch
					remove_trait = champion_undivided
					remove_trait = chaos_chosen
					set_graphical_culture = prince_slaanesh
					remove_race_trait_effect = yes
				}
				add_trait = slaanesh_demon
				add_trait = prince_slaanesh
				religion = slaanesh
				character_event = { id = schaosfl.8005 }
			}
		}

		ai_will_do = {
			factor = 999
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
}
#TZEENTCH
#PAYING TRIBUTE DECISIONS (GAIN GRACE)
offmap_decisions = {
	warp_offering_tzeentch = {
		only_playable = yes
		button_name = offmap_gifts
		ai_check_interval = 12

		potential = {
			is_offmap_tag = tzeentch_warp
		}

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			tzeentch_offmap_enabled_trigger = yes
		}

		allow = {
			#show_only_failed_conditions = yes
			#tzeentch_offmap_tribute_decisions_enabled_trigger = yes
			FROM = {
				show_scope_change = no
				scaled_wealth = { value = 4 min = 250 max = 2500 }
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}
		effect = {
			FROM = {
				sound_effect = china_grace_gain
				scaled_wealth = { value = -4 min = -250 } #If this changes the ai chances should probably be adjusted
				add_offmap_currency = {
							offmap = tzeentch_warp
							value = 100
						}
			}
		}


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.66 # slow down
			}
			modifier = {
				factor = 0.1
				FROM = { NOT = { monthly_income = 10 } } #I.e. it would take more than 4 years to collect the 500 gold
			}
			modifier = {
				factor = 1.1
				FROM = {
					OR = {
						trait = zealous
						trait = chosen_tzeentch
						trait = champion_tzeentch
						trait = prince_tzeentch
						ai_zeal = 75
					}
				}
			}
		}
	}
	warp_offer_sacrifice_tzeentch = {
		only_playable = yes
		button_name = offmap_gifts

		third_party_filter = home_court
		ai_third_party_filter = home_court
		third_party = FROM
		ai_check_interval = 12
		show_third_party_potential = yes

		potential = {
			is_offmap_tag = tzeentch_warp
		}

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			tzeentch_offmap_enabled_trigger = yes
		}

		allow = {
			#show_only_failed_conditions = yes
			#tzeentch_offmap_tribute_decisions_enabled_trigger = yes
			FROM = {
				show_scope_change = no
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		third_party_potential = {
			#show_only_failed_conditions = yes
			FROMFROM = {
				host = { character = ROOT_FROM }
				show_scope_change = no
				prisoner = yes
				is_invincible_trigger = no
				NOT = { is_heir = yes }
			}
		}

		third_party_allow = {
			#show_only_failed_conditions = yes
			FROM = {
				any_courtier = {
					character = FROMFROM
				}
			}
		}

		effect = {
			save_event_target_as = target_governor
			FROM = {
				sound_effect = china_grace_gain
				save_event_target_as = target_tribute_sender
			}
			tzeentch_warp = {
				offmap_ruler = {
					FROMFROM = {
						save_event_target_as = person_sent_as_tribute
						death = { death_reason = death_sacrificed killer = PREV }
					}
				}
			}

			FROM = {
				show_scope_change = no
				add_offmap_currency = {
					offmap = tzeentch_warp
					value = 50
				}
				hidden_tooltip = {
				change_variable = { which = burned_hearts_points value = 2 }
				bloodthirsty_tiered_traits_effect = yes
				}

			}
			#################################
		}


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 2
				FROM = {
					OR = {
						trait = zealous
						trait = chosen_tzeentch
						trait = champion_tzeentch
						trait = prince_tzeentch
						ai_zeal = 50
					}
				}
			}
		}
	}
	warp_offer_artifact_tzeentch = {
		only_playable = yes
		button_name = offmap_gifts

		third_party_filter = artifacts
		ai_third_party_filter = artifacts
		third_party = FROM
		ai_check_interval = 60
		show_third_party_potential = yes

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			tzeentch_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = tzeentch_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#tzeentch_offmap_tribute_decisions_enabled_trigger = yes
			FROM = {
				show_scope_change = no
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		third_party_potential = {
			#show_only_failed_conditions = yes
			FROMFROM = {
				show_scope_change = no
				custom_tooltip = {
					text = send_artifact_potential_tt
					quality > 2
					NOR = {
						has_artifact_flag = flag_considering_donation
						has_artifact_flag = curse
						has_artifact_flag = cannot_gift_to_warp
					}
				}
			}
		}

		third_party_allow = {

		}

		third_party_score = {
			factor = 50

			additive_modifier = {
				value = 50
				FROMFROM = {
					quality == 4
				}
			}
			additive_modifier = {
				value = 100
				FROMFROM = {
					quality == 5
				}
			}
			additive_modifier = {
				value = 150
				FROMFROM = {
					quality == 6
				}
			}
			additive_modifier = {
				value = 200
				FROMFROM = {
					quality == 7
				}
			}
			additive_modifier = {
				value = 300
				FROMFROM = {
					quality == 8
				}
			}
			additive_modifier = {
				value = 400
				FROMFROM = {
					quality == 9
				}
			}
			additive_modifier = {
				value = 500
				FROMFROM = {
					quality == 10
				}
			}
			additive_modifier = {
				value = -50
				FROMFROM = {
					quality < 4
					has_artifact_flag = lore #Magnum Opus book
				}
			}
			additive_modifier = {
				value = -100
				FROMFROM = {
					quality == 4
					has_artifact_flag = lore #Magnum Opus book
				}
			}
			additive_modifier = {
				value = -25
				FROMFROM = {
					quality < 4
					has_artifact_flag = created
				}
			}
			additive_modifier = {
				value = -100
				FROMFROM = {
					quality == 4
					has_artifact_flag = created
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					show_scope_change = no
					liked_by_offmap = {
						type = tzeentch_warp
					}
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					show_scope_change = no
					disliked_by_offmap = {
						type = tzeentch_warp
					}
				}
			}
		}

		effect = {
			FROM = {
				show_scope_change = no
				add_offmap_currency = {
					offmap = tzeentch_warp
					value = local_third_party_score
				}
			}

			# Like/Dislike effect description
			#################################
			if = {
				limit = {
					OR = {
						FROM = {
							liked_by_offmap = {
								type = tzeentch_warp
							}
						}
						tzeentch_warp = {
							offmap_has_like = likes_wealth
						}
					}
					NOR = {
						FROM = {
							disliked_by_offmap = {
								type = tzeentch_warp
							}
						}
						tzeentch_warp = {
							offmap_has_dislike = likes_wealth
						}
					}
				}
				e_realm_of_tzeentch = {
					show_scope_change = no
					offmap_power = {
						show_scope_change = no
						custom_tooltip = { text = likes_tt }
					}
				}
			}
			#################################
			hidden_tooltip = {
				if = {
					limit = {
						FROM = {
							ai = no
						}
						FROMFROM = {
							quality > 3
						}
					}
					FROM = {
						set_character_flag = achievement_a_curious_trinket
					}
				}
			}
			save_event_target_as = target_governor
			FROM = {
				sound_effect = china_grace_gain
				save_event_target_as = target_tribute_sender
			}

			hidden_effect = { #to reduce cluttered tooltip (effect already heavily implied...)
				tzeentch_warp = {
					offmap_ruler = {
						ROOT_FROMFROM = {
							show_scope_change = no
							tooltip = {
								transfer_artifact = {
									to = PREV
									from = ROOT_FROM
								}
							}
							hidden_effect = { unsafe_destroy_artifact = yes }
						}
					}
				}
			}

			hidden_effect = {
				FROM = {
					set_character_flag = jd_gifting_artifact
				}
				hidden_effect = { tzeentch_warp = { governor = { character_event = { id = JD.20023 } } } }
			}
		}


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				FROMFROM = {
					quality > 3
				}
			}
			modifier = {
				factor = 0.1 # slow down
			}
		}
	}
	warp_mark_decision_tzeentch = {
		only_playable = yes
		button_name = offmap_gifts
		ai_check_interval = 12

		potential = {
			is_offmap_tag = tzeentch_warp
		}

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			NOR = {
				trait = mark_khorne
				trait = mark_nurgle
				trait = mark_tzeentch
				trait = mark_slaanesh
				trait = everchosen
			}
			tzeentch_offmap_enabled_trigger = yes
		}

		allow = {
			#show_only_failed_conditions = yes
			#tzeentch_offmap_tribute_decisions_enabled_trigger = yes
			FROM = {
				show_scope_change = no
				prestige = 1500
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				NOR = {
					trait = mark_khorne
					trait = mark_nurgle
					trait = mark_tzeentch
					trait = mark_slaanesh
				}
			}
		}
		effect = {
			FROM = {
				add_offmap_currency = {
					offmap = tzeentch_warp
					value = 500
				}
				add_trait = mark_tzeentch
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 2
				FROM = {
					OR = {
						ai_zeal = 35
						ai_ambition = 50
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
}
#REQUESTING BOON DECISIONS (PENDING GRACE)
offmap_decisions = {
	#If your grace decisions will spawn a character then give them an appropriate flag eg: is_chinese_administrator and add them to the JD.60310 trigger switch to refund grace if they die early
	warp_artifact_tzeentch = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			tzeentch_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = tzeentch_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#tzeentch_offmap_decisions_enabled_trigger = yes
			FROM = {
				show_scope_change = no
				OR = {
					AND = {
						follower_of_tzeentch = yes
						has_offmap_currency = { offmap = tzeentch_warp value = 500 }
					}
					AND = {
						increased_boon_cost = yes
						has_offmap_currency = { offmap = tzeentch_warp value = 1500 }
					}
				}
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		effect = {
			FROM = {
				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend
				if = {
					limit = { follower_of_tzeentch = yes increased_boon_cost = no }
					add_offmap_currency = {
						offmap = tzeentch_warp
						value = -500
					}
				}
				else = {
					add_offmap_currency = {
						offmap = tzeentch_warp
						value = -1500
					}
				}
				character_event = { id = RS_offmapT.20001 }
			}
			hidden_effect = { FROM = { set_china_boon_cd_effect = yes } }
		}


		ai_will_do = {
			factor = 1

			modifier = {
				factor = 0.1 # slow down
			}
			modifier = {
				factor = 0.1
				FROM = {
					NOT = {
						trait = greedy
					}
				}
			}
			modifier = {
				factor = 100
				FROM = {
					has_offmap_currency = { offmap = tzeentch_warp value = 5000 }
				}
			}
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	warp_servant_tzeentch = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			tzeentch_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = tzeentch_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#tzeentch_offmap_decisions_enabled_trigger = yes
			FROM = {
				has_secret_religion = no
				show_scope_change = no
				OR = {
					AND = {
						follower_of_tzeentch = yes
						has_offmap_currency = { offmap = tzeentch_warp value = 750 }
					}
					AND = {
						increased_boon_cost = yes
						has_offmap_currency = { offmap = tzeentch_warp value = 1500 }
					}
				}
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		effect = {
			FROM = {
				show_scope_change = no
				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend
				if = {
					limit = { follower_of_tzeentch = yes increased_boon_cost = no }
					add_offmap_currency = {
						offmap = tzeentch_warp
						value = -750
					}
				}
				else = {
					add_offmap_currency = {
						offmap = tzeentch_warp
						value = -1500
					}
				}
				hidden_effect = { character_event = { id = RS_offmapT.10001 } }
				#custom_tooltip = { text =   }
			}

		}


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
			modifier = {
				factor = 0
				FROM = {
					any_friend = {
						trait = nurgle_plaguebearer
					}
				}
			}
		}
	}
	warp_champion_tzeentch = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			tzeentch_offmap_enabled_trigger = yes
		}
		potential = {
			is_offmap_tag = tzeentch_warp
		}
		allow = {
			#show_only_failed_conditions = yes
			#tzeentch_offmap_decisions_enabled_trigger = yes
			FROM = {
				OR={
				trait = chosen_tzeentch
				trait = tzeentch_demon
				}
				has_secret_religion = no
				show_scope_change = no
				OR = {
					AND = {
						follower_of_tzeentch = yes
						has_offmap_currency = { offmap = tzeentch_warp value = 1250 }
					}
					AND = {
						increased_boon_cost = yes
						has_offmap_currency = { offmap = tzeentch_warp value = 3750 }
					}
				}
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}
		effect = {
			FROM = {
				show_scope_change = no

				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend

				if = {
					limit = { follower_of_tzeentch = yes increased_boon_cost = no }
					add_offmap_currency = {
						offmap = tzeentch_warp
						value = -1250
					}
				}
				else = {
					add_offmap_currency = {
						offmap = tzeentch_warp
						value = -3750
					}
				}
				hidden_effect = { character_event = { id = RS_offmapT.30001 } }
			}

		}
		ai_will_do = {
			factor = 0.3
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
			modifier = {
				factor = 0
				FROM = {
					any_courtier = {
						is_chaos_champion_trigger = yes
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					is_chaos_champion_trigger = no
				}
			}
		}
	}
	warp_claim_steed_tzeentch = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			tzeentch_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = tzeentch_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#tzeentch_offmap_decisions_enabled_trigger = yes
			FROM = {
				has_secret_religion = no
				show_scope_change = no
				OR = {
					AND = {
						follower_of_tzeentch = yes
						has_offmap_currency = { offmap = tzeentch_warp value = 1250 }
					}
					AND = {
						increased_boon_cost = yes
						has_offmap_currency = { offmap = tzeentch_warp value = 2000 }
					}
				}
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				NOT = { has_artifact = disc_tzeentch }
			}
		}

		effect = {
			FROM = {
				show_scope_change = no

				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend
				add_artifact = disc_tzeentch
				if = {
					limit = { follower_of_tzeentch = yes increased_boon_cost = no }
					add_offmap_currency = {
						offmap = tzeentch_warp
						value = -1250
					}
				}
				else = {
					add_offmap_currency = {
						offmap = tzeentch_warp
						value = -2000
					}
				}
			}

		}


		ai_will_do = {
			factor = 0.2
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
			modifier = {
				factor = 0
				FROM = {
					OR = {
						has_artifact = khorne_juggernaut
						has_artifact = nurgle_fly
						has_artifact = disc_tzeentch
						has_artifact = slaanesh_steed
					}
				}
			}
		}
	}
	warp_summon_army_tzeentch = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 18

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			tzeentch_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = tzeentch_warp
		}
		allow = {
			#show_only_failed_conditions = yes
			#tzeentch_offmap_decisions_enabled_trigger = yes
			FROM = {
				has_secret_religion = no
				show_scope_change = no
				OR = {
					AND = {
						follower_of_tzeentch = yes
						has_offmap_currency = { offmap = tzeentch_warp value = 1000 }
					}
					AND = {
						increased_boon_cost = yes
						has_offmap_currency = { offmap = tzeentch_warp value = 2500 }
					}
				}
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		effect = {
			FROM = {
				show_scope_change = no

				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend

				if = {
					limit = { follower_of_tzeentch = yes increased_boon_cost = no }
					add_offmap_currency = {
						offmap = tzeentch_warp
						value = -1000
					}
				}
				else = {
					add_offmap_currency = {
						offmap = tzeentch_warp
						value = -2500
					}
				}
				capital_scope = {
					PREV = {
						spawn_unit = {
							owner = FROM
							province = PREV
							home = PREV
							earmark = summoned_daemons
							troops = {
								daemonic_host = { 1000 1000 }
							}
							attrition = 0
							disband_on_peace = no
							maintenance_multiplier = 0
						}
					}
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
			modifier = {
				factor = 0.3
				FROM = {
					war = no
					NOT = { has_offmap_currency = { offmap = tzeentch_warp value = 5000 } }
				}
			}
			modifier = {
				factor = 0.3
				FROM = {
					war = yes
					NOR = {
						is_primary_war_defender = yes
						is_primary_war_attacker = yes
						any_war = {
							using_cb = new_crusade
						}
						has_offmap_currency = { offmap = tzeentch_warp value = 5000 }
					}
				}
			}
			modifier = {
				factor = 10
				FROM = {
					war = yes
					OR = {
						is_primary_war_defender = yes
						is_primary_war_attacker = yes
						any_war = {
							using_cb = new_crusade
						}
					}
				}
			}
		}
	}
	learn_lore_tzeentch = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			tzeentch_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = tzeentch_warp
		}
		allow = {
			#show_only_failed_conditions = yes
			#tzeentch_offmap_decisions_enabled_trigger = yes
			FROM = {
				has_secret_religion = no
				show_scope_change = no
				is_trained_mage = no
				OR = {
					AND = {
						follower_of_tzeentch = yes
						has_offmap_currency = { offmap = tzeentch_warp value = 2500 }
					}
					AND = {
						increased_boon_cost = yes
						has_offmap_currency = { offmap = tzeentch_warp value = 4000 }
					}
				}
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				NOR = {
					is_trained_mage = yes
					trait = khorne_berserker
				}
			}
		}
		effect = {
			FROM = {
				custom_tooltip = {
					text = mutations_test_tt
					mutation_toughness_test_effect = yes
				}
				sound_effect = china_grace_spend
				random_lore_mage_effect = yes
				if = {
					limit = { follower_of_tzeentch = yes increased_boon_cost = no }
					add_offmap_currency = {
						offmap = tzeentch_warp
						value = -2500
					}
				}
				else = {
					add_offmap_currency = {
						offmap = tzeentch_warp
						value = -4000
					}
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	claim_championship_tzeentch = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			is_playable = yes
			tzeentch_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = tzeentch_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#tzeentch_offmap_decisions_enabled_trigger = yes
			FROM = {
				has_secret_religion = no
				follower_of_tzeentch = yes
				show_scope_change = no
				prestige = 2500
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				is_chaos_champion_trigger = no
				NOR = {
					trait = chosen_tzeentch
					trait = prince_tzeentch
			 		trait = everchosen
				}
				trigger_if={
					limit = { ai=yes }
					has_offmap_currency = { offmap= tzeentch_warp value = 250}
				}
				trigger_else = {
					has_offmap_currency = { offmap = tzeentch_warp value = 1000 }
				}
			}
		}
		effect = {
			FROM = {
				if = {
					limit = {
						ai = yes
					}
					add_offmap_currency = {
						offmap = tzeentch_warp
						value = -250
					}
				}
				else = {
					add_offmap_currency = {
						offmap = tzeentch_warp
						value = -1000
					}
				}
			}
			FROM = { add_trait = champion_tzeentch }
		}

		ai_will_do = {
			factor = 2
			modifier = {
				factor = 5
				FROM = {
					OR = {
						ai_zeal = 100
						ai_ambition = 100
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	claim_chosenhood_tzeentch = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			is_playable = yes
			tzeentch_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = tzeentch_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#tzeentch_offmap_decisions_enabled_trigger = yes

			FROM = {
				has_secret_religion = no
				follower_of_tzeentch = yes
				show_scope_change = no
				prestige = 5000
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				trait = champion_tzeentch
				NOT = { trait = chosen_tzeentch }
				NOT = { trait = prince_tzeentch }
				NOT = { trait = everchosen }
				trigger_if={
					limit = { ai=yes }
					has_offmap_currency = { offmap= tzeentch_warp value = 250}
				}
				trigger_else = {
					has_offmap_currency = { offmap = tzeentch_warp value = 1500 }
				}
			}
		}
		effect = {
			FROM = {
				if = {
					limit = {
						ai = yes
					}
					add_offmap_currency = {
						offmap = tzeentch_warp
						value = -250
					}
				}
				else = {
					add_offmap_currency = {
						offmap = tzeentch_warp
						value = -1500
					}
				}
			}
			FROM = { add_trait = chosen_tzeentch }
		}

		ai_will_do = {
			factor = 3
			modifier = {
				factor = 5
				FROM = {
					OR = {
						ai_zeal = 100
						ai_ambition = 100
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
	claim_divinity_tzeentch = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			#has_dlc = "Jade Dragon"
			is_playable = yes
			tzeentch_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = tzeentch_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			#tzeentch_offmap_decisions_enabled_trigger = yes
			FROM = {
				has_secret_religion = no
				follower_of_tzeentch = yes
				show_scope_change = no
				prestige = 10000
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				trait = chosen_tzeentch
				NOT = { trait = prince_tzeentch }
				NOT = { trait = everchosen }
				NOT = { is_daemon_prince_trigger = yes }
				trigger_if={
					limit = { ai=yes }
					has_offmap_currency = { offmap=tzeentch_warp value = 500}
				}
				trigger_else = {
						has_offmap_currency = { offmap = tzeentch_warp value = 2000 }
				}
			}
		}
		effect = {
			FROM = {
				if = {
					limit = {
						ai = yes
					}
					add_offmap_currency = {
						offmap = tzeentch_warp
						value = -500
					}
				}
				else = {
				add_offmap_currency = {
					offmap = tzeentch_warp
					value = -2000
					}
				}
			}
			FROM = {
				hidden_effect = {
					remove_trait = chosen_khorne
					remove_trait = chosen_nurgle
					remove_trait = chosen_slaanesh
					remove_trait = chosen_tzeentch
					remove_trait = champion_undivided
					remove_trait = chaos_chosen
					set_graphical_culture = prince_tzeentch
					remove_race_trait_effect = yes
				}
				add_trait = tzeentch_demon
				add_trait = prince_tzeentch
				religion = tzeentch
				character_event = { id = schaosfl.8005 }
			}
		}

		ai_will_do = {
			factor = 999
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
		}
	}
}
#SHARED
#REQUESTING BOON DECISIONS (PENDING GRACE)
offmap_decisions = {
	warp_shift_to_chaos = {
		ai = no
		only_playable = yes
		button_name = offmap_gifts

		potential = {
			OR = {
				is_offmap_tag = khorne_warp
				is_offmap_tag = nurgle_warp
				is_offmap_tag = slaanesh_warp
				is_offmap_tag = tzeentch_warp
			}
		}

		from_potential = {
			OR = {
				religion = tzeentch
				religion = nurgle
				religion = khorne
				religion = slaanesh
			}
			NOR = {
				trait = mark_khorne
				trait = mark_nurgle
				trait = mark_slaanesh
				trait = mark_tzeentch
			}
			is_theocracy = no
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			prestige = 1000
			OR = {
				khorne_offmap_enabled_trigger = yes
				nurgle_offmap_enabled_trigger = yes
				slaanesh_offmap_enabled_trigger = yes
				tzeentch_offmap_enabled_trigger = yes
			}
		}

		allow = {
			is_adult = yes
			prestige = 1000
			OR = {
				religion = tzeentch
				religion = nurgle
				religion = khorne
				religion = slaanesh
			}
		}

		effect = {
			if = {
				limit = { higher_tier_than = BARON }
				religion_authority = {
					modifier = ruler_converted_from
				}
			}
			religion = chaos
			if = {
				limit = { higher_tier_than = BARON }
				hidden_tooltip = {
					religion_authority = {
						modifier = ruler_converted_to
					}
				}
			}
			custom_tooltip = {
				text = chaos_god_please_displease_conversion
				hidden_tooltip = {
					if = {
						limit = { religion = khorne }
						add_offmap_currency = {
							offmap = khorne_warp
							value = -500
						}
					}
					if = {
						limit = { religion = slaanesh }
						add_offmap_currency = {
							offmap = slaanesh_warp
							value = -500
						}
					}
					if = {
						limit = { religion = tzeentch }
						add_offmap_currency = {
							offmap = tzeentch_warp
							value = -500
						}
					}
					if = {
						limit = { religion = nurgle }
						add_offmap_currency = {
							offmap = nurgle_warp
							value = -500
						}
					}
 				}
			}
		}
	}
}
#BRAYHERD
#PAYING TRIBUTE DECISIONS (GAIN GRACE)
offmap_decisions = {
	warp_offering_brayherd = {
		only_playable = yes
		button_name = offmap_gifts
		ai_check_interval = 12

		potential = {
			is_offmap_tag = brayherd_warp
		}

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			brayherd_offmap_enabled_trigger = yes
		}

		allow = {
			#show_only_failed_conditions = yes
			brayherd_offmap_decisions_enabled_trigger = yes
			FROM = {
				show_scope_change = no
				scaled_wealth = { value = 4 min = 250 max = 2500 }
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}
		effect = {
			FROM = {
				sound_effect = china_grace_gain
				scaled_wealth = { value = -4 min = -250 } #If this changes the ai chances should probably be adjusted
				add_offmap_currency = {
					offmap = brayherd_warp
					value = 100
				}
			}
		}


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.66 # slow down
			}
			modifier = {
				factor = 0.1
				FROM = { NOT = { monthly_income = 10 } } #I.e. it would take more than 4 years to collect the 500 gold
			}
			modifier = {
				factor = 1.1
				FROM = {
					OR = {
						trait = zealous
						ai_zeal = 75
					}
				}
			}
		}
	}
	#Offering to become tributary
	brayherd_become_tributary = {
		only_independent = yes
		button_name = offmap_gifts
		ai_check_interval = 36

		potential = {
			is_offmap_tag = brayherd_warp
			NOT={FROM={has_landed_title=e_realm_of_brayherd}}
			always = no
		}

		from_potential = {
			independent = yes
			has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			brayherd_offmap_enabled_trigger = yes
		}

		allow = {
			show_only_failed_conditions = yes
			FROM = {
				show_scope_change = no
				war = no
				OR = {
					custom_tooltip = { #Borders the Western Governate
						text = sylvarite_grace_become_tributary_allow_governor_neighbor_tt
						any_neighbor_independent_ruler = {
							has_landed_title = e_realm_of_brayherd
						}
					}
					custom_tooltip = { #Borders a sylvarite tributary
						text = sylvarite_grace_become_tributary_allow_tributary_neighbor_tt
						any_neighbor_independent_ruler = {
							suzerain = {
								has_landed_title = e_realm_of_brayherd
							}
						}
					}
				}
				custom_tooltip = {
					text = sylvarite_grace_become_tributary_allow_suzerain_tt
					NOT = {
						is_tributary = yes
					}
				}
				NOT = { tier = emperor }
				custom_tooltip = {
					text = sylvarite_tribute_become_tributary_cooldown_tt
					NOT = { has_character_modifier = sylvarite_grace_tributary_timer }
				}
				prisoner = no
				NOT = { trait = incapable }
				NOT = { has_character_flag = asked_to_become_tributary }
				is_inaccessible_trigger = no
			}
			brayherd_offmap_decisions_enabled_trigger = yes
		}

		effect = {
			log = "---------------------"
			log = "brayherd Logging:"
			log = "[From.GetTitledName] has voluntarily become a tributary of the [brayherd_warp.GetFullname]"
			log = "---------------------"
			make_tributary = {
				who = FROM
				tributary_type = offmap
			}
			hidden_effect = { brayherd_warp = { governor = { character_event = { id = JD.20027 } } } }
			custom_tooltip = { text = sylvarite_grace_become_tributary_effect_TT }
			FROM = {
				show_scope_change = no
				sound_effect = china_grace_gain
				tooltip = {
					if = {
						limit = {
							liked_by_offmap = {
								type = brayherd_warp
								context = tributary
							}
							NOT = {
								disliked_by_offmap = {
									type = brayherd_warp
									context = tributary
								}
							}
						}
						add_offmap_currency = {
							offmap = brayherd_warp
							value = 400
						}
						e_realm_of_brayherd = {
							show_scope_change = no
							offmap_power = {
								show_scope_change = no
								custom_tooltip = { text = likes_tt }
							}
						}
					}
					if = {
						limit = {
							disliked_by_offmap = {
								type = brayherd_warp
								context = tributary
							}
							NOT = {
								liked_by_offmap = {
									type = brayherd_warp
									context = tributary
								}
							}
						}
						add_offmap_currency = {
							offmap = brayherd_warp
							value = 100
						}
						e_realm_of_brayherd = {
							show_scope_change = no
							offmap_power = {
								show_scope_change = no
								custom_tooltip = { text = dislikes_tt }
							}
						}
					}
					if = {
						limit = {
							liked_by_offmap = {
								type = brayherd_warp
								context = tributary
							}
							disliked_by_offmap = {
								type = brayherd_warp
								context = tributary
							}
						}
						add_offmap_currency = {
							offmap = brayherd_warp
							value = 200
						}
						e_realm_of_brayherd = {
							show_scope_change = no
							offmap_power = {
								show_scope_change = no
								custom_tooltip = { text = likes_but_dislikes_tt }
							}
						}
					}
					if = {
						limit = {
							NOR = {
								liked_by_offmap = {
									type = brayherd_warp
									context = tributary
								}
								disliked_by_offmap = {
									type = brayherd_warp
									context = tributary
								}
							}
						}
						add_offmap_currency = {
							offmap = brayherd_warp
							value = 200
						}
					}
				}
			}
		}


		ai_will_do = {
			factor = 0
			#modifier = {
			#	factor = 0.01 # slow down
			#}
			#modifier = { realm_levy_diff = { who = FROM value = 2000 } factor = 1.5 }
			#modifier = { realm_levy_diff = { who = FROM value = 5000 } factor = 3 }
		}
	}
	warp_offer_sacrifice_brayherd = {
		only_playable = yes
		button_name = offmap_gifts

		third_party_filter = home_court
		ai_third_party_filter = home_court
		third_party = FROM
		ai_check_interval = 36
		show_third_party_potential = yes

		potential = {
			is_offmap_tag = brayherd_warp
		}

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			brayherd_offmap_enabled_trigger = yes
		}

		allow = {
			#show_only_failed_conditions = yes
			brayherd_offmap_decisions_enabled_trigger = yes
			FROM = {
				host = { character = ROOT_FROM }
				show_scope_change = no
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		third_party_potential = {
			#show_only_failed_conditions = yes
			FROMFROM = {
				show_scope_change = no
				prisoner = yes
				is_invincible_trigger = no
				NOT = { is_heir = yes }
			}
		}

		third_party_allow = {
			#show_only_failed_conditions = yes
			FROM = {
				any_courtier = {
					character = FROMFROM
				}
			}
		}

		effect = {
			save_event_target_as = target_governor
			FROM = {
				sound_effect = china_grace_gain
				save_event_target_as = target_tribute_sender
			}
			brayherd_warp = {
				offmap_ruler = {
					FROMFROM = {
						save_event_target_as = person_sent_as_tribute
						death = { death_reason = death_sacrificed killer = PREV }
					}
				}
			}

			FROM = {
				show_scope_change = no
				add_offmap_currency = {
					offmap = brayherd_warp
					value = 100
				}
				hidden_tooltip = {
				change_variable = { which = burned_hearts_points value = 2 }
				bloodthirsty_tiered_traits_effect = yes
				}

			}
			#################################
		}


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 2
				FROM = {
					OR = {
						trait = zealous
						ai_zeal = 50
					}
				}
			}
		}
	}
	warp_offer_artifact_brayherd = {
		only_playable = yes
		button_name = offmap_gifts

		third_party_filter = artifacts
		ai_third_party_filter = artifacts
		third_party = FROM
		ai_check_interval = 60
		show_third_party_potential = yes

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			brayherd_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = brayherd_warp
		}

		allow = {
			#show_only_failed_conditions = yes
			brayherd_offmap_decisions_enabled_trigger = yes
			FROM = {
				show_scope_change = no
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		third_party_potential = {
			#show_only_failed_conditions = yes
			FROMFROM = {
				show_scope_change = no
				custom_tooltip = {
					text = send_artifact_potential_tt
					quality > 2
					NOR = {
						has_artifact_flag = flag_considering_donation
						has_artifact_flag = curse
						has_artifact_flag = cannot_gift_to_warp
					}
				}
			}
		}

		third_party_allow = {

		}

		third_party_score = {
			factor = 50

			additive_modifier = {
				value = 100
				FROMFROM = {
					quality == 4
				}
			}
			additive_modifier = {
				value = 250
				FROMFROM = {
					quality == 5
				}
			}
			additive_modifier = {
				value = 300
				FROMFROM = {
					quality == 6
				}
			}
			additive_modifier = {
				value = 350
				FROMFROM = {
					quality == 7
				}
			}
			additive_modifier = {
				value = 400
				FROMFROM = {
					quality == 8
				}
			}
			additive_modifier = {
				value = 450
				FROMFROM = {
					quality == 9
				}
			}
			additive_modifier = {
				value = 500
				FROMFROM = {
					quality == 10
				}
			}
			additive_modifier = {
				value = -50
				FROMFROM = {
					quality < 4
					has_artifact_flag = lore #Magnum Opus book
				}
			}
			additive_modifier = {
				value = -100
				FROMFROM = {
					quality == 4
					has_artifact_flag = lore #Magnum Opus book
				}
			}
			additive_modifier = {
				value = -25
				FROMFROM = {
					quality < 4
					has_artifact_flag = created
				}
			}
			additive_modifier = {
				value = -100
				FROMFROM = {
					quality == 4
					has_artifact_flag = created
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					show_scope_change = no
					liked_by_offmap = {
						type = brayherd_warp
					}
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					show_scope_change = no
					disliked_by_offmap = {
						type = brayherd_warp
					}
				}
			}
		}

		effect = {
			FROM = {
				show_scope_change = no
				add_offmap_currency = {
					offmap = brayherd_warp
					value = local_third_party_score
				}
			}

			# Like/Dislike effect description
			#################################
			if = {
				limit = {
					OR = {
						FROM = {
							liked_by_offmap = {
								type = brayherd_warp
							}
						}
						brayherd_warp = {
							offmap_has_like = likes_wealth
						}
					}
					NOR = {
						FROM = {
							disliked_by_offmap = {
								type = brayherd_warp
							}
						}
						brayherd_warp = {
							offmap_has_dislike = likes_wealth
						}
					}
				}
				e_realm_of_brayherd = {
					show_scope_change = no
					offmap_power = {
						show_scope_change = no
						custom_tooltip = { text = likes_tt }
					}
				}
			}
			#################################
			hidden_tooltip = {
				if = {
					limit = {
						FROM = {
							ai = no
						}
						FROMFROM = {
							quality > 3
						}
					}
					FROM = {
						set_character_flag = achievement_a_curious_trinket
					}
				}
			}
			save_event_target_as = target_governor
			FROM = {
				sound_effect = china_grace_gain
				save_event_target_as = target_tribute_sender
			}

			hidden_effect = { #to reduce cluttered tooltip (effect already heavily implied...)
				brayherd_warp = {
					offmap_ruler = {
						ROOT_FROMFROM = {
							show_scope_change = no
							tooltip = {
								transfer_artifact = {
									to = PREV
									from = ROOT_FROM
								}
							}
							hidden_effect = { unsafe_destroy_artifact = yes }
						}
					}
				}
			}

			hidden_effect = {
				FROM = {
					set_character_flag = jd_gifting_artifact
				}
				hidden_effect = { brayherd_warp = { governor = { character_event = { id = JD.20023 } } } }
			}
		}


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				FROMFROM = {
					quality > 3
				}
			}
			modifier = {
				factor = 0.1 # slow down
			}
		}
	}
	brayherd_pilgrimage = { #THE HEART OF THE DARK
		only_playable = yes
		button_name = offmap_gifts
		ai_check_interval = 120

		potential = {
			NOT = { has_character_flag = did_pilgrimage }
            FROM = { trait=creature_beastman }
			is_offmap_tag = brayherd_warp
		}

		allow = {
			NOT = { has_character_flag = did_pilgrimage }
			show_only_failed_conditions = yes
			FROM = {
				show_scope_change = no
				war = no
				trait = creature_beastman
				NOT = {
					block_general_event_trigger = yes
					custom_tooltip = {
						text = kow_tow_tooltip_already_went
						hidden_tooltip = {
							has_character_flag = went_on_kow_tow_pilgrimage
						}
					}
				}
				custom_tooltip = {
					text = health_travel_condition
					hidden_tooltip = {
						NOR = {
							trait = pregnant
							trait = incapable
							trait = blinded
							trait = has_tuberculosis
							trait = has_typhoid_fever
							trait = has_typhus
							trait = has_bubonic_plague
							trait = has_measles
							trait = has_small_pox
							trait = has_aztec_disease
						}
					}
				}
				higher_real_tier_than = COUNT
				conditional_tooltip = {
					trigger = {
						OR = {
							real_tier = DUKE
							is_nomadic = yes
						}
					}
					prestige = 250
				}
				conditional_tooltip = {
					trigger = {
						real_tier = KING
						NOT = { is_nomadic = yes }
					}
					prestige = 500
				}
				conditional_tooltip = {
					trigger = {
						real_tier = EMPEROR
						NOT = { is_nomadic = yes }
					}
					prestige = 1000
				}
				conditional_tooltip = {
					trigger = { has_character_flag = awaiting_imperial_wedding }
					custom_tooltip = {
						text = not_awaiting_your_spouse_tt
						NOT = { has_character_flag = awaiting_imperial_wedding }
					}
				}
			}
			brayherd_offmap_decisions_enabled_trigger = yes
		}

		effect = {
			FROM = {
				save_event_target_as = kow_tow_traveler
				set_character_flag = went_on_kow_tow_pilgrimage
				set_character_flag = do_not_disturb
				character_event = {
					id = JD_BRAY.1
				}
			}
		}

		ai_will_do ={
			factor = 1
			modifier = {
				factor = 0.1 #slow down
			}
		}
	}
	brayherd_realm_change_policy = {
		only_playable = yes
		button_name = offmap_hostility2
		ai_check_interval = 120

		potential = {
			is_offmap_tag = brayherd_warp
			always=no
		}

		from_potential = {
			has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			is_offmap_governor = brayherd_warp
			brayherd_offmap_enabled_trigger = yes
		}

		allow = {
			#show_only_failed_conditions = yes
		}
		effect = {
			brayherd_warp={
				set_policy = brayherd_expansionist
			}
		}


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.66 # slow down
			}
			modifier = {
				factor = 0.1
				FROM = { NOT = { monthly_income = 11 } } #I.e. it would take more than 4 years to collect the 500 gold
			}
		}
	}
	brayherd_realm_change_policy2 = {
		only_playable = yes
		button_name = offmap_hostility2
		ai_check_interval = 120

		potential = {
			is_offmap_tag = brayherd_warp
			always=no
		}

		from_potential = {
			has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			is_offmap_governor = brayherd_warp
			brayherd_offmap_enabled_trigger = yes
		}

		allow = {
			#show_only_failed_conditions = yes
		}
		effect = {
			brayherd_warp={
				set_policy = brayherd_isolationist
			}
		}


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.66 # slow down
			}
			modifier = {
				factor = 0.1
				FROM = { NOT = { monthly_income = 11 } } #I.e. it would take more than 4 years to collect the 500 gold
			}
		}
	}
}
#REQUESTING BOON DECISIONS (PENDING GRACE)
offmap_decisions = {
	#If your grace decisions will spawn a character then give them an appropriate flag eg: is_sylvarite_administrator and add them to the JD.60310 trigger switch to refund grace if they die early
	#Get a Bray-Shaman
	brayherd_boon_brayshaman = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 12

		from_potential = {
			has_dlc = "Jade Dragon"
			has_dlc = Reapers
			mercenary = no
			holy_order = no
			is_playable = yes
			brayherd_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = brayherd_warp
		}

		#potential = {
			#brayherd_warp = { governor = { character = ROOT } }
		#}

		allow = {
			show_only_failed_conditions = yes
			FROM = {
				show_scope_change = no
				has_offmap_currency = { offmap = brayherd_warp value = 1000 }
				custom_tooltip = {
					text = brayshaman_doctor_allow_tt
					NOT = { any_courtier_or_vassal = { has_minor_title = title_court_physician } }
				}
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
			brayherd_offmap_decisions_enabled_trigger = yes
		}

		effect = {
			FROM = {
				show_scope_change = no
				sound_effect = china_grace_spend
				add_offmap_currency = {
					offmap = brayherd_warp
					value = -1000
				}
			}
			hidden_effect = { brayherd_warp = { governor = { character_event = { id = JD_BRAY.20021 } } } }
			#hidden_effect = { FROM = { set_brayherd_boon_cd_effect = yes } }
		}


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.1 # slow down
			}
			modifier = {
				FROM = { NOT = { any_courtier = { learning = 12 } } }
				factor = 1.5
			}
		}
	}
	gift_of_chaos = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			brayherd_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = brayherd_warp
		}

		allow = {
			show_only_failed_conditions = yes
			FROM = {
				show_scope_change = no
				has_offmap_currency = { offmap = brayherd_warp value = 500 }
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
			custom_tooltip = {
				text = brayherd_gifts_has_all_tt
				hidden_tooltip = {
					FROM = {
						NAND = {
							trait = mut_crown_of_horns
							trait = mut_rune_of_beast
							OR = {
								trait = mut_gnarled_hide
								trait = mut_slugskin
								trait = mut_shadow_hide
							}
							trait = mut_many_limbed_fiend
							has_artifact = mut_gouge_tusks
							has_artifact = mut_uncanny_senses
						}
					}
				}
			}
			brayherd_offmap_decisions_enabled_trigger = yes
		}

		effect = {
			FROM = {
				show_scope_change = no

				sound_effect = china_grace_spend

				add_offmap_currency = {
					offmap = brayherd_warp
					value = -500
				}
				custom_tooltip = { text = brayherd_artifact_effect_tt }
			}
			hidden_effect = { FROM = { character_event = { id = JD_BRAY.24 } } }
			#hidden_effect = { FROM = { set_brayherd_boon_cd_effect = yes } }
		}


		ai_will_do = {
			factor = 1

			modifier = {
				factor = 0.1 # slow down
			}
			modifier = {
				factor = 0.1
				NOR = {
					trait = zealous
					trait = ambitious
				}
			}
			modifier = {
				factor = 1.5
				NOT = {
					trait = horns_big
				}
			}
		}
	}
	# Ruinous Artifact
	brayherd_artifact = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			brayherd_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = brayherd_warp
		}

		allow = {
			show_only_failed_conditions = yes
			FROM = {
				show_scope_change = no
				has_offmap_currency = { offmap = brayherd_warp value = 500 }
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
			custom_tooltip = {
				text = sylvarite_artifact_has_all_tt
				hidden_tooltip = {
					FROM = {
						NAND = {
							has_artifact = beastmen_artifact_black_maul
							has_artifact = beastmen_artifact_stonecrusher_mace
							has_artifact = beastmen_artifact_fur_sharrgu
							has_artifact = beastmen_artifact_ramhorn_helm
							has_artifact = beastmen_artifact_dark_rain_chalice
							has_artifact = beastmen_artifact_shard_herd_stone
							has_artifact = beastmen_artifact_dark_heart
							has_artifact = beastmen_artifact_beast_banner
						}
					}
				}
			}
			brayherd_offmap_decisions_enabled_trigger = yes
		}

		effect = {
			FROM = {
				show_scope_change = no

				sound_effect = china_grace_spend
				add_offmap_currency = {
					offmap = brayherd_warp
					value = -500
				}
				custom_tooltip = { text = brayherd_artifact_effect_tt }
		 		character_event = { id = JD_BRAY.21 }
			}
			hidden_effect = { FROM = { set_china_boon_cd_effect = yes } }
		}


		ai_will_do = {
			factor = 1

			modifier = {
				factor = 0.1 # slow down
			}
			modifier = {
				factor = 0.1
				NOT = {
					trait = greedy
				}
			}
		}
	}
	#Strategist - Doombull/Bestigor?
	brayherd_captain = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 60

		from_potential = {
			has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			brayherd_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = brayherd_warp
		}

		allow = {
			show_only_failed_conditions = yes
			FROM = {
				show_scope_change = no
				has_offmap_currency = { offmap = brayherd_warp value = 750 }
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
			brayherd_offmap_decisions_enabled_trigger = yes
		}

		effect = {
			FROM = {
				show_scope_change = no
				sound_effect = china_grace_spend
				add_offmap_currency = {
					offmap = brayherd_warp
					value = -750
				}
				custom_tooltip = { text = sylvarite_strategist_effect_tt }
			}
			hidden_effect = { brayherd_warp = { governor = { character_event = { id = JD_BRAY.20039 } } } }
			#hidden_effect = { FROM = { set_brayherd_boon_cd_effect = yes } }
			hidden_effect = {
				if = {
					limit = {
						brayherd_warp = { has_status = warp_united }
					}
					set_character_flag = jd_strategist_golden_age
				}
			}
		}


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.1 # slow down
			}
		}
	}
	warp_summon_army_brayherd = {
		only_playable = yes
		button_name = offmap_boons
		ai_check_interval = 18

		from_potential = {
			#has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			brayherd_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = brayherd_warp
		}
		allow = {
			#show_only_failed_conditions = yes
			brayherd_offmap_decisions_enabled_trigger = yes
			FROM = {
				show_scope_change = no
				OR = {
					AND = {
						follower_of_undivided = no
						has_offmap_currency = { offmap = brayherd_warp value = 1500 }
					}
					AND = {
						follower_of_undivided = yes
						has_offmap_currency = { offmap = brayherd_warp value = 1000 }
					}
				}
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}

		effect = {
			FROM = {
				show_scope_change = no

				sound_effect = china_grace_spend

				if = {
					limit = { follower_of_undivided = yes }
					add_offmap_currency = {
						offmap = brayherd_warp
						value = -1000
					}
				}
				else = {
					add_offmap_currency = {
						offmap = brayherd_warp
						value = -1500
					}
				}

			if={
				limit={	FROM={ population <= 3500 } }
				spawn_unit = {
					owner = FROM
					province = FROM
					home = FROM
					scaled_with_population_of = FROM
					is_looter=yes
					for_population = 1000
					earmark=BRAYHERD_ARMY
					troops = {
						archers = { 125 125 }
						light_infantry = { 125 125 }
						light_cavalry = { 25 25 }
						horse_archers = { 25 25 }
						heavy_infantry = { 100 100 }
					}
					attrition = 1.0
					cannot_inherit = yes
					maintenance_multiplier = 0.075
				}
				population = -200
				add_population_scaled = -0.05
			}
			else_if ={
				limit={	FROM={ population <= 6500 } }
				spawn_unit = {
					owner = FROM
					province = FROM
					home = FROM
					scaled_with_population_of = FROM
					is_looter=yes
					for_population = 2000
					earmark=BRAYHERD_ARMY
					troops = {
						archers = { 100 100 }
						light_infantry = { 125 125 }
						light_cavalry = { 25 25 }
						horse_archers = { 25 25 }
						knights = { 25 25 }
						heavy_infantry = { 100 100 }
					}
					attrition = 1.0
					cannot_inherit = yes
					maintenance_multiplier = 0.075
				}
				population = -500
				add_population_scaled = -0.05
			}
			else_if ={
				limit={	FROM={ population >= 6500 } }
				spawn_unit = {
					owner = FROM
					province = FROM
					home = FROM
					scaled_with_population_of = FROM
					is_looter=yes
					for_population = 4000
					earmark=BRAYHERD_ARMY
					troops = {
						archers = { 100 100 }
						light_infantry = { 150 150 }
						knights = { 50 50 }
						chariots = { 25 25 }
						heavy_infantry = { 100 100 }
					}
					attrition = 1.0

					maintenance_multiplier = 0.075
				}
				population = -500
				add_population_scaled = -0.1
			}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				FROM = {
					open_follower_of_any_chaos_gods = no
				}
			}
			modifier = {
				factor = 0.3
				FROM = {
					war = no
					NOT = { has_offmap_currency = { offmap = brayherd_warp value = 5000 } }
				}
			}
			modifier = {
				factor = 0.3
				FROM = {
					war = yes
					NOR = {
						is_primary_war_defender = yes
						is_primary_war_attacker = yes
						any_war = {
							using_cb = new_crusade
						}
						has_offmap_currency = { offmap = brayherd_warp value = 5000 }
					}
				}
			}
			modifier = {
				factor = 10
				FROM = {
					war = yes
					OR = {
						is_primary_war_defender = yes
						is_primary_war_attacker = yes
						any_war = {
							using_cb = new_crusade
						}
					}
				}
			}
		}
	}
	brayherd_imperial_marriage = { #Concubinage
		only_playable = yes
		button_name = offmap_boons
		third_party_filter = realm_including_me
		ai_third_party_filter = court
		third_party = from
		ai_check_interval = 12
		show_third_party_potential = yes

		from_potential = {
			has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			brayherd_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = brayherd_warp
			NOT={FROM={has_landed_title=e_realm_of_brayherd}}
		}

		allow = {
			show_only_failed_conditions = yes
			FROM = {
				show_scope_change = no
				conditional_tooltip = {
					has_offmap_currency = { offmap = brayherd_warp value = 1000 }
				}
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
			brayherd_offmap_decisions_enabled_trigger = yes
		}

		third_party_potential = {
			show_only_failed_conditions = yes
			FROMFROM = {
				show_scope_change = no
				OR = {
					dynasty = ROOT_FROM
					is_close_relative = ROOT_FROM
				}
				OR = {
					character = ROOT_FROM
					AND = {
						liege = { character = ROOT_FROM }
						ai = yes
					}
				}
				NOT = { any_spouse = { character = ROOT_FROM } }
				is_adult = yes
				is_betrothed = no
			}
		}

		third_party_allow = {
			show_only_failed_conditions = yes
			FROMFROM = {
				custom_tooltip = {
					text = can_marry_breyherd_royal_tt
					num_of_consorts < 5
				}
				is_female = no
			}
		}

		effect = {
			FROM = {
				show_scope_change = no
				sound_effect = china_grace_spend
				add_offmap_currency = {
					offmap = brayherd_warp
					value = -1000
				}
			}
			if = {
				limit = { FROMFROM = { is_female = yes } }
				custom_tooltip = { text = breyherd_imperial_marriage_prince_effect_tt }
			}
			if = {
				limit = { FROMFROM = { is_female = no } }
				custom_tooltip = { text = breyherd_imperial_marriage_princess_effect_tt }
			}
			hidden_effect = { FROMFROM = { add_trait = cannot_marry } }
			hidden_effect = { brayherd_warp = { governor = { letter_event = { id = JD_BRAY.20045 days = 7 } } } }
			#hidden_effect = { FROM = { set_brayherd_boon_cd_effect = yes } }
			FROMFROM = { set_character_flag = awaiting_imperial_wedding }
		}


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.1 # slow down
			}
			modifier = {
				factor = 0.5
				FROM = {
					NOT = {
						higher_tier_than = DUKE
					}
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					NOT = {
						independent = yes
					}
				}
			}
		}
	}
	#Request Invasion
}
#HOSTILE DECISIONS (ATTACKING brayherd)
offmap_decisions = {
	#Raiding Decisions Removed
	brayherd_tributary_break_free = {
		only_playable = yes
		button_name = offmap_hostility
		ai = no

		from_potential = {
			has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			is_playable = yes
			brayherd_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = brayherd_warp
		}

		allow = {
			show_only_failed_conditions = yes
			FROM = {
				show_scope_change = yes
				is_tributary = {
					type = offmap
					suzerain = ROOT
				}
				can_use_cb = {
					target = ROOT
					casus_belli = free_tributary_cb
				}
				NOT = { is_decision_allowed = tributary_independence_brayherd }
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
			brayherd_offmap_decisions_enabled_trigger = yes
		}

		effect = {
			FROM = {
				show_scope_change = no
				sound_effect = china_angered_emperor
				war = {
					target = ROOT
					casus_belli = free_tributary_cb
				}
			}
		}


		ai_will_do = {
			factor = 0
		}
	}
	brayherd_claim_supremacy = {
		only_playable = yes
		button_name = offmap_hostility

		third_party_filter = home_court
		ai_third_party_filter = home_court
		third_party = FROM
		show_third_party_potential = yes
		ai = no

		from_potential = {
			has_dlc = "Jade Dragon"
			mercenary = no
			holy_order = no
			brayherd_offmap_enabled_trigger = yes
		}

		potential = {
			is_offmap_tag = brayherd_warp
			NOT = { offmap_ruler = { dynasty = FROM } }
		}

		allow = {
			show_only_failed_conditions = yes
			FROM = {
				is_tributary = {
					type = offmap
					suzerain = ROOT
				}
				show_scope_change = no
				independent = yes
				in_revolt = no
				OR = {
					custom_tooltip = { #Borders the Western Governate
						text = sylvarite_grace_become_tributary_allow_governor_neighbor_tt
						any_neighbor_independent_ruler = {
							has_landed_title = e_realm_of_brayherd
						}
					}
					custom_tooltip = { #Borders the eastern edge of the map
						text = brayherd_invade_dragon_throne_eastern_edge_tt
						FROM = {
							any_realm_province = {region = world_chaos_wastes}
						}
					}
				}
				custom_tooltip = {
					text = brayherd_invade_dragon_throne_failed_tt
					NOT = { has_character_modifier = failed_invasion_of_brayherd }
				}
				can_use_cb = {
					target = ROOT
					casus_belli = invasion_of_brayherd_cb
					only_check_triggers = yes
				}
				NOT = { has_raised_levies = THIS }
				custom_tooltip = {
					text = brayherd_invade_dragon_throne_levies_tt
					NOT = { any_vassal = { ROOT_FROM = { has_raised_levies = PREV } } }
				}
				NOT = { has_truce = ROOT }
				tier = EMPEROR
				conditional_tooltip = {
					trigger = { is_nomadic = no }
					realm_size = 300
				}
				conditional_tooltip = {
					trigger = { is_nomadic = yes }
					num_of_count_titles_in_realm = 50
				}
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
			brayherd_offmap_decisions_enabled_trigger = yes
			brayherd_warp = {
				OR = {
					has_status = warp_stable
					has_status = warp_united
				}
				ROOT = {
					show_scope_change = no
					custom_tooltip = {
						text = brayherd_invade_dragon_throne_war_tt
						NOT = { any_war = { using_cb = invasion_of_brayherd_cb } }
					}
				}
			}
		}

		third_party_potential = {
			show_only_failed_conditions = yes
			FROMFROM = {
				show_scope_change = no
				dynasty = ROOT_FROM
				is_adult = yes
				NOR = {
					courtier_from_brayherd_trigger = yes
					is_playable = yes
					is_incapable = yes
					trait = inbred
					trait = imbecile
					trait = celibate
					is_ascetic_trigger = yes
					prisoner = yes
				}
				is_primary_heir = no
			}
		}

		third_party_allow = {
			show_only_failed_conditions = yes
			FROMFROM = {
				is_ill = no
				is_inaccessible_trigger = no
			}
		}

		effect = {
			hidden_effect = {
				FROMFROM = { #Stop them from moving, marrying or being diplomatically dealt with
					set_character_flag = invasion_brayherd_claimant
					set_character_flag = no_court_invites
					add_trait = cannot_marry
					diplomatic_immunity = yes
					save_global_event_target_as = invasion_of_brayherd_claimant
				}
				ROOT = { #Set amount of troops
					set_offmap_tmp_flag = brayherd_war_variables_set
					set_variable = {
						which = brayherd_war_troop_quantity
						value = 15
						# 15 regiments of ~500 units
					}
					set_variable = {
						which = brayherd_war_target_match_mult
						value = 2
					}
					set_variable = {
						which = brayherd_war_troop_quality
						value = 6
						# Value between 1-7
					}
					set_variable = {
						which = brayherd_war_minimum_commander_martial
						value = 16
					}
					set_variable = { #Minimum 80k
						which = brayherd_war_troop_quantity_override
						value = 160
					}
					save_event_target_as = invasion_of_brayherd_govenor
				}
			}
			FROM = {
				show_scope_change = no
				sound_effect = china_angered_emperor
				save_event_target_as = invasion_of_brayherd_attacker
				custom_tooltip = {
					text = brayherd_invade_dragon_throne_modifiers_tt
					hidden_effect = {
						set_offmap_currency = { offmap = brayherd_warp value = 0 }
						remove_character_modifier = peace_deal_with_brayherd
						remove_character_modifier = sylvarite_grace_send_gift_timer
						remove_character_modifier = sylvarite_grace_send_eunuch_timer
						remove_character_modifier = sylvarite_grace_send_concubine_timer
						remove_character_modifier = sylvarite_grace_tributary_timer
						remove_character_modifier = jd_brayherd_boon_cd
						remove_character_modifier = brayherd_force_open_cooldown
						remove_character_modifier = angered_brayherd_modifier
						remove_character_modifier = sylvarite_imperial_trade_contract
					}
				}
				hidden_effect = {
					add_character_modifier = {
						name = war_with_brayherd_modifier
						inherit = yes
						duration = -1
					}
					war = {
						target = ROOT
						casus_belli = invasion_of_brayherd_cb
					}
				}
			}
			hidden_effect = {
				any_player = {
					limit = {
						has_offmap_news_enabled = brayherd_warp
						is_within_diplo_range = ROOT
					}
					narrative_event = { id = JD.60400 }
				}
			}
		}


		ai_will_do = {
			factor = 0
		}
	}
}
