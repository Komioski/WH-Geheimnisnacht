
targetted_decisions = {

	denounce_master = { #To remove a Master from charge
		ai_check_interval = 48
		only_playable = yes
		filter = realm
		ai_target_filter = realm
		from_potential = {
			trait = witch_hunter
			OR = {
				 has_landed_title = d_witch_hunter_seat_1
			 	 has_landed_title = d_witch_hunter_seat_2
				 has_landed_title = d_witch_hunter_seat_3
		 		 has_landed_title = d_witch_hunter_seat_4
		 		 has_landed_title = d_witch_hunter_seat_5
		 		 has_landed_title = d_witch_hunter_seat_6
		 		 has_landed_title = d_witch_hunter_seat_7
		 		 has_landed_title = d_witch_hunter_seat_8
		 		 has_landed_title = d_witch_hunter_seat_9
		 		 has_landed_title = d_witch_hunter_seat_10
		 		 has_landed_title = d_witch_hunter_seat_11
		 		 has_landed_title = d_witch_hunter_seat_12
				 has_landed_title = k_witch_hunters_order
			}
			is_incapacitated_trigger = no
			NOT = { has_character_flag = witch_hunter_accusation }
		}

		potential = {
			OR = {
				has_landed_title = d_witch_hunter_seat_1
				has_landed_title = d_witch_hunter_seat_2
				has_landed_title = d_witch_hunter_seat_3
		 		has_landed_title = d_witch_hunter_seat_4
		 		has_landed_title = d_witch_hunter_seat_5
		 		has_landed_title = d_witch_hunter_seat_6
		 		has_landed_title = d_witch_hunter_seat_7
		 		has_landed_title = d_witch_hunter_seat_8
		 		has_landed_title = d_witch_hunter_seat_9
		 		has_landed_title = d_witch_hunter_seat_10
		 		has_landed_title = d_witch_hunter_seat_11
		 		has_landed_title = d_witch_hunter_seat_12
				has_landed_title = k_witch_hunters_order
			}
			NOT = { has_character_flag = witch_hunter_accusation }
			NOT = { has_character_modifier = accused_recently }
			NOT = { character = FROM }                            # Can't do this decision on yourself...
		}
		allow = {
			FROM = { piety = 25
				trait = witch_hunter }
		}
		effect = {
			FROM = { piety = -5 }
			FROM = { set_character_flag = witch_hunter_accusation }
			set_character_flag = witch_hunter_accusation
			if = {
				limit = { trait = incapable }
				character_event = { id = swhunters.1 } #Incapable rulers cannot defend themselves
			}
			if = {
				limit = { NOT = { trait = incapable } }
				character_event = { id = swhunters.2 }
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1

			modifier = {
				factor = 0.05 # Less likely to do it
			}
			modifier = {
				factor = 0
				reverse_opinion = { who = FROM value = 75 }
			}
			modifier = {
				factor = 0.5
				reverse_opinion = { who = FROM value = 60 }
			}
			modifier = {
				factor = 0.75
				reverse_opinion = { who = FROM value = 50 }
			}
			modifier = {
				factor = 0.85
				reverse_opinion = { who = FROM value = 40 }
			}
			modifier = {
				factor = 0.85
				reverse_opinion = { who = FROM value = 30 }
			}
			modifier = {
				factor = 0.95
				reverse_opinion = { who = FROM value = 20 }
			}
			modifier = {
				factor = 0.95
				reverse_opinion = { who = FROM value = 10 }
			}
			modifier = {
				factor = 1.25
				NOT = { reverse_opinion = { who = FROM value = -10 } }
			}
			modifier = {
				factor = 1.25
				NOT = { reverse_opinion = { who = FROM value = -20 } }
			}
			modifier = {
				factor = 1.25
				NOT = { reverse_opinion = { who = FROM value = -30 } }
			}
			modifier = {
				factor = 1.25
				NOT = { reverse_opinion = { who = FROM value = -40 } }
			}
			modifier = {
				factor = 1.25
				NOT = { reverse_opinion = { who = FROM value = -50 } }
			}
			modifier = {
				factor = 1.5
				NOT = { reverse_opinion = { who = FROM value = -60 } }
			}
			modifier = {
				factor = 1.75
				NOT = { reverse_opinion = { who = FROM value = -75 } }
			}
			modifier = {
				factor = 0
				NOT = { FROM = { trait = paranoid } }
				NOR = {
					trait = incapable
					trait = leper
					trait = has_nurgles_rot
					trait = inbred
					trait = blinded
					trait = possessed
					trait = pneumonic
					trait = syphilitic
					trait = has_tuberculosis
					trait = has_typhoid_fever
					trait = has_typhus
					trait = has_bubonic_plague
					trait = has_measles
					trait = has_small_pox
					trait = pregnant
					trait = excommunicated
					trait = lunatic_3
					is_mutated_trigger = yes
					trait = troubled_pregnancy
					trait = hard_pregnancy
					trait = mage_apprentice
					trait = monstrous
					trait = immortal
					has_character_modifier = magic_power_1
					has_character_modifier = magic_power_2
					has_character_modifier = magic_power_3
					has_character_modifier = magic_power_4
					trait = magic_potential_1
					trait = magic_potential_2
					trait = magic_potential_3
					trait = magic_potential_4
				}
			}
			modifier = {
				factor = 0.001
			NOR = { trait = incapable
				trait = inbred
				trait = possessed
				trait = excommunicated
				trait = lunatic_3
				is_mutated_trigger = yes
				trait = mage_apprentice
				trait = monstrous
				trait = immortal
				has_character_modifier = magic_power_1
				has_character_modifier = magic_power_2
				has_character_modifier = magic_power_3
				has_character_modifier = magic_power_4
				trait = magic_potential_1
				trait = magic_potential_2
				trait = magic_potential_3
				trait = magic_potential_4 }
			}
			modifier = {
				factor = 100
				trait = possessed
			}
			modifier = {
				factor = 100
				NOT = { trait = witch_hunter }
			}
			modifier = {
				factor = 10
				OR = { has_character_modifier = magic_power_1
					has_character_modifier = magic_power_2
					has_character_modifier = magic_power_3
					has_character_modifier = magic_power_4 }
			}
			modifier = {
				factor = 5
				OR = { trait = magic_potential_1
					trait = magic_potential_2
					trait = magic_potential_3
					trait = magic_potential_4 }
			}
			modifier = {
				factor = 5
				trait = incapable
			}
			modifier = {
				factor = 2
				has_minor_mutation_trigger = yes
			}
			modifier = {
				factor = 1.5
				has_landed_title = k_witch_hunters_order
				FROM = { trait = envious }
			}
			modifier = {
				factor = 5
				has_major_mutation_trigger = yes
			}
			modifier = {
				factor = 10
				has_massive_mutation_trigger = yes
			}
			modifier = {
				factor = 2
				FROM = { trait = paranoid }
			}
			modifier = {
				factor = 2
				trait = cynical
				FROM = { trait = zealous }
			}
			modifier = {
				factor = 1.5
				trait = lunatic_1
			}
			modifier = {
				factor = 1.75
				trait = lunatic_2
			}
			modifier = {
				factor = 2.5
				trait = lunatic_3
			}
			modifier = {
				factor = 1.25
				trait = shy
			}
			modifier = {
				factor = 1.5
				trait = mystic
			}
			modifier = {
				factor = 1.25
				trait = intricate_webweaver
			}
			modifier = {
				factor = 1.5
				trait = elusive_shadow
			}
			modifier = {
				factor = 0.95
				trait = charismatic_negotiator
			}
			modifier = {
				factor = 0.85
				trait = grey_eminence
			}
			modifier = {
				factor = 1.15
				trait = fortune_builder
			}
			modifier = {
				factor = 1.35
				trait = midas_touched
			}
			modifier = {
				factor = 0.95
				trait = tough_soldier
			}
			modifier = {
				factor = 0.85
				trait = skilled_tactician
			}
			modifier = {
				factor = 0.75
				trait = brilliant_strategist
			}
			modifier = {
				factor = 0.95
				trait = detached_priest
			}
			modifier = {
				factor = 0.85
				trait = martial_cleric
			}
			modifier = {
				factor = 0.75
				trait = scholarly_theologian
			}
			modifier = {
				factor = 0.65
				trait = mastermind_theologian
			}
			modifier = {
				factor = 1.25
				trait = stressed
			}
			modifier = {
				factor = 1.5
				trait = infirm
			}
			modifier = {
				factor = 1.5
				trait = drunkard
			}
			modifier = {
				factor = 1.75
				trait = addict
			}
			modifier = {
				factor = 1.5
				trait = pregnant
			}
			modifier = {
				factor = 1.5
				trait = homosexual
			}
			modifier = {
				factor = 1.5
				trait = kinslayer
			}
			modifier = {
				factor = 1.25
				trait = clubfooted
			}
			modifier = {
				factor = 1.25
				trait = harelip
			}
			modifier = {
				factor = 1.75
				trait = hunchback
			}
			modifier = {
				factor = 1.25
				trait = lisp
			}
			modifier = {
				factor = 1.25
				trait = stutter
			}
			modifier = {
				factor = 1.75
				trait = dwarf
			}
			modifier = {
				factor = 2
				trait = inbred
			}
			modifier = {
				factor = 0.75
				trait = celibate
			}
			modifier = {
				factor = 1.5
				trait = hedonist
			}
			modifier = {
				factor = 0.75
				trait = scholar
			}
			modifier = {
				factor = 1.25
				trait = impaler
			}
			modifier = {
				factor = 1.25
				trait = poet
			}
			modifier = {
				factor = 1.25
				trait = lustful
			}
			modifier = {
				factor = 0.95
				trait = chaste
			}
			modifier = {
				factor = 1.25
				trait = gluttonous
			}
			modifier = {
				factor = 0.85
				trait = temperate
			}
			modifier = {
				factor = 1.25
				trait = greedy
			}
			modifier = {
				factor = 0.95
				trait = charitable
			}
			modifier = {
				factor = 1.35
				trait = slothful
			}
			modifier = {
				factor = 0.95
				trait = diligent
			}
			modifier = {
				factor = 0.85
				trait = envious
			}
			modifier = {
				factor = 0.85
				trait = kind
			}
			modifier = {
				factor = 1.15
				trait = wroth
			}
			modifier = {
				factor = 0.95
				trait = patient
			}
			modifier = {
				factor = 1.25
				trait = proud
			}
			modifier = {
				factor = 0.95
				trait = humble
			}
			modifier = {
				factor = 1.25
				trait = deceitful
			}
			modifier = {
				factor = 1.25
				trait = craven
			}
			modifier = {
				factor = 1.75
				trait = cynical
			}
			modifier = {
				factor = 0.75
				trait = zealous
			}
			modifier = {
				factor = 1.25
				trait = cruel
			}
		}
	}
	enlist_courtier = {
		ai_check_interval = 50
		only_playable = yes
		filter = court
		ai_target_filter = court
		is_in_society = yes
		from_potential = {
			is_state_witch_hunter_trigger=yes
			society_rank=3
			AND = {
				is_landed = yes
				higher_tier_than = BARON
			}
			trait = witch_hunter
			is_incapacitated_trigger = no
			NOT = { has_character_flag = witch_hunter_accusation }
		}
		potential = {
			is_state_witch_hunter_trigger=no
			is_ruler = no
			prisoner = no
			religion_group = FROM
			trait = creature_human
			host = { character = FROM }
			NOR = { trait = pregnant
				trait = incapable
				trait = maimed
				trait = leper
				trait = ill
				trait = has_nurgles_rot
				trait = blinded
				trait = possessed
				trait = lunatic_3
				is_mutated_trigger = yes
				has_character_modifier = magic_power_1
				has_character_modifier = magic_power_2
				has_character_modifier = magic_power_3
				has_character_modifier = magic_power_4
				trait = magic_potential_1
				trait = magic_potential_2
				trait = magic_potential_3
				trait = magic_potential_4
			}
			age = 14
			NOT = { age = 50 }
		}
		allow = {
			FROM = {
				society_currency >= 250
				piety=50
			}
			FROM = {  }
			piety = 0
		}
		effect = {
			FROM = {
				change_society_currency = -250
				piety=-5
			}
			set_character_flag=desires_a_mission
			hidden_tooltip = { remove_trait = celibate
						remove_trait = disinherited }
			add_trait = witch_hunter
			culture = witchhunter_culture
			ROOT = { any_spouse = { remove_spouse = PREV } }
			} #closes effect

		revoke_allowed = { always = no }
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.25
				}
			modifier = {
				factor = 0
				age = 40
				}
			modifier = {
				factor = 0.5
				is_female = yes
				}
			modifier = {
				factor = 0.25
				trait = cynical
				}
			modifier = {
				factor = 2.5
				reverse_opinion = { who = FROM value = 75 }
			}
			modifier = {
				factor = 2.25
				reverse_opinion = { who = FROM value = 60 }
			}
			modifier = {
				factor = 2
				reverse_opinion = { who = FROM value = 50 }
			}
			modifier = {
				factor = 1.95
				reverse_opinion = { who = FROM value = 40 }
			}
			modifier = {
				factor = 1.75
				reverse_opinion = { who = FROM value = 30 }
			}
			modifier = {
				factor = 1.5
				reverse_opinion = { who = FROM value = 20 }
			}
			modifier = {
				factor = 1.25
				reverse_opinion = { who = FROM value = 10 }
			}
			modifier = {
				factor = 0.99
				NOT = { reverse_opinion = { who = FROM value = -10 } }
			}
			modifier = {
				factor = 0.98
				NOT = { reverse_opinion = { who = FROM value = -20 } }
			}
			modifier = {
				factor = 0.95
				NOT = { reverse_opinion = { who = FROM value = -30 } }
			}
			modifier = {
				factor = 0.85
				NOT = { reverse_opinion = { who = FROM value = -40 } }
			}
			modifier = {
				factor = 0.75
				NOT = { reverse_opinion = { who = FROM value = -50 } }
			}
			modifier = {
				factor = 0.65
				NOT = { reverse_opinion = { who = FROM value = -60 } }
			}
			modifier = {
				factor = 0.5
				NOT = { reverse_opinion = { who = FROM value = -75 } }
			}
			modifier = {
				factor = 2
				FROM = { trait = paranoid }
			}
			modifier = {
				factor = 0.75
				trait = lunatic_1
			}
			modifier = {
				factor = 0.25
				trait = lunatic_2
			}
			modifier = {
				factor = 0.75
				trait = shy
			}
			modifier = {
				factor = 2
				trait = paranoid
			}
			modifier = {
				factor = 0.5
				trait = mystic
			}
			modifier = {
				factor = 1.25
				trait = intricate_webweaver
			}
			modifier = {
				factor = 1.5
				trait = elusive_shadow
			}
			modifier = {
				factor = 1.5
				trait = charismatic_negotiator
			}
			modifier = {
				factor = 1.75
				trait = grey_eminence
			}
			modifier = {
				factor = 0.75
				trait = fortune_builder
			}
			modifier = {
				factor = 0.85
				trait = midas_touched
			}
			modifier = {
				factor = 1.5
				trait = tough_soldier
			}
			modifier = {
				factor = 1.75
				trait = skilled_tactician
			}
			modifier = {
				factor = 1.95
				trait = brilliant_strategist
			}
			modifier = {
				factor = 1.25
				trait = detached_priest
			}
			modifier = {
				factor = 1.5
				trait = martial_cleric
			}
			modifier = {
				factor = 1.75
				trait = scholarly_theologian
			}
			modifier = {
				factor = 1.95
				trait = mastermind_theologian
			}
			modifier = {
				factor = 0.75
				trait = stressed
			}
			modifier = {
				factor = 0.5
				trait = infirm
			}
			modifier = {
				factor = 0.5
				trait = drunkard
			}
			modifier = {
				factor = 0.25
				trait = addict
			}
			modifier = {
				factor = 0.85
				trait = homosexual
			}
			modifier = {
				factor = 0.75
				trait = kinslayer
			}
			modifier = {
				factor = 0.75
				trait = clubfooted
			}
			modifier = {
				factor = 0.5
				trait = harelip
			}
			modifier = {
				factor = 0.5
				trait = hunchback
			}
			modifier = {
				factor = 0.85
				trait = lisp
			}
			modifier = {
				factor = 0.75
				trait = stutter
			}
			modifier = {
				factor = 0.5
				trait = dwarf
			}
			modifier = {
				factor = 0.5
				trait = inbred
			}
			modifier = {
				factor = 1.75
				trait = celibate
			}
			modifier = {
				factor = 0.5
				trait = hedonist
			}
			modifier = {
				factor = 1.75
				trait = scholar
			}
			modifier = {
				factor = 0.95
				trait = impaler
			}
			modifier = {
				factor = 0.85
				trait = poet
			}
			modifier = {
				factor = 0.85
				trait = lustful
			}
			modifier = {
				factor = 1.25
				trait = chaste
			}
			modifier = {
				factor = 0.85
				trait = gluttonous
			}
			modifier = {
				factor = 1.25
				trait = temperate
			}
			modifier = {
				factor = 0.85
				trait = greedy
			}
			modifier = {
				factor = 0.95
				trait = charitable
			}
			modifier = {
				factor = 0.85
				trait = slothful
			}
			modifier = {
				factor = 1.25
				trait = diligent
			}
			modifier = {
				factor = 0.85
				trait = envious
			}
			modifier = {
				factor = 0.85
				trait = kind
			}
			modifier = {
				factor = 0.95
				trait = wroth
			}
			modifier = {
				factor = 1.15
				trait = patient
			}
			modifier = {
				factor = 0.85
				trait = proud
			}
			modifier = {
				factor = 1.15
				trait = humble
			}
			modifier = {
				factor = 0.85
				trait = deceitful
			}
			modifier = {
				factor = 1.85
				trait = craven
			}
			modifier = {
				factor = 0.85
				trait = cruel
			}
		}
	}

	exile_whunter = {
		ai_check_interval = 32
		only_playable = yes
		filter = court
		ai_target_filter = court
		from_potential = {
			trait = witch_hunter
			AND = {
				is_landed = yes
				higher_tier_than = BARON
			}
			is_incapacitated_trigger = no
			NOT = { has_character_flag = witch_hunter_accusation }
		}
		potential = {
			is_ruler = no
			host = { character = FROM }
			OR = { 
				trait = pregnant
				trait = incapable
				trait = has_nurgles_rot
				trait = possessed
				trait = lunatic_3
				trait = lunatic_2
				is_mutated_trigger = yes
				has_character_modifier = magic_power_1
				has_character_modifier = magic_power_2
				has_character_modifier = magic_power_3
				has_character_modifier = magic_power_4
				trait = magic_potential_1
				trait = magic_potential_2
				trait = magic_potential_3
				trait = magic_potential_4 
			}
			trait = witch_hunter
		}
		allow = {
			FROM = { piety=5 }
		}
		effect = {
			FROM = { piety=-5 }
			if = { 
				limit = { 
					OR = { 
						trait = pregnant
						trait = lunatic_3
						trait = lunatic_2
						trait = incapable
						trait = has_nurgles_rot 
					} 
				}
				remove_trait = witch_hunter
				if={ limit={ is_state_witch_hunter_trigger=yes }
					leave_society = yes
				}
				location = { ROOT = { culture = PREV } }
				banish = yes 
			}
			if = {
				limit = {
					NOR = {
						trait = pregnant
						trait = lunatic_3
						trait = lunatic_2
						trait = incapable
						trait = has_nurgles_rot
					}
				}
				remove_trait = witch_hunter
				if={ limit={ is_state_witch_hunter_trigger=yes }
					leave_society = yes
				}
				if = {
					limit = { is_invincible_trigger = yes }
					antideath_effect = yes
					break = yes
				}
				add_trait = staked
				death = { death_reason = death_execution killer = FROM }
				hidden_tooltip= {
					mother = {
						opinion = {
							who = FROM
							modifier = evil_murderer
						}
					}
					father = {
						opinion = {
							who = FROM
							modifier = evil_murderer
						}
					}
					any_child = {
						limit = {
							NOT = { trait = witch_hunter }
							NOT = { character = FROM }
							NOT = { has_character_flag = evil_murderer }
						}
						opinion = {
							who = FROM
							modifier = evil_murderer
						}
					}
					any_spouse = {
						limit = {
							NOT = { trait = witch_hunter }
							NOT = { character = FROM }
							opinion = { who = ROOT value = -25 }
						}
						set_character_flag = murder_opinion_set
						opinion = {
							who = FROM
							modifier = evil_murderer
						}
					}
					any_lover = {
						limit = {
							NOT = { trait = witch_hunter }
							NOT = { character = FROM }
						}
						opinion = {
							who = FROM
							modifier = evil_murderer
						}
					}
					any_friend = {
						limit = {
							NOT = { trait = witch_hunter }
							NOT = { character = FROM }
						}
						opinion = {
							who = FROM
							modifier = evil_murderer
						}
					}
					any_dynasty_member = {
						limit = {
							NOT = { trait = witch_hunter }
							is_close_relative = ROOT
							NOT = { character = FROM }
						}
						opinion = {
							who = FROM
							modifier = evil_murderer
						}
					}
				}
			}
		}

		revoke_allowed = { always = no }
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 2
				has_minor_mutation_trigger = yes
				}
			modifier = {
				factor = 5
				has_major_mutation_trigger = yes
				}
			modifier = {
				factor = 10
				has_massive_mutation_trigger = yes
				}
			modifier = {
				factor = 5
				trait = possessed
			}
		}
	}

	request_recruit = {
		ai = no	#Player only, AI by events
		#only_rulers = yes
		filter = all
		ai_target_filter = none
		is_in_society = yes
		from_potential = {
			society_rank=4
			is_state_witch_hunter_trigger=yes
			trait = witch_hunter
			is_incapacitated_trigger = no
			OR = {
				AND = { is_landed = yes
				higher_tier_than = BARON }
			}
		}
		potential = {
			is_within_diplo_range = FROM
			NOT = { age = 30 }
			liege = { NOT = { character = FROM } }
			liege = { NOT = { religion_group = chaos_gods_group } }
			NOT = { top_liege = { has_character_modifier = expelled_k_witch_hunters_order } }
			NOT = { liege = { has_character_modifier = recent_whunter_request } }
			is_ruler = no
			NOR = { trait = pregnant
				trait = incapable
				trait = has_nurgles_rot
				trait = possessed
				trait = lunatic_3
				is_mutated_trigger = yes
				has_character_modifier = magic_power_1
				has_character_modifier = magic_power_2
				has_character_modifier = magic_power_3
				has_character_modifier = magic_power_4
				trait = magic_potential_1
				trait = magic_potential_2
				trait = magic_potential_3
				trait = magic_potential_4 }
			NOT = { trait = witch_hunter }
			NOT = { host = { character = FROM } }
		}
		allow = {
			FROM = {
				piety = 25
				society_currency >= 250
			}
			age = 6
			religion = sigmarite
		}
		effect = {
			FROM = { piety = -5 change_society_currency=-250 }
			liege = { 
				add_character_modifier = { 
					name = recent_whunter_request
					duration = 3650
					hidden = yes 
				} 
			}
			hidden_tooltip = { character_event = { id = swhunters.20 } }
		}
	}

	#Recreating Holy Order Mechanics
	templars_join_war = {
		ai_check_interval = 6
		ai_target_filter = independent_rulers
		only_playable = yes
		from_potential = {
			has_landed_title = k_witch_hunters_order
			is_within_diplo_range = ROOT
			trait = creature_human
			trait = witch_hunter
			is_ruler = yes
		}
		potential = {
			religion_group = old_world_group
			independent = yes
			is_landed = yes
			higher_tier_than = BARON
			NOT = { character = FROM }
		}
		allow = {
			NOT = { FROM = { war = yes } }
			NOT = { FROM = { liege = { character = ROOT } } }
			is_within_diplo_range = FROM
			ROOT = { war = yes
				any_war = { 
					OR = { 
						is_primary_war_attacker = yes
						is_primary_war_defender = yes 
					}
					OR = { 
						any_defender = { religion_group = chaos_gods_group }
						any_attacker = { religion_group = chaos_gods_group }
						any_defender = { has_character_modifier = expelled_k_witch_hunters_order }
						any_attacker = { has_character_modifier = expelled_k_witch_hunters_order }
						any_defender = { religion_group = necromantic_group }
						any_attacker = { religion_group = necromantic_group }
					}
					NOT = { 
						OR = { 
							any_defender = { 
								NOT = { character = ROOT }
								any_vassal = { character = FROM } 
							}
 							any_attacker = {  #Cannot join a war when your liege is already involved in it
								NOT = { character = ROOT }
								any_vassal = { character = FROM } 
							}
						}
					}
					NOR = { 	
						using_cb = peasant_revolt
						using_cb = heretic_revolt
						using_cb = religious_revolt
						using_cb = liberation_revolt	 #Cannot join if the target is tangled in a rebellion
					}
				}
			}
		}
		effect = {
			ROOT = { letter_event = { id = swhunters.24 } }
			FROM = { join_defender_wars = ROOT
				join_attacker_wars = ROOT
				prestige = 50
				piety = 50
				change_society_currency=250
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = { factor = 0.01 }
			modifier = {
				factor = 0.1
				lower_tier_than = DUKE
			}
			modifier = {
				factor = 0.001
				NOR = { ROOT = { capital_scope = { region = world_old_world_empire } }
				ROOT = { capital_scope = { region = world_old_world_kislev } }
				ROOT = { capital_scope = { region = world_old_world_bretonnia } }
				ROOT = { capital_scope = { region = world_old_world_estalia } } }
			}
			modifier = {
				factor = 10
				ROOT = { any_war = { using_cb = religious } } #flock behind Holy Wars
			}
			modifier = {
				factor = 20
				any_war = {
					attacker = {
						using_cb = new_crusade
					}
				}
			}
			modifier = {
				factor = 10
				any_war = {
					attacker = {
						OR = {
							using_cb = waaagh_war
							using_cb = kingdom_adventure
							using_cb = vlad_subjugation
							using_cb = skaven_foreignconquest
						}
					}
				}
			}
			modifier = {
				factor = 0
				ROOT = { any_war = { NOT = { is_primary_war_attacker = yes }
							NOT = { is_primary_war_defender = yes } } }
			}
			modifier = {
				factor = 0.5
				OR = {
					trait = lunatic_3
					trait = lunatic_2
				}
			}
			modifier = {
				factor = 0.5
				has_character_modifier = magic_power_1
			}
			modifier = {
				factor = 0.25
				has_character_modifier = magic_power_2
			}
			modifier = {
				factor = 0.05
				has_character_modifier = magic_power_3
			}
			modifier = {
				factor = 0
				has_character_modifier = magic_power_4
			}
			modifier = {
				factor = 2.5
				ROOT = { any_war = { attacker = { religion_group = chaos_gods_group } } }
			}
			modifier = {
				factor = 2.5
				ROOT = { any_war = { attacker = { trait = creature_beastman } } }
			}
			modifier = {
				factor = 0.75
				ROOT = { trait = fairy_bred }
			}
			modifier = {
				factor = 0.25
				ROOT = { NOT = { religion = sigmarite } }
			}
			modifier = {
				factor = 1.25
				capital_scope = { FROM = { NOT = { distance = { where = PREV value = 50 } } } } #faraway wars are less likely to be joined
			}
			modifier = {
				factor = 0.5
				capital_scope = { FROM = { distance = { where = PREV value = 75 } } } #faraway wars are less likely to be joined
			}
			modifier = {
				factor = 0.25
				capital_scope = { FROM = { distance = { where = PREV value = 100 } } } #faraway wars are less likely to be joined
			}
			modifier = {
				factor = 0.05
				capital_scope = { FROM = { distance = { where = PREV value = 300 } } } #faraway wars are less likely to be joined
			}
			modifier = {
				factor = 0.05
				capital_scope = { FROM = { distance = { where = PREV value = 400 } } } #faraway wars are less likely to be joined
			}
			modifier = {
				factor = 0.01
				capital_scope = { FROM = { distance = { where = PREV value = 500 } } } #faraway wars are less likely to be joined
			}
		}
	}

	create_whunter_company = {
		ai_check_interval = 36
		filter = home_court
		ai_target_filter = home_court
		only_playable = yes
		from_potential = {
			has_landed_title = k_witch_hunters_order
			trait = creature_human
			trait = witch_hunter
			has_dlc = "Horse Lords"
			is_ruler = yes
		}
		potential = {
			trait = witch_hunter
			trait = creature_human
			is_ruler = no
			mercenary = no
			age = 16
			NOT = { character = FROM }
		}
		allow = {
			is_adult = yes
			is_ruler = no
			liege = { character = FROM }
			FROM = { piety = 150
				wealth = 450 }
		}
		effect = {
			# set_character_flag = is_mercenary_leader
			add_character_modifier = { modifier = started_mercenary_company months = 30 hidden = yes }
			FROM = { wealth = -450
				primary_title = {
					ROOT = { remove_trait = witch_hunter
						set_government_type = nomadic_government
						manpower = 1000
					create_title = {
						tier = DUKE
						name = DYNAMIC_WITCHHUNTER_CHAPTER
						landless = yes
						custom_created = yes
						culture = ROOT
						holder = ROOT
						base_title = THIS
						mercenary = yes
						ruler = "HUNTER_CAPTAIN"
						ruler_female = "HUNTER_CAPTAIN"
						foa = "CAPTAIN_FOA"
					}
					new_title = { set_coa = FROM }
					}
					ROOT = { add_trait = witch_hunter
						set_government_type = congregation_government }
				}
			}
			ROOT = {
				set_defacto_liege = FROM
				piety = 75
				wealth = 50
				prestige = 50
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.1
			}

			modifier = {
				factor = 0
				OR = {
					any_mercenary_band = {
						count = 3
						band_creator = {
							character = FROM
						}
					}
					FROM = {
						is_primary_war_attacker = yes
						is_primary_war_defender = yes
					}
				}
			}
			modifier = {
				factor = 0.5
				any_mercenary_band = {
					count = 1
					band_creator = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 0.5
				any_mercenary_band = {
					count = 2
					band_creator = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 0
				age = 40
				}
			modifier = {
				factor = 0.5
				is_female = yes
				}
			modifier = {
				factor = 0.25
				trait = cynical
				}
			modifier = {
				factor = 2.5
				reverse_opinion = { who = FROM value = 75 }
			}
			modifier = {
				factor = 2.25
				reverse_opinion = { who = FROM value = 60 }
			}
			modifier = {
				factor = 2
				reverse_opinion = { who = FROM value = 50 }
			}
			modifier = {
				factor = 1.95
				reverse_opinion = { who = FROM value = 40 }
			}
			modifier = {
				factor = 1.75
				reverse_opinion = { who = FROM value = 30 }
			}
			modifier = {
				factor = 1.5
				reverse_opinion = { who = FROM value = 20 }
			}
			modifier = {
				factor = 1.25
				reverse_opinion = { who = FROM value = 10 }
			}
			modifier = {
				factor = 0.99
				NOT = { reverse_opinion = { who = FROM value = -10 } }
			}
			modifier = {
				factor = 0.98
				NOT = { reverse_opinion = { who = FROM value = -20 } }
			}
			modifier = {
				factor = 0.95
				NOT = { reverse_opinion = { who = FROM value = -30 } }
			}
			modifier = {
				factor = 0.85
				NOT = { reverse_opinion = { who = FROM value = -40 } }
			}
			modifier = {
				factor = 0.75
				NOT = { reverse_opinion = { who = FROM value = -50 } }
			}
			modifier = {
				factor = 0.65
				NOT = { reverse_opinion = { who = FROM value = -60 } }
			}
			modifier = {
				factor = 0.5
				NOT = { reverse_opinion = { who = FROM value = -75 } }
			}
			modifier = {
				factor = 2
				FROM = { trait = paranoid }
			}
			modifier = {
				factor = 0.75
				trait = lunatic_1
			}
			modifier = {
				factor = 0.25
				trait = lunatic_2
			}
			modifier = {
				factor = 0.75
				trait = shy
			}
			modifier = {
				factor = 2
				trait = paranoid
			}
			modifier = {
				factor = 0.5
				trait = mystic
			}
			modifier = {
				factor = 1.25
				trait = intricate_webweaver
			}
			modifier = {
				factor = 1.5
				trait = elusive_shadow
			}
			modifier = {
				factor = 1.5
				trait = charismatic_negotiator
			}
			modifier = {
				factor = 1.75
				trait = grey_eminence
			}
			modifier = {
				factor = 0.75
				trait = fortune_builder
			}
			modifier = {
				factor = 0.85
				trait = midas_touched
			}
			modifier = {
				factor = 1.5
				trait = tough_soldier
			}
			modifier = {
				factor = 1.75
				trait = skilled_tactician
			}
			modifier = {
				factor = 1.95
				trait = brilliant_strategist
			}
			modifier = {
				factor = 1.25
				trait = detached_priest
			}
			modifier = {
				factor = 1.5
				trait = martial_cleric
			}
			modifier = {
				factor = 1.75
				trait = scholarly_theologian
			}
			modifier = {
				factor = 1.95
				trait = mastermind_theologian
			}
			modifier = {
				factor = 0.75
				trait = stressed
			}
			modifier = {
				factor = 0.5
				trait = infirm
			}
			modifier = {
				factor = 0.5
				trait = drunkard
			}
			modifier = {
				factor = 0.25
				trait = addict
			}
			modifier = {
				factor = 0.85
				trait = homosexual
			}
			modifier = {
				factor = 0.75
				trait = kinslayer
			}
			modifier = {
				factor = 0.75
				trait = clubfooted
			}
			modifier = {
				factor = 0.5
				trait = harelip
			}
			modifier = {
				factor = 0.5
				trait = hunchback
			}
			modifier = {
				factor = 0.85
				trait = lisp
			}
			modifier = {
				factor = 0.75
				trait = stutter
			}
			modifier = {
				factor = 0.5
				trait = dwarf
			}
			modifier = {
				factor = 0.5
				trait = inbred
			}
			modifier = {
				factor = 1.75
				trait = celibate
			}
			modifier = {
				factor = 0.5
				trait = hedonist
			}
			modifier = {
				factor = 1.75
				trait = scholar
			}
			modifier = {
				factor = 0.95
				trait = impaler
			}
			modifier = {
				factor = 0.85
				trait = poet
			}
			modifier = {
				factor = 0.85
				trait = lustful
			}
			modifier = {
				factor = 1.25
				trait = chaste
			}
			modifier = {
				factor = 0.85
				trait = gluttonous
			}
			modifier = {
				factor = 1.25
				trait = temperate
			}
			modifier = {
				factor = 0.85
				trait = greedy
			}
			modifier = {
				factor = 0.95
				trait = charitable
			}
			modifier = {
				factor = 0.85
				trait = slothful
			}
			modifier = {
				factor = 1.25
				trait = diligent
			}
			modifier = {
				factor = 0.85
				trait = envious
			}
			modifier = {
				factor = 0.85
				trait = kind
			}
			modifier = {
				factor = 0.95
				trait = wroth
			}
			modifier = {
				factor = 1.15
				trait = patient
			}
			modifier = {
				factor = 0.85
				trait = proud
			}
			modifier = {
				factor = 1.15
				trait = humble
			}
			modifier = {
				factor = 0.85
				trait = deceitful
			}
			modifier = {
				factor = 1.85
				trait = craven
			}
			modifier = {
				factor = 0.85
				trait = cruel
			}
		}
	}

	dissolve_whunter_company = {
		ai_check_interval = 24
		filter = vassals
		ai_target_filter = vassals
		only_playable = yes
		from_potential = {
			has_landed_title = k_witch_hunters_order
			trait = witch_hunter
			has_dlc = "Horse Lords"
			is_ruler = yes
			trait = creature_human
		}
		potential = {
			trait = witch_hunter
			mercenary = yes
			trait = creature_human
			liege = { character = FROM }
			primary_title = { band_creator = { character = FROM } }
		}
		allow = {
			OR = {
				custom_tooltip = {
					text = is_mercenary_leader_YEAR
					had_character_flag = { flag = is_mercenary_leader days = 1825 }
				}
				prisoner = yes
			}
			primary_title = {
				NOT = { has_raised_standing_troops = yes }
				band_creator = { character = FROM }
			}
		}
		effect = {
			primary_title = {
				activate_title = { title = THIS status = no }
				destroy_landed_title = THIS
			}
			move_character = FROM
			clr_character_flag = is_mercenary_leader
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1

			modifier = {
				factor = 0.01
			}
			modifier = {
				factor = 0
				piety = 250
			}

			modifier = {
				factor = 0.5
				health = 7
			}

			modifier = {
				factor = 1.5
				NOT = { health = 5 }
			}

			modifier = {
				factor = 2
				NOT = { health = 4 }
			}

			modifier = {
				factor = 4
				NOT = { health = 3 }
			}
			modifier = {
				factor = 10
				NOT = { trait = witch_hunter }
			}

			modifier = {
				factor = 5
				trait = incapable
			}
		modifier = {
			factor = 1.75
			trait = lunatic_3
			}
		modifier = {
			factor = 1.5
			trait = lunatic_2
			}
		modifier = {
			factor = 1.5
			has_character_modifier = magic_power_1
			}
		modifier = {
			factor = 2
			has_character_modifier = magic_power_2
			}
		modifier = {
			factor = 4
			has_character_modifier = magic_power_3
			}
		modifier = {
			factor = 10
			has_character_modifier = magic_power_4
			}
		modifier = {
			factor = 3
			has_minor_mutation_trigger = yes
			}
		modifier = {
			factor = 5
			has_major_mutation_trigger = yes
			}
		modifier = {
			factor = 10
			has_massive_mutation_trigger = yes
			}
		}
	}
}
society_decisions={
	request_whunter_weapon = {
		ai_check_interval = 46
		only_playable=yes
		is_in_society=yes
		potential = {
			OR = {
				society_member_of = sigmar_witch_hunters
			}
			NOT = { has_artifact = witch_hunter_rapier }
		}

		allow = {
			society_currency >= 500
		}

		effect = {
			change_society_currency=-500
			add_artifact=witch_hunter_rapier
		}

		ai_will_do = {
			factor = 1
		}
	}
}
decisions = {
	grant_title_witch_hunter = {
		ai_check_interval = 36
		only_rulers=yes
		potential = {
			ai = yes
			NOT = { religion = ursun } #ice witches
			can_grant_title_witch_hunter_trigger = yes
		}

		allow = {
		}

		effect = {
			random_courtier = {
				limit = {
					can_hold_title_witch_hunter_trigger = yes
				}
				give_minor_title = title_court_witchhunter
			}

		}

		ai_will_do = {
			factor = 1
		}
	}
	borrow_money_witch_hunters = {
		ai_check_interval = 24
		only_playable = yes
		potential = {
			religion = sigmarite
			trait = creature_human
			is_heretic = no
			is_title_active = k_witch_hunters_order
			NOT = { has_character_modifier = borrowed_from_k_witch_hunters_order }
			NOT = { has_character_modifier = expelled_k_witch_hunters_order }
			NOT = { is_nomadic = yes }
			NOT = { trait = witch_hunter }
			NOT = { government = congregation_government }
			NOT = { has_any_opinion_modifier = opinion_refused_loan }
			location = { region = world_old_world }

			k_witch_hunters_order = { holder_scope = { liege = { NOT = { character = ROOT } } } }
		}

		allow = {
			k_witch_hunters_order = { holder_scope = { wealth = 500
				ROOT = { NOT = { excommunicated_for = PREV } } }
			}
		}

		effect = {
			hidden_tooltip = { k_witch_hunters_order = { holder_scope = { letter_event = { id = swhunters.5 } } }}
		}

		revoke_allowed = {
			always = no
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				wealth = 0
			}
			modifier = {
				factor = 0.2 # Slow it down
				lower_tier_than = KING
				k_witch_hunters_order = { holder_scope = { ai = no } }
			}
			modifier = {
				factor = 0
				OR = {
					society_member_of = cult_of_khorne
					society_member_of = cult_of_nurgle
					society_member_of = cult_of_slaanesh
					society_member_of = cult_of_tzeentch
					is_mutated_trigger = yes
				}
			}
		}
	}

	donate_money_to_witch_hunters = {
		ai_check_interval = 40
		only_playable = yes
		potential = {
			NOT={religion=old_faith}
			religion_group = old_world_group
			trait = creature_human
			is_heretic = no
			is_title_active = k_witch_hunters_order
			NOT = { trait = witch_hunter }
			location = { region = world_old_world }
			NOT = { has_character_modifier = expelled_k_witch_hunters_order }

			k_witch_hunters_order = {
				holder_scope = {
					liege = {
						NOT = { character = ROOT }
					}
				}
			}
		}

		allow = {
			wealth = 300
		}

		effect = {
			if = {
				limit = {
					NOT = { has_character_modifier = donated_to_holy_order }
				}
				add_character_modifier = {
					name = donated_to_holy_order
					duration = -1
				}
			}

			hidden_tooltip = {
				decrease_visibility_effect = yes
				k_witch_hunters_order = { holder_scope = { character_event = { id = swhunters.6 }
					}
				}
			}

			wealth = -300
			piety = 150
		}

		revoke_allowed = {
			always = no
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					piety = 500
					NOT = { wealth = 500 }
					controls_religion = yes #For Now till more Whunters added
					trait = zealous
					trait = theologian
				}
			}
			modifier = {
				factor = 0 # Doom Counter
				is_doom_very_low_trigger=yes
			}
			modifier = {
				factor = 0.5 # Doom Counter
				is_doom_low_trigger=yes
			}
			modifier = {
				factor = 1.1 # Doom Counter
				is_doom_medium_trigger=yes
			}
			modifier = {
				factor = 1.3 # Doom Counter
				is_doom_high_trigger=yes
			}
			modifier = {
				factor = 1.6 # Doom Counter
				is_doom_very_high_trigger=yes
			}
			modifier = {
				factor = 0.2
				trait = greedy
			}
			modifier = {
				factor = 0.2
				trait = cynical
			}
			modifier = {
				factor = 1.5
				has_pious_trait_trigger = yes
			}
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 0
				war = yes
			}
			modifier = {
				factor = 0
				OR = {
					society_member_of = cult_of_khorne
					society_member_of = cult_of_nurgle
					society_member_of = cult_of_slaanesh
					society_member_of = cult_of_tzeentch
					is_mutated_trigger = yes
				}
			}
		}
	}

	expel_the_witch_hunters = {
		ai_check_interval = 24
		only_independent = yes
		potential = {
			higher_tier_than = DUKE
			independent = yes
			trait = creature_human
			NOT = { has_character_modifier = expelled_k_witch_hunters_order }
			NOT = { trait = witch_hunter }
			OR = { any_courtier = { trait = witch_hunter }
				any_vassal = { any_courtier = { trait = witch_hunter } }
				any_realm_province = {
					any_province_lord = {
						k_witch_hunters_order = { holder_scope = {
											OR = { character = PREVPREV
												is_vassal_or_below = PREVPREV }
											}
									}
							}
					}
				} #closesOR
		}

		allow = { piety = 50
		}

		effect = {
				if = { limit = { religion = sigmarite }
					piety = -1000 }
				if = { limit = { NOT = { religion = sigmarite }
						religion_group = old_world_group }
					piety = -500 }
				if = { limit = { NOT = { religion_group = old_world_group }
						NOT = { religion_group = chaos_gods_group } }
					piety = -250 }
				if = { limit = { religion_group = chaos_gods_group }
					piety = 150 }

			k_cult_of_sigmar = { holder_scope = { religion_authority = { modifier = holy_order_expelled
											years = 20 }
							}
						}

			hidden_tooltip = {
				increase_visibility_effect = yes
				k_witch_hunters_order = { holder_scope = { character_event = { id = swhunters.7 } } }
				any_courtier = { limit = { trait = witch_hunter }
							banish = yes }
				any_vassal = { any_courtier = { limit = { trait = witch_hunter }
								banish = yes }
						any_vassal = {  any_courtier = { limit = { trait = witch_hunter }
											banish = yes } } }
				add_character_modifier = {
					name = expelled_k_witch_hunters_order
					duration = -1
					inherit = yes
					}
			}
		}

		revoke_allowed = {
			always = no
		}

		ai_will_do = {
			factor = 1
			modifier = { factor = 0.001 #Slow down
				}
			modifier = { factor = 0
				NOR =  { religion_group = chaos_gods_group
					trait = vampire_carstein_visible
					trait = vampire_blood_visible
					trait = vampire_lahmian_visible
					trait = vampire_necrarch_visible
					trait = vampire_strigoi_visible
					trait = vampire_mahtmasi_visible
					trait = vampire_jade_visible
					trait = vampire_carstein_hidden
					trait = vampire_blood_hidden
					trait = vampire_lahmian_hidden
					trait = vampire_necrarch_hidden
					trait = vampire_strigoi_hidden
					trait = vampire_mahtmasi_hidden
					trait = vampire_jade_hidden
					trait = lunatic_2
					trait = lunatic_3
					society_member_of = cult_of_khorne
					society_member_of = cult_of_khorne2
					society_member_of = cult_of_khorne3
					society_member_of = cult_of_nurgle
					society_member_of = cult_of_nurgle2
					society_member_of = cult_of_nurgle3
					society_member_of = cult_of_slaanesh
					society_member_of = cult_of_slaanesh2
					society_member_of = cult_of_slaanesh3
					society_member_of = cult_of_tzeentch
					society_member_of = cult_of_tzeentch2
					society_member_of = cult_of_tzeentch3
					is_mutated_trigger = yes }
				}
			modifier = { factor = 100
				OR =  {
					religion_group = chaos_gods_group
					trait = vampire_carstein_visible
					trait = vampire_blood_visible
					trait = vampire_lahmian_visible
					trait = vampire_necrarch_visible
					trait = vampire_strigoi_visible
					trait = vampire_mahtmasi_visible
					trait = vampire_jade_visible
					has_major_mutation_trigger = yes }

				}
			modifier = { factor = 10
				OR =  { trait = magic_potential_1
					trait = magic_potential_2
					trait = magic_potential_3
					trait = magic_potential_4 }

				}
			modifier = { factor = 15
				NAND = { trait = lore_ice
					is_female = yes
					religion = kislev_gods }
				OR =  { has_character_modifier = magic_power_1
					has_character_modifier = magic_power_2
					has_character_modifier = magic_power_3
					has_character_modifier = magic_power_4 }

				}
		}
	}
	welcome_the_witch_hunters = {
		ai_check_interval = 36
		only_independent = yes
		potential = {
			has_character_modifier = expelled_k_witch_hunters_order
			higher_tier_than = DUKE
			independent = yes
			trait = creature_human
		}

		allow = { wealth = 150
		}

		effect = { wealth = -150
				if = { limit = { religion = sigmarite }
					piety = 500 }
				if = { limit = { NOT = { religion = sigmarite }
						religion_group = old_world_group }
					piety = 250 }
				if = { limit = { NOT = { religion_group = old_world_group }
						NOT = { religion_group = chaos_gods_group } }
					piety = 50 }
				if = { limit = { religion_group = chaos_gods_group }
					piety = -750 }

			remove_character_modifier = expelled_k_witch_hunters_order
			hidden_tooltip = {
				decrease_visibility_effect = yes
				k_witch_hunters_order = { holder_scope = { letter_event = { id = swhunters.8 } } }
				}
		}

		revoke_allowed = {
			always = no
		}

		ai_will_do = {
			factor = 1
			modifier = { factor = 0.01 #Slow down
				}
			modifier = { factor = 100
				NOR =  { religion_group = chaos_gods_group
					trait = vampire_carstein_visible
					trait = vampire_blood_visible
					trait = vampire_lahmian_visible
					trait = vampire_necrarch_visible
					trait = vampire_strigoi_visible
					trait = vampire_mahtmasi_visible
					trait = vampire_jade_visible
					trait = vampire_carstein_hidden
					trait = vampire_blood_hidden
					trait = vampire_lahmian_hidden
					trait = vampire_necrarch_hidden
					trait = vampire_strigoi_hidden
					trait = vampire_mahtmasi_hidden
					trait = vampire_jade_hidden
					trait = lunatic_2
					trait = lunatic_3
					society_member_of = cult_of_khorne
					society_member_of = cult_of_nurgle
					society_member_of = cult_of_slaanesh
					society_member_of = cult_of_tzeentch
					is_mutated_trigger = yes }
				}
			modifier = { factor = 0
				OR =  { religion_group = chaos_gods_group
					trait = vampire_carstein_visible
					trait = vampire_blood_visible
					trait = vampire_lahmian_visible
					trait = vampire_necrarch_visible
					trait = vampire_strigoi_visible
					trait = vampire_mahtmasi_visible
					trait = vampire_jade_visible
					has_major_mutation_trigger = yes }

				}
			modifier = { factor = 0.01
				OR =  { trait = magic_potential_1
					trait = magic_potential_2
					trait = magic_potential_3
					trait = magic_potential_4 }

				}
			modifier = { factor = 0
				NAND = { trait = lore_ice
					is_female = yes
					religion = kislev_gods }
				OR =  { has_character_modifier = magic_power_1
					has_character_modifier = magic_power_2
					has_character_modifier = magic_power_3
					has_character_modifier = magic_power_4 }

				}
		}
	}

	call_templars = {
		ai_check_interval = 12
		only_playable = yes
		potential = {
			higher_tier_than = COUNT
			religion_group = old_world_group
			trait = creature_human
			is_heretic = no
			is_title_active = k_witch_hunters_order
			NOT = { trait = witch_hunter }
			location = { region = world_old_world }
			NOT = { has_character_modifier = expelled_k_witch_hunters_order }
			OR = { 
				NOT = { has_character_flag = asked_templars_assistance }
				had_character_flag = { flag = asked_templars_assistance days = 900 }
			}
			is_nomadic = no
			is_tribal = no
		}

		allow = {
			war = yes
			trigger_if = {
				limit = { ai = yes }
				piety = 50
				wealth = 25
			}
			trigger_else = {
				piety = 150
				wealth = 50
			}
			k_witch_hunters_order = { holder_scope = { war = no } }
			any_war = {
				OR = {
					is_primary_war_attacker = yes
					is_primary_war_defender = yes
				}
				OR = {
					 any_defender = { religion_group = chaos_gods_group }
					any_attacker = { religion_group = chaos_gods_group }
					 any_defender = { has_character_modifier = expelled_k_witch_hunters_order }
					any_attacker = { has_character_modifier = expelled_k_witch_hunters_order }
					 any_defender = { religion_group = necromantic_group }
					any_attacker = { religion_group = necromantic_group }
				}
			}
		}

		effect = {
			trigger_if = {
				limit = { ai = yes }
				piety = -50
				wealth = -25
			}
			trigger_else = {
				piety = -150
				wealth = -50
			}
			set_character_flag = asked_templars_assistance
			hidden_tooltip = { k_witch_hunters_order = { holder_scope = { letter_event = { id = swhunters.25 } } } }
		}

		revoke_allowed = {
			always = no
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.75 # Slow it down
				}
			modifier = {
				factor = 0.75 # Small realms more likely to ask for help
				higher_tier_than = COUNT
				}
			modifier = {
				factor = 0.5  # Small realms more likely to ask for help
				higher_tier_than = DUKE
				}
			modifier = {
				factor = 0	# Don't worry, I've got this
				any_war = {
					defender = {
						character = ROOT
						war_score = 20
						}
					}
				}
			modifier = {
				factor = 0	# Don't worry, I've got this
				any_war = {
					attacker = {
						character = ROOT
						war_score = 20
						}
					}
				}
			modifier = {
				factor = 2.5
				any_war = {
					defender = {
						character = ROOT
						NOT = { war_score = -10 }
						}
					}
				}
			modifier = {
				factor = 4
				any_war = {
					defender = {
						character = ROOT
						NOT = { war_score = -50 }
						}
					}
				}
			modifier = {
				factor = 6
				any_war = {
					defender = {
						character = ROOT
						NOT = { war_score = -75 }
					}
				}
			}
			modifier = {
				factor = 0.75
				k_witch_hunters_order = { holder_scope = { NOT = { religion = ROOT } } }
			}
			modifier = {
			factor = 20
				any_war = {
					attacker = {
						using_cb = new_crusade
					}
				}
			}
			modifier = {
			factor = 10
				any_war = {
					attacker = {
						OR = {
							using_cb = waaagh_war
							using_cb = kingdom_adventure
							using_cb = vlad_subjugation
							using_cb = skaven_foreignconquest
						}
					}
				}
			}

			modifier = {
				factor = 0.75
				k_witch_hunters_order = { holder_scope = { NOT = { religion = ROOT } } }
			}
			modifier = {
				factor = 0.25
				k_witch_hunters_order = { holder_scope = { NOT = { opinion = { who = ROOT value = 0 } }}}
			}
		}
	}
}


settlement_decisions = {
	request_barony = {
		ai = no	#Player only, AI by events
		is_in_society = yes
		filter = all
		from_potential = {
			trait = witch_hunter
			is_state_witch_hunter_trigger=yes
			society_rank=4
			NOT = { trait = incapable }
			AND = { 
				is_landed = yes
				higher_tier_than = COUNT 
			}
		}
		potential = {
			is_capital = yes
			owner = { religion_group = old_world_group }
			NOT = { owner = { has_character_modifier = expelled_k_witch_hunters_order } }
			NOT = { owner = { has_character_modifier = recent_whunter_request } }
			}
		allow = {
			location = { is_within_diplo_range = FROM }
			location = { has_empty_holding = yes }
			FROM = {
				wealth = 500
				society_currency >= 500
			}
		}
		effect = {
			change_society_currency = {
				society = sigmar_witch_hunters
				value = -500
			}
			owner = {
				add_character_modifier = {
					name = recent_whunter_request
					duration = 3650
					hidden = yes
				}
			}
			hidden_tooltip = { location = { province_event = { id = swhunters.22 } } }
		} 

		revoke_allowed = { always = no }

	}
}
title_decisions = {
	scour_barony = {
		is_in_society = yes # Note - Only works for targeted_decisions. For non-targeted decisions you can use "society_decisions"
		only_rulers = yes
		filter = all
		ai_target_filter = all
		ai_check_interval = 36
		from_potential = {
			is_state_witch_hunter_trigger = yes
			society_rank = 3
			trait = witch_hunter
			NOT = { trait = incapable }
			AND = { is_landed = yes
				higher_tier_than = BARON }
			any_courtier = { trait = witch_hunter
					is_ruler = no }
		}
		potential = {
			tier = COUNT
			owner = { religion_group = old_world_group }
			NOR = {
				owner = { has_character_modifier = expelled_k_witch_hunters_order }
				owner = {top_liege={ has_character_modifier = expelled_k_witch_hunters_order }}
			}
			NOT = { owner = { has_character_modifier = recent_whunter_request } }
		}
		allow = {
			from={
				society={
					any_society_member ={
						is_landed = no
						NOT={distance={ who = FROM value=500}}
						NOT = { trait = on_witch_hunt }
						NOT={ has_character_flag = recently_returned }
						custom_tooltip={
							text=cannot_order_from_court_of_grandmaster_TT
							OR={
								FROM={ #Cant Order from Within Direct court of the Kween
									society_rank == 4
								}
								NOT={
									employer={
										society_member_of = PREV
										society_rank = 4
									}
								}
							}
						}
					}
				}
				society_currency >= 100
			}
			location = { is_within_diplo_range = FROM }
		}
		effect = {
			change_variable = {
				which = global_debug_witch_count
				value = 1  # increase by 1 for every instance of scope
			}
			FROM={change_society_currency=-100}
			owner = { add_character_modifier = { name = recent_whunter_request duration = 1650 hidden = yes } }
			hidden_tooltip = { location = { province_event = { id = swhunters.26 days = 5 random = 4 } } }
		}

		revoke_allowed = { always = no }

		ai_will_do = {
			factor = 0.6 # Less likely to do it
			modifier = {
				factor = 2
				location={
					OR = {
						has_province_modifier = nurgle_province_disease
						has_province_modifier = beastmen_unrest
						has_province_modifier = warpdust_traces
						has_province_modifier = slaanesh_hedonism
						has_province_modifier = warpstone_meteor
						has_province_modifier = lahmian_presence
					}
				}
			}
			modifier = {
				factor = 1.5
				owner={
					reverse_opinion={
						who=FROM
						value>=20
					}
				}
			}
			modifier = {
				factor = 1.5
				from={trait=diligent}
			}
			modifier = {
				factor = 1.5
				from={trait=impaler}
			}
			modifier = {
				factor = 1.5
				from={trait=cruel}
			}
		}
	}
}
