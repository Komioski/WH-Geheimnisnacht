#OUTLINE OF BASIC WITCH HUNTER VS CULTIST SYSTEM#
#Learning determines how good a witch hunter is, they gain learning when they complete a mission#
#Intrigue determines how good a hidden cultist is; when it comes to exposure, the result is based on their intrigue vs the witch hunter's learning#
#Beware: Paranoid witch hunters will consider even a good explanation proof of guilt as well, as clearly a good cultist would be a good liar!#

namespace = witchhunter
##Now, individual witch hunters can go on missions to try and root out chaos##
#First they are invited to investigate provinces where cultists are active with the province flag events##
character_event = {
    id = witchhunter.1
    title = WITCH_HUNTERS # Witch Hunters
    desc = EVTDESC_WITCHHUNTER_1 #"One of your demesne provinces bears the taint of chaos. Your courtiers and barons want you to call in a professional to track down the root of this evil, and cleanse it from your lands."
    picture = "GFX_evt_witch_hunters"

    only_rulers = yes
    capable_only = yes
	religion_group = old_world_group

	is_triggered_only = yes

	trigger = {
		prisoner = no
		higher_tier_than = BARON
		OR = {
			NOT = { trait = witch_hunter }
			any_courtier = { has_minor_title = title_knight_captain_heir }
		}
		any_demesne_province = {
			OR = {
				has_province_modifier = nurgle_province_disease
				has_province_modifier = beastmen_unrest
				has_province_modifier = warpdust_traces
				has_province_modifier = warpstone_meteor
				has_province_modifier = slaanesh_hedonism
			}
			top_liege = {
                NOT = {
                    has_character_modifier = expelled_k_witch_hunters_order
                }
            }
			NOT = {
                has_province_modifier = witch_hunter_purge_in_progress
            }
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_1C #"We must send for a witch hunter immediately."
		trigger = {
            NOR = {
                any_courtier = {
                    trait = witch_hunter
				    has_minor_title = title_court_witchhunter
				    has_minor_title = title_knight_captain_heir
			   }
           }
		}
		custom_tooltip = {
            text = assign_witch_hunter
        }
		piety = -200
		ai_chance = {
			factor = 20
		}
	}
	option = {
		name = EVTOPT_WITCHHUNTER_1A #"We must send for a witch hunter immediately."
		any_courtier = {
			limit = {
				OR = {
					has_minor_title = title_court_witchhunter
					has_minor_title = title_knight_captain_heir
				}
				NOT = {
                    trait = on_witch_hunt
                }
			}
			character_event = { id = witchhunter.2 }
		}
		save_event_target_as = original_liege
		ai_chance = {
			factor = 40
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_1B #humanflavor.3.b # No, Witch hunters cause too much trouble.
		trigger = {
			OR = {
				ai = no
				society_member_of = cult_of_slaanesh
				society_member_of = cult_of_tzeentch
				society_member_of = cult_of_khorne
				society_member_of = cult_of_nurgle
			}
		}
		increase_visibility_minor_effect = yes
		ai_chance = {
			factor = 20
		}
	}
}


character_event = {
    id = witchhunter.2
    title = EVIL_STIRS # Evil Stirs
    desc = EVTDESC_WITCHHUNTER_2 #"A province lord has sent for you, asking your aid in uncovering and rooting out the taint of chaos in one of his provinces."
    picture = "GFX_evt_witch_hunters"

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_2A #"I leave immediately."
		save_event_target_as = witch_hunter
		character_event = { id = witchhunter.3 }
	}
}

character_event = {
    id = witchhunter.3
    title = ON_A_DARK_AND_STORMY_NIGHT # On a dark and stormy night...
    desc = EVTDESC_WITCHHUNTER_3 #"A witch hunter arrives in your court. He will begin his investigation immediately."
    picture = "GFX_evt_witch_hunters"

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_3A #EXCELLENT # Excellent.
		FROM = {
            character_event = { id = witchhunter.4 }
        }
	}
}

character_event = {
    id = witchhunter.4
    title = ON_A_DARK_AND_STORMY_NIGHT # On a dark and stormy night...
    desc = EVTDESC_WITCHHUNTER_4 #"You arrive at the court. Now, it's time to get to work..."
    picture = "GFX_evt_beheading"

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_4A #"Indeed!"
		add_trait = on_witch_hunt
		set_character_flag = noob_witch_hunter
		if = {
            limit = {
                NOR = {
                    has_minor_title = title_court_witchhunter
			        has_minor_title = title_knight_captain_heir
                }
            }
			move_character = FROM
		}
		character_event = { id = witchhunter.5 days = 1060 } #witch hunts last for 3 years, then the witch hunter leaves again#
	}
}

character_event = {
    id = witchhunter.5
    title = EVTNAMEWITCHHUNTER.5 # Your investigation is finished
    desc = EVTDESC_WITCHHUNTER_5 #"You've done what you can here. It's time to move on again and root out new evils."
    picture = "GFX_evt_witch_hunters"

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_5A #"Indeed, time to return to the temple."
		remove_trait = on_witch_hunt
		change_learning = 1 #learning determines how good a witch hunter is#
		random_list={
			50 = {
				if = {
                    limit = {
                        NOT = { martial = 10 }
                    }
					change_martial = 1
				}
			}
			50 = {
				if = {
                    limit = {
                        NOT = { intrigue = 10 }
                    }
					change_intrigue = 1
				}
			}
		}
		liege = {
            character_event = { id = witchhunter.6 }
        }
		if = {
            limit = {
                NOT = { has_minor_title = title_court_witchhunter }
            }
			move_character = event_target:original_liege
		}
	}
}


character_event = {
    id = witchhunter.6
    title = THE_INVESTIGATION_IS_FINISHED # The investigation is finished
    desc = EVTDESC_WITCHHUNTER_6 #"The Witch Hunter comes to your council meeting and informs you that he has done what he can to root out heresy in your demesne and he must now go to other lands where the foul taint of chaos is ever-growing."
    picture = "GFX_evt_witch_hunters"

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_6A #"It was about time!"
		random_demesne_province = {
			limit = {
				has_province_modifier = witch_hunter_purge_in_progress
			}
			remove_province_modifier = witch_hunter_purge_in_progress
		}
	}
}

##the witch hunter starts looking for cultist courtiers - this time he identifies a random individual##
character_event = {
    id = witchhunter.8
    title = WITCH_HUNT # Witch Hunt
    desc = EVTDESC_WITCHHUNTER_8 #"No one is immune to the taint of chaos, and while it is better to burn an entire village than risk contamination by one individual, you must be more careful here in the court. But there is one courtier who you suspect to be a cultist..."
    picture = "GFX_evt_witch_hunters"

	religion_group = old_world_group

    is_triggered_only = yes

	trigger = {
        prisoner = no
		is_adult = yes
		trait = on_witch_hunt
        NOT = { trait = incapable }
		liege = { religion_group = old_world_group }
		top_liege = {
            NOT = { has_character_modifier = expelled_k_witch_hunters_order }
        }
	}

	weight_multiplier = {
		factor = 2
    	modifier = {
    		factor = 0.5
    		intrigue = 12
    	}
        modifier = {
    		factor = 0.5
    		martial = 12
    	}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_8A #"I will confront this individual."
		save_event_target_as = witch_hunter
		random_courtier = {
			limit = {
                prisoner = no
        		is_adult = yes
				NOR = {
                    has_character_modifier = wh_accused
					trait = BretonDamsel
                    is_daemon_race_trigger = yes
					check_if_mage_should_be_burned_trigger = no
                }
				OR = {
					lower_tier_than = DUKE
					ai = no
				}
				OR = {
					trait = lustful
					trait = hedonist
					trait = mystic
					trait = paranoid
					trait = hunchback
					trait = ugly
					trait = dwarf
					trait = imbecile
					religion_group = chaos_gods_group
					is_mutated_trigger = yes

				}
			}
			character_event = { id = witchhunter.9 }
		}
	}

}

#courtier is confronted#
character_event = {
    id = witchhunter.9
    title = WITCH_HUNT # Witch Hunt
    desc = EVTDESC_WITCHHUNTER_9 #"You are confronted by the witch hunter currently investigating your court, who asks you to explain certain suspicious actions of yours..."
    picture = "GFX_evt_witch_hunters"

	is_triggered_only = yes

	immediate = {
		add_character_modifier = {
            name = wh_accused
            duration = 730
            hidden = yes
        }
	}
	option = {
		name = EVTOPT_WITCHHUNTER_9A #"I.. ehh, heresy? No no, let me explain!"
		#first the events where the courtier successfully explains the suspicious actions#
		hidden_tooltip = {
			random_list = {
				60 = {
					modifier = {
						factor = 0
						has_character_modifier = known_satanist
					}
					modifier = {
                        factor = 1.5
						FROM = { trait = paranoid }
					}
					modifier = {
                        factor = 1.25
						FROM = { learning = 5 }
					}
					modifier = {
                        factor = 1.25
						FROM = { learning = 10 }
					}
					modifier = {
                        factor = 1.5
						FROM = { learning = 15 }
					}
					modifier = {
                        factor = 1.5
						FROM = { learning = 20 }
					}
					modifier = {
                        factor = 0.5
						NOT = { FROM = { learning = 5 } }
					}
					modifier = {
                        factor = 0.65
						NOT = { FROM = { learning = 10 } }
					}
					modifier = {
                        factor = 0.75
						NOT = { FROM = { learning = 15 } }
					}
					modifier = {
                        factor = 0.85
						NOT = { FROM = { learning = 20 } }
					}
					modifier = {
                        factor = 1.25
						FROM = { intrigue = 5 }
					}
					modifier = {
                        factor = 1.25
						FROM = { intrigue = 10 }
					}
					modifier = {
                        factor = 1.5
						FROM = { intrigue = 15 }
					}
					modifier = {
                        factor = 1.5
						FROM = { intrigue = 20 }
					}
					modifier = {
                        factor = 0.5
						NOT = { FROM = { intrigue = 5 } }
					}
					modifier = { factor = 0.65
						NOT = { FROM = { intrigue = 10 } }
							 }
					modifier = { factor = 0.75
						NOT = { FROM = { intrigue = 15 } }
							 }
					modifier = { factor = 0.85
						NOT = { FROM = { intrigue = 20 } }
					}
					modifier = { factor = 1.25
						intrigue = 5
					}
					modifier = { factor = 1.25
						intrigue = 10
							 }
					modifier = { factor = 1.5
						intrigue = 15
					}
					modifier = { factor = 1.75
						intrigue = 20
					}
					modifier = { factor = 0.5
						NOT = { intrigue = 5 }
					}
					modifier = { factor = 0.75
						NOT = { intrigue = 10 }
					}
					modifier = { factor = 0.75
						NOT = { intrigue = 15 }
					}
					modifier = { factor = 0.75
						NOT = { intrigue = 20 }
					}
					modifier = { factor = 1.25
						learning = 5
					}
					modifier = { factor = 1.25
						learning = 10
					}
					modifier = { factor = 1.5
						learning = 15
					}
					modifier = { factor = 1.75
						learning = 20
					}
					modifier = { factor = 1.5
						diplomacy = 10
					}
					modifier = { factor = 1.75
						diplomacy = 20
					}
					modifier = { factor = 1.75
						trait = kind
					}
					modifier = { factor = 0.5
						NOT = { learning = 5 }
					}
					modifier = { factor = 0.75
						NOT = { learning = 10 }
					}
					modifier = { factor = 0.75
						NOT = { learning = 15 }
					}
					modifier = { factor = 0.75
						NOT = { learning = 20 }
					}
					modifier = { factor = 0.5
						trait = witch_hunter
					}
					modifier = { factor = 0.5
						trait = hedonist
					}
					modifier = { factor = 0.5
						trait = cruel
					}
					modifier = { factor = 0.3
						is_mutated_trigger = yes
					}
					modifier = { factor = 0.5
						top_liege={
							NOR = {
								has_law = magic_law_1
								has_law = magic_law_2
								has_law = magic_law_3
							}
						}
						OR = { 
							trait = magic_potential_1
							trait = magic_potential_2
							trait = magic_potential_3
							trait = magic_potential_4
							has_character_modifier = magic_power_1
							has_character_modifier = magic_power_2
							has_character_modifier = magic_power_3
							has_character_modifier = magic_power_4
						}
					}
					modifier = { factor = 0.5
						top_liege={
							NOR = {
								has_law = magic_law_2
								has_law = magic_law_3
							}
						}
						is_trained_mage_trigger = yes
					}
					modifier = { 
						factor = 0
						trait = BretonDamsel
					}
					modifier = { 
						factor = 0.1 #Why in earth would witch Hunter Trust you?
						OR = {
							has_dark_lore_trigger = yes
							has_major_mutation_trigger = yes
						}
					}
					
					modifier = { factor = 1.2
						OR = { society_member_of = cult_of_khorne
							society_member_of = cult_of_khorne2
							society_member_of = cult_of_khorne3
							society_member_of = cult_of_nurgle
							society_member_of = cult_of_nurgle2
							society_member_of = cult_of_nurgle3
							society_member_of = cult_of_slaanesh
							society_member_of = cult_of_slaanesh2
							society_member_of = cult_of_slaanesh3
							society_member_of = cult_of_tzeentch
							society_member_of = cult_of_tzeentch2
							society_member_of = cult_of_tzeentch3
						}
						NOR={
							intrigue=15
							learning=15
						}
					}
					modifier = { factor = 1.5
						FROM={
							is_state_witch_hunter_trigger=no #mercenary witch hunters arent as effective
						}
					}
					FROM = {
                        character_event = { id = witchhunter.10 }
                    }
				}
				40 = {
					modifier = {
						factor = 5
						has_character_modifier = known_satanist
					}
					modifier = {
						factor = 2.5
						has_character_modifier = highly_suspect
					}
					modifier = {
						factor = 1.5
						has_character_modifier = under_suspicion
					}
					modifier = { factor = 0.5 #If you are not a cultist, there's actually a lower chance of getting framed...
						NOR = { society_member_of = cult_of_khorne
							society_member_of = cult_of_khorne2
							society_member_of = cult_of_khorne3
							society_member_of = cult_of_nurgle
							society_member_of = cult_of_nurgle2
							society_member_of = cult_of_nurgle3
							society_member_of = cult_of_slaanesh
							society_member_of = cult_of_slaanesh2
							society_member_of = cult_of_slaanesh3
							society_member_of = cult_of_tzeentch
							society_member_of = cult_of_tzeentch2
							society_member_of = cult_of_tzeentch3
						}
					}
					modifier = { factor = 1.2
						FROM={
							is_state_witch_hunter_trigger=yes #State Witch hunters are more suspicious of everyone
						}
					}
					#modifier = { factor = 1.2 FROM={society_member_of=estalian_witch_hunters} }
					#modifier = { factor = 1.5 FROM={society_member_of=solkanite_witch_hunters} }
					FROM = { character_event = { id = witchhunter.11 } }
				}
			}
		}
	}
}

#witch hunter is convinced the courtier is not a heretic#
character_event = {
    id = witchhunter.10
    title = WITCH_HUNT # Witch Hunt
    desc = EVTDESC_WITCHHUNTER_10 #"The Courtier had a good explanation. He seems to be telling the truth."
    picture = "GFX_evt_witch_hunters"

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_10A #"Fine..."
		ai_chance = {
			factor = 80
			modifier = {
				factor = 0.5
				trait = paranoid
			}
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_10B #"A good cultist is a good liar! This is proof of guilt!"
		liege = { character_event = { id = witchhunter.12 } }
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				FROM = { trait = witch_hunter }
			}
			modifier = {
				factor = 0.1
				is_state_witch_hunter_trigger=no #State Witch hunters are more suspicious of everyone
			}
		}
	}
}

#witch hunter is convinced the courtier is  a heretic#
character_event = {
    id = witchhunter.11
    title = WITCH_HUNT # Witch Hunt
    desc = EVTDESC_WITCHHUNTER_11 #"The Courtier did not had a good explanation. You must inform the liege of this heretic in his midst!"
    picture = "GFX_evt_witch_hunters"

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_11A #"At once!"
		FROM = { character_event = { id = witchhunter.12 } }
	}

}

#the courtier is informed of the charge and wants to defends himself to his liege, or if independent, banish or imprison him#
character_event = {
    id = witchhunter.12
    title = WITCH_HUNT # Witch Hunt
    desc = EVTDESC_WITCHHUNTER_12 #"The Witch Hunter is convinced that you are a heretic or a cultist. What do you do?"
    picture = "GFX_evt_witch_hunters"

	is_triggered_only = yes

	option = {
		event_target:witch_hunter={
			show_portrait=yes
		}
		name = EVTOPT_WITCHHUNTER_12A #"Banish him!"
		trigger = { independent = yes }
		increase_visibility_minor_effect = yes
		if={limit={
			from={has_character_flag=mission_hunt}
			}
			clr_quest= quest_inquisitorial_investigation
			clr_quest= mission_hunt
			remove_trait=travelling
			change_society_currency = -100
		}
		else={FROM = { banish = yes }}
		FROM = { remove_trait = on_witch_hunt }
	}

	option = {
		event_target:witch_hunter={
			show_portrait=yes
		}
		name = EVTOPT_WITCHHUNTER_12B #IMPRISON_HIM
		trigger = { independent = yes }
		increase_visibility_effect = yes
		FROM = { imprison = yes }
		FROM = { remove_trait = on_witch_hunt }
		hidden_effect={from={remove_trait=travelling}}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_12C #"Appeal to my liege!"
		trigger = { independent = no }
		liege = { character_event = { id = witchhunter.13 } }
	}

}

#liege is informed one of this courtiers is a suspected cultist/heretic#
character_event = {
    id = witchhunter.13
    title = WITCH_HUNT # Witch Hunt
    desc = EVTDESC_WITCHHUNTER_13 #"My liege, the Witch Hunter has accused me of heresy. These charges are completely baseless, I implore you to intervene on my behalf and clear my good name! In the name of all that is holy!"
    picture = "GFX_evt_witch_hunters"

	is_triggered_only = yes

	option = {
		event_target:witch_hunter={
			show_portrait=yes
		}
		name = EVTOPT_WITCHHUNTER_13A #"All heretics must die by fire!"
		trigger = {
			OR = { ai = no
				trait = zealous
				trait = paranoid
				trait = arbitrary
				trait = cruel
				NOT = {
                    ROOT = {
                        opinion = {
                            who = FROM
                            value = 1
                        }
                    }
				}
			}
		}
		if={limit={
			fromfrom={has_character_flag=mission_hunt}
			}
			clr_quest= quest_inquisitorial_investigation
			clr_quest= mission_hunt
			remove_trait=travelling
			change_society_currency = 100
		}
		decrease_visibility_effect = yes
		FROM = { character_event = { id = witchhunter.14 } }
	}

	option = {
		event_target:witch_hunter={
			show_portrait=yes
		}
		name = EVTOPT_WITCHHUNTER_13B #"I'm sure you are not a heretic."
		trigger = {
			OR = {
				ai = no
				ROOT = { opinion = { who = FROM value = 25 } }
			}
		}
		33={
			custom_tooltip = {
				text=success
			}
		}
		if={limit={
			fromfrom={has_character_flag=mission_hunt}
			}
			clr_quest= quest_inquisitorial_investigation
			clr_quest= mission_hunt
			remove_trait=travelling
			change_society_currency = -25
		}
		increase_visibility_minor_effect = yes
		FROM = { character_event = { id = witchhunter.16 } }
	}

	option = {
		event_target:witch_hunter={
			show_portrait=yes
		}
		name = EVTOPT_WITCHHUNTER_13C #"To the dungeons with you!"
		if = { limit = { ai = no }
			increase_visibility_minor_effect = yes
			}
		if={limit={
			fromfrom={has_character_flag=mission_hunt}
			}
			clr_quest= quest_inquisitorial_investigation
			clr_quest= mission_hunt
			remove_trait=travelling
			change_society_currency = 50
		}
		FROM = { character_event = { id = witchhunter.15 } }
	}
}

character_event = {
    id = witchhunter.14
    title = WITCH_HUNT # Witch Hunt
    desc = EVTDESC_WITCHHUNTER_14 #"Your liege sides with the Witch Hunter. Guards seize you, and drag you to the court yard, where a great fire is being prepared for your execution."
    picture = "GFX_evt_burning_stake"

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_14A #"Nooooo!"
		if = {
			limit = {
				is_landed = yes
			}
			any_playable_ruler = {
				limit = {
					ai = no
					same_realm = ROOT
					NOT = { has_character_flag = witchhunter29 }
				}
				character_event = { id = witchhunter.29 days = 7 }
			}
		}
        if = {
          limit = { is_invincible_trigger = yes }
          antideath_effect = yes
          break = yes
        }
		add_trait = staked
		if = {
			limit = {
				OR = {
					society_member_of = cult_of_khorne
					society_member_of = cult_of_nurgle
					society_member_of = cult_of_slaanesh
					society_member_of = cult_of_tzeentch
					society_member_of = cult_of_undivided
				}
				set_discovered_society = yes
			}
		}
		death = {
			death_reason = death_execution_burning
			killer = FROM
		}
	}
}

character_event = {
    id = witchhunter.15
    title = WITCH_HUNT # Witch Hunt
    desc = EVTDESC_WITCHHUNTER_15 #"Your liege sides with the Witch Hunter. Guards seize you, and drag you to the dungeons. At least your liege was merciful, and did not condemn you to death by fire."
    picture = GFX_evt_into_the_dungeon

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_15A #"Nooooo!"
		imprison = FROM
	}
}

character_event = {
    id = witchhunter.16
    title = WITCH_HUNT # Witch Hunt
    desc = EVTDESC_WITCHHUNTER_16 #"Your liege intervenes, and the Witch Hunter - grudgingly - backs off. You will not suffer death by fire."
    picture = GFX_evt_into_the_dungeon

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_16A #"A close call!"
	}
}

##Now for the witch hunter actually removing the chaos taint from the province##
character_event = {
    id = witchhunter.17
    title = WITCH_HUNT # Witch Hunt
    desc = EVTDESC_WITCHHUNTER_17 #"You have managed to remove the taint of chaos from the province. But there may still be cultists and heretics lurking about..."
    picture = "GFX_evt_witch_hunters"
	religion_group=old_world_group

	trigger = {
		age = 16
		prisoner = no
		NOT = { trait = incapable }
		trait = on_witch_hunt
		OR={
			has_minor_title=title_knight_captain_heir
			has_minor_title=title_court_witchhunter
		}
		liege = {
			any_demesne_province = {
				OR = {
				has_province_modifier = nurgle_province_disease
				has_province_modifier = beastmen_unrest
				has_province_modifier = warpdust_traces
				has_province_modifier = slaanesh_hedonism
				has_province_modifier = warpstone_meteor
				}
			}
		}
	}

	mean_time_to_happen = {
		years = 2
		modifier = {
			factor = 0.9
			learning = 5
		}
		modifier = {
			factor = 0.9
			learning = 10
		}
		modifier = {
			factor = 0.5
			learning = 15
		}
		modifier = {
			factor = 0.5
			learning = 20
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_17A #EXCELLENT # Excellent.
		liege = { character_event = { id = witchhunter.18 } }
	}

}

	##liege is informed that the taint has been removed##
character_event = {
    id = witchhunter.18
    title = WITCH_HUNT # Witch Hunt
    desc = EVTDESC_WITCHHUNTER_18 #"The Witch Hunter has purged the taint of chaos from your demesne province, but warns you that heretics and cultists may still be about. He will continue his investigation for a while yet."
    picture = "GFX_evt_witch_hunters"

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_18A #"Good job, Witch Hunter."
		random_demesne_province = {
			limit = {
				OR = {
					has_province_modifier = nurgle_province_disease
					has_province_modifier = beastmen_unrest
					has_province_modifier = warpdust_traces
					has_province_modifier = slaanesh_hedonism
					has_province_modifier = warpstone_meteor
				}
			}
			remove_province_modifier = witch_hunter_purge_in_progress
			remove_province_modifier = nurgle_province_disease
			remove_province_modifier = beastmen_unrest
			remove_province_modifier = warpdust_traces
			remove_province_modifier = slaanesh_hedonism
			remove_province_modifier = warpstone_meteor
		}
	}
}

###Now the Witch Hunter goes after actual cultists, or those with high suspicion factors##
character_event = {
    id = witchhunter.19
    title = WITCH_HUNT # Witch Hunt
    desc = EVTDESC_WITCHHUNTER_19 #"No one is immune to the taint of chaos, and while it is better to burn an entire village than risk contamination by one individual, you must be more careful here in the court. But there is one courtier who you suspect to be a cultist..."
    picture = "GFX_evt_witch_hunters"

	religion_group = old_world_group
	trigger = {
		age = 16
		prisoner = no
		NOT = { trait = incapable }
		trait = on_witch_hunt
		liege = { religion_group = old_world_group }
		top_liege = { NOT = { has_character_modifier = expelled_k_witch_hunters_order } }
		liege = {
			any_courtier = {
				OR = {
					AND = {
						NOT = { has_character_modifier = wh_accused }
						prisoner = no
						age = 16
						has_character_modifier = under_suspicion
					}
					AND = {
						prisoner = no
						NOT = { has_character_modifier = wh_accused }
						age = 16
						has_character_modifier = highly_suspect
					}
					AND = {
						prisoner = no
						NOT = { has_character_modifier = wh_accused }
						age = 16
						has_character_modifier = known_satanist
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 5
		modifier = {
			factor = 0.8 #Slow Down Fella
			has_minor_title=title_court_witchhunter
		}
		modifier = {
			factor = 3 #What, an cultist!?!
			has_minor_title=title_court_state_witchhunter
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_19A #"I will confront this individual."
		save_event_target_as=witch_hunter
		random_courtier = {
			limit = {
				OR = {
					AND = {
						NOT = { has_character_modifier = wh_accused }
						prisoner = no
						age = 16
						has_character_modifier = under_suspicion
						}
					AND = {
						prisoner = no
						NOT = { has_character_modifier = wh_accused }
						age = 16
						has_character_modifier = highly_suspect
					}
					AND = {
						prisoner = no
						NOT = { has_character_modifier = wh_accused }
						age = 16
						has_character_modifier = known_satanist
					}
				}
			}
			character_event = { id = witchhunter.20 }
		}
	}
}

#courtier is confronted#
character_event = {
    id = witchhunter.20
    title = WITCH_HUNT # Witch Hunt
    desc = EVTDESC_WITCHHUNTER_20 #"You are confronted by the witch hunter currently investigating your court, who asks you to explain certain suspicious actions of yours..."
    picture = "GFX_evt_witch_hunters"

	is_triggered_only = yes
	immediate = {
		add_character_modifier = {
			name = wh_accused
			duration = 730
			hidden = yes
		}
	}
	option = {
		name = EVTOPT_WITCHHUNTER_20A #"I.. ehh, heresy? No no, let me explain!"
		#first the events where the courtier successfully explains the suspicious actions#
		hidden_tooltip = {
			random_list = { 
				60 = {
					modifier = {
						factor = 0
						has_character_modifier = known_satanist
					}
					modifier = {
                        factor = 1.5
						FROM = { trait = paranoid }
					}
					modifier = {
                        factor = 1.25
						FROM = { learning = 5 }
					}
					modifier = {
                        factor = 1.25
						FROM = { learning = 10 }
					}
					modifier = {
                        factor = 1.5
						FROM = { learning = 15 }
					}
					modifier = {
                        factor = 1.5
						FROM = { learning = 20 }
					}
					modifier = {
                        factor = 0.5
						NOT = { FROM = { learning = 5 } }
					}
					modifier = {
                        factor = 0.65
						NOT = { FROM = { learning = 10 } }
					}
					modifier = {
                        factor = 0.75
						NOT = { FROM = { learning = 15 } }
					}
					modifier = {
                        factor = 0.85
						NOT = { FROM = { learning = 20 } }
					}
					modifier = {
                        factor = 1.25
						FROM = { intrigue = 5 }
					}
					modifier = {
                        factor = 1.25
						FROM = { intrigue = 10 }
					}
					modifier = {
                        factor = 1.5
						FROM = { intrigue = 15 }
					}
					modifier = {
                        factor = 1.5
						FROM = { intrigue = 20 }
					}
					modifier = {
                        factor = 0.5
						NOT = { FROM = { intrigue = 5 } }
					}
					modifier = { factor = 0.65
						NOT = { FROM = { intrigue = 10 } }
							 }
					modifier = { factor = 0.75
						NOT = { FROM = { intrigue = 15 } }
							 }
					modifier = { factor = 0.85
						NOT = { FROM = { intrigue = 20 } }
					}
					modifier = { factor = 1.25
						intrigue = 5
					}
					modifier = { factor = 1.25
						intrigue = 10
							 }
					modifier = { factor = 1.5
						intrigue = 15
					}
					modifier = { factor = 1.75
						intrigue = 20
					}
					modifier = { factor = 0.5
						NOT = { intrigue = 5 }
					}
					modifier = { factor = 0.75
						NOT = { intrigue = 10 }
					}
					modifier = { factor = 0.75
						NOT = { intrigue = 15 }
					}
					modifier = { factor = 0.75
						NOT = { intrigue = 20 }
					}
					modifier = { factor = 1.25
						learning = 5
					}
					modifier = { factor = 1.25
						learning = 10
					}
					modifier = { factor = 1.5
						learning = 15
					}
					modifier = { factor = 1.75
						learning = 20
					}
					modifier = { factor = 1.5
						diplomacy = 10
					}
					modifier = { factor = 1.75
						diplomacy = 20
					}
					modifier = { factor = 1.75
						trait = kind
					}
					modifier = { factor = 0.5
						NOT = { learning = 5 }
					}
					modifier = { factor = 0.75
						NOT = { learning = 10 }
					}
					modifier = { factor = 0.75
						NOT = { learning = 15 }
					}
					modifier = { factor = 0.75
						NOT = { learning = 20 }
					}
					modifier = { factor = 0.5
						trait = witch_hunter
					}
					modifier = { factor = 0.5
						trait = hedonist
					}
					modifier = { factor = 0.5
						trait = cruel
					}
					modifier = { factor = 0.8
						is_mutated_trigger = yes
					}
					modifier = { 
						factor = 0.1 #Why in earth would witch Hunter Trust you?
						OR = {
							has_dark_lore_trigger = yes
							has_major_mutation_trigger = yes
						}
					}
					
					modifier = { factor = 1.2
						OR = { society_member_of = cult_of_khorne
							society_member_of = cult_of_khorne2
							society_member_of = cult_of_khorne3
							society_member_of = cult_of_nurgle
							society_member_of = cult_of_nurgle2
							society_member_of = cult_of_nurgle3
							society_member_of = cult_of_slaanesh
							society_member_of = cult_of_slaanesh2
							society_member_of = cult_of_slaanesh3
							society_member_of = cult_of_tzeentch
							society_member_of = cult_of_tzeentch2
							society_member_of = cult_of_tzeentch3
						}
						NOR={
							intrigue=15
							learning=15
						}
					}
					modifier = { factor = 1.5
						FROM={
							is_state_witch_hunter_trigger=no #mercenary witch hunters arent as effective
						}
					}
					FROM = { character_event = { id = witchhunter.21 } } 
				}
				40 = { 
					modifier = { factor = 0.5
						NOR = { 
							society_member_of = cult_of_khorne
							society_member_of = cult_of_khorne2
							society_member_of = cult_of_khorne3
							society_member_of = cult_of_nurgle
							society_member_of = cult_of_nurgle2
							society_member_of = cult_of_nurgle3
							society_member_of = cult_of_slaanesh
							society_member_of = cult_of_slaanesh2
							society_member_of = cult_of_slaanesh3
							society_member_of = cult_of_tzeentch
							society_member_of = cult_of_tzeentch2
							society_member_of = cult_of_tzeentch3
						}
					}
					modifier = { factor = 1.2
						FROM={
							is_state_witch_hunter_trigger=yes
						}
						OR = { 
							society_member_of = cult_of_khorne
							society_member_of = cult_of_khorne2
							society_member_of = cult_of_khorne3
							society_member_of = cult_of_nurgle
							society_member_of = cult_of_nurgle2
							society_member_of = cult_of_nurgle3
							society_member_of = cult_of_slaanesh
							society_member_of = cult_of_slaanesh2
							society_member_of = cult_of_slaanesh3
							society_member_of = cult_of_tzeentch
							society_member_of = cult_of_tzeentch2
							society_member_of = cult_of_tzeentch3
						}
					}
					FROM = { character_event = { id = witchhunter.22 } } 
				}
			}
		}
	}
}

#witch hunter is convinced the courtier is not a heretic#
character_event = {
    id = witchhunter.21
    title = WITCH_HUNT # Witch Hunt
    desc = EVTDESC_WITCHHUNTER_21 #"The Courtier had a good explanation. He seems to be telling the truth."
    picture = "GFX_evt_witch_hunters"

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_21A #"Fine..."
		ai_chance = { factor = 80
			modifier = { factor=0.5 trait=paranoid }
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_21B #"A good cultist is a good liar! This is proof of guilt!"
		liege = { character_event = { id = witchhunter.12 } }
		ai_chance = { 
			factor = 20
			modifier = { 
				factor = 0
				FROM = { trait = witch_hunter } 
			}
		}
	}
}

#witch hunter is convinced the courtier is  a heretic#
character_event = {
    id = witchhunter.22
    title = WITCH_HUNT # Witch Hunt
    desc = EVTDESC_WITCHHUNTER_22 #"The Courtier did not had a good explanation. You must inform the liege of this heretic in his midst!"
    picture = "GFX_evt_witch_hunters"

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_22B #"At once!"
		FROM = { character_event = { id = witchhunter.23 } }
	}

}

#the courtier is informed of the charge and wants to defends himself to his liege, or if independent, banish or imprison him#
character_event = {
    id = witchhunter.23
    title = WITCH_HUNT # Witch Hunt
    desc = EVTDESC_WITCHHUNTER_23 #" The Witch Hunter is convinced that you are a heretic or a cultist. What do you do?"
    picture = "GFX_evt_witch_hunters"

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_23A #"Banish him!"
		trigger = { independent = yes }

		increase_visibility_minor_effect = yes
		FROM = { banish = yes }
		FROM = { remove_trait = on_witch_hunt }
	}

	option = {
		name = EVTOPT_WITCHHUNTER_23B #IMPRISON_HIM
		trigger = { independent = yes }

		increase_visibility_effect = yes
		FROM = { imprison = yes }
		FROM = { remove_trait = on_witch_hunt }
	}

	option = {
		name = EVTOPT_WITCHHUNTER_23C #"Appeal to my liege!"
		trigger = { independent = no }
		liege = { character_event = { id = witchhunter.24 } }
	}
}

#liege is informed one of this courtiers is a suspected cultist/heretic#
character_event = {
    id = witchhunter.24
    title = WITCH_HUNT # Witch Hunt
    desc = EVTDESC_WITCHHUNTER_24 #"My liege, the Witch Hunter has accused me of heresy. These charges are completely baseless, I implore you to intervene on my behalf and clear my good name! In the name of all that is holy!"
    picture = "GFX_evt_witch_hunters"

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_24A #"All heretics must die by fire!"
		trigger = {
			OR = {
				ai = no
				trait = zealous
				trait = paranoid
				trait = arbitrary
				trait = cruel
				NOT = { ROOT = { opinion = { who = FROM value = 1 } } }
			}
		}

		decrease_visibility_effect = yes
		FROM = { character_event = { id = witchhunter.25 } }
	}

	option = {
		name = EVTOPT_WITCHHUNTER_24B #"I'm sure you are not a heretic."
		trigger = {
			OR = {
				ai = no
				ROOT = { opinion = { who = FROM value = 50 } }
			}
		}

		increase_visibility_minor_effect = yes
		FROM = { character_event = { id = witchhunter.27 } }
	}

	option = {
		name = EVTOPT_WITCHHUNTER_24C #"To the dungeons with you!"
		if = {
			limit = {
				ai = no
			}

			increase_visibility_minor_effect = yes
		}
		FROM = { character_event = { id = witchhunter.26 } }
	}
}

character_event = {
    id = witchhunter.25
    title = WITCH_HUNT # Witch Hunt
    desc = EVTDESC_WITCHHUNTER_25 #"Your liege sides with the Witch Hunter. Guards seize you, and drag you to the court yard, where a great fire is being prepared for your execution."
    picture = "GFX_evt_burning_stake"

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_25A #"Nooooo!"
		if = {
			limit = {
				is_landed = yes
			}
			any_playable_ruler = {
				limit = {
					ai = no
					same_realm = ROOT
					NOT = { has_character_flag = witchhunter29 }
				}
				character_event = { id = witchhunter.29 days = 7 }
			}
		}
        if = {
          limit = { is_invincible_trigger = yes }
          antideath_effect = yes
          break = yes
        }
		add_trait = staked
		if = {
			limit = {
				OR = {
					society_member_of = cult_of_khorne
					society_member_of = cult_of_nurgle
					society_member_of = cult_of_slaanesh
					society_member_of = cult_of_tzeentch
					society_member_of = cult_of_undivided
				}
				set_discovered_society = yes
			}
		}
		death = {
			death_reason = death_execution_burning
			killer = FROM
		}
	}
}

character_event = {
    id = witchhunter.26
    title = WITCH_HUNT # Witch Hunt
    desc = EVTDESC_WITCHHUNTER_26 #"Your liege sides with the Witch Hunter. Guards seize you, and drag you to the dungeons. At least your liege was merciful, and did not condemn you to death by fire."
    picture = GFX_evt_into_the_dungeon

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_26A #"Nooooo!"
		imprison = FROM
	}
}

character_event = {
    id = witchhunter.27
    title = WITCH_HUNT # Witch Hunt
    desc = EVTDESC_WITCHHUNTER_27 #"Your liege intervenes, and the Witch Hunter - grudgingly - backs off. You will not suffer death by fire."
    picture = "GFX_evt_witch_hunters"

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_27A #"A close call!"
	}
}

##Now Witch Hunters randomly seek out individual lords who have high suspicion factors - first the suspicious lord gets an event##
character_event = {
    id = witchhunter.28
    title = WITCH_HUNT # Witch Hunt
    desc = EVTDESC_WITCHHUNTER_28 #"The religious authorities send word. They'd like you to host a Witch Hunter for a while, as part of a routine investigation of chaos influences in the land."
    picture = "GFX_evt_witch_hunters"

	is_triggered_only = yes

	trigger = {
		top_liege = { NOT = { has_character_modifier = expelled_k_witch_hunters_order } }
		age = 16
		prisoner = no
		liege = { religion_group = old_world_group }
	}
	fail_trigger_effect={fromfrom={
			clr_quest= quest_inquisitorial_investigation
			remove_trait=travelling
		}
	}


	option = {
		name = EVTOPT_WITCHHUNTER_28A #"Sure... why not?"

		decrease_visibility_effect = yes
		hidden_effect={if={limit={fromfrom={has_quest=quest_inquisitorial_investigation}}
		FROMFROM={character_event = { id = swhunters.54 }}}
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_28B #"No! Witch Hunters cause trouble."
		trigger = {
			ai = no
		}
		fromfrom={
			clr_quest= quest_inquisitorial_investigation
			remove_trait=travelling
		}
		increase_visibility_effect = yes
	}
}

character_event = {
    id = witchhunter.29
    title = WITCH_HUNT # Witch Hunt
    desc = EVTDESC_WITCHHUNTER_29 #"This noble of your realm has been burned alive by the witch hunters, on suspicion of heresy or cultist activities."
    picture = "GFX_evt_burning_stake"

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_29A #I_SEE # I see.
	}

	option = {
		name = EVTOPT_WITCHHUNTER_29B #"Do not bother me with such news again."
		set_character_flag = witchhunter29
	}
}

##Now for vampire hunting - this time just for open vampires##

#first a witch hunter who is not on a witch hunt tells the liege that there are open vampires in his realm##
character_event = {
    id = witchhunter.30
    title = WITCH_HUNT # Witch Hunt
    desc = EVTDESC_WITCHHUNTER_30 #"There are known vampires in the realm... these must be rooted out with fire, stakes, and sharp silver swords!"
    picture = "GFX_evt_witch_hunters"

	is_triggered_only = yes

	trigger = {
		prisoner = no
		NOT = { trait = incapable }
		age = 16
		trait = witch_hunter
		NOT = { trait = on_witch_hunt }
		top_liege = { NOT = { has_character_modifier = expelled_k_witch_hunters_order } }
		OR = {
			any_realm_character = {
				OR = {
					trait = vampire_lahmian_visible
					trait = vampire_carstein_visible
					trait = vampire_blood_visible
					trait = vampire_strigoi_visible
					trait = vampire_necrarch_visible
					trait = vampire_jade_visible
					trait = vampire_mahtmasi_visible
				}
			}
			any_realm_lord = {
				OR = {
					trait = vampire_lahmian_visible
					trait = vampire_carstein_visible
					trait = vampire_blood_visible
					trait = vampire_strigoi_visible
					trait = vampire_necrarch_visible
					trait = vampire_jade_visible
					trait = vampire_mahtmasi_visible
				}
			}
		}
		top_liege = {
			NOT = { has_character_flag = vampires_allowed }
			religion_group = old_world_group
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_30A #"I must inform my liege at once!"
		top_liege = {
			character_event = { id = witchhunter.31 }
		}
	}
}

##top liege is informed##
character_event = {
    id = witchhunter.31
    title = WITCH_HUNT # Witch Hunt
    desc = EVTDESC_WITCHHUNTER_31 #"My liege, there are known vampires infesting your realm! These must be hunted down at once. Will you give the temple the authority to cleanse the land of this foul taint?"
    picture = "GFX_evt_witch_hunters"

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_31A #"Yes, of course - get to work at once."
		trigger = { 
			NOT = { trait = vampire_lahmian_visible }
				NOT = { trait = vampire_carstein_visible }
				NOT = { trait = vampire_blood_visible }
				NOT = { trait = vampire_strigoi_visible }
				NOT = { trait = vampire_necrarch_visible }
				NOT = { trait = vampire_jade_visible }
				NOT = { trait = vampire_mahtmasi_visible }
		}
		##vampires with either martial or intrigue of 15+ manage to escape and are banished##
		any_realm_character = {
			limit = {
				OR = {
					ai = no
					NOT = { has_character_flag = lucky_escape }
				}
				OR = {
					martial = 15
					intrigue = 15
				}
				OR = {
					trait = vampire_lahmian_visible
					trait = vampire_carstein_visible
					trait = vampire_blood_visible
					trait = vampire_strigoi_visible
					trait = vampire_necrarch_visible
					trait = vampire_jade_visible
					trait = vampire_mahtmasi_visible
				}
			}
			character_event = { id = witchhunter.32 }
		}
		any_realm_lord = {
			limit = {
				OR = {
					ai = no
					NOT = { has_character_flag = lucky_escape }
				}
				OR = {
					martial = 15
					intrigue = 15
				}
				OR = {
					trait = vampire_lahmian_visible
					trait = vampire_carstein_visible
					trait = vampire_blood_visible
					trait = vampire_strigoi_visible
					trait = vampire_necrarch_visible
					trait = vampire_jade_visible
					trait = vampire_mahtmasi_visible
				}
			}
			character_event = { id = witchhunter.32 }
		}
		##vampires with less get destroyed##
		any_realm_character = {
			limit = {
				AND = {
					NOT = { martial = 15 }
					NOT = { intrigue = 15 }
				}
				OR = {
					ai = no
					AND = {
						age = 1
						NOT = { has_character_flag = lucky_escape }
					}
				}
				OR = {
					trait = vampire_lahmian_visible
					trait = vampire_carstein_visible
					trait = vampire_blood_visible
					trait = vampire_strigoi_visible
					trait = vampire_necrarch_visible
					trait = vampire_jade_visible
					trait = vampire_mahtmasi_visible
				}
			}
			character_event = { id = witchhunter.33 }
		}
		any_realm_lord = {
			limit = {
				AND = {
					NOT = { martial = 15 }
					NOT = { intrigue = 15 }
				}
				OR = {
					ai = no
					AND = {
						age = 1
						NOT = { has_character_flag = lucky_escape }
					}
				}
				OR = {
					trait = vampire_lahmian_visible
					trait = vampire_carstein_visible
					trait = vampire_blood_visible
					trait = vampire_strigoi_visible
					trait = vampire_necrarch_visible
					trait = vampire_jade_visible
					trait = vampire_mahtmasi_visible
				}
			}
			character_event = { id = witchhunter.33 }
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_32B #"No, leave them alone..."
		trigger = { 
			OR = {
				trait = vampire_lahmian_visible
				trait = vampire_carstein_visible
				trait = vampire_blood_visible
				trait = vampire_strigoi_visible
				trait = vampire_necrarch_visible
				trait = vampire_jade_visible
				trait = vampire_mahtmasi_visible
			} 
		}
		FROM = {
            if = {
              limit = { is_invincible_trigger = yes }
              antideath_effect = yes
              break = yes
            }
			death = { death_reason = death_murder
				killer = ROOT } }
		ai_chance = { factor = 100 }
	}
	option = {
		name = EVTOPT_WITCHHUNTER_32B #"No, leave them alone..."
		trigger = { 
			ai = no
			NOT = { trait = vampire_lahmian_visible }
			NOT = { trait = vampire_carstein_visible }
			NOT = { trait = vampire_blood_visible }
			NOT = { trait = vampire_strigoi_visible }
			NOT = { trait = vampire_necrarch_visible }
			NOT = { trait = vampire_jade_visible }
			NOT = { trait = vampire_mahtmasi_visible } 
		}
		set_character_flag = vampires_allowed
	}
}

##vampire hunters come, vampire escapes##
character_event = {
    id = witchhunter.32
    title = VAMPIRE_HUNTERS # Vampire Hunters
    desc = EVTDESC_WITCHHUNTER_33 #"Your top liege has ordered that open vampires in the realm be exterminated - temple armies led by Witch Hunters approach with fire and silver blades, but due to your skills you manage to escape them alive!"
    picture = "GFX_evt_witch_hunters"

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_33A #"My lands... lost!"
		banish = yes
		set_character_flag = lucky_escape
	}
}

##vampire hunters come, vampire escapes##
character_event = {
    id = witchhunter.33
    title = VAMPIRE_HUNTERS # Vampire Hunters
    desc = EVTDESC_WITCHHUNTER_34 #"Your top liege has ordered that open vampires in the realm be exterminated and temple armies led by Witch Hunters approach with fire and silver blades. You try to run, but they manage to corner you!"
    picture = "GFX_evt_witch_hunters"

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_34A #"No, not like this - I was promised eternal life!"
        if = {
          limit = { is_invincible_trigger = yes }
          antideath_effect = yes
          break = yes
        }
		add_trait = staked
		death = {
			death_reason = death_execution_burning
			killer = FROM
		}
	}
}

##Pick up event - if there are no witch hunters in the realm, the top liege spawns several himself##
character_event = {
    id = witchhunter.34
    title = WITCH_HUNTERS # Witch Hunters
    desc = EVTDESC_WITCHHUNTER_35 #"Witch Hunters are a necessary evil - though their methods can be cruel, they are the first line of defense against the spread of Chaos. Since there are no witch hunters in your realm, do you want to invite some?"
    picture = "GFX_evt_witch_hunters"

	only_rulers = yes
	religion_group = old_world_group

	trigger = {
		is_landed = yes
		higher_tier_than = COUNT
		religion_group = old_world_group
		top_liege = { NOT = { has_character_modifier = expelled_k_witch_hunters_order } }
		NOT = { any_realm_character = { trait = witch_hunter } }
		NOT = { has_character_flag = witchhunter34 }
		age = 1
		is_nomadic = no
		is_tribal = no
	}

	mean_time_to_happen = {
		months = 1
	}

	option = {
		name = EVTOPT_WITCHHUNTER_35A #"Yes, immediately."
		create_random_priest = {
			random_traits = yes
			dynasty = culture
			culture = witchhunter_culture
			religion = sigmarite
			female = no
			age = 18
            trait = creature_human
		}
		new_character = {
			add_trait = witch_hunter
		}
		create_random_priest = {
			random_traits = yes
			dynasty = culture
			culture = witchhunter_culture
			religion = sigmarite
			female = no
			age = 28
            trait = creature_human
		}
		new_character = {
			add_trait = witch_hunter
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_35B #"No, Witch Hunters are troublesome."
		trigger = { ai = no }

		increase_visibility_minor_effect = yes
		set_character_flag = witchhunter34
	}
}

##Now for open chaos religion hunting#

#first a witch hunter who is not on a witch hunt tells the liege that there are open vampires in his realm##
character_event = {
    id = witchhunter.35
    title = WITCH_HUNT # Witch Hunt
    desc = witchhunter35desc #"There are known worshippers of Chaos in the realm... these must be rooted out with fire, steel, and cannon if need be!"
    picture = "GFX_evt_witch_hunters"

	is_triggered_only = yes

	trigger = {
		age = 16
		trait = witch_hunter
		prisoner = no
		NOT = { trait = incapable }
		NOT = { trait = on_witch_hunt }
		top_liege = { NOT = { has_character_modifier = expelled_k_witch_hunters_order } }
		OR = {
			any_realm_character = {
				NOT = { is_daemon_race_trigger = yes }
				OR = {
					religion = khorne
					religion = slaanesh
					religion = nurgle
					religion = tzeentch
					religion = chaos
				}
			}
			any_realm_lord = {
				NOT = { is_daemon_race_trigger = yes }
				OR = {
					religion = khorne
					religion = slaanesh
					religion = nurgle
					religion = tzeentch
					religion = chaos
				}
			}
		}
		top_liege = {
			NOT = { has_character_flag = chaos_allowed }
			religion_group = old_world_group
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_30A #"I must inform my liege at once!"
		top_liege = {
			character_event = { id = witchhunter.36 }
		}
	}
}

##top liege is informed##
character_event = {
    id = witchhunter.36
    title = WITCH_HUNT # Witch Hunt
    desc = witchhunter36desc #"My liege, there are known followers of the ruinous powers infesting your realm! These must be hunted down at once. Will you give the temple the authority to cleanse the land of this foul taint?"
    picture = "GFX_evt_witch_hunters"

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_31A #"Yes, of course - get to work at once."
		##vampires with either martial or intrigue of 15+ manage to escape and are banished##
		any_realm_character = {
			limit = {
				NOT = { is_daemon_race_trigger = yes }
				OR = {
					ai = no
					AND = {
						age = 1
						NOT = { has_character_flag = lucky_escape }
					}
				}
				OR = {
					martial = 15
					intrigue = 15
				}
				OR = {
					religion = khorne
					religion = slaanesh
					religion = nurgle
					religion = tzeentch
					religion = chaos
				}
			}
			character_event = { id = witchhunter.37 }
		}
		any_realm_lord = {
			limit = {
				NOT = { is_daemon_race_trigger = yes }
				OR = {
					ai = no
					AND = {
						age = 1
						NOT = { has_character_flag = lucky_escape }
					}
				}
				OR = {
					martial = 15
					intrigue = 15
				}
				OR = {
					religion = khorne
					religion = slaanesh
					religion = nurgle
					religion = tzeentch
					religion = chaos
				}
			}
			character_event = { id = witchhunter.37 }
		}
		##chaos guys with less get destroyed##
		any_realm_character = {
			limit = {
				NOT = { is_daemon_race_trigger = yes }
				AND = {
					NOT = { martial = 15 }
					NOT = { intrigue = 15 }
				}
				OR = {
					ai = no
					has_character_flag = lucky_escape
				}
				OR = {
					religion = khorne
					religion = slaanesh
					religion = nurgle
					religion = tzeentch
					religion = chaos
				}
			}
			character_event = { id = witchhunter.38 }
		}
		any_realm_lord = {
			limit = {
				NOT = { is_daemon_race_trigger = yes }
				AND = {
					NOT = { martial = 15 }
					NOT = { intrigue = 15 }
				}
				OR = {
					ai = no
					has_character_flag = lucky_escape
				}
				OR = {
					religion = khorne
					religion = slaanesh
					religion = nurgle
					religion = tzeentch
					religion = chaos
				}
			}
			character_event = { id = witchhunter.38 }
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_32B #"No, leave them alone..."
		trigger = { ai = no }
		set_character_flag = chaos_allowed
		increase_visibility_effect = yes
	}
}


##witch hunters come, chaos escapes##
character_event = {
    id = witchhunter.37
    title = VAMPIRE_HUNTERS # Vampire Hunters
    desc = witchhunter37desc #"Your top liege has ordered that open chaos followers in the realm be exterminated - temple armies led by Witch Hunters approach with fire and steel, but due to your skills you manage to escape them alive!"
    picture = "GFX_evt_witch_hunters"

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_33A #"My lands... lost!"
		banish = yes
		set_character_flag = lucky_escape
	}
}

##vampire hunters come, vampire escapes##
character_event = {
    id = witchhunter.38
    title = VAMPIRE_HUNTERS # Vampire Hunters
    desc = witchhunter38desc #"Your top liege has ordered that open chaos followers in the realm be exterminated and temple armies led by Witch Hunters approach with fire and steel. You try to run, but they manage to corner you!"
    picture = "GFX_evt_witch_hunters"

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_34A #"No, not like this - I was promised eternal life!"
        if = {
          limit = { is_invincible_trigger = yes }
          antideath_effect = yes
          break = yes
        }
		add_trait = staked
		death = {
			death_reason = death_execution_burning
			killer = FROM
		}
	}
}

###MAINTENANCE EVENT TO CLEAR THE EXONERATE FLAG EVERY 2 YEARS, HIDDEN EVENT CALLED FROM BI ANNUAL PULSE ON ACTIONS##
#character_event = {
#    id = witchhunter.39
 #   title = VAMPIRE_HUNTERS # Vampire Hunters
  #  desc = witchhunter39desc #HIDDEN
   # picture = "GFX_evt_witch_hunters"
	#hide_window = yes

#	is_triggered_only = yes

#	trigger = {
#		has_character_modifier = wh_accused
#		age = 1
#	}

#	option = {
#		name = EVTOPT_WITCHHUNTER_34A #HIDDEN
#		remove_character_flag = wh_accused
#	}
#}

##EVENT TO MAKE UNLANDED CHAOS/VAMPS DISAPPEAR VOLUNTARILY, triggered on yearly pulse
character_event = {
    id = witchhunter.40
    title = WITCH_HUNTERS
    desc = witchhunter40desc #Your top liege is a servant of the gods of good, and will not tolerate you in his realm. It is better to flee now, rather than to risk destruction at the hands of the Witch Hunters...
    picture = "GFX_evt_witch_hunters"

	is_triggered_only = yes

	trigger = {
		NOT = { is_daemon_race_trigger = yes }
		OR = {
			religion_group = chaos_gods_group
			trait = vampire_lahmian_visible
			trait = vampire_carstein_visible
			trait = vampire_blood_visible
			trait = vampire_strigoi_visible
			trait = vampire_necrarch_visible
			trait = vampire_jade_visible
			trait = vampire_mahtmasi_visible
		}
		is_landed = no
		liege={not={religion=ROOT}}
		top_liege = { religion_group = old_world_group }
		top_liege = { NOT = { has_character_modifier = expelled_k_witch_hunters_order } }
	}

	option = {
		name = witchhunter40A #Agreed, I must leave at once!
		random_independent_ruler = {
			limit = { religion_group = ROOT }
			ROOT = { move_character = PREV }
		}
	}
}
character_event = {
	id = witchhunter.41
	is_triggered_only = yes
	hide_window=yes
	only_playable=yes
	trigger = {
		primary_title={has_law = succ_whunter_elective}
	}
	immediate={
		FROMFROM={save_event_target_as=former_captain}
		ROOT={
			current_heir={save_event_target_as=designated_heir}
			set_player_character = event_target:designated_heir
		}
		event_target:designated_heir={
			wealth=20
			prestige=250
		}
	}
	after = {
		if={
			limit={
				event_target:designated_heir={
					OR={
						has_landed_title=d_witch_hunter_seat_1
						has_landed_title=d_witch_hunter_seat_2
						has_landed_title=d_witch_hunter_seat_3
						has_landed_title=d_witch_hunter_seat_4
						has_landed_title=d_witch_hunter_seat_5
						has_landed_title=d_witch_hunter_seat_6
						has_landed_title=d_witch_hunter_seat_7
						has_landed_title=d_witch_hunter_seat_8
						has_landed_title=d_witch_hunter_seat_9
						has_landed_title=d_witch_hunter_seat_10
						has_landed_title=d_witch_hunter_seat_11
						has_landed_title=d_witch_hunter_seat_12
					}
				}
			}
			event_target:designated_heir={character_event={id = witchhunter.43 days=3}
			}
		}
	}
}
narrative_event = {
	id = witchhunter.42
    title = WITCH_HUNTER_COUNCIL
	desc = DESC_witchhunter_42
	picture = GFX_evt_witch_hunter_fight

	is_triggered_only = yes
	trigger={
		primary_title={
			NOR={
				title=d_witch_hunter_seat_1
				title=d_witch_hunter_seat_2
				title=d_witch_hunter_seat_3
				title=d_witch_hunter_seat_4
				title=d_witch_hunter_seat_5
				title=d_witch_hunter_seat_6
				title=d_witch_hunter_seat_7
				title=d_witch_hunter_seat_8
				title=d_witch_hunter_seat_9
				title=d_witch_hunter_seat_10
				title=d_witch_hunter_seat_11
				title=d_witch_hunter_seat_12
			}
		}
	}
	immediate={
		ROOT={
			society={
				random_society_member={
					limit={
						society_rank=2
						NOR={
							has_landed_title=d_witch_hunter_seat_1
							has_landed_title=d_witch_hunter_seat_2
							has_landed_title=d_witch_hunter_seat_3
							has_landed_title=d_witch_hunter_seat_4
							has_landed_title=d_witch_hunter_seat_5
							has_landed_title=d_witch_hunter_seat_6
							has_landed_title=d_witch_hunter_seat_7
							has_landed_title=d_witch_hunter_seat_8
							has_landed_title=d_witch_hunter_seat_9
							has_landed_title=d_witch_hunter_seat_10
							has_landed_title=d_witch_hunter_seat_11
							has_landed_title=d_witch_hunter_seat_12
						}
						is_within_diplo_range = ROOT
					}
					save_event_target_as=witch_hunter_general_choice_1
				}
				random_society_member={
					limit={
						society_rank=2
						NOR={
							has_landed_title=d_witch_hunter_seat_1
							has_landed_title=d_witch_hunter_seat_2
							has_landed_title=d_witch_hunter_seat_3
							has_landed_title=d_witch_hunter_seat_4
							has_landed_title=d_witch_hunter_seat_5
							has_landed_title=d_witch_hunter_seat_6
							has_landed_title=d_witch_hunter_seat_7
							has_landed_title=d_witch_hunter_seat_8
							has_landed_title=d_witch_hunter_seat_9
							has_landed_title=d_witch_hunter_seat_10
							has_landed_title=d_witch_hunter_seat_11
							has_landed_title=d_witch_hunter_seat_12
							character=event_target:witch_hunter_general_choice_1
						}
						is_within_diplo_range = ROOT
					}
					save_event_target_as=witch_hunter_general_choice_2
				}
				random_society_member={
					limit={
						society_rank=2
						NOR={
							has_landed_title=d_witch_hunter_seat_1
							has_landed_title=d_witch_hunter_seat_2
							has_landed_title=d_witch_hunter_seat_3
							has_landed_title=d_witch_hunter_seat_4
							has_landed_title=d_witch_hunter_seat_5
							has_landed_title=d_witch_hunter_seat_6
							has_landed_title=d_witch_hunter_seat_7
							has_landed_title=d_witch_hunter_seat_8
							has_landed_title=d_witch_hunter_seat_9
							has_landed_title=d_witch_hunter_seat_10
							has_landed_title=d_witch_hunter_seat_11
							has_landed_title=d_witch_hunter_seat_12
							character=event_target:witch_hunter_general_choice_1
							character=event_target:witch_hunter_general_choice_2
						}
						is_within_diplo_range = ROOT
					}
					save_event_target_as=witch_hunter_general_choice_3
				}
				random_society_member={
					limit={
						society_rank=2
						NOR={
							has_landed_title=d_witch_hunter_seat_1
							has_landed_title=d_witch_hunter_seat_2
							has_landed_title=d_witch_hunter_seat_3
							has_landed_title=d_witch_hunter_seat_4
							has_landed_title=d_witch_hunter_seat_5
							has_landed_title=d_witch_hunter_seat_6
							has_landed_title=d_witch_hunter_seat_7
							has_landed_title=d_witch_hunter_seat_8
							has_landed_title=d_witch_hunter_seat_9
							has_landed_title=d_witch_hunter_seat_10
							has_landed_title=d_witch_hunter_seat_11
							has_landed_title=d_witch_hunter_seat_12
							character=event_target:witch_hunter_general_choice_1
							character=event_target:witch_hunter_general_choice_2
							character=event_target:witch_hunter_general_choice_3
						}
						is_within_diplo_range = ROOT
					}
					save_event_target_as=witch_hunter_general_choice_4
				}
			}
		}
		random_demesne_title={
			limit={
				OR={
					title=d_witch_hunter_seat_1
					title=d_witch_hunter_seat_2
					title=d_witch_hunter_seat_3
					title=d_witch_hunter_seat_4
					title=d_witch_hunter_seat_5
					title=d_witch_hunter_seat_6
					title=d_witch_hunter_seat_7
					title=d_witch_hunter_seat_8
					title=d_witch_hunter_seat_9
					title=d_witch_hunter_seat_10
					title=d_witch_hunter_seat_11
					title=d_witch_hunter_seat_12
				}
			}
			save_event_target_as=target_title
		}
	}
	option = {
		name = EVTOPTAwitchhunter_42
		trigger={event_target:witch_hunter_general_choice_1={is_alive=yes}}
		event_target:witch_hunter_general_choice_1={
			show_portrait = yes
			if={limit={society_rank==2}
				society_rank_up = 1
			}
		}
		event_target:target_title = {
			grant_title = event_target:witch_hunter_general_choice_1
		}
		ai_chance = { factor = 1 }
	}
	option = {
		name = EVTOPTBwitchhunter_42
		trigger={event_target:witch_hunter_general_choice_2={is_alive=yes}}
		event_target:witch_hunter_general_choice_2={
			show_portrait = yes
			if={limit={society_rank==2}
				society_rank_up = 1
			}
		}
		event_target:target_title = {
			grant_title = event_target:witch_hunter_general_choice_2
		}
		ai_chance = { factor = 1 }
	}
	option = {
		name = EVTOPTCwitchhunter_42
		trigger={event_target:witch_hunter_general_choice_3={is_alive=yes}}
		event_target:witch_hunter_general_choice_3={
			show_portrait = yes
			if={limit={society_rank==2}
				society_rank_up = 1
			}
		}
		event_target:target_title = {
			grant_title = event_target:witch_hunter_general_choice_3
		}
		ai_chance = { factor = 1 }
	}
	option = {
		trigger={event_target:witch_hunter_general_choice_4={is_alive=yes}}
		name = EVTOPTDwitchhunter_42
		event_target:witch_hunter_general_choice_4={
			show_portrait = yes
			if={limit={society_rank==2}
				society_rank_up = 1
			}
		}
		event_target:target_title = {
			grant_title = event_target:witch_hunter_general_choice_4
		}
		ai_chance = { factor = 1 }
	}
	after={hidden_effect={
		if={limit={
				has_landed_title=event_target:target_title
				society_member_of=sigmar_witch_hunters
			}
			create_random_priest={
				female=40
				age=30
                trait = creature_human
				trait=witch_hunter
				attributes={
					intrigue=12
					martial=6
					diplomacy=8
				}
			}
			new_character={
				join_society=sigmar_witch_hunters
				society_rank_up = 1
				event_target:target_title = {
					grant_title = PREV
				}
			}
		}
		if={
			limit={
				OR={
					has_landed_title=d_witch_hunter_seat_1
					has_landed_title=d_witch_hunter_seat_2
					has_landed_title=d_witch_hunter_seat_3
					has_landed_title=d_witch_hunter_seat_4
					has_landed_title=d_witch_hunter_seat_5
					has_landed_title=d_witch_hunter_seat_6
					has_landed_title=d_witch_hunter_seat_7
					has_landed_title=d_witch_hunter_seat_8
					has_landed_title=d_witch_hunter_seat_9
					has_landed_title=d_witch_hunter_seat_10
					has_landed_title=d_witch_hunter_seat_11
					has_landed_title=d_witch_hunter_seat_12
				}
				society_member_of=sigmar_witch_hunters
			}
			random_demesne_title={
				limit={
					OR={
						title=d_witch_hunter_seat_1
						title=d_witch_hunter_seat_2
						title=d_witch_hunter_seat_3
						title=d_witch_hunter_seat_4
						title=d_witch_hunter_seat_5
						title=d_witch_hunter_seat_6
						title=d_witch_hunter_seat_7
						title=d_witch_hunter_seat_8
						title=d_witch_hunter_seat_9
						title=d_witch_hunter_seat_10
						title=d_witch_hunter_seat_11
						title=d_witch_hunter_seat_12
					}
				}
				save_event_target_as=target_title_2
			}
			create_random_priest={
				female=40
				age=30
                trait = creature_human
				trait=witch_hunter
				attributes={
					intrigue=12
					martial=6
					diplomacy=8
				}
			}
			new_character={
				join_society=sigmar_witch_hunters
				society_rank_up = 1
				event_target:target_title_2 = {
					grant_title = PREV
				}
			}
		}
	}}
}
character_event = { #Ping
	id = witchhunter.43
	is_triggered_only = yes
	hide_window=yes
	only_playable=yes
	trigger = {
	}
	immediate={
		clear_event_target=target_title
		narrative_event={id = witchhunter.42 }
	}
}

#On_death for Witch Hunter Masters Succession
character_event = {
	id = witchhunter.44
	hide_window = yes
	picture = GFX_evt_witch_hunters
	only_rulers=yes
	religion_group=old_world_group
	is_triggered_only = yes

	trigger = {
		NOT={primary_title={has_law = succ_whunter_elective}}
		OR = {
			has_landed_title = d_witch_hunter_seat_1
			has_landed_title = d_witch_hunter_seat_2
			has_landed_title = d_witch_hunter_seat_3
			has_landed_title = d_witch_hunter_seat_4
			has_landed_title = d_witch_hunter_seat_5
			has_landed_title = d_witch_hunter_seat_6
			has_landed_title = d_witch_hunter_seat_7
			has_landed_title = d_witch_hunter_seat_8
			has_landed_title = d_witch_hunter_seat_9
			has_landed_title = d_witch_hunter_seat_10
			has_landed_title = d_witch_hunter_seat_11
			has_landed_title = d_witch_hunter_seat_12
		}
	}

	immediate = {
		if = {
			limit = {
				any_courtier = {
					religion = sigmarite
					trait = witch_hunter
					trait = creature_human
					age = 16
					NOR = { trait = incapable
						trait = maimed
						trait = leper
						trait = ill
						trait = has_nurgles_rot
						trait = blinded
						trait = possessed
						trait = lunatic_3
						trait = mutation_minor
						trait = mutation_major
						trait = mutation_massive
						has_character_modifier = magic_power_1
						has_character_modifier = magic_power_2
						has_character_modifier = magic_power_3
						has_character_modifier = magic_power_4
						trait = magic_potential_1
						trait = magic_potential_2
						trait = magic_potential_3
						trait = magic_potential_4
					}
				}
			}
			random_courtier = {
				limit = {
					religion = sigmarite
					trait = witch_hunter
					trait = creature_human
					age = 16
					NOR = { trait = incapable
						trait = maimed
						trait = leper
						trait = ill
						trait = has_nurgles_rot
						trait = blinded
						trait = possessed
						trait = lunatic_3
						trait = mutation_minor
						trait = mutation_major
						trait = mutation_massive
						has_character_modifier = magic_power_1
						has_character_modifier = magic_power_2
						has_character_modifier = magic_power_3
						has_character_modifier = magic_power_4
						trait = magic_potential_1
						trait = magic_potential_2
						trait = magic_potential_3
						trait = magic_potential_4
					}
				}
				character_event = { id = witchhunter.45 }
			}
			break = yes
		}
		#If no elegible character is aviable, create a new one
		random_list = {
			25 = {
				create_character = {
				random_traits = yes
				dynasty = RANDOM
				religion = ROOT
				culture = ROOT
				female = no
				age = 35
				}
			}
			25 = {
				create_character = {
				random_traits = yes
				dynasty = RANDOM
				religion = ROOT
				culture = ROOT
				female = no
				age = 45
				}
			}
			25 = {
				create_character = {
				random_traits = yes
				dynasty = RANDOM
				religion = ROOT
				culture = ROOT
				female = no
				age = 65
				}
			}
			25 = {
				create_character = {
				random_traits = yes
				dynasty = RANDOM
				religion = ROOT
				culture = ROOT
				female = yes
				age = 33
				}
			}
		}
		new_character = {
			add_trait = witch_hunter
			add_trait = creature_human
			character_event = { id = witchhunter.45 }
		}
	}
}

# Inheritance
character_event = {
	id = witchhunter.45
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		FROM = {
			any_demesne_title = {
				limit = {
					OR = {
						title = d_witch_hunter_seat_1
						title = d_witch_hunter_seat_2
						title = d_witch_hunter_seat_3
						title = d_witch_hunter_seat_4
						title = d_witch_hunter_seat_5
						title = d_witch_hunter_seat_6
						title = d_witch_hunter_seat_7
						title = d_witch_hunter_seat_8
						title = d_witch_hunter_seat_9
						title = d_witch_hunter_seat_10
						title = d_witch_hunter_seat_11
						title = d_witch_hunter_seat_12
					}
				}
				grant_title = ROOT
			}
		}
		if={limit={not={society_member_of=sigmar_witch_hunters}}
			join_society=sigmar_witch_hunters
			society_rank_up = 1
		}
	}
}

#On_death for independent Witch Hunters Succession
character_event = {
	id = witchhunter.46
	hide_window = yes
	religion_group=old_world_group
	is_triggered_only = yes
	only_rulers = yes

	trigger = {
		is_landed = yes
		higher_tier_than = BARON
		trait = witch_hunter
		NOT={primary_title={has_law = succ_whunter_elective}}
		NOR = {
			has_landed_title = d_witch_hunter_seat_1
			has_landed_title = d_witch_hunter_seat_2
			has_landed_title = d_witch_hunter_seat_3
	 		has_landed_title = d_witch_hunter_seat_4
	 		has_landed_title = d_witch_hunter_seat_5
	 		has_landed_title = d_witch_hunter_seat_6
	 		has_landed_title = d_witch_hunter_seat_7
	 		has_landed_title = d_witch_hunter_seat_8
	 		has_landed_title = d_witch_hunter_seat_9
	 		has_landed_title = d_witch_hunter_seat_10
	 		has_landed_title = d_witch_hunter_seat_11
	 		has_landed_title = d_witch_hunter_seat_12
		}
	}

	immediate = {
		if={limit={any_courtier={has_minor_title = title_knight_captain_heir}}
			any_courtier={limit={has_minor_title=title_knight_captain_heir}
			save_event_target_as=designated_heir
			}
			abdicate_to = event_target:designated_heir
			set_player_character = event_target:designated_heir
			break=yes
		}
		if = {
			limit = {
				government = congregation_government
			}
			set_government_type = congregation_government
			current_heir = { character_event = { id = witchhunter.48 days = 1}
				set_government_type = congregation_government }
		}
	}
}

# Inheritance
character_event = {
	id = witchhunter.49
	hide_window = yes

	is_triggered_only = yes

	immediate = { 	#if the elected party is of a band, destroy the title.
		any_demesne_title = {
			limit = { mercenary = yes }
			activate_title = { title = THIS status = no }
			destroy_landed_title = THIS
		}
		wealth = FROM
		FROM = { clear_wealth = THIS }
		FROM = { abdicate_to = ROOT }
		FROM = { any_claim = { remove_claim = PREV } }
		any_vassal = { remove_title = title_knight_captain_heir }
		any_courtier = { remove_title = title_knight_captain_heir }
		any_demesne_title = { refill_holding_levy = yes }
		remove_title = title_knight_captain_heir
		set_government_type = congregation_government
	}
}

character_event = {
	id = witchhunter.50
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				any_courtier = {
					religion = sigmarite
					trait = witch_hunter
					trait = creature_human
					age = 16
					has_minor_title = title_knight_captain_heir
					NOR = { trait = incapable
						trait = maimed
						trait = leper
						trait = ill
						trait = has_nurgles_rot
						trait = blinded
						trait = possessed
						trait = lunatic_3
						trait = mutation_minor
						trait = mutation_major
						trait = mutation_massive
						has_character_modifier = magic_power_1
						has_character_modifier = magic_power_2
						has_character_modifier = magic_power_3
						has_character_modifier = magic_power_4
						trait = magic_potential_1
						trait = magic_potential_2
						trait = magic_potential_3
						trait = magic_potential_4
					}
				}
			}
			random_courtier = {
				limit = {
					religion = sigmarite
					trait = witch_hunter
					trait = creature_human
					age = 16
					has_minor_title = title_knight_captain_heir
					NOR = { trait = incapable
						trait = maimed
						trait = leper
						trait = ill
						trait = has_nurgles_rot
						trait = blinded
						trait = possessed
						trait = lunatic_3
						trait = mutation_minor
						trait = mutation_major
						trait = mutation_massive
						has_character_modifier = magic_power_1
						has_character_modifier = magic_power_2
						has_character_modifier = magic_power_3
						has_character_modifier = magic_power_4
						trait = magic_potential_1
						trait = magic_potential_2
						trait = magic_potential_3
						trait = magic_potential_4
					}
				}
				character_event = { id = witchhunter.49 }
			}
			break = yes
		}
		random_list = { #If no elegible character is aviable, create a new one
			25 = {
				create_character = {
					random_traits = yes
					dynasty = RANDOM
					religion = ROOT
					culture = ROOT
					female = no
					age = 35
				}
			}
			25 = {
				create_character = {
					random_traits = yes
					dynasty = RANDOM
					religion = ROOT
					culture = ROOT
					female = no
					age = 45
				}
			}
			25 = {
				create_character = {
					random_traits = yes
					dynasty = RANDOM
					religion = ROOT
					culture = ROOT
					female = no
					age = 65
				}
			}
			25 = {
				create_character = {
					random_traits = yes
					dynasty = RANDOM
					religion = ROOT
					culture = ROOT
					female = yes
					age = 33
				}
			}
		}
		new_character = {
			add_trait = witch_hunter
			add_trait = creature_human
			character_event = { id = witchhunter.49 }
		}
	}
}
