namespace = DR_chaos_dwarf
namespace = DR_order_dwarf
###Chaos Dwarfs
##Sacrifice to Hashut
#Chaos Dwarfs can be granted boons by Hashut depending on the number of sacrifices they've made
#They have access to 2 decisions, one targeted that allows them to get "favour points" by sacrificing prisoners
#And other that allows them to spend said points by asking Hashut for boons.

#Triggered by the "Sacrifice X to Hashut" decision
long_character_event = {
	id = DR_chaos_dwarf.1
	desc = EVTDESC_hashut_sac
	picture = GFX_evt_altar_hashut

	is_triggered_only = yes


	option = {
		name = EVTOPT_hashut_sac_dwarf
		trigger = {
			FROM = { trait = creature_dwarf }
		}
		piety = 150 #Normal Dwarfs are the most priced sacrifice
		change_variable = { which = "hashut_favor" value = 1 }
		# custom_tooltip = { text = hashut_sacrifice }
		if = {
			limit = {
				has_character_modifier = must_sacrifice_hashut
			}
			remove_character_modifier = must_sacrifice_hashut
		}
		clr_character_flag = flag_sacrifice_made_hashut
		set_character_flag = flag_sacrifice_made_hashut
		clr_character_flag = sacrificing_prisoner_hashut
		hidden_tooltip = {
			FROM = { character_event = { id = DR_chaos_dwarf.2 } }
		}
		ai_chance = { factor = 1000 }
	}

	option = {
		name = EVTOPT_hashut_sac_minor
		trigger = {
			FROM = { is_ruler = yes }
			FROM = { NOT = { trait = creature_dwarf } }
		}
		set_character_flag = sac_minor
		change_variable = { which = "hashut_favor" value = 1 }
		if = {
			limit = {
				has_character_modifier = must_sacrifice_hashut
			}
			remove_character_modifier = must_sacrifice_hashut
		}
		clr_character_flag = flag_sacrifice_made_hashut
		set_character_flag = flag_sacrifice_made_hashut
		clr_character_flag = sacrificing_prisoner_hashut
		piety = 100
		hidden_tooltip = {
			FROM = { character_event = { id = DR_chaos_dwarf.2 } }
		}
		ai_chance = { factor = 50 }
	}

	option = {
		name = EVTOPT_hashut_sac_courtier
		trigger = {
			FROM = { is_ruler = no }
			FROM = { NOT = { trait = creature_dwarf } }
		}
		piety = 50
		change_variable = { which = "hashut_favor" value = 1 }
		if = {
			limit = {
				has_character_modifier = must_sacrifice_hashut
			}
			remove_character_modifier = must_sacrifice_hashut
		}
		clr_character_flag = flag_sacrifice_made_hashut
		set_character_flag = flag_sacrifice_made_hashut
		clr_character_flag = sacrificing_prisoner_hashut
		hidden_tooltip = {
			FROM = { character_event = { id = DR_chaos_dwarf.2 } }
		}
		ai_chance = { factor = 10 }
	}
}

#Tell the sacrifice that well... it's dead.
character_event = {
	id = DR_chaos_dwarf.2
	desc = EVTDESC_hashut_sacrifice_killed
	picture = GFX_evt_altar_hashut

	is_triggered_only = yes

	option = {
		name = OK
		if = {
		  limit = { is_invincible_trigger = yes }
		  antideath_effect = yes
		  break = yes
		}
		death = { death_reason = death_sacrificed killer = FROM }
		any_dynasty_member = {
			opinion = {
				modifier = opinion_sacrificed_family
				who = FROM
			}
		}
		if = {
			limit = { is_close_relative = FROM }
			FROM = { add_trait = kinslayer }
		}
	}
}

##Spend Hashut's Favour on stuff
#Triggered by "Ask Hathur for boons"
#OBSOLETE
long_character_event = {
	id = DR_chaos_dwarf.4
	desc = EVTDESC_hashut_boons
	picture = GFX_evt_hashut_rune

	is_triggered_only = yes

	option = {
		name = EVTOPT_hashut_bless_me
		trigger = {
			piety = 100
		}
		piety = -100
		add_character_modifier = { name = hashut_blessing duration = 1500 }

		ai_chance = { factor = 1000 }
	}

	option = {
		name = EVTOPT_hashut_bless_provinces_forges
		trigger = {
			piety = 250
		}

		piety = -250
		capital_scope = { add_province_modifier = { name = hashut_province_blessing duration = 2500 }}

		ai_chance = { factor = 1000 }
	}

	option = {
		name = EVTOPT_hashut_centaur_bulls
		trigger = {
			piety = 500
		}

		piety = -500
		capital_scope = {
			ROOT = {
				spawn_unit = {
					province = PREV
					owner = THIS
					troops = {
						knights = { 500 500 }
					}
					attrition = 0
					cannot_inherit = yes
				}
			}
		}
		ai_chance = { factor = 1000 }
	}
}

##Chaos Dwarf Sorcerer ceremony #OBSOLETE
#Triggered by "Become Chaos Dwarf Sorcerer"
#Small chance to die!!
long_character_event = {
	id = DR_chaos_dwarf.5
	desc = EVTDESC_chaos_dwarf_sorcerer
	picture = GFX_evt_chaos_dwarf_sorcerer

	is_triggered_only = yes

	option = {
		name = EVTOPT_hashut_grant_me
			piety = -1000
			random_list = {
				80 = { long_character_event = { id = DR_chaos_dwarf.6 } }
				20 = { long_character_event = { id = DR_chaos_dwarf.7 } }
			}

	}
}

long_character_event = {
	id = DR_chaos_dwarf.6
	desc = EVTDESC_chaos_dwarf_sorcerer_succeed
	picture = GFX_evt_chaos_dwarf_sorcerer

	is_triggered_only = yes

	option = {
		name = EVTOPT_praise_hashut
		add_trait = chaos_dwarf_sorcerer
		clr_character_flag = chaos_dwarf_sorc_ceremony
		piety = 500
		magic_lvl_increase_effect = yes
		enable_magic_xp_effect = yes
	}
}


long_character_event = {
	id = DR_chaos_dwarf.7
	desc = EVTDESC_chaos_dwarf_sorcerer_fail
	picture = GFX_evt_chaos_dwarf_sorcerer

	is_triggered_only = yes

	option = {
		name = EVTOPT_so_close_chaosdwarf
		clr_character_flag = chaos_dwarf_sorc_ceremony
		if = {
		  limit = { is_invincible_trigger = yes }
		  antideath_effect = yes
		  break = yes
		}
		death = { death_reason = death_sacrificed killer = ROOT }
	}
}

##Sorcerer's Curse ( Chaos Dwarf Petrification ) events
#At level 2 a Chaos Dwarf becomes incapable. After level 2, it dies by petrification.
character_event = {
	id = DR_chaos_dwarf.8
	picture = "GFX_evt_stone_chaos_dwarf"

	religion = hashut
	culture_group = dwarf_chaos_group

	desc = {
		trigger = {
			trait = chaos_dwarf_sorcerer
			NOT = { trait = chaos_dwarf_petrification_1 }
			NOT = { trait = chaos_dwarf_petrification_2 }
			# NOT = { trait = chaos_dwarf_petrification_3 }
		}
		text = EVTDESCAsorcererscurse
	}

	desc = {
		trigger = {
			trait = chaos_dwarf_petrification_1
			NOT = { trait = chaos_dwarf_petrification_2 }
			# NOT = { trait = chaos_dwarf_petrification_3 }
		}
		text = EVTDESCBsorcererscurse
	}

	desc = {
		trigger = {
			NOT = { trait = chaos_dwarf_petrification_1 }
			trait = chaos_dwarf_petrification_2
			# NOT = { trait = chaos_dwarf_petrification_3 }
		}
		text = EVTDESCCsorcererscurse
	}

	# desc = {
		# trigger = {
			# NOT = { trait = chaos_dwarf_petrification_1 }
			# NOT = { trait = chaos_dwarf_petrification_2 }
			# trait = chaos_dwarf_petrification_3
		# }
		# text = EVTDESCDsorcererscurse
	# }

	trigger = {
		OR = {
			trait = chaos_dwarf_sorcerer
			trait = chaos_dwarf_petrification_1
			trait = chaos_dwarf_petrification_2
			# trait = chaos_dwarf_petrification_3
		}
	}
	mean_time_to_happen = {
		years = 200
	}

	option = {
		name = "EVTOTPAsorcererscurse"
		trigger = {
			NOT = { trait = chaos_dwarf_petrification_1 }
			NOT = { trait = chaos_dwarf_petrification_2 }
		}
		add_trait = chaos_dwarf_petrification_1
	}

	option = {
		name = "EVTOTPBsorcererscurse"
		trigger = {
			trait = chaos_dwarf_petrification_1
		}
		add_trait = chaos_dwarf_petrification_2
	}

	option = {
		name = "EVTOTPCsorcererscurse"
		trigger = {
			trait = chaos_dwarf_petrification_2
		}
		if = {
		  limit = { is_invincible_trigger = yes }
		  antideath_effect = yes
		  break = yes
		}
		set_graphical_culture = dwarf_chaos_stoned
		death = { death_reason = death_trait }
	}
}

#On_siege event for capturing slaves
character_event = {
	id = DR_chaos_dwarf.9

	desc = {
			trigger = { NOT = { has_character_flag = chaos_dwarf_raided_a_province } }
			text = EVTDESCAchaosdwarf_slave_raid
	}

	desc = {
			trigger = { has_character_flag = chaos_dwarf_raided_a_province }
			text = EVTDESCBchaosdwarf_slave_raid
	}

	picture = GFX_evt_chaos_dwarf_warriors

	is_triggered_only = yes

	only_rulers = yes
	religion = hashut
	culture_group = dwarf_chaos_group


	trigger = {
		higher_tier_than = BARON
		religion = hashut
		location = {
			NOT = {
				OR = {
					has_province_modifier = province_slave_raid_chaos_dwarf
					has_province_modifier = province_devastated_chaos_dwarf
				}
			}
		}

		any_war = {
			attacker = { character = ROOT }
			using_cb = chaos_dwarf_slaver_raid
		}
		FROM = {
			is_capital = yes
			holder_scope = { NOT = { religion = hashut } } #only against non-Chaos Dwarfs
		}
	}

	option = {
		trigger = {
			NOT = { has_character_flag = chaos_dwarf_raided_a_province }
		}
		name = EVTOTPAchaosdwarf_slave_raid
		if = {
				limit = {
					FROM = {
						owner = {
							top_liege = {
								NOT = { character = PREV }
							}
						}
					}
				}

				# FROM = { owner = { top_liege = { character_event = { id = asrai.38 } } } }
		}
		# FROM = { owner = { character_event = { id = asrai.37 } } }

		set_character_flag = chaos_dwarf_raided_a_province

	if = {
		limit = {
			OR = {
				is_feudal = yes
				AND = {
					government = chaosdwarf_government
					capital_holding = { holding_type = castle }
				}
			}
		}
		if = {
			limit = {
				capital_holding = {
					has_building = ca_chaos_dwarf_factory_3
				}
				NOT = {
					capital_holding = {
						has_building = ca_chaos_dwarf_factory_4
					}
				}
			}
			capital_holding = {
				add_building = ca_chaos_dwarf_factory_4
			}
		}
		if = {
			limit = {

				capital_holding = { has_building = ca_chaos_dwarf_factory_2 }
				NOT = { capital_holding = { has_building = ca_chaos_dwarf_factory_3 } }
			}
			capital_holding = { add_building = ca_chaos_dwarf_factory_3 }
		}
		if = {
			limit = {

				capital_holding = { has_building = ca_chaos_dwarf_factory_1 }
				NOT = { capital_holding = { has_building = ca_chaos_dwarf_factory_2 } }
			}
			capital_holding = { add_building = ca_chaos_dwarf_factory_2 }
		}
		if = {
			limit = {
				capital_holding = {
					NOT = { has_building = ca_chaos_dwarf_factory_1 }
				}
			}
			capital_holding = {
				add_building = ca_chaos_dwarf_factory_1
			}
		}
	}

	if = {
		limit = {
			is_republic = yes
			is_patrician = no
		}
		if = {
			limit = {

				capital_holding = { has_building = ct_chaos_dwarf_factory_3 }
				NOT = { capital_holding = { has_building = ct_chaos_dwarf_factory_4 } }
			}
			capital_holding = { add_building = ct_chaos_dwarf_factory_4 }
		}
		if = {
			limit = {

				capital_holding = { has_building = ct_chaos_dwarf_factory_2 }
				NOT = { capital_holding = { has_building = ct_chaos_dwarf_factory_3 } }
			}
			capital_holding = { add_building = ct_chaos_dwarf_factory_3 }
		}
		if = {
			limit = {

				capital_holding = { has_building = ct_chaos_dwarf_factory_1 }
				NOT = { capital_holding = { has_building = ct_chaos_dwarf_factory_2 } }
			}
			capital_holding = { add_building = ct_chaos_dwarf_factory_2 }
		}
		if = {
			limit = {
				capital_holding = {
					NOT = { has_building = ct_chaos_dwarf_factory_1 }
				}
			}
			capital_holding = {
				add_building = ct_chaos_dwarf_factory_1
			}
		}
	}

	if = {
		limit = {
			is_patrician = yes
		}
		if = {
			limit = {

				family_palace = { has_building = fp_chaos_dwarf_factory_3 }
				NOT = { family_palace = { has_building = fp_chaos_dwarf_factory_4 } }
			}
			family_palace = { add_building = fp_chaos_dwarf_factory_4 }
		}
		if = {
			limit = {

				family_palace = { has_building = fp_chaos_dwarf_factory_2 }
				NOT = { family_palace = { has_building = fp_chaos_dwarf_factory_3 } }
			}
			family_palace = { add_building = fp_chaos_dwarf_factory_3 }
		}
		if = {
			limit = {

				family_palace = { has_building = fp_chaos_dwarf_factory_1 }
				NOT = { family_palace = { has_building = fp_chaos_dwarf_factory_2 } }
			}
			family_palace = { add_building = fp_chaos_dwarf_factory_2 }
		}
		if = {
			limit = {
				family_palace = {
					NOT = { has_building = fp_chaos_dwarf_factory_1 }
				}
			}
			family_palace = {
				add_building = fp_chaos_dwarf_factory_1
			}
		}
	}

	if = {
		limit = {
			OR = {
				is_theocracy = yes
				AND = {
					government = chaosdwarf_government
					capital_holding = { holding_type = temple }
				}
			}
		}
		if = {
			limit = {

				capital_holding = { has_building = tp_chaos_dwarf_factory_3 }
				NOT = { capital_holding = { has_building = tp_chaos_dwarf_factory_4 } }
			}
			capital_holding = { add_building = tp_chaos_dwarf_factory_4 }
		}
		if = {
			limit = {

				capital_holding = { has_building = tp_chaos_dwarf_factory_2 }
				NOT = { capital_holding = { has_building = tp_chaos_dwarf_factory_3 } }
			}
			capital_holding = { add_building = tp_chaos_dwarf_factory_3 }
		}
		if = {
			limit = {

				capital_holding = { has_building = tp_chaos_dwarf_factory_1 }
				NOT = { capital_holding = { has_building = tp_chaos_dwarf_factory_2 } }
			}
			capital_holding = { add_building = tp_chaos_dwarf_factory_2 }
		}
		if = {
			limit = {
				capital_holding = {
					NOT = { has_building = tp_chaos_dwarf_factory_1 }
				}
			}
			capital_holding = {
				add_building = tp_chaos_dwarf_factory_1
			}
		}
	}


		if = {
				limit = {
					FROM = {
						location = {
							NOT = {
								OR = {
									has_province_modifier = province_slave_raid_chaos_dwarf
									has_province_modifier = province_scourged
								}
							}
						}
					}
				}
				FROM = {
					location = {
						add_province_modifier = {
							name = province_slave_raid_chaos_dwarf
							duration = 1825
						}
					}
				}
		}
		custom_tooltip = {
			text = courtierstakenasslaves
			hidden_tooltip = {
				FROM = {
					holder_scope = {
						random_courtier = {
							limit = {
								is_abroad = no
								NOT = { is_ruler = yes }
								NOT = { trait = creature_chaos_dwarf }
								NOT = { trait = hashut_kdaai }
							}
							random = {
								chance = 75
								imprison = ROOT
								move_character = ROOT
								}

						random_courtier = {
							limit = { is_abroad = no
								NOT = { is_ruler = yes }
								NOT = { character = PREV }
								NOT = { trait = creature_chaos_dwarf }
								NOT = { trait = hashut_kdaai }
								}

							random = {
								chance = 75
								imprison = ROOT
								move_character = ROOT
								}
						random_courtier = {
							limit = { is_abroad = no
								NOT = { is_ruler = yes }
								NOT = { character = PREVPREV }
								NOT = { character = PREV }
								NOT = { trait = creature_chaos_dwarf }
								NOT = { trait = hashut_kdaai }}
							random = {
								chance = 75
								imprison = ROOT
								move_character = ROOT
								}
						random_courtier = {
							limit = { is_abroad = no
								NOT = { is_ruler = yes }
								NOT = { character = PREVPREVPREV }
								NOT = { character = PREVPREV }
								NOT = { character = PREV }
								NOT = { trait = creature_chaos_dwarf }
								NOT = { trait = hashut_kdaai }}
							random = {
								chance = 75
								imprison = ROOT
								move_character = ROOT
								}
						random_courtier = {
							limit = { is_abroad = no
								NOT = { is_ruler = yes }
								NOT = { character = PREVPREVPREVPREV }
								NOT = { character = PREVPREVPREV }
								NOT = { character = PREVPREV }
								NOT = { character = PREV }
								NOT = { trait = creature_chaos_dwarf }
								NOT = { trait = hashut_kdaai }}
							random = {
								chance = 75
								imprison = ROOT
								move_character = ROOT
								}
							} #closingcourtier
							} #closingcourtier
							} #closingcourtier
							} #closingcourtier
							} #closingcourtier
					}
				}
			}
		}
		ai_chance = {
			factor = 33
		}
	}

	option = {
		trigger = {
			NOT = { has_character_flag = chaos_dwarf_raided_a_province }
		}
		name = EVTOTPBchaosdwarf_slave_raid

		if = {
				limit = {
					FROM = {
						owner = {
							top_liege = {
								NOT = { character = PREV }
							}
						}
					}
				}

				# FROM = { owner = { top_liege = { character_event = { id = asrai.38 } } } }
		}
		# FROM = { owner = { character_event = { id = asrai.37 } } }

		set_character_flag = chaos_dwarf_raided_a_province

	if = {
		limit = {
			OR = {
				is_feudal = yes
				AND = {
					government = chaosdwarf_government
					capital_holding = { holding_type = castle }
				}
			}
		}
		if = {
			limit = {

				capital_holding = { has_building = ca_chaos_dwarf_slave_levy_3 }
				NOT = { capital_holding = { has_building = ca_chaos_dwarf_slave_levy_4 } }
			}
			capital_holding = { add_building = ca_chaos_dwarf_slave_levy_4 }
		}
		if = {
			limit = {

				capital_holding = { has_building = ca_chaos_dwarf_slave_levy_2 }
				NOT = { capital_holding = { has_building = ca_chaos_dwarf_slave_levy_3 } }
			}
			capital_holding = { add_building = ca_chaos_dwarf_slave_levy_3 }
		}
		if = {
			limit = {

				capital_holding = { has_building = ca_chaos_dwarf_slave_levy_1 }
				NOT = { capital_holding = { has_building = ca_chaos_dwarf_slave_levy_2 } }
			}
			capital_holding = { add_building = ca_chaos_dwarf_slave_levy_2 }
		}
		if = {
			limit = {
				capital_holding = {
					NOT = { has_building = ca_chaos_dwarf_slave_levy_1 }
				}
			}
			capital_holding = {
				add_building = ca_chaos_dwarf_slave_levy_1
			}
		}
	}

	if = {
		limit = {
			is_republic = yes
			is_patrician = no
		}
		if = {
			limit = {

				capital_holding = { has_building = ct_chaos_dwarf_slave_levy_3 }
				NOT = { capital_holding = { has_building = ct_chaos_dwarf_slave_levy_4 } }
			}
			capital_holding = { add_building = ct_chaos_dwarf_slave_levy_4 }
		}
		if = {
			limit = {

				capital_holding = { has_building = ct_chaos_dwarf_slave_levy_2 }
				NOT = { capital_holding = { has_building = ct_chaos_dwarf_slave_levy_3 } }
			}
			capital_holding = { add_building = ct_chaos_dwarf_slave_levy_3 }
		}
		if = {
			limit = {

				capital_holding = { has_building = ct_chaos_dwarf_slave_levy_1 }
				NOT = { capital_holding = { has_building = ct_chaos_dwarf_slave_levy_2 } }
			}
			capital_holding = { add_building = ct_chaos_dwarf_slave_levy_2 }
		}
		if = {
			limit = {
				capital_holding = {
					NOT = { has_building = ct_chaos_dwarf_slave_levy_1 }
				}
			}
			capital_holding = {
				add_building = ct_chaos_dwarf_slave_levy_1
			}
		}
	}

	if = {
		limit = {
			is_patrician = yes
		}
		if = {
			limit = {

				family_palace = { has_building = fp_chaos_dwarf_slave_levy_3 }
				NOT = { family_palace = { has_building = fp_chaos_dwarf_slave_levy_4 } }
			}
			family_palace = { add_building = fp_chaos_dwarf_slave_levy_4 }
		}
		if = {
			limit = {

				family_palace = { has_building = fp_chaos_dwarf_slave_levy_2 }
				NOT = { family_palace = { has_building = fp_chaos_dwarf_slave_levy_3 } }
			}
			family_palace = { add_building = fp_chaos_dwarf_slave_levy_3 }
		}
		if = {
			limit = {

				family_palace = { has_building = fp_chaos_dwarf_slave_levy_1 }
				NOT = { family_palace = { has_building = fp_chaos_dwarf_slave_levy_2 } }
			}
			family_palace = { add_building = fp_chaos_dwarf_slave_levy_2 }
		}
		if = {
			limit = {
				family_palace = {
					NOT = { has_building = fp_chaos_dwarf_slave_levy_1 }
				}
			}
			family_palace = {
				add_building = fp_chaos_dwarf_slave_levy_1
			}
		}
	}

	if = {
		limit = {
			OR = {
				is_theocracy = yes
				AND = {
					government = chaosdwarf_government
					capital_holding = { holding_type = temple }
				}
			}
		}
		if = {
			limit = {

				capital_holding = { has_building = tp_chaos_dwarf_slave_levy_3 }
				NOT = { capital_holding = { has_building = tp_chaos_dwarf_slave_levy_4 } }
			}
			capital_holding = { add_building = tp_chaos_dwarf_slave_levy_4 }
		}
		if = {
			limit = {

				capital_holding = { has_building = tp_chaos_dwarf_slave_levy_2 }
				NOT = { capital_holding = { has_building = tp_chaos_dwarf_slave_levy_3 } }
			}
			capital_holding = { add_building = tp_chaos_dwarf_slave_levy_3 }
		}
		if = {
			limit = {

				capital_holding = { has_building = tp_chaos_dwarf_slave_levy_1 }
				NOT = { capital_holding = { has_building = tp_chaos_dwarf_slave_levy_2 } }
			}
			capital_holding = { add_building = tp_chaos_dwarf_slave_levy_2 }
		}
		if = {
			limit = {
				capital_holding = {
					NOT = { has_building = tp_chaos_dwarf_slave_levy_1 }
				}
			}
			capital_holding = {
				add_building = tp_chaos_dwarf_slave_levy_1
			}
		}
	}
		if = {
				limit = {
					FROM = {
						location = {
							NOT = {
								OR = {
									has_province_modifier = province_slave_raid_chaos_dwarf
									has_province_modifier = province_scourged
								}
							}
						}
					}
				}
				FROM = {
					location = {
						add_province_modifier = {
							name = province_slave_raid_chaos_dwarf
							duration = 1825
						}
					}
				}
		}

		custom_tooltip = {
			text = courtierstakenasslaves
			hidden_tooltip = {
				FROM = {
					holder_scope = {
						random_courtier = {
							limit = {
								is_abroad = no
								NOT = { is_ruler = yes }
								NOT = { trait = creature_chaos_dwarf }
								NOT = { trait = hashut_kdaai }
							}
							random = {
								chance = 75
								imprison = ROOT
								move_character = ROOT
								}

						random_courtier = {
							limit = { is_abroad = no
								NOT = { is_ruler = yes }
								NOT = { character = PREV }
								NOT = { trait = creature_chaos_dwarf }
								NOT = { trait = hashut_kdaai }
								}

							random = {
								chance = 75
								imprison = ROOT
								move_character = ROOT
								}
						random_courtier = {
							limit = { is_abroad = no
								NOT = { is_ruler = yes }
								NOT = { character = PREVPREV }
								NOT = { character = PREV }
								NOT = { trait = creature_chaos_dwarf }
								NOT = { trait = hashut_kdaai }}
							random = {
								chance = 75
								imprison = ROOT
								move_character = ROOT
								}
						random_courtier = {
							limit = { is_abroad = no
								NOT = { is_ruler = yes }
								NOT = { character = PREVPREVPREV }
								NOT = { character = PREVPREV }
								NOT = { character = PREV }
								NOT = { trait = creature_chaos_dwarf }
								NOT = { trait = hashut_kdaai }}
							random = {
								chance = 75
								imprison = ROOT
								move_character = ROOT
								}
						random_courtier = {
							limit = { is_abroad = no
								NOT = { is_ruler = yes }
								NOT = { character = PREVPREVPREVPREV }
								NOT = { character = PREVPREVPREV }
								NOT = { character = PREVPREV }
								NOT = { character = PREV }
								NOT = { trait = creature_chaos_dwarf }
								NOT = { trait = hashut_kdaai }}
							random = {
								chance = 75
								imprison = ROOT
								move_character = ROOT
								}
							} #closingcourtier
							} #closingcourtier
							} #closingcourtier
							} #closingcourtier
							} #closingcourtier
					}
				}
			}
		}
		ai_chance = {
			factor = 33
		}
	}

	option = {
		trigger = {
			has_character_flag = chaos_dwarf_raided_a_province
		}
		name = EVTOTPCchaosdwarf_slave_raid
		if = {
				limit = {
					FROM = {
						owner = {
							top_liege = {
								NOT = { character = PREV }
							}
						}
					}
				}

				# FROM = { owner = { top_liege = { character_event = { id = asrai.38 } } } }
		}
		# FROM = { owner = { character_event = { id = asrai.37 } } }

		prestige = 50

		if = {
				limit = {
					FROM = {
						location = {
							NOT = {
								OR = {
									has_province_modifier = province_slave_raid_chaos_dwarf
									has_province_modifier = province_scourged
								}
							}
						}
					}
				}
				FROM = {
					location = {
						add_province_modifier = {
							name = province_scourged
							duration = 1825
						}
					}
				}
		}

		custom_tooltip = {
			text = courtierstakenasslaves
			hidden_tooltip = {
				FROM = {
					holder_scope = {
						random_courtier = {
							limit = {
								is_abroad = no
								NOT = { is_ruler = yes }
								NOT = { trait = creature_chaos_dwarf }
								NOT = { trait = hashut_kdaai }
							}
							random = {
								chance = 75
								imprison = ROOT
								move_character = ROOT
								}

						random_courtier = {
							limit = { is_abroad = no
								NOT = { is_ruler = yes }
								NOT = { character = PREV }
								NOT = { trait = creature_chaos_dwarf }
								NOT = { trait = hashut_kdaai }
								}

							random = {
								chance = 75
								imprison = ROOT
								move_character = ROOT
								}
						random_courtier = {
							limit = { is_abroad = no
								NOT = { is_ruler = yes }
								NOT = { character = PREVPREV }
								NOT = { character = PREV }
								NOT = { trait = creature_chaos_dwarf }
								NOT = { trait = hashut_kdaai }}
							random = {
								chance = 75
								imprison = ROOT
								move_character = ROOT
								}
						random_courtier = {
							limit = { is_abroad = no
								NOT = { is_ruler = yes }
								NOT = { character = PREVPREVPREV }
								NOT = { character = PREVPREV }
								NOT = { character = PREV }
								NOT = { trait = creature_chaos_dwarf }
								NOT = { trait = hashut_kdaai }}
							random = {
								chance = 75
								imprison = ROOT
								move_character = ROOT
								}
						random_courtier = {
							limit = { is_abroad = no
								NOT = { is_ruler = yes }
								NOT = { character = PREVPREVPREVPREV }
								NOT = { character = PREVPREVPREV }
								NOT = { character = PREVPREV }
								NOT = { character = PREV }
								NOT = { trait = creature_chaos_dwarf }
								NOT = { trait = hashut_kdaai }}
							random = {
								chance = 75
								imprison = ROOT
								move_character = ROOT
								}
							} #closingcourtier
							} #closingcourtier
							} #closingcourtier
							} #closingcourtier
							} #closingcourtier
					}
				}
			}
		}
		ai_chance = {
			factor = 100
		}
	}


	option = {
		name = EVTOTPDchaosdwarf_slave_raid
		if = {
				limit = {
					FROM = {
						owner = {
							top_liege = {
								NOT = { character = PREV }
							}
						}
					}
				}

				# FROM = { owner = { top_liege = { character_event = { id = asrai.38 } } } }
		}
		# FROM = { owner = { character_event = { id = asrai.37 } } }

		piety = 300
		if = {
			limit = {
				has_character_modifier = must_sacrifice_hashut
			}
			remove_character_modifier = must_sacrifice_hashut
		}
		clr_character_flag = flag_sacrifice_made_hashut
		set_character_flag = flag_sacrifice_made_hashut
		ROOT = {
			capital_scope = {
					add_province_modifier = {
						name = slaves_sacrificed_hashut

						duration = 1824
					}
			}
		}

		if = {
				limit = {
					FROM = {
						location = {
							NOT = {
								OR = {
									has_province_modifier = province_slave_raid_chaos_dwarf
									has_province_modifier = province_scourged
								}
							}
						}
					}
				}
				FROM = {
					location = {
						add_province_modifier = {
							name = province_scourged
							duration = 1825
						}
					}
				}
		}

		custom_tooltip = {
			text = courtierssacrificed
			hidden_tooltip = {
				FROM = {
					holder_scope = {
						random_courtier = {
							limit = {
								is_abroad = no
								NOT = { is_ruler = yes }
								NOT = { trait = creature_chaos_dwarf }
								NOT = { trait = hashut_kdaai }
							}
							random = {
								chance = 75
								if = {
								  limit = { is_invincible_trigger = yes }
								  antideath_effect = yes
								  break = yes
								}
								death = { death_reason = death_sacrificed killer = ROOT }
							}

						random_courtier = {
							limit = { is_abroad = no
								NOT = { is_ruler = yes }
								NOT = { character = PREV }
								NOT = { trait = creature_chaos_dwarf }
								NOT = { trait = hashut_kdaai }
								}

							random = {
								chance = 75
								if = {
								  limit = { is_invincible_trigger = yes }
								  antideath_effect = yes
								  break = yes
								}
								death = { death_reason = death_sacrificed killer = ROOT }
							}
						random_courtier = {
							limit = { is_abroad = no
								NOT = { is_ruler = yes }
								NOT = { character = PREVPREV }
								NOT = { character = PREV }
								NOT = { trait = creature_chaos_dwarf }
								NOT = { trait = hashut_kdaai }}
							random = {
								chance = 75
								if = {
								  limit = { is_invincible_trigger = yes }
								  antideath_effect = yes
								  break = yes
								}
								death = { death_reason = death_sacrificed killer = ROOT }
							}
						random_courtier = {
							limit = { is_abroad = no
								NOT = { is_ruler = yes }
								NOT = { character = PREVPREVPREV }
								NOT = { character = PREVPREV }
								NOT = { character = PREV }
								NOT = { trait = creature_chaos_dwarf }
								NOT = { trait = hashut_kdaai }}
							random = {
								chance = 75
								if = {
								  limit = { is_invincible_trigger = yes }
								  antideath_effect = yes
								  break = yes
								}
								death = { death_reason = death_sacrificed killer = ROOT }
							}
						random_courtier = {
							limit = { is_abroad = no
								NOT = { is_ruler = yes }
								NOT = { character = PREVPREVPREVPREV }
								NOT = { character = PREVPREVPREV }
								NOT = { character = PREVPREV }
								NOT = { character = PREV }
								NOT = { trait = creature_chaos_dwarf }
								NOT = { trait = hashut_kdaai }}
							random = {
								chance = 75
								if = {
								  limit = { is_invincible_trigger = yes }
								  antideath_effect = yes
								  break = yes
								}
								death = { death_reason = death_sacrificed killer = ROOT }
							}
							} #closingcourtier
							} #closingcourtier
							} #closingcourtier
							} #closingcourtier
							} #closingcourtier
					}
				}
			}
		}
		ai_chance = {
			factor = 33

			modifier = {
				factor = 0
				capital_scope = {
					NOT = {
						OR = {
							has_building = ca_chaos_dwarf_slave_levy_1
							has_building = ca_chaos_dwarf_factory_1
						}
					}
				}
			}

			modifier = {
				factor = 100
				has_character_modifier = must_sacrifice_hashut
			}

			modifier = {
				factor = 10
				trait = zealous
			}
		}
	}

}

# Slave buildings in a non-capital holdings
character_event = {
	id = DR_chaos_dwarf.50
	desc = "EVTDESCAchaosdwarf_slave_building_capital"
	picture = GFX_evt_slaves

	only_rulers = yes
	religion = hashut
	culture_group = dwarf_chaos_group

	mean_time_to_happen = {
		days = 1
	}

	trigger = {
		any_demesne_title = {
			tier = BARON
			OR = {
				has_building = ca_chaos_dwarf_factory_1
				has_building = ca_chaos_dwarf_slave_levy_1
				has_building = ct_chaos_dwarf_factory_1
				has_building = ct_chaos_dwarf_slave_levy_1
				has_building = tp_chaos_dwarf_factory_1
				has_building = tp_chaos_dwarf_slave_levy_1
			}
			ROOT = {
				OR = {
					is_patrician = yes
					capital_holding = { NOT = { title = PREVPREV } }
				}
			}
		}
	}

	option = {
		name = OK
		any_demesne_title = {
			limit = {
				ROOT = {
					OR = {
						is_patrician = yes
						capital_holding = { NOT = { title = PREVPREV } }
					}
				}
				OR = {
					has_building = ca_chaos_dwarf_factory_4
					has_building = ct_chaos_dwarf_factory_4
					has_building = tp_chaos_dwarf_factory_4
					has_building = fp_chaos_dwarf_factory_4
				}
			}
			remove_building = ca_chaos_dwarf_factory_4
			remove_building = ct_chaos_dwarf_factory_4
			remove_building = tp_chaos_dwarf_factory_4
			remove_building = fp_chaos_dwarf_factory_4
			ROOT = { character_event = { id = DR_chaos_dwarf.10 tooltip = "EVTTOOLTIPFACTORYCAPITAL" } }
		}
		any_demesne_title = {
			limit = {
				ROOT = {
				OR = {
						is_patrician = yes
						capital_holding = { NOT = { title = PREVPREV } }
					}
				}
				OR = {
					has_building = ca_chaos_dwarf_factory_3
					has_building = ct_chaos_dwarf_factory_3
					has_building = tp_chaos_dwarf_factory_3
					has_building = fp_chaos_dwarf_factory_3
				}

			}
			remove_building = ca_chaos_dwarf_factory_3
			remove_building = ct_chaos_dwarf_factory_3
			remove_building = tp_chaos_dwarf_factory_3
			remove_building = fp_chaos_dwarf_factory_3
			ROOT = { character_event = { id = DR_chaos_dwarf.10 tooltip = "EVTTOOLTIPFACTORYCAPITAL" } }
		}
		any_demesne_title = {
			limit = {
				ROOT = {
				OR = {
						is_patrician = yes
						capital_holding = { NOT = { title = PREVPREV } }
					}
				}
				OR = {
					has_building = ca_chaos_dwarf_factory_2
					has_building = ct_chaos_dwarf_factory_2
					has_building = tp_chaos_dwarf_factory_2
					has_building = fp_chaos_dwarf_factory_2
				}

			}
			remove_building = ca_chaos_dwarf_factory_2
			remove_building = ct_chaos_dwarf_factory_2
			remove_building = tp_chaos_dwarf_factory_2
			remove_building = fp_chaos_dwarf_factory_2
			ROOT = { character_event = { id = DR_chaos_dwarf.10 tooltip = "EVTTOOLTIPFACTORYCAPITAL" } }
		}
		any_demesne_title = {
			limit = {
				ROOT = {
				OR = {
						is_patrician = yes
						capital_holding = { NOT = { title = PREVPREV } }
					}
				}
				OR = {
					has_building = ca_chaos_dwarf_factory_1
					has_building = ct_chaos_dwarf_factory_1
					has_building = tp_chaos_dwarf_factory_1
					has_building = fp_chaos_dwarf_factory_1
				}

			}
			remove_building = ca_chaos_dwarf_factory_1
			remove_building = ct_chaos_dwarf_factory_1
			remove_building = tp_chaos_dwarf_factory_1
			remove_building = fp_chaos_dwarf_factory_1
			ROOT = { character_event = { id = DR_chaos_dwarf.10 tooltip = "EVTTOOLTIPFACTORYCAPITAL" } }
		}
		any_demesne_title = {
			limit = {
				ROOT = {
					OR = {
						is_patrician = yes
						capital_holding = { NOT = { title = PREVPREV } }
					}
				}
				OR = {
					has_building = ca_chaos_dwarf_slave_levy_4
					has_building = ct_chaos_dwarf_slave_levy_4
					has_building = tp_chaos_dwarf_slave_levy_4
					has_building = fp_chaos_dwarf_slave_levy_4
				}

			}
			remove_building = ca_chaos_dwarf_slave_levy_4
			remove_building = ct_chaos_dwarf_slave_levy_4
			remove_building = tp_chaos_dwarf_slave_levy_4
			remove_building = fp_chaos_dwarf_slave_levy_4
			ROOT = { character_event = { id = DR_chaos_dwarf.11 tooltip = "EVTTOOLTIPslave_levyCAPITAL" } }
		}
		any_demesne_title = {
			limit = {
				ROOT = {
				OR = {
						is_patrician = yes
						capital_holding = { NOT = { title = PREVPREV } }
					}
				}
				OR = {
					has_building = ca_chaos_dwarf_slave_levy_3
					has_building = ct_chaos_dwarf_slave_levy_3
					has_building = tp_chaos_dwarf_slave_levy_3
					has_building = fp_chaos_dwarf_slave_levy_3
				}

			}
			remove_building = ca_chaos_dwarf_slave_levy_3
			remove_building = ct_chaos_dwarf_slave_levy_3
			remove_building = tp_chaos_dwarf_slave_levy_3
			remove_building = fp_chaos_dwarf_slave_levy_3
			ROOT = { character_event = { id = DR_chaos_dwarf.11 tooltip = "EVTTOOLTIPslave_levyCAPITAL" } }
		}
		any_demesne_title = {
			limit = {
				ROOT = {
				OR = {
						is_patrician = yes
						capital_holding = { NOT = { title = PREVPREV } }
					}
				}
				OR = {
					has_building = ca_chaos_dwarf_slave_levy_2
					has_building = ct_chaos_dwarf_slave_levy_2
					has_building = tp_chaos_dwarf_slave_levy_2
					has_building = fp_chaos_dwarf_slave_levy_2
				}

			}
			remove_building = ca_chaos_dwarf_slave_levy_2
			remove_building = ct_chaos_dwarf_slave_levy_2
			remove_building = tp_chaos_dwarf_slave_levy_2
			remove_building = fp_chaos_dwarf_slave_levy_2
			ROOT = { character_event = { id = DR_chaos_dwarf.11 tooltip = "EVTTOOLTIPslave_levyCAPITAL" } }
		}
		any_demesne_title = {
			limit = {
				ROOT = {
				OR = {
						is_patrician = yes
						capital_holding = { NOT = { title = PREVPREV } }
					}
				}
				OR = {
					has_building = ca_chaos_dwarf_slave_levy_1
					has_building = ct_chaos_dwarf_slave_levy_1
					has_building = tp_chaos_dwarf_slave_levy_1
					has_building = fp_chaos_dwarf_slave_levy_1
				}

			}
			remove_building = ca_chaos_dwarf_slave_levy_1
			remove_building = ct_chaos_dwarf_slave_levy_1
			remove_building = tp_chaos_dwarf_slave_levy_1
			remove_building = fp_chaos_dwarf_slave_levy_1
			ROOT = { character_event = { id = DR_chaos_dwarf.11 tooltip = "EVTTOOLTIPslave_levyCAPITAL" } }
		}
	}
}


character_event = {
	id = DR_chaos_dwarf.10

	hide_window = yes

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				OR = {
							is_feudal = yes
							AND = {
								government = chaosdwarf_government
								capital_holding = { holding_type = castle }
							}
						}
			}
			if = {
				limit = {
					capital_holding = { has_building = ca_chaos_dwarf_factory_4 }
				}
				capital_holding = { add_building = ca_chaos_dwarf_factory_4 }
			}
			if = {
				limit = {
					capital_holding = {
						has_building = ca_chaos_dwarf_factory_3
						NOT = { has_building = ca_chaos_dwarf_factory_4 }
					}
				}
				capital_holding = { add_building = ca_chaos_dwarf_factory_3 }
			}
			if = {
				limit = {
					capital_holding = {
						has_building = ca_chaos_dwarf_factory_2
						NOT = { has_building = ca_chaos_dwarf_factory_3 }
					}
				}
				capital_holding = { add_building = ca_chaos_dwarf_factory_2 }
			}
			if = {
				limit = {
					capital_holding = {
						NOT = { has_building = ca_chaos_dwarf_factory_1 }
					}
				}
				capital_holding = { add_building = ca_chaos_dwarf_factory_1 }
			}
		}

		if = {
			limit = {
				is_republic = yes
				is_merchant_republic = no
			}
			if = {
				limit = {
					capital_holding = { has_building = ct_chaos_dwarf_factory_4 }
				}
				capital_holding = { add_building = ct_chaos_dwarf_factory_4 }
			}
			if = {
				limit = {
					capital_holding = {
						has_building = ct_chaos_dwarf_factory_3
						NOT = { has_building = ct_chaos_dwarf_factory_4 }
					}
				}
				capital_holding = { add_building = ct_chaos_dwarf_factory_3 }
			}
			if = {
				limit = {
					capital_holding = {
						has_building = ct_chaos_dwarf_factory_2
						NOT = { has_building = ct_chaos_dwarf_factory_3 }
					}
				}
				capital_holding = { add_building = ct_chaos_dwarf_factory_2 }
			}
			if = {
				limit = {
					capital_holding = {
						NOT = { has_building = ct_chaos_dwarf_factory_1 }
					}
				}
				capital_holding = { add_building = ct_chaos_dwarf_factory_1 }
			}
		}

		if = {
			limit = {
				OR = {
					is_patrician = yes
					is_merchant_republic = yes
				}
			}
			if = {
				limit = {
					any_demesne_title = {
						NOT = { has_building = fp_chaos_dwarf_factory_1 }
					}
				}
				any_demesne_title = { add_building = fp_chaos_dwarf_factory_1 }
			}
			if = {
				limit = {
					any_demesne_title = {
						has_building = fp_chaos_dwarf_factory_2
						NOT = { has_building = fp_chaos_dwarf_factory_3 }
					}
				}
				any_demesne_title = { remove_building = fp_chaos_dwarf_factory_2 }
			}
			if = {
				limit = {
					any_demesne_title = {
						has_building = fp_chaos_dwarf_factory_3
						NOT = { has_building = fp_chaos_dwarf_factory_4 }
					}
				}
				any_demesne_title = { remove_building = fp_chaos_dwarf_factory_3 }
			}
			if = {
				limit = { any_demesne_title = { has_building = fp_chaos_dwarf_factory_4 } }
				any_demesne_title = { remove_building = fp_chaos_dwarf_factory_4 }
			}
		}

		if = {
			limit = {
				OR = {
				is_theocracy = yes
				AND = {
					government = chaosdwarf_government
					capital_holding = { holding_type = temple }
				}
			}
			}
			if = {
				limit = {
					capital_holding = { has_building = tp_chaos_dwarf_factory_4 }
				}
				capital_holding = { add_building = tp_chaos_dwarf_factory_4 }
			}
			if = {
				limit = {
					capital_holding = {
						has_building = tp_chaos_dwarf_factory_3
						NOT = { has_building = tp_chaos_dwarf_factory_4 }
					}
				}
				capital_holding = { add_building = tp_chaos_dwarf_factory_3 }
			}
			if = {
				limit = {
					capital_holding = {
						has_building = tp_chaos_dwarf_factory_2
						NOT = { has_building = tp_chaos_dwarf_factory_3 }
					}
				}
				capital_holding = { add_building = tp_chaos_dwarf_factory_2 }
			}
			if = {
				limit = {
					capital_holding = {
						NOT = { has_building = tp_chaos_dwarf_factory_1 }
					}
				}
				capital_holding = { add_building = tp_chaos_dwarf_factory_1 }
			}
		}
	}

	option = {
		name = OK

	}
}


character_event = {
	id = DR_chaos_dwarf.11

	hide_window = yes

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				OR = {
							is_feudal = yes
							AND = {
								government = chaosdwarf_government
								capital_holding = { holding_type = castle }
							}
						}
			}
			if = {
				limit = {
					capital_holding = { has_building = ca_chaos_dwarf_slave_levy_4 }
				}
				capital_holding = { add_building = ca_chaos_dwarf_slave_levy_4 }
			}
			if = {
				limit = {
					capital_holding = {
						has_building = ca_chaos_dwarf_slave_levy_3
						NOT = { has_building = ca_chaos_dwarf_slave_levy_4 }
					}
				}
				capital_holding = { add_building = ca_chaos_dwarf_slave_levy_3 }
			}
			if = {
				limit = {
					capital_holding = {
						has_building = ca_chaos_dwarf_slave_levy_2
						NOT = { has_building = ca_chaos_dwarf_slave_levy_3 }
					}
				}
				capital_holding = { add_building = ca_chaos_dwarf_slave_levy_2 }
			}
			if = {
				limit = {
					capital_holding = {
						NOT = { has_building = ca_chaos_dwarf_slave_levy_1 }
					}
				}
				capital_holding = { add_building = ca_chaos_dwarf_slave_levy_1 }
			}
		}

		if = {
			limit = {
				is_republic = yes
				is_merchant_republic = no
			}
			if = {
				limit = {
					capital_holding = { has_building = ct_chaos_dwarf_slave_levy_4 }
				}
				capital_holding = { add_building = ct_chaos_dwarf_slave_levy_4 }
			}
			if = {
				limit = {
					capital_holding = {
						has_building = ct_chaos_dwarf_slave_levy_3
						NOT = { has_building = ct_chaos_dwarf_slave_levy_4 }
					}
				}
				capital_holding = { add_building = ct_chaos_dwarf_slave_levy_3 }
			}
			if = {
				limit = {
					capital_holding = {
						has_building = ct_chaos_dwarf_slave_levy_2
						NOT = { has_building = ct_chaos_dwarf_slave_levy_3 }
					}
				}
				capital_holding = { add_building = ct_chaos_dwarf_slave_levy_2 }
			}
			if = {
				limit = {
					capital_holding = {
						NOT = { has_building = ct_chaos_dwarf_slave_levy_1 }
					}
				}
				capital_holding = { add_building = ct_chaos_dwarf_slave_levy_1 }
			}
		}

		if = {
			limit = {
				OR = {
					is_patrician = yes
					is_merchant_republic = yes
				}
			}
			if = {
				limit = {
					any_demesne_title = {
						NOT = { has_building = fp_chaos_dwarf_slave_levy_1 }
					}
				}
				any_demesne_title = { add_building = fp_chaos_dwarf_slave_levy_1 }
			}
			if = {
				limit = {
					any_demesne_title = {
						has_building = fp_chaos_dwarf_slave_levy_2
						NOT = { has_building = fp_chaos_dwarf_slave_levy_3 }
					}
				}
				any_demesne_title = { remove_building = fp_chaos_dwarf_slave_levy_2 }
			}
			if = {
				limit = {
					any_demesne_title = {
						has_building = fp_chaos_dwarf_slave_levy_3
						NOT = { has_building = fp_chaos_dwarf_slave_levy_4 }
					}
				}
				any_demesne_title = { remove_building = fp_chaos_dwarf_slave_levy_3 }
			}
			if = {
				limit = { any_demesne_title = { has_building = fp_chaos_dwarf_slave_levy_4 } }
				any_demesne_title = { remove_building = fp_chaos_dwarf_slave_levy_4 }
			}
		}

		if = {
			limit = {
				OR = {
				is_theocracy = yes
				AND = {
					government = chaosdwarf_government
					capital_holding = { holding_type = temple }
				}
			}
			}
			if = {
				limit = {
					capital_holding = { has_building = tp_chaos_dwarf_slave_levy_4 }
				}
				capital_holding = { add_building = tp_chaos_dwarf_slave_levy_4 }
			}
			if = {
				limit = {
					capital_holding = {
						has_building = tp_chaos_dwarf_slave_levy_3
						NOT = { has_building = tp_chaos_dwarf_slave_levy_4 }
					}
				}
				capital_holding = { add_building = tp_chaos_dwarf_slave_levy_3 }
			}
			if = {
				limit = {
					capital_holding = {
						has_building = tp_chaos_dwarf_slave_levy_2
						NOT = { has_building = tp_chaos_dwarf_slave_levy_3 }
					}
				}
				capital_holding = { add_building = tp_chaos_dwarf_slave_levy_2 }
			}
			if = {
				limit = {
					capital_holding = {
						NOT = { has_building = tp_chaos_dwarf_slave_levy_1 }
					}
				}
				capital_holding = { add_building = tp_chaos_dwarf_slave_levy_1 }
			}
		}
	}

	option = {
		name = OK

	}
}

#Triggered by the "Sell X into slavery" decision
character_event = {
	id = DR_chaos_dwarf.12
	desc = EVTDESC_chaos_dwarf_sell_slave
	picture = GFX_evt_slaves

	is_triggered_only = yes
	option = {
		name = EVTOPT_chaos_dwarf_sell_slave
		clr_character_flag = selling_prisoner_slavery
		IF = {
			limit = {
				FROM = {
					OR = {
						martial = 30
						stewardship = 30
						intrigue = 30
						learning = 30
						diplomacy = 30
					}
				}
			}
			wealth = 500
			FROM = { character_event = { id = DR_chaos_dwarf.13 } }
			break = yes
		}
		IF = {
			limit = {
				FROM = {
					OR = {
						martial = 20
						stewardship = 20
						intrigue = 20
						learning = 20
						diplomacy = 20
					}
				}
			}
			wealth = 250
			FROM = { character_event = { id = DR_chaos_dwarf.13 } }
			break = yes
		}
		IF = {
			limit = {
				FROM = {
					OR = {
						martial = 10
						stewardship = 10
						intrigue = 10
						learning = 10
						diplomacy = 10
					}
				}
			}
			wealth = 100
			FROM = { character_event = { id = DR_chaos_dwarf.13 } }
			break = yes
		}
		IF = {
			limit = {
				FROM = {
					OR = {
						martial = 5
						stewardship = 5
						intrigue = 5
						learning = 5
						diplomacy = 5
					}
				}
			}
			wealth = 50
			FROM = { character_event = { id = DR_chaos_dwarf.13 } }
			break = yes
		}
	}
}

#Character is sold...
character_event = {
	id = DR_chaos_dwarf.13
	desc = EVTDESC_chaos_dwarf_sell_slave
	picture = GFX_evt_slaves

	is_triggered_only = yes

	immediate = {

		any_dynasty_member = {
			limit = {
				NOT = { any_child = { character = ROOT } }
			}
			opinion = {
				modifier = opinion_sold_slavery_family_member
				who = FROM
				years = 20
			}
		}
		father = {
			opinion = {
				modifier = opinion_sold_slavery_family_member
				who = FROM
				years = 999
			}
		}
		mother = {
			opinion = {
				modifier = opinion_sold_slavery_family_member
				who = FROM
				years = 999
			}
		}
		any_spouse = {
			opinion = {
				modifier = opinion_sold_slavery_family_member
				who = FROM
				years = 40
			}
		}
		add_trait = sold_into_slavery


	}
	option = {
		name = EVTOPT_CD_curse_master
		if = {
		  limit = { is_invincible_trigger = yes }
		  antideath_effect = yes
		  break = yes
		}
		death = {
			death_reason = death_trait
		}
	}
}

##Triggered by the "Buy armaments from X" decision
#Buyer chooses what to purchase
character_event = {
	id = DR_chaos_dwarf.14
	desc = EVTDESC_chaos_dwarf_buy_stuff
	picture = GFX_evt_zharr_naggrund

	is_triggered_only = yes

	option = {
		name = EVTOTPA_chaos_dwarf_buy_weapons
		set_character_flag = cd_buy_weapons
		FROM = { character_event = { id = DR_chaos_dwarf.15 } }
		ai_chance = {
			factor = 50
		}
	}

	option = {
		name = EVTOTPB_chaos_dwarf_buy_hellcannons
		set_character_flag = cd_buy_hellcannons
		FROM = { character_event = { id = DR_chaos_dwarf.15 } }
		ai_chance = {
			factor = 50
		}
	}

	option = {
		name = EVTOTPB_chaos_dwarf_buy_stuff
		clr_character_flag = cd_buy_weapons
		clr_character_flag = cd_buy_hellcannons
		clr_character_flag = payment_cash
		clr_character_flag = payment_slaves
		clr_character_flag = payment_own_slaves
		clr_character_flag = buying_chaos_dwarfs
		ai_chance = {
			factor = 0
		}
	}
}

#Chaos Dwarf answers ( AI will always answer yes, the player has a choice to decline)...
character_event = {
	id = DR_chaos_dwarf.15
	picture = GFX_evt_zharr_naggrund

	desc = {
		trigger = {
			FROM = { has_character_flag = cd_buy_weapons }
		}
		text = EVTDESCchaos_dwarf_buy_weapons
	}

	desc = {
		trigger = {
			FROM = { has_character_flag = cd_buy_hellcannons }
		}
		text = EVTDESCchaos_dwarf_buy_hellcannons
	}

	trigger={
		NOT = { has_character_flag = buying_chaos_dwarfs }
	}
	immediate={
		set_character_flag = buying_chaos_dwarfs
	}
	is_triggered_only = yes

	option = {
		trigger = {
			FROM = { has_character_flag = cd_buy_weapons }
		}
		name = EVTOTPA_chaos_dwarf_sell_weapons

		FROM = { character_event = { id = DR_chaos_dwarf.16 } }
		ai_chance = {
			factor = 100
		}
	}

	option = {
		trigger = {
			FROM = { has_character_flag = cd_buy_hellcannons }
		}
		name = EVTOTPA_chaos_dwarf_sell_hellcannons
		FROM = { character_event = { id = DR_chaos_dwarf.16 } }
		ai_chance = {
			factor = 100
		}
	}

	option = {
		name = EVTOTPB_chaos_dwarf_sell_nothing
		FROM = {
			clr_character_flag = cd_buy_weapons
			clr_character_flag = cd_buy_hellcannons
			clr_character_flag = payment_cash
			clr_character_flag = payment_slaves
			clr_character_flag = payment_own_slaves
			clr_character_flag = buying_chaos_dwarfs
		}
		clr_character_flag = selling_armaments
		ai_chance = {
			factor = 0
		}
	}
	after = {
		clr_character_flag = buying_chaos_dwarfs
	}
}

#Buyer chooses payment...
character_event = {
	id = DR_chaos_dwarf.16
	picture = GFX_evt_chaos_dwarfs
	desc = EVTDESC_chaos_dwarf_payment

	is_triggered_only = yes

	option = {
		name = EVTOTPA_chaos_dwarf_payment_money
		set_character_flag = payment_cash
		wealth = -100
		FROM = { character_event = { id = DR_chaos_dwarf.17 } }
		ai_chance = {
			factor = 33
			modifier = {
				factor = 3
				wealth = 150
			}
		}
	}

	option = {
		trigger = {
			capital_scope = {
				NOT = {
					OR = {
						has_province_modifier = slaves_taken
						has_province_modifier = province_slave_raid_chaos_dwarf
					}
				}
			}
		}

		capital_scope = {
			add_province_modifier = { name = slaves_taken duration = 1835 }
		}
		name = EVTOTPA_chaos_dwarf_payment_own_slaves
		set_character_flag = payment_own_slaves
		FROM = { character_event = { id = DR_chaos_dwarf.17 } }
		ai_chance = {
			factor = 33

			modifier = {
				factor = 1.50
				trait = greedy
			}

			modifier = {
				factor = 1.50
				trait = cruel
			}
		}
	}

	option = {
		trigger = {
			check_variable = { which = elfslaves value = 1 }
			check_variable = { which = dwarfslaves value = 1 }
			check_variable = { which = humanslaves value = 1 }
		}
		IF = {
			limit = { check_variable = { which = elfslaves value = 1 } }
				change_variable = { which = elfslaves value = -1 }
		}
		IF = {
			limit = { check_variable = { which = dwarfslaves value = 1 } }
				change_variable = { which = dwarfslaves value = -1 }
		}
		IF = {
			limit = { check_variable = { which = humanslaves value = 1 } }
				change_variable = { which = humanslaves value = -1 }
		}
		name = EVTOTPA_chaos_dwarf_payment_slaves
		set_character_flag = payment_slaves
		FROM = { character_event = { id = DR_chaos_dwarf.17 } }
		ai_chance = {
			factor = 33
			modifier = {
				factor = 2
				trait = greedy
			}

			modifier = {
				factor = 2
				trait = cruel
			}
		}
	}

	option = {
		name = EVTOPTB_chaos_dwarf_wont_pay
		clr_character_flag = cd_buy_weapons
		clr_character_flag = cd_buy_hellcannons
		clr_character_flag = payment_cash
		clr_character_flag = payment_slaves
		clr_character_flag = payment_own_slaves
		clr_character_flag = buying_chaos_dwarfs
		FROM = { clr_character_flag = selling_armaments }
		ai_chance = {
			factor = 0
		}
	}

}

#Chaos Dwarf receives payment...
character_event = {
	id = DR_chaos_dwarf.17
	picture = GFX_evt_chaos_dwarfs
	desc = {
		trigger = {
			FROM = { has_character_flag = payment_cash  }
		}
		text = EVTDESC_chaos_dwarf_payment_made_money
	}

	desc = {
		trigger = {
			FROM = { has_character_flag = payment_own_slaves  }
		}
		text = EVTDESC_chaos_dwarf_payment_made_own_slaves
	}

	desc = {
		trigger = {
			FROM = { has_character_flag = payment_slaves  }
		}
		text = EVTDESC_chaos_dwarf_payment_made_slaves
	}

	is_triggered_only = yes

	option = {
		trigger = {
			FROM = { has_character_flag = payment_cash  }
		}
		add_character_modifier = { name = recently_sold_chaos_dwarfs duration = 1826 }
		name = EVTOTPA_chaos_dwarf_payment_made_money
		wealth = 200
		FROM = { character_event = { id = DR_chaos_dwarf.18 } }
		clr_character_flag = selling_armaments
	}

	option = {
		trigger = {
			FROM = { has_character_flag = payment_own_slaves  }
		}

		add_character_modifier = { name = recently_sold_chaos_dwarfs duration = 1826 }
		name = EVTOTPA_chaos_dwarf_payment_made_own_slaves
		character_event = { id = DR_chaos_dwarf.19 }
		clr_character_flag = selling_armaments
		FROM = { character_event = { id = DR_chaos_dwarf.18 } }
	}

	option = {
		trigger = {
			FROM = { has_character_flag = payment_slaves  }
		}
		add_character_modifier = { name = recently_sold_chaos_dwarfs duration = 1826 }
		clr_character_flag = selling_armaments
		name = EVTOTPA_chaos_dwarf_payment_made_slaves
		character_event = { id = DR_chaos_dwarf.19 }
		FROM = { character_event = { id = DR_chaos_dwarf.18 } }
	}

}

#Buyer receives purchase...
character_event = {
	id = DR_chaos_dwarf.18
	picture = GFX_evt_chaos_dwarf_artillery_crew

	desc = {
		trigger = {
			has_character_flag = cd_buy_hellcannons
		}
		text = EVTDESC_chaos_dwarf_hellcannons_arrived
	}

	desc = {
		trigger = {
			has_character_flag = cd_buy_weapons
		}
		text = EVTDESC_chaos_dwarf_weapons_arrived
	}

	is_triggered_only = yes

	option = {
		trigger = {
			has_character_flag = cd_buy_hellcannons
		}
		name = EVTOTPA_chaos_dwarf_artillery_arrived
		add_character_modifier = { name = recently_brought_from_chaos_dwarfs duration = 3652 }
		custom_tooltip = {
			text = hellcannon_arrives_capital
			capital_scope = {
				ROOT = {
					spawn_unit = {
						province = PREV
						owner = THIS
						troops = {
							heavy_infantry = { 100 100 }
							artillery = { 50 50 }
						}
					}
				}
			}
		}
		clr_character_flag = cd_buy_weapons
		clr_character_flag = cd_buy_hellcannons
		clr_character_flag = payment_cash
		clr_character_flag = payment_slaves
		clr_character_flag = payment_own_slaves
		clr_character_flag = buying_chaos_dwarfs
	}

	option = {
		trigger = {
			has_character_flag = cd_buy_weapons
		}
		name = EVTOTPA_chaos_dwarf_weapons_arrived

		add_character_modifier = { name = recently_brought_from_chaos_dwarfs duration = 3652 }

		capital_scope = {
			add_province_modifier = { name = chaos_dwarf_weapons duration = 3652 }
		}

		clr_character_flag = cd_buy_weapons
		clr_character_flag = cd_buy_hellcannons
		clr_character_flag = payment_cash
		clr_character_flag = payment_slaves
		clr_character_flag = payment_own_slaves
		clr_character_flag = buying_chaos_dwarfs
	}

}

#Event for Chaos Dwarfs who have received slaves as payment to move the slaves into the slavery buildings
character_event = {
	id = DR_chaos_dwarf.19
	picture = GFX_evt_slaves
	desc = EVTOTPAchaosdwarf_send_slaves_to_building

	is_triggered_only = yes

	option = {

		name = EVTOTPAchaosdwarf_slave_raid

						if = {
			limit = {
				OR = {
							is_feudal = yes
							AND = {
								government = chaosdwarf_government
								capital_holding = { holding_type = castle }
							}
						}
			}
			if = {
				limit = {

					capital_holding = { has_building = ca_chaos_dwarf_factory_3 }
					NOT = { capital_holding = { has_building = ca_chaos_dwarf_factory_4 } }
				}
				capital_holding = { add_building = ca_chaos_dwarf_factory_4 }
			}
			if = {
				limit = {

					capital_holding = { has_building = ca_chaos_dwarf_factory_2 }
					NOT = { capital_holding = { has_building = ca_chaos_dwarf_factory_3 } }
				}
				capital_holding = { add_building = ca_chaos_dwarf_factory_3 }
			}
			if = {
				limit = {

					capital_holding = { has_building = ca_chaos_dwarf_factory_1 }
					NOT = { capital_holding = { has_building = ca_chaos_dwarf_factory_2 } }
				}
				capital_holding = { add_building = ca_chaos_dwarf_factory_2 }
			}
			if = {
				limit = {
					capital_holding = {
						NOT = { has_building = ca_chaos_dwarf_factory_1 }
					}
				}
				capital_holding = {
					add_building = ca_chaos_dwarf_factory_1
				}
			}
		}

		if = {
			limit = {
				is_republic = yes
				is_patrician = no
			}
			if = {
				limit = {

					capital_holding = { has_building = ct_chaos_dwarf_factory_3 }
					NOT = { capital_holding = { has_building = ct_chaos_dwarf_factory_4 } }
				}
				capital_holding = { add_building = ct_chaos_dwarf_factory_4 }
			}
			if = {
				limit = {

					capital_holding = { has_building = ct_chaos_dwarf_factory_2 }
					NOT = { capital_holding = { has_building = ct_chaos_dwarf_factory_3 } }
				}
				capital_holding = { add_building = ct_chaos_dwarf_factory_3 }
			}
			if = {
				limit = {

					capital_holding = { has_building = ct_chaos_dwarf_factory_1 }
					NOT = { capital_holding = { has_building = ct_chaos_dwarf_factory_2 } }
				}
				capital_holding = { add_building = ct_chaos_dwarf_factory_2 }
			}
			if = {
				limit = {
					capital_holding = {
						NOT = { has_building = ct_chaos_dwarf_factory_1 }
					}
				}
				capital_holding = {
					add_building = ct_chaos_dwarf_factory_1
				}
			}
		}

		if = {
			limit = {
				is_patrician = yes
			}
			if = {
				limit = {

					family_palace = { has_building = fp_chaos_dwarf_factory_3 }
					NOT = { family_palace = { has_building = fp_chaos_dwarf_factory_4 } }
				}
				family_palace = { add_building = fp_chaos_dwarf_factory_4 }
			}
			if = {
				limit = {

					family_palace = { has_building = fp_chaos_dwarf_factory_2 }
					NOT = { family_palace = { has_building = fp_chaos_dwarf_factory_3 } }
				}
				family_palace = { add_building = fp_chaos_dwarf_factory_3 }
			}
			if = {
				limit = {

					family_palace = { has_building = fp_chaos_dwarf_factory_1 }
					NOT = { family_palace = { has_building = fp_chaos_dwarf_factory_2 } }
				}
				family_palace = { add_building = fp_chaos_dwarf_factory_2 }
			}
			if = {
				limit = {
					family_palace = {
						NOT = { has_building = fp_chaos_dwarf_factory_1 }
					}
				}
				family_palace = {
					add_building = fp_chaos_dwarf_factory_1
				}
			}
		}

		if = {
			limit = {
				OR = {
				is_theocracy = yes
				AND = {
					government = chaosdwarf_government
					capital_holding = { holding_type = temple }
				}
			}
			}
			if = {
				limit = {

					capital_holding = { has_building = tp_chaos_dwarf_factory_3 }
					NOT = { capital_holding = { has_building = tp_chaos_dwarf_factory_4 } }
				}
				capital_holding = { add_building = tp_chaos_dwarf_factory_4 }
			}
			if = {
				limit = {

					capital_holding = { has_building = tp_chaos_dwarf_factory_2 }
					NOT = { capital_holding = { has_building = tp_chaos_dwarf_factory_3 } }
				}
				capital_holding = { add_building = tp_chaos_dwarf_factory_3 }
			}
			if = {
				limit = {

					capital_holding = { has_building = tp_chaos_dwarf_factory_1 }
					NOT = { capital_holding = { has_building = tp_chaos_dwarf_factory_2 } }
				}
				capital_holding = { add_building = tp_chaos_dwarf_factory_2 }
			}
			if = {
				limit = {
					capital_holding = {
						NOT = { has_building = tp_chaos_dwarf_factory_1 }
					}
				}
				capital_holding = {
					add_building = tp_chaos_dwarf_factory_1
				}
			}
		}
	}

	option = {
		name = EVTOTPBchaosdwarf_slave_raid

		if = {
				limit = {
					OR = {
						is_feudal = yes
						AND = {
							government = chaosdwarf_government
							capital_holding = { holding_type = castle }
						}
					}
				}
			if = {
				limit = {

					capital_holding = { has_building = ca_chaos_dwarf_slave_levy_3 }
					NOT = { capital_holding = { has_building = ca_chaos_dwarf_slave_levy_4 } }
				}
				capital_holding = { add_building = ca_chaos_dwarf_slave_levy_4 }
			}
			if = {
				limit = {

					capital_holding = { has_building = ca_chaos_dwarf_slave_levy_2 }
					NOT = { capital_holding = { has_building = ca_chaos_dwarf_slave_levy_3 } }
				}
				capital_holding = { add_building = ca_chaos_dwarf_slave_levy_3 }
			}
			if = {
				limit = {

					capital_holding = { has_building = ca_chaos_dwarf_slave_levy_1 }
					NOT = { capital_holding = { has_building = ca_chaos_dwarf_slave_levy_2 } }
				}
				capital_holding = { add_building = ca_chaos_dwarf_slave_levy_2 }
			}
			if = {
				limit = {
					capital_holding = {
						NOT = { has_building = ca_chaos_dwarf_slave_levy_1 }
					}
				}
				capital_holding = {
					add_building = ca_chaos_dwarf_slave_levy_1
				}
			}
		}

		if = {
			limit = {
				is_republic = yes
				is_patrician = no
			}
			if = {
				limit = {

					capital_holding = { has_building = ct_chaos_dwarf_slave_levy_3 }
					NOT = { capital_holding = { has_building = ct_chaos_dwarf_slave_levy_4 } }
				}
				capital_holding = { add_building = ct_chaos_dwarf_slave_levy_4 }
			}
			if = {
				limit = {

					capital_holding = { has_building = ct_chaos_dwarf_slave_levy_2 }
					NOT = { capital_holding = { has_building = ct_chaos_dwarf_slave_levy_3 } }
				}
				capital_holding = { add_building = ct_chaos_dwarf_slave_levy_3 }
			}
			if = {
				limit = {

					capital_holding = { has_building = ct_chaos_dwarf_slave_levy_1 }
					NOT = { capital_holding = { has_building = ct_chaos_dwarf_slave_levy_2 } }
				}
				capital_holding = { add_building = ct_chaos_dwarf_slave_levy_2 }
			}
			if = {
				limit = {
					capital_holding = {
						NOT = { has_building = ct_chaos_dwarf_slave_levy_1 }
					}
				}
				capital_holding = {
					add_building = ct_chaos_dwarf_slave_levy_1
				}
			}
		}

		if = {
			limit = {
				is_patrician = yes
			}
			if = {
				limit = {

					family_palace = { has_building = fp_chaos_dwarf_slave_levy_3 }
					NOT = { family_palace = { has_building = fp_chaos_dwarf_slave_levy_4 } }
				}
				family_palace = { add_building = fp_chaos_dwarf_slave_levy_4 }
			}
			if = {
				limit = {

					family_palace = { has_building = fp_chaos_dwarf_slave_levy_2 }
					NOT = { family_palace = { has_building = fp_chaos_dwarf_slave_levy_3 } }
				}
				family_palace = { add_building = fp_chaos_dwarf_slave_levy_3 }
			}
			if = {
				limit = {

					family_palace = { has_building = fp_chaos_dwarf_slave_levy_1 }
					NOT = { family_palace = { has_building = fp_chaos_dwarf_slave_levy_2 } }
				}
				family_palace = { add_building = fp_chaos_dwarf_slave_levy_2 }
			}
			if = {
				limit = {
					family_palace = {
						NOT = { has_building = fp_chaos_dwarf_slave_levy_1 }
					}
				}
				family_palace = {
					add_building = fp_chaos_dwarf_slave_levy_1
				}
			}
		}

		if = {
			limit = {
				OR = {
				is_theocracy = yes
				AND = {
					government = chaosdwarf_government
					capital_holding = { holding_type = temple }
				}
			}
			}
			if = {
				limit = {

					capital_holding = { has_building = tp_chaos_dwarf_slave_levy_3 }
					NOT = { capital_holding = { has_building = tp_chaos_dwarf_slave_levy_4 } }
				}
				capital_holding = { add_building = tp_chaos_dwarf_slave_levy_4 }
			}
			if = {
				limit = {

					capital_holding = { has_building = tp_chaos_dwarf_slave_levy_2 }
					NOT = { capital_holding = { has_building = tp_chaos_dwarf_slave_levy_3 } }
				}
				capital_holding = { add_building = tp_chaos_dwarf_slave_levy_3 }
			}
			if = {
				limit = {

					capital_holding = { has_building = tp_chaos_dwarf_slave_levy_1 }
					NOT = { capital_holding = { has_building = tp_chaos_dwarf_slave_levy_2 } }
				}
				capital_holding = { add_building = tp_chaos_dwarf_slave_levy_2 }
			}
			if = {
				limit = {
					capital_holding = {
						NOT = { has_building = tp_chaos_dwarf_slave_levy_1 }
					}
				}
				capital_holding = {
					add_building = tp_chaos_dwarf_slave_levy_1
				}
			}
		}

	}

}

#Great Taurus mount event
character_event = {
	id = DR_chaos_dwarf.20
	desc = EVTDESC_chaos_dwarf_great_taurus
	picture = "GFX_evt_desert"

	is_triggered_only = yes

	option = {
		name = EVTOPTA_chaos_dwarf_great_taurus
		set_character_flag = taming_beast
		piety = -750
		character_event = { id = DR_chaos_dwarf.21 days = 1825 }
	}

	option = {
		name = ILL_WAIT_A_BIT
		trigger = { ai = no }
	}
}
character_event = {
	id = DR_chaos_dwarf.21

	desc = EVTDESC_chaos_dwarf_great_taurus_trained
	picture = "GFX_evt_great_taurus"

	is_triggered_only = yes

	option = {
		name = EVTOPTA_chaos_dwarf_great_taurus_trained
		add_artifact = great_taurus_mount
		clr_character_flag = taming_beast
	}

}

#Lamassu mount event
character_event = {
	id = DR_chaos_dwarf.22
	desc = EVTDESC_chaos_dwarf_lamassu
	picture = "GFX_evt_desert"

	is_triggered_only = yes

	option = {
		name = EVTOPTA_chaos_dwarf_lamassu
		set_character_flag = taming_beast
		piety = -1000
		character_event = { id = DR_chaos_dwarf.23 days = 1825 }
	}

	option = {
		name = ILL_WAIT_A_BIT
		trigger = { ai = no }
	}

}
character_event = {
	id = DR_chaos_dwarf.23

	desc = EVTDESC_chaos_dwarf_lamassu_trained
	picture = GFX_evt_lammasu

	is_triggered_only = yes

	option = {
		name = EVTOPTA_chaos_dwarf_lamassu_trained
		add_artifact = lamassu_mount
		clr_character_flag = taming_beast
	}

}

character_event = {
	id = DR_chaos_dwarf.24
	desc = EVTDESC_chaos_dwarf_buy_stuff
	picture = GFX_evt_zharr_naggrund

	hide_window = yes

	is_triggered_only = yes

	immediate = {
		FROM = { character_event = { id = DR_chaos_dwarf.14 } set_character_flag = buying_chaos_dwarfs }
	}

	option = {
		name = OK
	}
}

# #Character hasn't made a sacrifice in 4 years
# character_event = {
	# id = DR_chaos_dwarf.25
	# desc = EVTDESC_chaos_dwarf_must_sacrifice
	# picture = GFX_evt_altar_hashut

	# only_rulers = yes

	# trigger = {
		# higher_tier_than = BARON
		# is_theocracy = no
		# trait = creature_chaos_dwarf
		# religion = hashut
		# NOT = { has_character_modifier = must_sacrifice_hashut }
		# OR = {
			# NOT = { has_character_flag = flag_sacrifice_made_hashut }
			# had_character_flag = { flag = flag_sacrifice_made_hashut days = 1460  }
		# }

	# }


	# # option = {
		# # trigger = {
			# # capital_holding = {
				# # has_building = ca_chaos_dwarf_factory_1
			# # }
		# # }
		# # name = EVTOPTA_chaos_dwarf_must_sacrifice
		# # custom_tooltip = {
			# # text = chaosdwarffactorysacrifice
			# # piety = 50
			# # hidden_tooltip = {
				# # if = {
					# # limit = {
						# # capital_holding = {
							# # has_building = ca_chaos_dwarf_factory_1
							# # NOT = { has_building = ca_chaos_dwarf_factory_2 }
						# # }
					# # }
					# # capital_holding = { remove_building = ca_chaos_dwarf_factory_1 }
				# # }
				# # if = {
					# # limit = {
						# # capital_holding = {
							# # has_building = ca_chaos_dwarf_factory_2
							# # NOT = { has_building = ca_chaos_dwarf_factory_3 }
						# # }
					# # }
					# # capital_holding = { remove_building = ca_chaos_dwarf_factory_2 }
				# # }
				# # if = {
					# # limit = {
						# # capital_holding = {
							# # has_building = ca_chaos_dwarf_factory_3
							# # NOT = { has_building = ca_chaos_dwarf_factory_4 }
						# # }
					# # }
					# # capital_holding = { remove_building = ca_chaos_dwarf_factory_3 }
				# # }
				# # if = {
					# # limit = {
						# # capital_holding = {
							# # has_building = ca_chaos_dwarf_factory_4
							# # NOT = { has_building = ca_chaos_dwarf_factory_5 }
						# # }
					# # }
					# # capital_holding = { remove_building = ca_chaos_dwarf_factory_4 }
				# # }
				# # if = {
					# # limit = { capital_holding = { has_building = ca_chaos_dwarf_factory_5 } }
					# # capital_holding = { remove_building = ca_chaos_dwarf_factory_5 }
				# # }
			# # }
		# # }
	# # }

	# # option = {
		# # trigger = {
			# # capital_holding = {
				# # has_building = ca_chaos_dwarf_slave_levy_1
			# # }
		# # }
		# # name = EVTOPTB_chaos_dwarf_must_sacrifice
		# # piety = 50
		# # custom_tooltip = {
			# # text = chaosdwarfslavelevysacrifice
			# # hidden_tooltip = {
				# # if = {
					# # limit = {
						# # capital_holding = {
							# # has_building = ca_chaos_dwarf_slave_levy_1
							# # NOT = { has_building = ca_chaos_dwarf_slave_levy_2 }
						# # }
					# # }
					# # capital_holding = { remove_building = ca_chaos_dwarf_slave_levy_1 }
				# # }
				# # if = {
					# # limit = {
						# # capital_holding = {
							# # has_building = ca_chaos_dwarf_slave_levy_2
							# # NOT = { has_building = ca_chaos_dwarf_slave_levy_3 }
						# # }
					# # }
					# # capital_holding = { remove_building = ca_chaos_dwarf_slave_levy_2 }
				# # }
				# # if = {
					# # limit = {
						# # capital_holding = {
							# # has_building = ca_chaos_dwarf_slave_levy_3
							# # NOT = { has_building = ca_chaos_dwarf_slave_levy_4 }
						# # }
					# # }
					# # capital_holding = { remove_building = ca_chaos_dwarf_slave_levy_3 }
				# # }
				# # if = {
					# # limit = {
						# # capital_holding = {
							# # has_building = ca_chaos_dwarf_slave_levy_4
							# # NOT = { has_building = ca_chaos_dwarf_slave_levy_5 }
						# # }
					# # }
					# # capital_holding = { remove_building = ca_chaos_dwarf_slave_levy_4 }
				# # }
				# # if = {
					# # limit = { capital_holding = { has_building = ca_chaos_dwarf_slave_levy_5 } }
					# # capital_holding = { remove_building = ca_chaos_dwarf_slave_levy_5 }
				# # }
			# # }
		# # }
	# # }

	# option = {
		# name = EVTOPTC_chaos_dwarf_must_sacrifice
		# add_character_modifier = {
			# name = must_sacrifice_hashut
			# duration = -1
		# }
	# }

# }

##Grand Sacrifice to Hashut
#Sacrifice prisoner or slave buildings ?
long_character_event = {
	id = DR_chaos_dwarf.26
	desc = EVTDESC_hashut_great_sacrifice
	picture = GFX_evt_hashut_rune

	is_triggered_only = yes

	#Factory Building
	option = {
		name = EVTOPTA_hashut_great_sacrifice
		trigger = {
			OR = {
				capital_holding = {
					has_building = ca_chaos_dwarf_factory_1
				}
				capital_holding = {
					has_building = ct_chaos_dwarf_factory_1
				}
				capital_holding = {
					has_building = tp_chaos_dwarf_factory_1
				}
				capital_holding = {
					has_building = fp_chaos_dwarf_factory_1
				}
			}
		}
		character_event = { id = DR_chaos_dwarf.33 }
		if = {
			limit = {
				has_character_modifier = must_sacrifice_hashut
			}
			remove_character_modifier = must_sacrifice_hashut
		}
		clr_character_flag = flag_sacrifice_made_hashut
		set_character_flag = flag_sacrifice_made_hashut


		ai_chance = { factor = 50 }
	}

	#Slave Levy
	option = {
		name = EVTOPTB_hashut_great_sacrifice
		trigger = {
			OR = {
				capital_holding = {
					has_building = ca_chaos_dwarf_slave_levy_1
				}
				capital_holding = {
					has_building = ct_chaos_dwarf_slave_levy_1
				}
				capital_holding = {
					has_building = tp_chaos_dwarf_slave_levy_1
				}
				capital_holding = {
					has_building = fp_chaos_dwarf_slave_levy_1
				}
			}
		}
		character_event = { id = DR_chaos_dwarf.34 }

		ai_chance = { factor = 50 }
	}

	#Prisoner
	option = {
		name = EVTOPTC_hashut_great_sacrifice
		trigger = {
			num_of_prisoners = 1
		}

		hidden_tooltip = {
			if = {
				limit = {
					any_courtier = {
						prisoner = yes
						host = { character = ROOT }
					}
				}
				random_courtier = {
					limit = {
						prisoner = yes
						host = { character = ROOT }
					}
					character_event = { id = DR_chaos_dwarf.27 }
				}
			}
		}
		ai_chance = { factor = 100 }
	}

	option = {
		name = EVTOPTD_hashut_great_sacrifice

		piety = -100
		clr_character_flag = making_grand_sacrifice_hashut
		ai_chance = { factor = 0 }
	}
}


#Bounce to catch the sacrifice
character_event = {
	id = DR_chaos_dwarf.27
	# desc = EVTDESC_hashut_sacrifice_killed
	# picture = GFX_evt_altar_hashut

	hide_window = yes

	is_triggered_only = yes

	option = {
		name = OK
		FROM = { character_event = { id = DR_chaos_dwarf.28 } }
	}
}


#Copy of the "Sacrifice to Hashut" targeted decision event adapted to the Great Sacrifice
long_character_event = {
	id = DR_chaos_dwarf.28
	desc = EVTDESC_hashut_great_sacrifice_prisoner
	picture = GFX_evt_altar_hashut

	is_triggered_only = yes

	option = {
		name = EVTOPT_hashut_sac_dwarf
		trigger = {
			FROM = { trait = creature_dwarf }
		}
		piety = 250
		# custom_tooltip = { text = hashut_sacrifice }
		if = {
			limit = {
				has_character_modifier = must_sacrifice_hashut
			}
			remove_character_modifier = must_sacrifice_hashut
		}
		clr_character_flag = flag_sacrifice_made_hashut
		set_character_flag = flag_sacrifice_made_hashut
		hidden_tooltip = {
			FROM = { character_event = { id = DR_chaos_dwarf.2 } }
		}
		hidden_tooltip = {
				#Normal Dwarfs are Hashut's most priced sacrifice
				random_list = {
					9 = {
						character_event = { id = DR_chaos_dwarf.41 }
					}
					10 = {
						modifier = {
							factor = 0
							any_friend = { is_daemon_race_trigger = yes }
						}
						character_event = { id = DR_chaos_dwarf.42 }
					}
					15 = {
						modifier = {
							factor = 0
							has_artifact = great_taurus_mount
						}
						character_event = { id = DR_chaos_dwarf.43 }
					}

					25 = { character_event = { id = DR_chaos_dwarf.44 } }

					25 = {
						modifier = {
							factor = 0
							trait = proud
						}
						character_event = { id = DR_chaos_dwarf.45 }
					}

					5 = { character_event = { id = DR_chaos_dwarf.46 } }

					5 = {
						modifier = {
							factor = 0
							trait = disfigured
						}
						character_event = { id = DR_chaos_dwarf.47 }
					}

					1 = { character_event = { id = DR_chaos_dwarf.48 } }
				}
			}
		ai_chance = { factor = 1000 }
	}

	option = {
		name = EVTOPT_hashut_sac_minor
		trigger = {
			FROM = { is_ruler = yes }
			FROM = { NOT = { trait = creature_dwarf } }
		}
		set_character_flag = sac_minor
		if = {
			limit = {
				has_character_modifier = must_sacrifice_hashut
			}
			remove_character_modifier = must_sacrifice_hashut
		}
		clr_character_flag = flag_sacrifice_made_hashut
		set_character_flag = flag_sacrifice_made_hashut
		piety = 100
		hidden_tooltip = {
			FROM = { character_event = { id = DR_chaos_dwarf.2 } }
		}
		hidden_tooltip = {
				#Mediocre opinion about this sacrifice
				random_list = {
					1 = {
						character_event = { id = DR_chaos_dwarf.41 }
					}
					4 = {
						modifier = {
							factor = 0
							any_friend = { is_daemon_race_trigger = yes }
						}
						character_event = { id = DR_chaos_dwarf.42 }
					}
					10 = {
						modifier = {
							factor = 0
							has_artifact = great_taurus_mount
						}
						character_event = { id = DR_chaos_dwarf.43 }
					}

					15 = { character_event = { id = DR_chaos_dwarf.44 } }

					25 = {
						modifier = {
							factor = 0
							trait = proud
						}
						character_event = { id = DR_chaos_dwarf.45 }
					}

					15 = { character_event = { id = DR_chaos_dwarf.46 } }

					10 = { character_event = { id = DR_chaos_dwarf.47 } }

					15 = { character_event = { id = DR_chaos_dwarf.48 } }
				}
		}
		ai_chance = { factor = 50 }
	}

	option = {
		name = EVTOPT_hashut_sac_courtier
		trigger = {
			FROM = { is_ruler = no }
			FROM = { NOT = { trait = creature_dwarf } }
		}
		piety = 50
		if = {
			limit = {
				has_character_modifier = must_sacrifice_hashut
			}
			remove_character_modifier = must_sacrifice_hashut
		}
		clr_character_flag = flag_sacrifice_made_hashut
		set_character_flag = flag_sacrifice_made_hashut
		hidden_tooltip = {
			FROM = { character_event = { id = DR_chaos_dwarf.2 } }
		}
		hidden_tooltip = {
				#Bad
				random_list = {
					1 = {
						character_event = { id = DR_chaos_dwarf.41 }
					}
					4 = {
						modifier = {
							factor = 0
							any_friend = { is_daemon_race_trigger = yes }
						}
						character_event = { id = DR_chaos_dwarf.42 }
					}
					5 = {
						modifier = {
							factor = 0
							has_artifact = great_taurus_mount
						}
						character_event = { id = DR_chaos_dwarf.43 }
					}

					10 = { character_event = { id = DR_chaos_dwarf.44 } }

					15 = {
						modifier = {
							factor = 0
							trait = proud
						}
						character_event = { id = DR_chaos_dwarf.45 }
					}

					20 = { character_event = { id = DR_chaos_dwarf.46 } }

					20 = {
						modifier = {
							factor = 0
							trait = disfigured
						}
						character_event = { id = DR_chaos_dwarf.47 }
					}

					25 = { character_event = { id = DR_chaos_dwarf.48 } }
				}
			}
		ai_chance = { factor = 10 }
	}
}

#Hashut blesses character
character_event = {
	id = DR_chaos_dwarf.29
	desc = EVTDESC_hashut_great_sacrifice_character_blessing
	picture = GFX_evt_hashut_rune

	is_triggered_only = yes

	option = {
		name = EVTOPT_praise_hashut
		add_character_modifier = { name = hashut_blessing duration = 1500 }
		add_character_modifier = { name = recently_asked_hashut duration = 1500 }
		clr_character_flag = making_grand_sacrifice_hashut
		ai_chance = { factor = 1000 }
	}
}

#Hashut blesses province
character_event = {
	id = DR_chaos_dwarf.30
	desc = EVTDESC_hashut_great_sacrifice_province_blessing
	picture = GFX_evt_hashut_rune

	is_triggered_only = yes

	option = {
		name = EVTOPT_praise_hashut

		capital_scope = { add_province_modifier = { name = hashut_province_blessing duration = 1500 }}
		add_character_modifier = { name = recently_asked_hashut duration = 1500 }
		clr_character_flag = making_grand_sacrifice_hashut
		ai_chance = { factor = 1000 }
	}
}

#Bull Centaurs join you
character_event = {
	id = DR_chaos_dwarf.31
	desc = EVTDESC_hashut_great_sacrifice_bull_centaurs_join
	picture = GFX_evt_bull_centaur

	is_triggered_only = yes

	option = {
		name = EVTOPT_praise_hashut

		capital_scope = {
			ROOT = {
				spawn_unit = {
					province = PREV
					owner = THIS
					troops = {
						knights = { 500 500 }
					}
					attrition = 0
					cannot_inherit = yes
				}
			}
		}
		add_character_modifier = { name = recently_asked_hashut duration = 1500 }
		clr_character_flag = making_grand_sacrifice_hashut
		ai_chance = { factor = 1000 }
	}
}

#Hashut is displeased
character_event = {
	id = DR_chaos_dwarf.32
	desc = EVTDESC_hashut_great_sacrifice_hashut_angry
	picture = GFX_evt_hashut

	is_triggered_only = yes

	option = {
		name = EVTOPT_hashut_great_sacrifice_hashut_angry
		piety = -100
		add_character_modifier = { name = hashut_curse duration = 1500 }
		add_character_modifier = { name = recently_asked_hashut duration = 1500 }
		clr_character_flag = making_grand_sacrifice_hashut
		ai_chance = { factor = 1000 }
	}
}

#Sacrifice Slave building ( Factory )
character_event = {
	id = DR_chaos_dwarf.33
	desc = EVTDESC_hashut_great_sacrifice_slaves
	picture = GFX_evt_altar_hashut

	is_triggered_only = yes

	option = {
		name = EVTOPT_hashut_great_sacrifice_slaves
		hidden_tooltip = {
			#Good opinion about mass sacrifices
			random_list = {
				5 = {
					character_event = { id = DR_chaos_dwarf.41 }
				}
				10 = {
					modifier = {
						factor = 0.5
							any_friend = { is_daemon_race_trigger = yes }
					}
					character_event = { id = DR_chaos_dwarf.42 }
				}
				10 = {
					modifier = {
						factor = 0
						has_artifact = great_taurus_mount
					}
					character_event = { id = DR_chaos_dwarf.43 }
				}

				20 = { character_event = { id = DR_chaos_dwarf.44 } }

				25 = {
					modifier = {
						factor = 0
						trait = proud
					}
					character_event = { id = DR_chaos_dwarf.45 }
				}

				10 = { character_event = { id = DR_chaos_dwarf.46 } }

				10 = {
					modifier = {
						factor = 0
						trait = disfigured
					}
					character_event = { id = DR_chaos_dwarf.47 }
				}

				5 = { character_event = { id = DR_chaos_dwarf.48 } }
			}
		}
		custom_tooltip = {
			text = chaosdwarffactorysacrifice
			hidden_tooltip = {
				if = {
					limit = {
						OR = {
							is_feudal = yes
							AND = {
								government = chaosdwarf_government
								capital_holding = { holding_type = castle }
							}
						}
					}
					if = {
						limit = {
							capital_holding = { has_building = ca_chaos_dwarf_factory_4 }
						}
						capital_holding = {
								remove_building = ca_chaos_dwarf_factory_4
								add_building = ca_chaos_dwarf_factory_3
						}
						break = yes
					}
					if = {
						limit = {
							capital_holding = { has_building = ca_chaos_dwarf_factory_3 }
						}
						capital_holding = {
								remove_building = ca_chaos_dwarf_factory_3
								add_building = ca_chaos_dwarf_factory_2
						}
						break = yes
					}
					if = {
						limit = {
							capital_holding = { has_building = ca_chaos_dwarf_factory_2 }
						}
						capital_holding = {
								remove_building = ca_chaos_dwarf_factory_2
								add_building = ca_chaos_dwarf_factory_1
						}
						break = yes
					}
					if = {
						limit = {
							capital_holding = { has_building = ca_chaos_dwarf_factory_1}
						}
						capital_holding = { remove_building = ca_chaos_dwarf_factory_1 }
						break = yes
					}
				}

				if = {
					limit = {
						is_republic = yes
						is_patrician = no
					}
					if = {
						limit = {
							capital_holding = { has_building = ct_chaos_dwarf_factory_4 }
						}
						capital_holding = {
								remove_building = ct_chaos_dwarf_factory_4
								add_building = ct_chaos_dwarf_factory_3
						}
						break = yes
					}
					if = {
						limit = {
							capital_holding = { has_building = ct_chaos_dwarf_factory_3 }
						}
						capital_holding = {
								remove_building = ct_chaos_dwarf_factory_3
								add_building = ct_chaos_dwarf_factory_2
						}
						break = yes
					}
					if = {
						limit = {
							capital_holding = { has_building = ct_chaos_dwarf_factory_2 }
						}
						capital_holding = {
								remove_building = ct_chaos_dwarf_factory_2
								add_building = ct_chaos_dwarf_factory_1
						}
						break = yes
					}
					if = {
						limit = {
							capital_holding = { has_building = ct_chaos_dwarf_factory_1}
						}
						capital_holding = { remove_building = ct_chaos_dwarf_factory_1 }
					}
					break = yes
				}

				if = {
					limit = {
						is_patrician = yes
					}
					if = {
						limit = {
							family_palace = { has_building = tp_chaos_dwarf_factory_4 }
						}
						family_palace = {
								remove_building = tp_chaos_dwarf_factory_4
								add_building = tp_chaos_dwarf_factory_3
						}
						break = yes
					}
					if = {
						limit = {
							family_palace = { has_building = tp_chaos_dwarf_factory_3 }
						}
						family_palace = {
								remove_building = tp_chaos_dwarf_factory_3
								add_building = tp_chaos_dwarf_factory_2
						}
						break = yes
					}
					if = {
						limit = {
							family_palace = { has_building = tp_chaos_dwarf_factory_2 }
						}
						family_palace = {
								remove_building = tp_chaos_dwarf_factory_2
								add_building = tp_chaos_dwarf_factory_1
						}
						break = yes
					}
					if = {
						limit = {
							family_palace = { has_building = tp_chaos_dwarf_factory_1}
						}
						family_palace = { remove_building = tp_chaos_dwarf_factory_1 }
						break = yes
					}
				}

				if = {
					limit = {
						OR = {
							is_theocracy = yes
							AND = {
								government = chaosdwarf_government
								capital_holding = { holding_type = temple }
							}
						}
					}
					if = {
						limit = {
							capital_holding = { has_building = tp_chaos_dwarf_factory_4 }
						}
						capital_holding = {
								remove_building = tp_chaos_dwarf_factory_4
								add_building = tp_chaos_dwarf_factory_3
						}
						break = yes
					}
					if = {
						limit = {
							capital_holding = { has_building = tp_chaos_dwarf_factory_3 }
						}
						capital_holding = {
								remove_building = tp_chaos_dwarf_factory_3
								add_building = tp_chaos_dwarf_factory_2
						}
						break = yes
					}
					if = {
						limit = {
							capital_holding = { has_building = tp_chaos_dwarf_factory_2 }
						}
						capital_holding = {
								remove_building = tp_chaos_dwarf_factory_2
								add_building = tp_chaos_dwarf_factory_1
						}
						break = yes
					}
					if = {
						limit = {
							capital_holding = { has_building = tp_chaos_dwarf_factory_1}
						}
						capital_holding = { remove_building = tp_chaos_dwarf_factory_1 }
					}
					break = yes
				}
			}

		}
		ai_chance = { factor = 1000 }

	}
}

#Sacrifice Slave building ( Levy )
character_event = {
	id = DR_chaos_dwarf.34
	desc = EVTDESC_hashut_great_sacrifice_slaves
	picture = GFX_evt_altar_hashut

	is_triggered_only = yes

	option = {
		name = EVTOPT_hashut_great_sacrifice_slaves
				if = {
			limit = {
				has_character_modifier = must_sacrifice_hashut
			}
			remove_character_modifier = must_sacrifice_hashut
		}
		clr_character_flag = flag_sacrifice_made_hashut
		set_character_flag = flag_sacrifice_made_hashut
		hidden_tooltip = {
			#Good opinion about mass sacrifices
			random_list = {
				5 = {
					character_event = { id = DR_chaos_dwarf.41 }
				}
				10 = {
					modifier = {
						factor = 0.5
							any_friend = { is_daemon_race_trigger = yes }
					}
					character_event = { id = DR_chaos_dwarf.42 }
				}
				10 = {
					modifier = {
						factor = 0
						has_artifact = great_taurus_mount
					}
					character_event = { id = DR_chaos_dwarf.43 }
				}

				20 = { character_event = { id = DR_chaos_dwarf.44 } }

				25 = {
					modifier = {
						factor = 0
						trait = proud
					}
					character_event = { id = DR_chaos_dwarf.45 }
				}

				10 = { character_event = { id = DR_chaos_dwarf.46 } }

				10 = {
					modifier = {
						factor = 0
						trait = disfigured
					}
					character_event = { id = DR_chaos_dwarf.47 }
				}

				5 = { character_event = { id = DR_chaos_dwarf.48 } }
			}
		}

		custom_tooltip = {
				text = chaosdwarfslavelevysacrifice
				hidden_tooltip = {
					if = {
						limit = {
							OR = {
								is_feudal = yes
								AND = {
									government = chaosdwarf_government
									capital_holding = { holding_type = castle }
								}
							}
						}
						if = {
							limit = {
								capital_holding = { has_building = ca_chaos_dwarf_slave_levy_4 }
							}
							capital_holding = {
									remove_building = ca_chaos_dwarf_slave_levy_4
									add_building = ca_chaos_dwarf_slave_levy_3
							}
							break = yes
						}
						if = {
							limit = {
								capital_holding = { has_building = ca_chaos_dwarf_slave_levy_3 }
							}
							capital_holding = {
									remove_building = ca_chaos_dwarf_slave_levy_3
									add_building = ca_chaos_dwarf_slave_levy_2
							}
							break = yes
						}
						if = {
							limit = {
								capital_holding = { has_building = ca_chaos_dwarf_slave_levy_2 }
							}
							capital_holding = {
									remove_building = ca_chaos_dwarf_slave_levy_2
									add_building = ca_chaos_dwarf_slave_levy_1
							}
							break = yes
						}
						if = {
							limit = {
								capital_holding = { has_building = ca_chaos_dwarf_slave_levy_1}
							}
							capital_holding = { remove_building = ca_chaos_dwarf_slave_levy_1 }
							break = yes
						}
					}

					if = {
						limit = {
							is_republic = yes
							is_patrician = no
						}
						if = {
							limit = {
								capital_holding = { has_building = ct_chaos_dwarf_slave_levy_4 }
							}
							capital_holding = {
									remove_building = ct_chaos_dwarf_slave_levy_4
									add_building = ct_chaos_dwarf_slave_levy_3
							}
							break = yes
						}
						if = {
							limit = {
								capital_holding = { has_building = ct_chaos_dwarf_slave_levy_3 }
							}
							capital_holding = {
									remove_building = ct_chaos_dwarf_slave_levy_3
									add_building = ct_chaos_dwarf_slave_levy_2
							}
							break = yes
						}
						if = {
							limit = {
								capital_holding = { has_building = ct_chaos_dwarf_slave_levy_2 }
							}
							capital_holding = {
									remove_building = ct_chaos_dwarf_slave_levy_2
									add_building = ct_chaos_dwarf_slave_levy_1
							}
							break = yes
						}
						if = {
							limit = {
								capital_holding = { has_building = ct_chaos_dwarf_slave_levy_1}
							}
							capital_holding = { remove_building = ct_chaos_dwarf_slave_levy_1 }
						}
						break = yes
					}

					if = {
						limit = {
							is_patrician = yes
						}
						if = {
							limit = {
								family_palace = { has_building = tp_chaos_dwarf_slave_levy_4 }
							}
							family_palace = {
									remove_building = tp_chaos_dwarf_slave_levy_4
									add_building = tp_chaos_dwarf_slave_levy_3
							}
							break = yes
						}
						if = {
							limit = {
								family_palace = { has_building = tp_chaos_dwarf_slave_levy_3 }
							}
							family_palace = {
									remove_building = tp_chaos_dwarf_slave_levy_3
									add_building = tp_chaos_dwarf_slave_levy_2
							}
							break = yes
						}
						if = {
							limit = {
								family_palace = { has_building = tp_chaos_dwarf_slave_levy_2 }
							}
							family_palace = {
									remove_building = tp_chaos_dwarf_slave_levy_2
									add_building = tp_chaos_dwarf_slave_levy_1
							}
							break = yes
						}
						if = {
							limit = {
								family_palace = { has_building = tp_chaos_dwarf_slave_levy_1}
							}
							family_palace = { remove_building = tp_chaos_dwarf_slave_levy_1 }
							break = yes
						}
					}

					if = {
						limit = {
							OR = {
								is_theocracy = yes
								AND = {
									government = chaosdwarf_government
									capital_holding = { holding_type = temple }
										}
							}
						}
						if = {
							limit = {
								capital_holding = { has_building = tp_chaos_dwarf_slave_levy_4 }
							}
							capital_holding = {
									remove_building = tp_chaos_dwarf_slave_levy_4
									add_building = tp_chaos_dwarf_slave_levy_3
							}
							break = yes
						}
						if = {
							limit = {
								capital_holding = { has_building = tp_chaos_dwarf_slave_levy_3 }
							}
							capital_holding = {
									remove_building = tp_chaos_dwarf_slave_levy_3
									add_building = tp_chaos_dwarf_slave_levy_2
							}
							break = yes
						}
						if = {
							limit = {
								capital_holding = { has_building = tp_chaos_dwarf_slave_levy_2 }
							}
							capital_holding = {
									remove_building = tp_chaos_dwarf_slave_levy_2
									add_building = tp_chaos_dwarf_slave_levy_1
							}
							break = yes
						}
						if = {
							limit = {
								capital_holding = { has_building = tp_chaos_dwarf_slave_levy_1}
							}
							capital_holding = { remove_building = tp_chaos_dwarf_slave_levy_1 }
						}
						break = yes
					}
				}
		}
	}

}

character_event = {
	id = DR_chaos_dwarf.41
	desc = EVTDESCDR_chaos_dwarf.41
	picture = GFX_evt_hashut_rune
	is_triggered_only = yes

	immediate = {
     		   	add_doom_progress_tiny_effect = yes
				change_variable = { which = "hashut_favor" value = 4 }
	}

	option = {
		name = EVTOPTADR_chaos_dwarf.41
		clr_character_flag = making_grand_sacrifice_hashut
		capital_scope = {
			ROOT = {
				spawn_unit = {
					province = PREV
					home = PREV
					owner = THIS
					attrition = 0.5
					cannot_inherit = yes
					earmark = demonic_host
 					 troops = {
						daemonic_host = { 350 350 }
						}
				}
				spawn_unit = {
					province = PREV
					home = PREV
					owner = THIS
					attrition = 0.5
					cannot_inherit = yes
					earmark = demonic_host
 					 troops = {
						daemonic_host = { 250 250 }
						}
				}
			}
		}
	}

	option = {
		name = EVTOPTBDR_chaos_dwarf.41
		clr_character_flag = making_grand_sacrifice_hashut
		change_martial = 2
		if = {
			limit = { trait = tough }
			remove_trait = tough
			add_trait = strong
		}
		if = {
			limit = { trait = hardy }
			remove_trait = hardy
			add_trait = strong
		}
		if = {
			limit = {
				NOT = { trait = strong }
				 NOT = { trait = tough }
				 NOT = { trait = hardy }
				 NOT = { trait = soft }
				 NOT = { trait = fragile }
				 NOT = { trait = weak }
			}
			add_trait = tough
		}
		if = {
			limit = { trait = soft }
			remove_trait = soft
			add_trait = tough
		}
		if = {
			limit = { trait = fragile }
			remove_trait = fragile
			add_trait = hardy
		}
		if = {
			limit = { trait = weak }
			remove_trait = weak
			add_trait = hardy
		}
	}

	option = {
		name = EVTOPTCDR_chaos_dwarf.41
		clr_character_flag = making_grand_sacrifice_hashut
		trigger = {
			capital_scope = { NOT = { has_province_modifier = hashut_province_blessing } }
		}
		capital_scope = { add_province_modifier = { name = hashut_province_blessing duration = 1500 }}
	}

	option = {
		trigger = { trait = chaos_dwarf_sorcerer }
		name = EVTOPTDDR_chaos_dwarf.41
		clr_character_flag = making_grand_sacrifice_hashut
		change_learning = 1
		magic_lvl_increase_effect = yes
		enable_magic_xp_effect = yes
	}
}

#Hashut sends K'daai Fireborn
character_event = {
	id = DR_chaos_dwarf.42
	desc = EVTDESCDR_chaos_dwarf.42
	picture = GFX_evt_kdaai
	is_triggered_only = yes

	immediate = {
		add_doom_progress_tiny_effect = yes
		change_variable = { which = "hashut_favor" value = 3 }
	}

	option = {
		name = EVTOPTADR_chaos_dwarf.42
		clr_character_flag = making_grand_sacrifice_hashut
		create_character = {
				random_traits = yes
				religion = hashut
				culture = daemon_kdaai
				dynasty = none
				female = no
				age = 1212
				flag = ai_flag_refuse_conversion
				flag = special_marshal
				attributes = {
						diplomacy = 2
						martial = 18
						stewardship = 25
						intrigue = 6
						learning = 1
				}
		}
		new_character = {
				add_trait = proud
				add_trait = cruel
				add_trait = hashut_kdaai
				health = 25
				random_list = {
						25 = { add_trait = ambitious }
						25 = { add_trait = greedy }
						25 = { add_trait = diligent }
						25 = { add_trait = wroth }
				}
			 add_friend = ROOT
		}
		prestige = 500
	}
}

#Hashut sends Great Taurus
character_event = {
	id = DR_chaos_dwarf.43
	desc = EVTDESCDR_chaos_dwarf43
	picture = GFX_evt_great_taurus
	is_triggered_only = yes

	immediate = {
		add_doom_progress_tiny_effect = yes
		change_variable = { which = "hashut_favor" value = 2 }
	}

	option = {
			name = EVTOPTADR_chaos_dwarf43
			add_artifact = great_taurus_mount
			prestige = 250
			clr_character_flag = making_grand_sacrifice_hashut
	}
}

#Hashut shows signs of his favor and visions of glory
character_event = {
	id = DR_chaos_dwarf.44
	desc = EVTDESCDR_chaos_dwarf44
	picture = GFX_evt_hashut_rune
	is_triggered_only = yes

	immediate = {
		add_doom_progress_minor_effect = yes
		change_variable = { which = "hashut_favor" value = 5 }
	}

	option = {
			name = EVTOPTADR_chaos_dwarf44
			piety = 350
			clr_character_flag = making_grand_sacrifice_hashut
	}
}

#Hashut makes you prideful
character_event = {
	id = DR_chaos_dwarf.45
	desc = EVTDESCDR_chaos_dwarf45
	picture = GFX_evt_hashut_rune
	is_triggered_only = yes

	immediate = {
		add_doom_progress_tiny_effect = yes
		change_variable = { which = "hashut_favor" value = 1 }
	}

	option = {
			name = EVTOPTADR_chaos_dwarf45
			add_trait = proud
			prestige = 50
			clr_character_flag = making_grand_sacrifice_hashut
	}
}

#Hashut makes you insane
character_event = {
	id = DR_chaos_dwarf.46
	desc = EVTDESCDR_chaos_dwarf46
	picture = GFX_evt_hashut_rune
	is_triggered_only = yes

	immediate = {
		add_doom_progress_tiny_effect = yes
		change_variable = { which = "hashut_favor" value = 1 }
	}

	option = {
		name = EVTOPTADR_chaos_dwarf46
		hidden_tooltip = { character_event = { id = mutate.5 } } #lunacy
		clr_character_flag = making_grand_sacrifice_hashut
	}
}

#Hashut disfigures you by burning
character_event = {
	id = DR_chaos_dwarf.47
	desc = EVTDESCDR_chaos_dwarf47
	picture = GFX_evt_hashut_rune

	is_triggered_only = yes

	immediate = {
		add_doom_progress_tiny_effect = yes
		change_variable = { which = "hashut_favor" value = -1 }

	}

	option = {
		name = EVTOPTADR_chaos_dwarf47
		add_trait = disfigured
		clr_character_flag = making_grand_sacrifice_hashut
	}

}
#Hashut doesn't answer
character_event = {
	id = DR_chaos_dwarf.48
	desc = EVTDESCDR_chaos_dwarf48
	picture = GFX_evt_hashut_rune
	is_triggered_only = yes

	immediate = {
		change_variable = { which = "hashut_favor" value = -1 }
	}


	option = {
		name = EVTOPTADR_chaos_dwarf48
		prestige = -150
		clr_character_flag = making_grand_sacrifice_hashut
	}
}

#Becoming a Sorcerer-Prophet
character_event = {
	id = DR_chaos_dwarf.49
	desc = EVTDESCDR_chaos_dwarf49
	picture = "GFX_evt_chaos_dwarf_sorcerer"

	capable_only = yes
	min_age = 16
	religion = hashut
	culture_group = dwarf_chaos_group

	trigger = {
		trait = creature_chaos_dwarf
		NOT = { trait = chaos_dwarf_sorcerer }
		religion = hashut
		OR = {
			trait = proud
			trait = cruel
			trait = greedy
			trait = wroth
		}
		check_variable = { which = "hashut_favor" value = 30 }
	}

	mean_time_to_happen = {
		years = 20
		modifier = {
			factor = 0.75
			piety = 750
			}
		modifier = {
			factor = 0.75
			piety = 1500
			}
		modifier = {
			factor = 0.75
			piety = 1750
			}
		modifier = {
			factor = 0.5
			piety = 2500
			}
	}

	option = {
		name = EVTOPTADR_chaos_dwarf49
		add_doom_progress_minor_effect = yes
		prestige = 750
		piety = 450
		add_trait = chaos_dwarf_sorcerer
		magic_lvl_increase_effect = yes
		enable_magic_xp_effect = yes
	}
}


#Slave building decays ( Factory )
character_event = {
	id = DR_chaos_dwarf.50001
	desc = EVTDESC_CD_factory_decays
	picture = GFX_evt_slaves

	only_rulers = yes
	religion = hashut
	culture_group = dwarf_chaos_group

	trigger = {
		capital_holding = {
			has_building = ca_chaos_dwarf_factory_2
		}
	}

	mean_time_to_happen = {
		years = 250

		modifier = { factor = 1.01  stewardship = 10 }
		modifier = { factor = 1.01  stewardship = 15 }
		modifier = { factor = 1.01  stewardship = 20 }
		modifier = { factor = 1.01  stewardship = 25 }
		modifier = { factor = 1.01  stewardship = 30 }
		modifier = { factor = 1.01  stewardship = 35 }
		modifier = { factor = 1.01  stewardship = 40 }
		modifier = { factor = 1.01  stewardship = 45 }
		modifier = { factor = 0.50  NOT = { stewardship = 10 } }
		modifier = { factor = 0.25  NOT = { stewardship = 5 } }
	}

	option = {
		name = EVTOPT_CD_factory_decays
		custom_tooltip = {
			text = chaosdwarffactorysacrifice
			hidden_tooltip = {
				if = {
					limit = {
						OR = {
							is_feudal = yes
							AND = {
								government = chaosdwarf_government
								capital_holding = { holding_type = castle }
							}
						}
					}
					if = {
						limit = {
							capital_holding = { has_building = ca_chaos_dwarf_factory_4 }
						}
						capital_holding = {
								remove_building = ca_chaos_dwarf_factory_4
								add_building = ca_chaos_dwarf_factory_3
						}
						break = yes
					}
					if = {
						limit = {
							capital_holding = { has_building = ca_chaos_dwarf_factory_3 }
							NOT = { capital_holding = { has_building = ca_chaos_dwarf_factory_4 } }
						}
						capital_holding = {
								remove_building = ca_chaos_dwarf_factory_3
								add_building = ca_chaos_dwarf_factory_2
						}
						break = yes
					}
					if = {
						limit = {
							capital_holding = { has_building = ca_chaos_dwarf_factory_2 }
							NOT = { capital_holding = { has_building = ca_chaos_dwarf_factory_3 } }
							NOT = { capital_holding = { has_building = ca_chaos_dwarf_factory_4 } }
						}
						capital_holding = {
							remove_building = ca_chaos_dwarf_factory_2
							add_building = ca_chaos_dwarf_factory_1
						}
						break = yes
					}
					# if = {
						# limit = {
							# capital_holding = { has_building = ca_chaos_dwarf_factory_1}
						# }
						# capital_holding = { remove_building = ca_chaos_dwarf_factory_1 }
						# break = yes
					# }
				}

				if = {
					limit = {
						is_republic = yes
						is_patrician = no
					}
					if = {
						limit = {
							capital_holding = { has_building = ct_chaos_dwarf_factory_4 }
						}
						capital_holding = {
								remove_building = ct_chaos_dwarf_factory_4
								add_building = ct_chaos_dwarf_factory_3
						}
						break = yes
					}
					if = {
						limit = {
							capital_holding = { has_building = ct_chaos_dwarf_factory_3 }
							NOT = { capital_holding = { has_building = ct_chaos_dwarf_factory_4 } }
						}
						capital_holding = {
								remove_building = ct_chaos_dwarf_factory_3
								add_building = ct_chaos_dwarf_factory_2
						}
						break = yes
					}
					if = {
						limit = {
							capital_holding = { has_building = ct_chaos_dwarf_factory_2 }
							NOT = { capital_holding = { has_building = ct_chaos_dwarf_factory_3 } }
							NOT = { capital_holding = { has_building = ct_chaos_dwarf_factory_4 } }
						}
						capital_holding = {
								remove_building = ct_chaos_dwarf_factory_2
								add_building = ct_chaos_dwarf_factory_1
						}
						break = yes
					}
					# if = {
						# limit = {
							# capital_holding = { has_building = ct_chaos_dwarf_factory_1}
						# }
						# capital_holding = { remove_building = ct_chaos_dwarf_factory_1 }
						# break = yes
					# }

				}

				if = {
					limit = {
						is_patrician = yes
					}
					if = {
						limit = {
							family_palace = { has_building = tp_chaos_dwarf_factory_4 }
						}
						family_palace = {
								remove_building = tp_chaos_dwarf_factory_4
								add_building = tp_chaos_dwarf_factory_3
						}
						break = yes
					}
					if = {
						limit = {
							family_palace = { has_building = tp_chaos_dwarf_factory_3 }
							NOT = { capital_holding = { has_building = tp_chaos_dwarf_factory_4 } }
						}
						family_palace = {
								remove_building = tp_chaos_dwarf_factory_3
								add_building = tp_chaos_dwarf_factory_2
						}
						break = yes
					}
					if = {
						limit = {
							family_palace = { has_building = tp_chaos_dwarf_factory_2 }
							NOT = { capital_holding = { has_building = tp_chaos_dwarf_factory_3 } }
							NOT = { capital_holding = { has_building = tp_chaos_dwarf_factory_4 } }
						}
						family_palace = {
								remove_building = tp_chaos_dwarf_factory_2
								add_building = tp_chaos_dwarf_factory_1
						}
						break = yes
					}
					# if = {
						# limit = {
							# family_palace = { has_building = tp_chaos_dwarf_factory_1}
						# }
						# family_palace = { remove_building = tp_chaos_dwarf_factory_1 }
						# break = yes
					# }
				}

				if = {
					limit = {
						OR = {
				is_theocracy = yes
				AND = {
					government = chaosdwarf_government
					capital_holding = { holding_type = temple }
				}
			}
					}
					if = {
						limit = {
							capital_holding = { has_building = tp_chaos_dwarf_factory_4 }
						}
						capital_holding = {
								remove_building = tp_chaos_dwarf_factory_4
								add_building = tp_chaos_dwarf_factory_3
						}
						break = yes
					}
					if = {
						limit = {
							capital_holding = { has_building = tp_chaos_dwarf_factory_3 }
							NOT = { capital_holding = { has_building = tp_chaos_dwarf_factory_4 } }
						}
						capital_holding = {
								remove_building = tp_chaos_dwarf_factory_3
								add_building = tp_chaos_dwarf_factory_2
						}
						break = yes
					}
					if = {
						limit = {
							capital_holding = { has_building = tp_chaos_dwarf_factory_2 }
							NOT = { capital_holding = { has_building = tp_chaos_dwarf_factory_3 } }
							NOT = { capital_holding = { has_building = tp_chaos_dwarf_factory_4 } }
						}
						capital_holding = {
								remove_building = tp_chaos_dwarf_factory_2
								add_building = tp_chaos_dwarf_factory_1
						}
						break = yes
					}
					# if = {
						# limit = {
							# capital_holding = { has_building = tp_chaos_dwarf_factory_1}
						# }
						# capital_holding = { remove_building = tp_chaos_dwarf_factory_1 }
						# break = yes
					# }

				}
			}

		}
		ai_chance = { factor = 1000 }

	}
}


#Slave building decays ( Slave Levy )
character_event = {
	id = DR_chaos_dwarf.51
	desc = EVTDESC_CD_slave_levy_decays
	picture = GFX_evt_slaves

	only_rulers = yes
	religion = hashut
	culture_group = dwarf_chaos_group

	trigger = {
		capital_holding = {
			has_building = ca_chaos_dwarf_slave_levy_2
		}
	}

	mean_time_to_happen = {
		years = 250

		modifier = { factor = 1.01  stewardship = 10 }
		modifier = { factor = 1.01  stewardship = 15 }
		modifier = { factor = 1.01  stewardship = 20 }
		modifier = { factor = 1.01  stewardship = 25 }
		modifier = { factor = 1.01  stewardship = 30 }
		modifier = { factor = 1.01  stewardship = 35 }
		modifier = { factor = 1.01  stewardship = 40 }
		modifier = { factor = 1.01  stewardship = 45 }
		modifier = { factor = 0.50  NOT = { stewardship = 10 } }
		modifier = { factor = 0.25  NOT = { stewardship = 5 } }
	}

	option = {
		name = EVTOPT_CD_slave_levy_decays
		custom_tooltip = {
			text = chaosdwarfslave_levysacrifice
			hidden_tooltip = {
				if = {
					limit = {
						OR = {
							is_feudal = yes
							AND = {
								government = chaosdwarf_government
								capital_holding = { holding_type = castle }
							}
						}
					}
					if = {
						limit = {
							capital_holding = { has_building = ca_chaos_dwarf_slave_levy_4 }
						}
						capital_holding = {
								remove_building = ca_chaos_dwarf_slave_levy_4
								add_building = ca_chaos_dwarf_slave_levy_3
						}
						break = yes
					}
					if = {
						limit = {
							capital_holding = { has_building = ca_chaos_dwarf_slave_levy_3 }
							NOT = { capital_holding = { has_building = ca_chaos_dwarf_slave_levy_4 } }
						}
						capital_holding = {
								remove_building = ca_chaos_dwarf_slave_levy_3
								add_building = ca_chaos_dwarf_slave_levy_2
						}
						break = yes
					}
					if = {
						limit = {
							capital_holding = { has_building = ca_chaos_dwarf_slave_levy_2 }
							NOT = { capital_holding = { has_building = ca_chaos_dwarf_slave_levy_3 } }
							NOT = { capital_holding = { has_building = ca_chaos_dwarf_slave_levy_4 } }
						}
						capital_holding = {
								remove_building = ca_chaos_dwarf_slave_levy_2
								add_building = ca_chaos_dwarf_slave_levy_1
						}
						break = yes
					}
					# if = {
						# limit = {
							# capital_holding = { has_building = ca_chaos_dwarf_slave_levy_1}
						# }
						# capital_holding = { remove_building = ca_chaos_dwarf_slave_levy_1 }
						# break = yes
					# }
				}

				if = {
					limit = {
						is_republic = yes
						is_patrician = no
					}
					if = {
						limit = {
							capital_holding = { has_building = ct_chaos_dwarf_slave_levy_4 }
						}
						capital_holding = {
								remove_building = ct_chaos_dwarf_slave_levy_4
								add_building = ct_chaos_dwarf_slave_levy_3
						}
						break = yes
					}
					if = {
						limit = {
							capital_holding = { has_building = ct_chaos_dwarf_slave_levy_3 }
							NOT = { capital_holding = { has_building = ct_chaos_dwarf_slave_levy_4 } }
						}
						capital_holding = {
								remove_building = ct_chaos_dwarf_slave_levy_3
								add_building = ct_chaos_dwarf_slave_levy_2
						}
						break = yes
					}
					if = {
						limit = {
							capital_holding = { has_building = ct_chaos_dwarf_slave_levy_2 }
							NOT = { capital_holding = { has_building = ct_chaos_dwarf_slave_levy_3 } }
							NOT = { capital_holding = { has_building = ct_chaos_dwarf_slave_levy_4 } }
						}
						capital_holding = {
								remove_building = ct_chaos_dwarf_slave_levy_2
								add_building = ct_chaos_dwarf_slave_levy_1
						}
						break = yes
					}
					# if = {
						# limit = {
							# capital_holding = { has_building = ct_chaos_dwarf_slave_levy_1}
						# }
						# capital_holding = { remove_building = ct_chaos_dwarf_slave_levy_1 }
						# break = yes
					# }

				}

				if = {
					limit = {
						is_patrician = yes
					}
					if = {
						limit = {
							family_palace = { has_building = tp_chaos_dwarf_slave_levy_4 }
						}
						family_palace = {
								remove_building = tp_chaos_dwarf_slave_levy_4
								add_building = tp_chaos_dwarf_slave_levy_3
						}
						break = yes
					}
					if = {
						limit = {
							family_palace = { has_building = tp_chaos_dwarf_slave_levy_3 }
							NOT = { capital_holding = { has_building = tp_chaos_dwarf_slave_levy_4 } }
						}
						family_palace = {
								remove_building = tp_chaos_dwarf_slave_levy_3
								add_building = tp_chaos_dwarf_slave_levy_2
						}
						break = yes
					}
					if = {
						limit = {
							family_palace = { has_building = tp_chaos_dwarf_slave_levy_2 }
							NOT = { capital_holding = { has_building = tp_chaos_dwarf_slave_levy_3 } }
							NOT = { capital_holding = { has_building = tp_chaos_dwarf_slave_levy_4 } }
						}
						family_palace = {
								remove_building = tp_chaos_dwarf_slave_levy_2
								add_building = tp_chaos_dwarf_slave_levy_1
						}
						break = yes
					}
					# if = {
						# limit = {
							# family_palace = { has_building = tp_chaos_dwarf_slave_levy_1}
						# }
						# family_palace = { remove_building = tp_chaos_dwarf_slave_levy_1 }
						# break = yes
					# }
				}

				if = {
					limit = {
						OR = {
							is_theocracy = yes
							AND = {
								government = chaosdwarf_government
								capital_holding = { holding_type = temple }
							}
						}
					}
					if = {
						limit = {
							capital_holding = { has_building = tp_chaos_dwarf_slave_levy_4 }
						}
						capital_holding = {
								remove_building = tp_chaos_dwarf_slave_levy_4
								add_building = tp_chaos_dwarf_slave_levy_3
						}
						break = yes
					}
					if = {
						limit = {
							capital_holding = { has_building = tp_chaos_dwarf_slave_levy_3 }
							NOT = { capital_holding = { has_building = tp_chaos_dwarf_slave_levy_4 } }
						}
						capital_holding = {
								remove_building = tp_chaos_dwarf_slave_levy_3
								add_building = tp_chaos_dwarf_slave_levy_2
						}
						break = yes
					}
					if = {
						limit = {
							capital_holding = { has_building = tp_chaos_dwarf_slave_levy_2 }
							NOT = { capital_holding = { has_building = tp_chaos_dwarf_slave_levy_3 } }
							NOT = { capital_holding = { has_building = tp_chaos_dwarf_slave_levy_4 } }
						}
						capital_holding = {
								remove_building = tp_chaos_dwarf_slave_levy_2
								add_building = tp_chaos_dwarf_slave_levy_1
						}
						break = yes
					}
					# if = {
						# limit = {
							# capital_holding = { has_building = tp_chaos_dwarf_slave_levy_1}
						# }
						# capital_holding = { remove_building = tp_chaos_dwarf_slave_levy_1 }
						# break = yes
					# }

				}
			}

		}
		ai_chance = { factor = 1000 }

	}
}

#Success - K'daai summoned
character_event = {
	id = DR_chaos_dwarf.52
	desc = EVTDESCDR_chaos_dwarf_kdaai_summoned
	picture = GFX_evt_demon_summoning
	is_triggered_only = yes

	immediate = {
		add_doom_progress_tiny_effect = yes
	}

	option = {
		name = EVTOPTADR_chaos_dwarf_kdaai_summoned
		create_character = {
				random_traits = yes
				religion = hashut
				culture = daemon_kdaai
				dynasty = none
				female = no
				age = 1212
				flag = ai_flag_refuse_conversion
				flag = special_marshal
				attributes = {
						diplomacy = 2
						martial = 18
						stewardship = 25
						intrigue = 6
						learning = 1
				}
		}
		new_character = {
				add_trait = proud
				add_trait = cruel
				add_trait = hashut_kdaai
				health = 25
				random_list = {
						25 = { add_trait = ambitious }
						25 = { add_trait = greedy }
						25 = { add_trait = diligent }
						25 = { add_trait = wroth }
				}
			 add_friend = ROOT
		}
		prestige = 500
	}
}

#Success, summoned K'daai
character_event = {
	id = DR_chaos_dwarf.53
	desc = EVTDESCDR_chaos_dwarf_kdaai_summoned_else
	picture = GFX_evt_demon_summoning
	is_triggered_only = yes

	option = { name = EVTOPTADR_chaos_dwarf_kdaai_summoned_else
			FROM = { opinion = { modifier = opinion_grateful
						who = ROOT
						years = 8 } }
	}
}

##Triggered by the "Buy armaments from X" decision
#Buyer chooses what to purchase
character_event = {
	id = DR_order_dwarf.14
	desc = EVTDESC_order_dwarf_buy_stuff
	picture = GFX_evt_dwarf_city

	is_triggered_only = yes

	option = {
		name = EVTOTPA_order_dwarf_buy_weapons
		set_character_flag = od_buy_weapons
		FROM = {
			set_character_flag = buying_order_dwarfs
			character_event = { id = DR_order_dwarf.15 }
		}
		ai_chance = {
			factor = 50
		}
	}

	option = {
		name = EVTOTPB_order_dwarf_buy_hellcannons
		set_character_flag = od_buy_hellcannons
		FROM = {
			set_character_flag = buying_order_dwarfs
			character_event = { id = DR_order_dwarf.15 }
		}
		ai_chance = {
			factor = 50
		}
	}

	option = {
		name = EVTOTPB_order_dwarf_buy_stuff
		clr_character_flag = od_buy_weapons
		clr_character_flag = od_buy_hellcannons
		clr_character_flag = payment_cash
		clr_character_flag = payment_slaves
		clr_character_flag = payment_own_slaves
		clr_character_flag = buying_order_dwarfs
		ai_chance = {
			factor = 0
		}
	}
}

# Dwarf answers ( AI will always answer yes, the player has a choice to decline)...
character_event = {
	id = DR_order_dwarf.15
	picture = GFX_evt_dwarf_city
	desc = {
		trigger = {
			FROM = { has_character_flag = od_buy_weapons }
		}
		text = EVTDESCorder_dwarf_buy_weapons
	}
	desc = {
		trigger = {
			FROM = { has_character_flag = od_buy_hellcannons }
		}
		text = EVTDESCorder_dwarf_buy_hellcannons
	}
	is_triggered_only = yes

	trigger = {
		has_character_flag = buying_order_dwarfs
	}

	option = {
		trigger = {
			FROM = { has_character_flag = od_buy_weapons }
		}
		name = EVTOTPA_order_dwarf_sell_weapons

		FROM = { character_event = { id = DR_order_dwarf.16 } }
		ai_chance = {
			factor = 100
		}
	}

	option = {
		trigger = {
			FROM = { has_character_flag = od_buy_hellcannons }
		}
		name = EVTOTPA_order_dwarf_sell_hellcannons
		FROM = { character_event = { id = DR_order_dwarf.16 } }
		ai_chance = {
			factor = 100
		}
	}

	option = {
		name = EVTOTPB_order_dwarf_sell_nothing
		FROM = {
			clr_character_flag = od_buy_weapons
			clr_character_flag = od_buy_hellcannons
			clr_character_flag = payment_cash
			clr_character_flag = buying_chaos_dwarfs
		}
		clr_character_flag = selling_armaments
		ai_chance = {
			factor = 0
		}
	}
	after = {
		clr_character_flag = buying_order_dwarfs
	}
}

#Buyer chooses payment...
character_event = {
	id = DR_order_dwarf.16
	picture = GFX_evt_dwarf_engineer
	desc = EVTDESC_order_dwarf_payment

	is_triggered_only = yes

	option = {
		name = EVTOTPA_order_dwarf_payment_money
		set_character_flag = payment_cash
		wealth = -100
		FROM = { character_event = { id = DR_order_dwarf.17 } }
		ai_chance = {
			factor = 33
			modifier = {
				factor = 3
				wealth = 150
			}
		}
	}

	option = {
		name = EVTOPTB_order_dwarf_wont_pay
		clr_character_flag = od_buy_weapons
		clr_character_flag = od_buy_hellcannons
		clr_character_flag = payment_cash
		clr_character_flag = payment_slaves
		clr_character_flag = payment_own_slaves
		clr_character_flag = buying_order_dwarfs
		FROM = { clr_character_flag = selling_armaments }
		ai_chance = {
			factor = 0
		}
	}

}

#Dwarf receives payment...
character_event = {
	id = DR_order_dwarf.17
	picture = GFX_evt_dwarf_engineer
	desc = {
		trigger = {
			FROM = { has_character_flag = payment_cash }
		}
		text = EVTDESC_order_dwarf_payment_made_money
	}
	is_triggered_only = yes

	option = {
		trigger = {
			FROM = { has_character_flag = payment_cash  }
		}
		add_character_modifier = { name = recently_sold_order_dwarfs duration = 1826 }
		name = EVTOTPA_order_dwarf_payment_made_money
		wealth = 200
		FROM = { character_event = { id = DR_order_dwarf.18 } }
		clr_character_flag = selling_armaments
	}

	option = {
		trigger = {
			FROM = { has_character_flag = payment_own_slaves  }
		}

		add_character_modifier = { name = recently_sold_order_dwarfs duration = 1826 }
		name = EVTOTPA_order_dwarf_payment_made_own_slaves
		character_event = { id = DR_order_dwarf.19 }
		clr_character_flag = selling_armaments
		FROM = { character_event = { id = DR_order_dwarf.18 } }
	}

	option = {
		trigger = {
			FROM = { has_character_flag = payment_slaves  }
		}
		add_character_modifier = { name = recently_sold_order_dwarfs duration = 1826 }
		clr_character_flag = selling_armaments
		name = EVTOTPA_order_dwarf_payment_made_slaves
		character_event = { id = DR_order_dwarf.19 }
		FROM = { character_event = { id = DR_order_dwarf.18 } }
	}

}

#Buyer receives purchase...
character_event = {
	id = DR_order_dwarf.18
	picture = GFX_evt_dwarf_cannon

	desc = {
		trigger = {
			has_character_flag = od_buy_hellcannons
		}
		text = EVTDESC_order_dwarf_hellcannons_arrived
	}
	desc = {
		trigger = {
			has_character_flag = od_buy_weapons
		}
		text = EVTDESC_order_dwarf_weapons_arrived
	}

	is_triggered_only = yes

	option = {
		trigger = {
			has_character_flag = od_buy_hellcannons
		}
		name = EVTOTPA_order_dwarf_artillery_arrived
		add_character_modifier = { name = recently_brought_from_order_dwarfs duration = 3652 }
		custom_tooltip = {
			text = hellcannon_arrives_capital
			capital_scope = {
				ROOT = {
					spawn_unit = {
						province = PREV
						owner = THIS
						troops = {
							heavy_infantry = { 100 100 }
							artillery = { 50 50 }
						}
					}
				}
			}
		}
		clr_character_flag = od_buy_weapons
		clr_character_flag = od_buy_hellcannons
		clr_character_flag = payment_cash
		clr_character_flag = payment_slaves
		clr_character_flag = payment_own_slaves
		clr_character_flag = buying_order_dwarfs
	}

	option = {
		trigger = {
			has_character_flag = od_buy_weapons
		}
		name = EVTOTPA_order_dwarf_weapons_arrived

		add_character_modifier = { name = recently_brought_from_order_dwarfs duration = 3652 }

		capital_scope = {
			add_province_modifier = { name = order_dwarf_weapons duration = 3652 }
		}

		clr_character_flag = od_buy_weapons
		clr_character_flag = od_buy_hellcannons
		clr_character_flag = payment_cash
		clr_character_flag = payment_slaves
		clr_character_flag = payment_own_slaves
		clr_character_flag = buying_order_dwarfs
	}

}