namespace = DR_universities
################################################
# Standard Universities
# ( Humans only )
################################################
# Child - Wants to study in university
character_event = {
	id = DR_universities.1

	hide_window = yes

	ai = yes
	min_age = 16
	max_age = 35
	capable_only = yes
	prisoner = no

	trigger = {
		is_landed = no
		in_command = no
		trait = creature_human
		OR = {
			is_female = no
			AND = {
				NOR = {
					religion = ormazd
					religion = kitabid
				}
				top_liege = {
					NOR = {
						religion = ormazd
						religion = kitabid
					}
				}

			}
		}
		OR = {
			religion_group = old_world_group
			religion_group = ormazd_gods_group
		}
		NOR = {
				religion = grail
				religion = false_grail
		}
		OR = {
			location = { region = world_old_world }
			location = { region = world_greater_araby }
		}
		NOT = {
			trait = academic
			has_character_flag = wants_educ_university
			has_character_flag = denied_educ_university
			# trait = engineer
			# has_character_flag = wants_eng_university
			# has_character_flag = denied_eng_university
			# has_character_flag = studying_eng_university
		}
		OR = {
			father = {
				trait = creature_human
				OR = {
					religion_group = old_world_group
					religion_group = ormazd_gods_group
				}
				NOR = {
					religion = grail
					religion = false_grail
				}
				NOR = {
					government = nomadic_government
					government = chaos_horde_government
				}
				NOR = {
					government = tribal_government
					government = chaos_host_government
					government = norscan_government
					government = norscan_government_feudal
				}
				is_alive = yes
				is_ruler = yes
				is_liege_of = ROOT
				prisoner = no
				NOT = { trait = incapable }
				ROOT = { host = { character = PREVPREV } }
			}
			mother = {
				trait = creature_human
				OR = {
					religion_group = old_world_group
					religion_group = ormazd_gods_group
				}
				NOR = {
					religion = grail
					religion = false_grail
				}
				NOR = {
					government = nomadic_government
					government = chaos_horde_government
				}
				NOR = {
					government = tribal_government
					government = chaos_host_government
					government = norscan_government
					government = norscan_government_feudal
				}
				is_alive = yes
				is_ruler = yes
				is_liege_of = ROOT
				prisoner = no
				NOT = { trait = incapable }
				ROOT = { host = { character = PREVPREV } }
			}
		}

	}

	mean_time_to_happen = {
		years = 20
		modifier = { factor = 0.5 trait = ambitious }
		modifier = { factor = 2 trait = content }
		modifier = { factor = 0.75 trait = quick }
		modifier = { factor = 1.5 trait = slow }
		modifier = { factor = 0.5 trait = genius }
		modifier = { factor = 2 trait = imbecile }
		modifier = { factor = 0.75 trait = gregarious }
		modifier = { factor = 1.5 trait = shy }
		modifier = { factor = 0.75 trait = diligent }
		modifier = { factor = 1.5 trait = slothful }
		modifier = { factor = 0.75 trait = scholar }
		modifier = { factor = 1.5 is_primary_heir = yes }
		modifier = { factor = 1.5 is_female = yes }
		modifier = { factor = 1.8 NOT = { learning = 2 } }
		modifier = { factor = 1.6 NOT = { learning = 4 } }
		modifier = { factor = 1.4 NOT = { learning = 6 } }
		modifier = { factor = 1.2 NOT = { learning = 8 } }
		modifier = { factor = 0.8 learning = 12 }
		modifier = { factor = 0.8 learning = 14 }
		modifier = { factor = 0.8 learning = 16 }
		modifier = { factor = 0.8 learning = 18 }
	}

	option = { # University of Altdorf
		name = OK
		trigger =	{
			NOR = {
				location = { region = world_old_world_empire_south }
				location = { region = world_old_world_empire_east }
				location = { region = world_old_world_kislev }
				location = { region = world_troll_country }
				location = { region = world_old_world_tilea }
				location = { region = world_old_world_estalia }
				location = { region = world_old_world_border_princes }
				location = { region = world_greater_araby }
			}
		}
		liege = {
			character_event = { id = DR_universities.2 }
			if = {
				limit = { is_female = yes }
				ROOT = { set_character_flag = mother_return_university }
			}
		}
		set_character_flag = wants_educ_university
	}
	option = { # University of Nuln
		name = OK
		trigger =	{
			location = { region = world_old_world_empire_south }
		}
		liege = {
			character_event = { id = DR_universities.3 }
			if = {
				limit = { is_female = yes }
				ROOT = { set_character_flag = mother_return_university }
			}
		}
		set_character_flag = wants_educ_university
	}

	option = { # University of Streissen
		name = OK
		trigger =	{
			location = { region = world_old_world_empire_east }
		}
		liege = {
			character_event = { id = DR_universities.4 }
			if = {
				limit = { is_female = yes }
				ROOT = { set_character_flag = mother_return_university }
			}
		}
		set_character_flag = wants_educ_university
	}

	option = { # University of Praag
		name = OK
		trigger =	{
			location = { region = world_old_world_kislev }
		}
		liege = {
			character_event = { id = DR_universities.5 }
			if = {
				limit = { is_female = yes }
				ROOT = { set_character_flag = mother_return_university }
			}
		}
		set_character_flag = wants_educ_university
	}

	option = { # University of Remas
		name = OK
		trigger =	{
			OR = {
				location = { region = world_old_world_tilea }
				location = { region = world_old_world_estalia }
				location = { region = world_old_world_border_princes }
			}
		}
		liege = {
			character_event = { id = DR_universities.6 }
			if = {
				limit = { is_female = yes }
				ROOT = { set_character_flag = mother_return_university }
			}
		}
		set_character_flag = wants_educ_university
	}

	option = { # University of Miragliano
		name = OK
		trigger =	{
			OR = {
				location = { region = world_old_world_tilea }
			}
		}
		liege = {
			character_event = { id = DR_universities.7 }
			if = {
				limit = { is_female = yes }
				ROOT = { set_character_flag = mother_return_university }
			}
		}
		set_character_flag = wants_educ_university
	}

	option = { # University of Martek
		name = OK
		trigger = { is_female = no
			OR = {
				location = { region = world_greater_araby }
				location = { region = world_old_world_border_princes }
			}
		}
		liege = {
			character_event = { id = DR_universities.8 }
			if = {
				limit = { is_female = yes }
				ROOT = { set_character_flag = mother_return_university }
			}
		}
		set_character_flag = wants_educ_university
	}

	option = { # University of Magritta
		name = OK
		trigger =	{
			OR = {
				location = { region = world_old_world_estalia }
			}
		}
		liege = {
			character_event = { id = DR_universities.9 }
			if = {
				limit = { is_female = yes }
				ROOT = { set_character_flag = mother_return_university }
			}
		}
		set_character_flag = wants_educ_university
	}
}
# Father - Child wants to study in University of Altdorf
character_event = {
	id = DR_universities.2
	desc = EVTDESCDR_universities.2
	picture = GFX_evt_son_asking_father

	is_triggered_only = yes

	option = { # Allow
		name = EVTOPTADR_universities.2
		d_university_of_altdorf = {
			holder_scope = {
				FROM = {
					move_character = PREV
				}
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = { id = DR_universities.24 days = 1460 }
			}
		}
		prestige = 50
		scaled_wealth = -0.10
	}
	option = { # Deny
		name = EVTOPTBDR_universities.2
		FROM = {
			opinion = { modifier = opinion_very_disappointed years = 1 who = ROOT }
			clr_character_flag = wants_educ_university
			set_character_flag = denied_educ_university
		}
		prestige = -50
	}
}
# Father - Child wants to study in University of Nuln
character_event = {
	id = DR_universities.3
	desc = EVTDESCDR_universities.3
	picture = GFX_evt_son_asking_father

	is_triggered_only = yes

	option = { # Allow
		name = EVTOPTADR_universities.3
		d_university_of_nuln = {
			holder_scope = {
				FROM = {
					move_character = PREV
				}
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = { id = DR_universities.24 days = 1460 }
			}
		}
		prestige = 50
		scaled_wealth = -0.10
	}
	option = { # Deny
		name = EVTOPTBDR_universities.3
		FROM = {
			opinion = { modifier = opinion_very_disappointed years = 1 who = ROOT }
			clr_character_flag = wants_educ_university
			set_character_flag = denied_educ_university
		}
		prestige = -50
	}
}

# Father - Child wants to study in University of Streissen
character_event = {
	id = DR_universities.4
	desc = EVTDESCDR_universities.4
	picture = GFX_evt_son_asking_father

	is_triggered_only = yes

	option = { # Allow
		name = EVTOPTADR_universities.3
		d_university_of_streissen = {
			holder_scope = {
				FROM = {
					move_character = PREV
				}
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = { id = DR_universities.24 days = 1460 }
			}
		}
		prestige = 50
		scaled_wealth = -0.10
	}
	option = { # Deny
		name = EVTOPTBDR_universities.3
		FROM = {
			opinion = { modifier = opinion_very_disappointed years = 1 who = ROOT }
			clr_character_flag = wants_educ_university
			set_character_flag = denied_educ_university
		}
		prestige = -50
	}
}

# Father - Child wants to study in University of Praag
character_event = {
	id = DR_universities.5
	desc = EVTDESCDR_universities.5
	picture = GFX_evt_son_asking_father

	is_triggered_only = yes

	option = { # Allow
		name = EVTOPTADR_universities.3
		d_university_of_praag = {
			holder_scope = {
				FROM = {
					move_character = PREV
				}
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = { id = DR_universities.24 days = 1460 }
			}
		}
		prestige = 50
		scaled_wealth = -0.10
	}
	option = { # Deny
		name = EVTOPTBDR_universities.3
		FROM = {
			opinion = { modifier = opinion_very_disappointed years = 1 who = ROOT }
			clr_character_flag = wants_educ_university
			set_character_flag = denied_educ_university
		}
		prestige = -50
	}
}

# Father - Child wants to study in University of Remas
character_event = {
	id = DR_universities.6
	desc = EVTDESCDR_universities.6
	picture = GFX_evt_son_asking_father

	is_triggered_only = yes

	option = { # Allow
		name = EVTOPTADR_universities.3
		d_university_of_remas = {
			holder_scope = {
				FROM = {
					move_character = PREV
				}
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = { id = DR_universities.24 days = 1460 }
			}
		}
		prestige = 50
		scaled_wealth = -0.10
	}
	option = { # Deny
		name = EVTOPTBDR_universities.3
		FROM = {
			opinion = { modifier = opinion_very_disappointed years = 1 who = ROOT }
			clr_character_flag = wants_educ_university
			set_character_flag = denied_educ_university
		}
		prestige = -50
	}
}

# Father - Child wants to study in University of Miragliano
character_event = {
	id = DR_universities.7
	desc = EVTDESCDR_universities.7
	picture = GFX_evt_son_asking_father

	is_triggered_only = yes

	option = { # Allow
		name = EVTOPTADR_universities.3
		d_university_of_miragliano = {
			holder_scope = {
				FROM = {
					move_character = PREV
				}
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = { id = DR_universities.24 days = 1460 }
			}
		}
		prestige = 50
		scaled_wealth = -0.10
	}
	option = { # Deny
		name = EVTOPTBDR_universities.3
		FROM = {
			opinion = { modifier = opinion_very_disappointed years = 1 who = ROOT }
			clr_character_flag = wants_educ_university
			set_character_flag = denied_educ_university
		}
		prestige = -50
	}
}

# Father - Child wants to study in University of Martek
character_event = {
	id = DR_universities.8
	desc = EVTDESCDR_universities.8
	picture = GFX_evt_son_asking_father

	is_triggered_only = yes

	option = { # Allow
		name = EVTOPTADR_universities.3
		d_university_of_martek = {
			holder_scope = {
				FROM = {
					move_character = PREV
				}
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = { id = DR_universities.24 days = 1460 }
			}
		}
		prestige = 50
		scaled_wealth = -0.30
	}
	option = { # Deny
		name = EVTOPTBDR_universities.3
		FROM = {
			opinion = { modifier = opinion_very_disappointed years = 1 who = ROOT }
			clr_character_flag = wants_educ_university
			set_character_flag = denied_educ_university
		}
		prestige = -50
	}
}

# Father - Child wants to study in University of Magritta
character_event = {
	id = DR_universities.9
	desc = EVTDESCDR_universities.9
	picture = GFX_evt_son_asking_father

	is_triggered_only = yes

	option = { # Allow
		name = EVTOPTADR_universities.3
		d_university_of_magritta = {
			holder_scope = {
				FROM = {
					move_character = PREV
				}
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = { id = DR_universities.24 days = 1460 }
			}
		}
		prestige = 50
		scaled_wealth = -0.10
	}
	option = { # Deny
		name = EVTOPTBDR_universities.3
		FROM = {
			opinion = { modifier = opinion_very_disappointed years = 1 who = ROOT }
			clr_character_flag = wants_educ_university
			set_character_flag = denied_educ_university
		}
		prestige = -50
	}
}

# Child - Child returns a drunkard
character_event = {
	id = DR_universities.10

	hide_window = yes
	has_character_flag = studying_educ_university

	trigger = {
		has_character_flag = studying_educ_university
		NOT = { trait = drunkard }
	}

	mean_time_to_happen = {
		years = 13
		modifier = { factor = 0.75 trait = gluttonous }
		modifier = { factor = 1.25 trait = temperate }
	}

	immediate = {
		if = {
			limit = { has_character_flag = mother_return_university }
			mother = { character_event = { id = DR_universities.11 }  }
		}
		if = {
			limit = { NOT = { has_character_flag = mother_return_university } }
			father = { character_event = { id = DR_universities.11 } }
		}
		clr_character_flag = studying_educ_university
		clr_character_flag = mother_return_university
	}

	option = {
		name = OK
	}
}
# Father - Child returns a drunkard
character_event = {
	id = DR_universities.11
	desc = EVTDESCDR_universities.11
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTADR_universities.11
		FROM = {
			move_character = ROOT
			add_trait = drunkard
			add_trait = academic
		}
	}
}
# Child - Child returns better educated
character_event = {
	id = DR_universities.12

	hide_window = yes
	has_character_flag = studying_educ_university

	trigger = {
		has_character_flag = studying_educ_university
		NOT = { trait = elusive_shadow }
		NOT = { trait = grey_eminence }
		NOT = { trait = midas_touched }
		NOT = { trait = mastermind_theologian }
		OR = {
			trait = amateurish_plotter
			trait = flamboyant_schemer
			trait = intricate_webweaver
			trait = naive_appeaser
			trait = underhanded_rogue
			trait = charismatic_negotiator
			trait = indulgent_wastrel
			trait = thrifty_clerk
			trait = fortune_builder
			trait = detached_priest
			trait = martial_cleric
			trait = scholarly_theologian
		}
	}

	mean_time_to_happen = {
		years = 13
		modifier = { factor = 0.75 trait = diligent }
		modifier = { factor = 1.25 trait = slothful }
	}

	immediate = {
		if = {
			limit = { has_character_flag = mother_return_university }
			mother = { character_event = { id = DR_universities.13 }  }
		}
		if = {
			limit = { NOT = { has_character_flag = mother_return_university } }
			father = { character_event = { id = DR_universities.13 } }
		}
		clr_character_flag = studying_educ_university
		clr_character_flag = mother_return_university
	}

	option = {
		name = OK
	}
}
# Father - Child returns better educated
character_event = {
	id = DR_universities.13
	desc = EVTDESCDR_universities.13
	picture = GFX_evt_council

	is_triggered_only = yes

	option = {
		name = EVTOPTADR_universities.13
		FROM = {
			move_character = ROOT
			if = {
				limit = { trait = intricate_webweaver }
				remove_trait = intricate_webweaver
				add_trait = elusive_shadow
			}
			if = {
				limit = { trait = flamboyant_schemer }
				remove_trait = flamboyant_schemer
				add_trait = intricate_webweaver
			}
			if = {
				limit = { trait = amateurish_plotter }
				remove_trait = amateurish_plotter
				add_trait = flamboyant_schemer
			}
			if = {
				limit = { trait = charismatic_negotiator }
				remove_trait = charismatic_negotiator
				add_trait = grey_eminence
			}
			if = {
				limit = { trait = underhanded_rogue }
				remove_trait = underhanded_rogue
				add_trait = charismatic_negotiator
			}
			if = {
				limit = { trait = naive_appeaser }
				remove_trait = naive_appeaser
				add_trait = underhanded_rogue
			}
			if = {
				limit = { trait = fortune_builder }
				remove_trait = fortune_builder
				add_trait = midas_touched
			}
			if = {
				limit = { trait = thrifty_clerk }
				remove_trait = thrifty_clerk
				add_trait = fortune_builder
			}
			if = {
				limit = { trait = indulgent_wastrel }
				remove_trait = indulgent_wastrel
				add_trait = thrifty_clerk
			}
			if = {
				limit = { trait = scholarly_theologian }
				remove_trait = scholarly_theologian
				add_trait = mastermind_theologian
			}
			if = {
				limit = { trait = martial_cleric }
				remove_trait = martial_cleric
				add_trait = scholarly_theologian
			}
			if = {
				limit = { trait = detached_priest }
				remove_trait = detached_priest
				add_trait = martial_cleric
			}
			add_trait = academic
		}
	}
}
# Child - Child returns depressed
character_event = {
	id = DR_universities.14

	hide_window = yes
	has_character_flag = studying_educ_university

	trigger = {
		has_character_flag = studying_educ_university
		NOT = { trait = depressed }
	}

	mean_time_to_happen = {
		years = 13
		modifier = { factor = 0.75 trait = kind }
		modifier = { factor = 1.25 trait = envious }
	}

	immediate = {
		if = {
			limit = { has_character_flag = mother_return_university }
			mother = { character_event = { id = DR_universities.15 }  }
		}
		if = {
			limit = { NOT = { has_character_flag = mother_return_university } }
			father = { character_event = { id = DR_universities.15 } }
		}
		clr_character_flag = studying_educ_university
		clr_character_flag = mother_return_university
	}

	option = {
		name = OK
	}
}
# Father - Child returns depressed
character_event = {
	id = DR_universities.15
	desc = EVTDESCDR_universities.15
	picture = GFX_evt_shadow

	is_triggered_only = yes

	option = {
		name = EVTOPTADR_universities.15
		FROM = {
			move_character = ROOT
			add_trait = depressed
			add_trait = academic
		}
	}
}
# Child - Child returns married
character_event = {
	id = DR_universities.16

	hide_window = yes
	has_character_flag = studying_educ_university

	trigger = {
		has_character_flag = studying_educ_university
		is_married = no
	}

	mean_time_to_happen = {
		years = 13
		modifier = { factor = 0.75 trait = lustful }
		modifier = { factor = 1.25 trait = chaste }
	}

	immediate = {
		if = {
			limit = { has_character_flag = mother_return_university }
			mother = { character_event = { id = DR_universities.17 }  }
		}
		if = {
			limit = { NOT = { has_character_flag = mother_return_university } }
			father = { character_event = { id = DR_universities.17 } }
		}
		clr_character_flag = studying_educ_university
		clr_character_flag = mother_return_university
	}

	option = {
		name = OK
	}
}
# Father - Child returns married
character_event = {
	id = DR_universities.17
	desc = EVTDESCDR_universities.17
	picture = GFX_evt_marriage

	is_triggered_only = yes

	option = {
		name = EVTOPTADR_universities.17
		trigger = { FROM = { is_female = no } }
		create_character = {
			random_traits = yes
			dynasty = NONE
			female = yes
			age = 18
		}
		new_character = {
			# Set Racial Trait
			character_event = {
			  id = aiclean.31
			}
			add_spouse = FROM
			if = {
				limit = { FROM = { location = { region = world_old_world_empire } } }
				random_list = {
					50 = { religion = sigmarite }
					5 = { religion = myrmidian }
					5 = { religion = shallyan }
					10 = { religion = ulrican }
					10 = { religion = taalite }
					10 = { religion = manannite }
					5 = { religion = morrian }
				}
				random_list = {
					30 = { culture = reiklander }
					10 = { culture = wissenlander }
					10 = { culture = averlander }
					10 = { culture = middenlander }
					10 = { culture = westerlander }
					10 = { culture = ostlander }
					10 = { culture = hochlander }
					10 = { culture = talabeclander }
				}
			}
			if = {
				limit = {
					FROM = {
					location = {
						OR = {
							region = world_old_world_kislev
							region = world_troll_country
							}
						}
					}
				}
				random_list = {
					50 = { religion = kislev_gods }
					30 = { religion = northern_gods }
					20 = { religion = ulrican }
				}
				random_list = {
					50 = { culture = gospodar }
					40 = { culture = kislevite }
					10 = { culture = ungol }
				}
			}
			if = {
				limit = { FROM = { location = { region = world_old_world_tilea } } }
				random_list = {
					90 = { religion = myrmidian }
					5 = { religion = taalite }
					5 = { religion = shallyan }
				}
				random_list = {
					30 = { culture = reman }
					30 = { culture = miraglian }
					10 = { culture = myken }
					10 = { culture = lucian }
					10 = { culture = tobaran }
					10 = { culture = umbrian }
				}
			}
			if = {
				limit = { FROM = { location = { region = world_old_world_estalia } } }
				random_list = {
					90 = { religion = myrmidian }
					10 = { religion = shallyan }
				}
				random_list = {
					30 = { culture = astur }
					30 = { culture = tigarrese }
					10 = { culture = avilian }
					10 = { culture = galice }
					10 = { culture = obregonese }
					10 = { culture = norteno }
				}
			}
			if = {
				limit = { FROM = { location = { region = world_greater_araby } } }
				random_list = {
					90 = { religion = ormazd }
					10 = { religion = myrmidian }
				}
				random_list = {
					30 = { culture = cophic }
					30 = { culture = ramaccan }
					10 = { culture = medean }
					10 = { culture = tevari }
					10 = { culture = bayaji }
					10 = { culture = wasai }
				}
			}
		}
		FROM = {
			move_character = ROOT
			add_trait = academic
		}
	}
	option = {
		name = EVTOPTBDR_universities.17
		trigger = { FROM = { is_female = yes } }
		create_character = {
			random_traits = yes
			dynasty = NONE
			female = no
			age = 18
		}
		new_character = {
			# Set Racial Trait
			character_event = {
			  id = aiclean.31
			}
			add_spouse_matrilineal = FROM
			if = {
				limit = { FROM = { location = { region = world_old_world_empire } } }
				random_list = {
					50 = { religion = sigmarite }
					5 = { religion = myrmidian }
					5 = { religion = shallyan }
					10 = { religion = ulrican }
					10 = { religion = taalite }
					10 = { religion = manannite }
					5 = { religion = morrian }
				}
				random_list = {
					30 = { culture = reiklander }
					10 = { culture = wissenlander }
					10 = { culture = averlander }
					10 = { culture = middenlander }
					10 = { culture = westerlander }
					10 = { culture = ostlander }
					10 = { culture = hochlander }
					10 = { culture = talabeclander }
				}
			}
			if = {
				limit = {
					FROM = {
					location = {
						OR = {
							region = world_old_world_kislev
							region = world_troll_country
							}
						}
					}
				}
				random_list = {
					50 = { religion = kislev_gods }
					30 = { religion = northern_gods }
					20 = { religion = ulrican }
				}
				random_list = {
					50 = { culture = gospodar }
					40 = { culture = kislevite }
					10 = { culture = ungol }
				}
			}
			if = {
				limit = { FROM = { location = { region = world_old_world_tilea } } }
				random_list = {
					90 = { religion = myrmidian }
					5 = { religion = taalite }
					5 = { religion = shallyan }
				}
				random_list = {
					30 = { culture = reman }
					30 = { culture = miraglian }
					10 = { culture = myken }
					10 = { culture = lucian }
					10 = { culture = tobaran }
					10 = { culture = umbrian }
				}
			}
			if = {
				limit = { FROM = { location = { region = world_old_world_estalia } } }
				random_list = {
					90 = { religion = myrmidian }
					10 = { religion = shallyan }
				}
				random_list = {
					30 = { culture = astur }
					30 = { culture = tigarrese }
					10 = { culture = avilian }
					10 = { culture = galice }
					10 = { culture = obregonese }
					10 = { culture = norteno }
				}
			}
			if = {
				limit = { FROM = { location = { region = world_greater_araby } } }
				random_list = {
					90 = { religion = ormazd }
					10 = { religion = myrmidian }
				}
				random_list = {
					30 = { culture = cophic }
					30 = { culture = ramaccan }
					10 = { culture = medean }
					10 = { culture = tevari }
					10 = { culture = bayaji }
					10 = { culture = wasai }
				}
			}
		}
		FROM = {
			move_character = ROOT
			add_trait = academic
		}
	}
}
# Child - Child returns ill
character_event = {
	id = DR_universities.18

	hide_window = yes
	has_character_flag = studying_educ_university

	trigger = {
		has_character_flag = studying_educ_university
		NOT = { trait = ill }
	}

	mean_time_to_happen = {
		years = 13
		modifier = { factor = 0.75 trait = weak }
		modifier = { factor = 1.25 is_strong_trigger = yes }
	}

	immediate = {
		if = {
			limit = { has_character_flag = mother_return_university }
			mother = { character_event = { id = DR_universities.19 }  }
		}
		if = {
			limit = { NOT = { has_character_flag = mother_return_university } }
			father = { character_event = { id = DR_universities.19 } }
		}
		clr_character_flag = studying_educ_university
		clr_character_flag = mother_return_university
	}

	option = {
		name = OK
	}
}
# Father - Child returns ill
character_event = {
	id = DR_universities.19
	desc = EVTDESCDR_universities.19
	picture = GFX_evt_illness

	is_triggered_only = yes

	option = {
		name = EVTOPTADR_universities.19
		FROM = {
			move_character = ROOT
			if = {
				limit = {
					NOT = {
						has_dlc = "Reapers"
					}
				}
				add_trait = ill
			}
			if = {
				limit = {
					has_dlc = "Reapers"
				}
				add_symptom_effect = yes
			}
		}
	}
}
# Child - Son returns scholar
character_event = {
	id = DR_universities.20

	hide_window = yes
	has_character_flag = studying_educ_university

	trigger = {
		has_character_flag = studying_educ_university
		NOT = { trait = scholar }
	}

	mean_time_to_happen = {
		years = 13
		modifier = { factor = 0.75 trait = shy }
		modifier = { factor = 1.25 trait = gregarious }
	}

	immediate = {
		if = {
			limit = { has_character_flag = mother_return_university }
			mother = { character_event = { id = DR_universities.21 }  }
		}
		if = {
			limit = { NOT = { has_character_flag = mother_return_university } }
			father = { character_event = { id = DR_universities.21 } }
		}
		clr_character_flag = studying_educ_university
		clr_character_flag = mother_return_university
	}

	option = {
		name = OK
	}
}
# Father - Child returns scholar
character_event = {
	id = DR_universities.21
	desc = EVTDESCDR_universities.21
	picture = GFX_evt_library

	is_triggered_only = yes

	option = {
		name = EVTOPTADR_universities.21
		FROM = {
			move_character = ROOT
			add_trait = scholar
		}
	}
}
# Child - Child returns hedonist
character_event = {
	id = DR_universities.22

	hide_window = yes
	has_character_flag = studying_educ_university

	trigger = {
		has_character_flag = studying_educ_university
		NOT = { trait = hedonist }
	}

	mean_time_to_happen = {
		years = 13
		modifier = { factor = 0.75 trait = lustful }
		modifier = { factor = 1.25 trait = chaste }
	}

	immediate = {
		if = {
			limit = { has_character_flag = mother_return_university }
			mother = { character_event = { id = DR_universities.23 }  }
		}
		if = {
			limit = { NOT = { has_character_flag = mother_return_university } }
			father = { character_event = { id = DR_universities.23 } }
		}
		clr_character_flag = studying_educ_university
		clr_character_flag = mother_return_university
	}

	option = {
		name = OK
	}
}
# Father - Child returns hedonist
character_event = {
	id = DR_universities.23
	desc = EVTDESCDR_universities.23
	picture = GFX_evt_brothel

	is_triggered_only = yes

	option = {
		name = EVTOPTADR_universities.23
		FROM = {
			move_character = ROOT
			add_trait = academic
			add_trait = hedonist
		}
	}
}

# Child - Studied a few years
character_event = {
	id = DR_universities.24

	is_triggered_only = yes
	hide_window = yes

	trigger = {
		has_character_flag = wants_educ_university
	}

	immediate = {
		set_character_flag = studying_educ_university
		clr_character_flag = wants_educ_university
	}

	option = {
		name = OK
	}
}

# Child - Father dies and you are heir
character_event = {
	id = DR_universities.30
	desc = EVTDESCDR_universities.30
	picture = GFX_evt_death

	min_age = 15
	capable_only = yes
	prisoner = no
	# ai = no

	trigger = {
		OR = {
			has_character_flag = wants_educ_university
			has_character_flag = studying_educ_university
		}
		OR = {
			mother = { is_alive = no  }
			father = { is_alive = no }
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		clr_character_flag = wants_educ_university
		clr_character_flag = studying_educ_university
	}

	option = {
		name = EVTOPTADR_universities.30
		add_trait = academic
		clr_character_flag = mother_return_university
	}
}

# Send son to University decision follow-up event (child)
character_event = {
	id = DR_universities.31

	is_triggered_only = yes
	hide_window = yes

	option = {
		set_character_flag = wants_educ_university
		if = {
			limit = { has_character_flag = mother_return_university }
			mother = { character_event = { id = DR_universities.32 } }
		}
		if = {
			limit = { NOT = { has_character_flag = mother_return_university } }
			father = { character_event = { id = DR_universities.32 } }
		}
	}
}

# Send son to University decision follow-up event (father)
character_event = {
	id = DR_universities.32

	desc = EVTDESCDR_universities.31
	picture = GFX_evt_throne_room
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes


	option = { # University of Altdorf
		name = EVTOPTADR_universities.31
		trigger =	{
			OR = {
				location = { region = world_old_world_empire_south }
				location = { region = world_old_world_empire_east }
				location = { region = world_old_world_empire_north }
				location = { region = world_old_world_empire_wasteland }
				location = { region = world_old_world_kislev }
				location = { region = world_old_world_border_princes }
				location = { region = world_greater_araby }
			}
		}
		d_university_of_altdorf = {
			holder_scope = {
				FROM = {
					move_character = PREV
				}
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = { id = DR_universities.24 days = 1460 }
			}
		}
		prestige = 50
		scaled_wealth = -0.10
	}
	option = { # University of Nuln
		name = EVTOPTBDR_universities.31
		trigger =	{
			OR = {
				location = { region = world_old_world_empire_south }
				location = { region = world_old_world_empire_wasteland }
				location = { region = world_old_world_tilea }
			}
		}
		d_university_of_nuln = {
			holder_scope = {
				FROM = {
					move_character = PREV
				}
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = { id = DR_universities.24 days = 1460 }
			}
		}
		prestige = 50
		scaled_wealth = -0.10
	}

	option = { # University of Streissen
		name = EVTOPTCDR_universities.31
		trigger =	{
			OR = {
				location = { region = world_old_world_empire_east }
				location = { region = world_old_world_kislev }
			}
		}
		d_university_of_streissen = {
			holder_scope = {
				FROM = {
					move_character = PREV
				}
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = { id = DR_universities.24 days = 1460 }
			}
		}
		prestige = 50
		scaled_wealth = -0.10
	}

	option = { # University of Praag
		name = EVTOPTDDR_universities.31
		trigger =	{
			OR = {
				location = { region = world_old_world_empire_north }
				location = { region = world_old_world_empire_east }
				location = { region = world_old_world_kislev }
			}
		}
		d_university_of_praag = {
			holder_scope = {
				FROM = {
					move_character = PREV
				}
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = { id = DR_universities.24 days = 1460 }
			}
		}
		prestige = 50
		scaled_wealth = -0.10
	}

	option = { # University of Remas
		name = EVTOPTEDR_universities.31
		trigger =	{
			OR = {
				location = { region = world_old_world_tilea }
				location = { region = world_old_world_estalia }
				location = { region = world_old_world_border_princes }
			}
		}
		d_university_of_remas = {
			holder_scope = {
				FROM = {
					move_character = PREV
				}
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = { id = DR_universities.24 days = 1460 }
			}
		}
		prestige = 50
		scaled_wealth = -0.10
	}

	option = { # University of Miragliano
		name = EVTOPTFDR_universities.31
		trigger =	{
			OR = {
				location = { region = world_old_world_empire_south }
				location = { region = world_old_world_empire_wasteland }
				location = { region = world_old_world_tilea }
				location = { region = world_old_world_border_princes }
			}
		}
		d_university_of_miragliano = {
			holder_scope = {
				FROM = {
					move_character = PREV
				}
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = { id = DR_universities.24 days = 1460 }
			}
		}
		prestige = 50
		scaled_wealth = -0.10
	}

	option = { # University of Martek
		name = EVTOPTGDR_universities.31
		trigger =	{
			OR = {
				location = { region = world_greater_araby }
				location = { region = world_old_world_estalia }
			}
		}
		d_university_of_martek = {
			holder_scope = {
				FROM = {
					move_character = PREV
				}
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = { id = DR_universities.24 days = 1460 }
			}
		}
		prestige = 50
		scaled_wealth = -0.10
	}

	option = { # University of Magritta
		name = EVTOPTHDR_universities.31
		trigger =	{
			OR = {
				location = { region = world_greater_araby }
				location = { region = world_old_world_estalia }
			}
		}
		d_university_of_magritta = {
			holder_scope = {
				FROM = {
					move_character = PREV
				}
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = { id = DR_universities.24 days = 1460 }
			}
		}
		prestige = 50
		scaled_wealth = -0.10
	}
	option = { # On second thoughts no
		name = EVTOPTIDR_universities.31
		FROM = {
			clr_character_flag = wants_educ_university
		}
		prestige = -25
	}
}

####Arabyan scholarship addition

# Child - Child returns better educated
character_event = {
	id = DR_universities.33

	hide_window = yes
	has_character_flag = studying_educ_university

	trigger = {
		has_character_flag = studying_educ_university
		learning = 15
		location = {
			OR = {
				religion = ormazd
				religion = kitabid
			}
		}
		OR = {
			religion = ormazd
			religion = kitabid
		}
		OR = {
			trait = magic_potential_1
			trait = magic_potential_2
			trait = magic_potential_3
			trait = magic_potential_4
			has_character_flag = magic_potential_flag_1
			has_character_flag = magic_potential_flag_2
			has_character_flag = magic_potential_flag_3
			has_character_flag = magic_potential_flag_4
		}
		NOR = {
			has_character_modifier = magic_power_1
			has_character_modifier = magic_power_2
			has_character_modifier = magic_power_3
			has_character_modifier = magic_power_4
		}
	}

	mean_time_to_happen = {
		years = 11
		modifier = { factor = 0.75 trait = diligent }
		modifier = { factor = 0.75 trait = magic_potential_3 }
		modifier = { factor = 0.75 trait = magic_potential_4 }
		modifier = { factor = 0.8 has_character_flag = magic_potential_flag_3 }
		modifier = { factor = 0.8 has_character_flag = magic_potential_flag_4 }
		modifier = { factor = 1.25 trait = slothful }
	}

	immediate = {
		father = { character_event = { id = DR_universities.34 } }
		random_list = { 40 = { add_trait = lore_fire }
				30 = { add_trait = lore_light }
				20 = { add_trait = lore_metal }
				10 = { add_trait = lore_heavens }
				 }
		clr_character_flag = studying_educ_university
	}
}
# Father - Child returns better educated
character_event = {
	id = DR_universities.34
	desc = EVTDESCDR_universities.33
	picture = GFX_evt_apprentice

	is_triggered_only = yes

	option = {
		name = EVTOPTADR_universities.33
		prestige = 100
		FROM = {
			move_character = ROOT
			if = {
				limit = { trait = intricate_webweaver }
				remove_trait = intricate_webweaver
				add_trait = elusive_shadow
			}
			if = {
				limit = { trait = flamboyant_schemer }
				remove_trait = flamboyant_schemer
				add_trait = intricate_webweaver
			}
			if = {
				limit = { trait = amateurish_plotter }
				remove_trait = amateurish_plotter
				add_trait = flamboyant_schemer
			}
			if = {
				limit = { trait = charismatic_negotiator }
				remove_trait = charismatic_negotiator
				add_trait = grey_eminence
			}
			if = {
				limit = { trait = underhanded_rogue }
				remove_trait = underhanded_rogue
				add_trait = charismatic_negotiator
			}
			if = {
				limit = { trait = naive_appeaser }
				remove_trait = naive_appeaser
				add_trait = underhanded_rogue
			}
			if = {
				limit = { trait = fortune_builder }
				remove_trait = fortune_builder
				add_trait = midas_touched
			}
			if = {
				limit = { trait = thrifty_clerk }
				remove_trait = thrifty_clerk
				add_trait = fortune_builder
			}
			if = {
				limit = { trait = indulgent_wastrel }
				remove_trait = indulgent_wastrel
				add_trait = thrifty_clerk
			}
			if = {
				limit = { trait = scholarly_theologian }
				remove_trait = scholarly_theologian
				add_trait = mastermind_theologian
			}
			if = {
				limit = { trait = martial_cleric }
				remove_trait = martial_cleric
				add_trait = scholarly_theologian
			}
			if = {
				limit = { trait = detached_priest }
				remove_trait = detached_priest
				add_trait = martial_cleric
			}
			add_trait = arabyan_scholar
			magic_power_random_effect = yes
			enable_magic_xp_effect = yes
		if = { limit = { has_character_flag = magic_potential_flag_4 }
				add_trait = magic_potential_4
				clr_character_flag = magic_potential_flag_4 }
		if = { limit = { has_character_flag = magic_potential_flag_3 }
				add_trait = magic_potential_3
				clr_character_flag = magic_potential_flag_3 }
		if = { limit = { has_character_flag = magic_potential_flag_2 }
				add_trait = magic_potential_2
				clr_character_flag = magic_potential_flag_2 }
		if = { limit = { has_character_flag = magic_potential_flag_1 }
				add_trait = magic_potential_1
				clr_character_flag = magic_potential_flag_1 }
		}
	}
}

################################################
# Engineers and Engineering Schools
################################################
#Engineer title gained for the Master Engineer ( on_actions )
character_event = {
	id = DR_universities.131

	is_triggered_only = yes

	hide_window = yes

	trigger = {
		has_landed_title = d_imperial_engineers_school
		NOT = { trait = engineer }
	}

	# mean_time_to_happen = {
		# months = 1
	# }

	option = {
		name = OK
		add_trait = engineer
		prestige = 25
	}
}

#Requested engineer from the Imperial Engineering School arrives
letter_event = {
	id = DR_universities.132
	desc = EVTDESCDR_universities.132

	is_triggered_only = yes

	option = {
		name = "EVTOPTADR_universities.132"
		random_playable_ruler = { #This picks a random culture
			limit = {
				religion_group = ROOT
				#Known engineers
				OR = {
					culture_group = imperial_group
					culture_group = tilean_group
				}
			}
			ROOT = {
				create_random_steward = {
					random_traits = yes
					trait = engineer
					dynasty = none
					female = no
					culture = PREV
					religion = PREV
				}
				new_character = {
					# Set Racial Trait
					character_event = {
					  id = aiclean.31
					}
					remove_trait = imbecile
					remove_trait = inbred
					remove_trait = slow
					remove_trait = infirm
					remove_trait = incapable
					remove_trait = leper
					remove_trait = possessed
					remove_trait = ill
					remove_trait = pneumonic
					remove_trait = maimed
					set_special_character_title = ENGINEER
					change_stewardship = 3
					change_martial = 3
					change_intrigue = 3
				}
				hidden_tooltip = {
					if = {
						limit = { tier = EMPEROR }
						d_imperial_engineers_school = { holder_scope = { wealth = 50 } }
					}
					if = {
						limit = { tier = KING }
						d_imperial_engineers_school = { holder_scope = { wealth = 25 } }
					}
					if = {
						limit = { tier = DUKE }
						d_imperial_engineers_school = { holder_scope = { wealth = 10 } }
					}
					if = {
						limit = { tier = COUNT }
						d_imperial_engineers_school = { holder_scope = { wealth = 5 } }
					}
				}
			}
		}
		clr_character_flag = hiring_engineer
	}
}

#Put your engineer to work ( artillery or steam tank )
character_event = {
	id = DR_universities.133
	desc = EVTDESCDR_universities.133
	picture = GFX_evt_empire_master_engineer

	is_triggered_only = yes


	option = {
		name = "EVTOPTADR_universities.133"
		wealth = -100
		capital_scope = {
			add_province_modifier = {
				name = engineer_working_artillery
				duration = -1
			}
		}
		clr_character_flag = flag_ordering_engineer
	}
	option = {
		name = "EVTOPTBDR_universities.133"
		wealth = -500
		capital_scope = {
			add_province_modifier = {
				name = engineer_working_steam_tank
				duration = -1
			}
		}
		clr_character_flag = flag_ordering_engineer
	}
	option = {
		name = "EVTOPTCDR_universities.133"
		clr_character_flag = flag_ordering_engineer
	}
}

#Cannons built!
character_event = {
	id = DR_universities.134
	desc = EVTDESCDR_universities.134
	picture = GFX_evt_great_cannon

	only_rulers = yes

	trigger = {
		capital_scope = {
			owner = { character = ROOT }
			has_province_modifier = engineer_working_artillery
		}
	}
	mean_time_to_happen = {
		years = 1
	}

	option = {
		name = "EVTOPTADR_universities.134"
		capital_scope = {
			remove_province_modifier = engineer_working_artillery
			ROOT = {
				spawn_unit = {
					province = PREV
					home = PREV
					owner = THIS
 					troops = {
						artillery = { 50 50 }
					}
					attrition = 1.0
				}
			}
		}
	}
}

#Steam Tank built!
character_event = {
	id = DR_universities.135
	desc = EVTDESCDR_universities.135
	picture = GFX_evt_steam_tank

	only_rulers = yes

	trigger = {
		capital_scope = {
			owner = { character = ROOT }
			has_province_modifier = engineer_working_steam_tank
		}
	}
	mean_time_to_happen = {
		years = 2
	}

	option = {
		name = "EVTOPTADR_universities.135"
		capital_scope = {
			remove_province_modifier = engineer_working_steam_tank
			ROOT = {
				spawn_unit = {
					province = PREV
					home = PREV
					owner = THIS
 					troops = {
						siege_tanks = { 1 1 }
					}
					attrition = 1.0
				}
			}
		}
	}
}
