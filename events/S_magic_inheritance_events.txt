namespace = magicpotential
#####################################
#####################################


# On Birth event to assign the character flag
character_event = {
	id = magicpotential.1
	hide_window = yes

	trigger = {
		NOR = {
			has_character_flag =  magic_potential_rolled
			hidden_or_open_magic_potential_trigger = yes
			is_trained_mage_trigger = yes
			culture_group = beastman_group
			culture_group = daemonic_group
			culture_group = dwarf_group
			culture_group = dwarf_chaos_group
			culture_group = forest_group
			culture_group = goblin_group
			culture_group = halfling_old_world
			culture_group = halfling_lustrian
			culture_group = immortal_group
			culture_group = lahmian_group
			culture_group = lizardman_group
			culture_group = nehekharan_group
			culture_group = ogre_group
			culture_group = orc_group
			culture_group = skaven_group
		}


	}

	is_triggered_only = yes

	immediate = {
		set_character_flag = magic_potential_rolled
		if = {
			limit = {
				NOR = {
					true_father_even_if_dead = { trait = magic_potential_4 }
					true_father_even_if_dead = { trait = magic_potential_3 }
					true_father_even_if_dead = { trait = magic_potential_2 }
					true_father_even_if_dead = { trait = magic_potential_1 }
					true_father_even_if_dead = { has_character_flag = recessive_mage }
					true_father_even_if_dead = { has_character_flag = magic_potential_flag_1 }
					true_father_even_if_dead = { has_character_flag = magic_potential_flag_2 }
					true_father_even_if_dead = { has_character_flag = magic_potential_flag_3 }
					true_father_even_if_dead = { has_character_flag = magic_potential_flag_4 }
					mother_even_if_dead = { trait = magic_potential_4 }
					mother_even_if_dead = { trait = magic_potential_3 }
					mother_even_if_dead = { trait = magic_potential_2 }
					mother_even_if_dead = { trait = magic_potential_1 }
					mother_even_if_dead = { has_character_flag = recessive_mage }
					mother_even_if_dead = { has_character_flag = magic_potential_flag_1 }
					mother_even_if_dead = { has_character_flag = magic_potential_flag_2 }
					mother_even_if_dead = { has_character_flag = magic_potential_flag_3 }
					mother_even_if_dead = { has_character_flag = magic_potential_flag_4 }
					trait = the_witchling_star
					#The ice witches are tied to the land
					true_father_even_if_dead = {
						any_owned_bloodline = {
							has_bloodline_flag = magic_bloodline_female_kislev
							bloodline_is_active_for = PREV
						}
						OR = {
							location = {
								region = world_old_world_kislev
							}
							location = {
								region = world_troll_country
							}
							AND = {
								liege = {
									capital_scope = {
										region = world_old_world_kislev
									}
								}
							}
						}
					}
					mother_even_if_dead = {
						any_owned_bloodline = {
							has_bloodline_flag = magic_bloodline_female_kislev
							bloodline_is_active_for = PREV
						}
						OR = {
							location = {
								region = world_old_world_kislev
							}
							location = {
								region = world_troll_country
							}
							AND = {
								liege = {
									capital_scope = {
										region = world_old_world_kislev
									}
								}
							}
						}
					}
					true_father_even_if_dead = {
						any_owned_bloodline = {
							has_bloodline_flag = magic_bloodline
							bloodline_is_active_for = PREV
						}
					}
					mother_even_if_dead = {
						any_owned_bloodline = {
							has_bloodline_flag = magic_bloodline
							bloodline_is_active_for = PREV
						}
					}
					true_father_even_if_dead = {
						any_owned_bloodline = {
							has_bloodline_flag = magic_bloodline_female
							bloodline_is_active_for = PREV
						}
					}
					mother_even_if_dead = {
						any_owned_bloodline = {
							has_bloodline_flag = magic_bloodline_female
							bloodline_is_active_for = PREV
						}
					}
					true_father_even_if_dead = {
						any_owned_bloodline = {
							has_bloodline_flag = magic_bloodline_male
							bloodline_is_active_for = PREV
						}
					}
					mother_even_if_dead = {
						any_owned_bloodline = {
							has_bloodline_flag = magic_bloodline_male
							bloodline_is_active_for = PREV
						}
					}
				}
			}
			random_list = {
				95 = { #Nope
					modifier = {
						factor = 0.5
						religion = tzeentch
					}
					modifier = {
						factor = 3
						religion = khorne
					}
					modifier = {
						factor = 0.5
						trait = creature_elf
					}
				}
				5 = {
					#New magic bloodline
					set_character_flag = magic_potential_flag_1
				}
			}
		}

		#Magic Bloodlines
		if = {
			limit = {
				OR = {
					true_father_even_if_dead = { trait = magic_potential_4 }
					true_father_even_if_dead = { trait = magic_potential_3 }
					true_father_even_if_dead = { trait = magic_potential_2 }
					true_father_even_if_dead = { trait = magic_potential_1 }
					true_father_even_if_dead = { has_character_flag = recessive_mage }
					true_father_even_if_dead = { has_character_flag = magic_potential_flag_1 }
					true_father_even_if_dead = { has_character_flag = magic_potential_flag_2 }
					true_father_even_if_dead = { has_character_flag = magic_potential_flag_3 }
					true_father_even_if_dead = { has_character_flag = magic_potential_flag_4 }
					mother_even_if_dead = { trait = magic_potential_4 }
					mother_even_if_dead = { trait = magic_potential_3 }
					mother_even_if_dead = { trait = magic_potential_2 }
					mother_even_if_dead = { trait = magic_potential_1 }
					mother_even_if_dead = { has_character_flag = recessive_mage }
					mother_even_if_dead = { has_character_flag = magic_potential_flag_1 }
					mother_even_if_dead = { has_character_flag = magic_potential_flag_2 }
					mother_even_if_dead = { has_character_flag = magic_potential_flag_3 }
					mother_even_if_dead = { has_character_flag = magic_potential_flag_4 }
					trait = the_witchling_star
					true_father_even_if_dead = {
						any_owned_bloodline = {
							has_bloodline_flag = magic_bloodline_female_kislev
							bloodline_is_active_for = PREV
						}
						OR = {
							location = {
								region = world_old_world_kislev
							}
							location = {
								region = world_troll_country
							}
							AND = {
								liege = {
									capital_scope = {
										region = world_old_world_kislev
									}
								}
							}
						}
					}
					mother_even_if_dead = {
						any_owned_bloodline = {
							has_bloodline_flag = magic_bloodline_female_kislev
							bloodline_is_active_for = PREV
						}
						OR = {
							location = {
								region = world_old_world_kislev
							}
							location = {
								region = world_troll_country
							}
							AND = {
								liege = {
									capital_scope = {
										region = world_old_world_kislev
									}
								}
							}
						}
					}
					true_father_even_if_dead = {
						any_owned_bloodline = {
							has_bloodline_flag = magic_bloodline
							bloodline_is_active_for = PREV
						}
					}
					mother_even_if_dead = {
						any_owned_bloodline = {
							has_bloodline_flag = magic_bloodline
							bloodline_is_active_for = PREV
						}
					}
					true_father_even_if_dead = {
						any_owned_bloodline = {
							has_bloodline_flag = magic_bloodline_female
							bloodline_is_active_for = PREV
						}
					}
					mother_even_if_dead = {
						any_owned_bloodline = {
							has_bloodline_flag = magic_bloodline_female
							bloodline_is_active_for = PREV
						}
					}
					true_father_even_if_dead = {
						any_owned_bloodline = {
							has_bloodline_flag = magic_bloodline_male
							bloodline_is_active_for = PREV
						}
					}
					mother_even_if_dead = {
						any_owned_bloodline = {
							has_bloodline_flag = magic_bloodline_male
							bloodline_is_active_for = PREV
						}
					}
				}
			}
			random_list = {
				160 = { #bad luck
					modifier = {
						factor = 0
						true_father_even_if_dead = { trait = magic_potential_4 }
						mother_even_if_dead = { trait = magic_potential_4 }
					}
					modifier = {
						factor = 0
						OR = {
							true_father_even_if_dead = {
								any_owned_bloodline = {
									has_bloodline_flag = magic_bloodline_female_kislev
									bloodline_is_active_for = PREV
								}
								OR = {
									location = {
										region = world_old_world_kislev
									}
									location = {
										region = world_troll_country
									}
									AND = {
										liege = {
											capital_scope = {
												region = world_old_world_kislev
											}
										}
									}
								}
							}
							mother_even_if_dead = {
								any_owned_bloodline = {
									has_bloodline_flag = magic_bloodline_female_kislev
									bloodline_is_active_for = PREV
								}
								OR = {
									location = {
										region = world_old_world_kislev
									}
									AND = {
										liege = {
											capital_scope = {
												region = world_old_world_kislev
											}
										}
									}
								}
							}
							mother_even_if_dead = {
								any_owned_bloodline = {
									has_bloodline_flag = magic_bloodline
									bloodline_is_active_for = PREV
								}
							}
							true_father_even_if_dead = {
								any_owned_bloodline = {
									has_bloodline_flag = magic_bloodline
									bloodline_is_active_for = PREV
								}
							}
							AND = {
								is_female = yes
								mother_even_if_dead = {
									any_owned_bloodline = {
										has_bloodline_flag = magic_bloodline_female
										bloodline_is_active_for = PREV
									}
								}
							}
							AND = {
								is_female = yes
								true_father_even_if_dead = {
									any_owned_bloodline = {
										has_bloodline_flag = magic_bloodline_female
										bloodline_is_active_for = PREV
									}
								}
							}
							AND = {
								is_female = no
								mother_even_if_dead = {
									any_owned_bloodline = {
										has_bloodline_flag = magic_bloodline_male
										bloodline_is_active_for = PREV
									}
								}
							}
							AND = {
								is_female = no
								true_father_even_if_dead = {
									any_owned_bloodline = {
										has_bloodline_flag = magic_bloodline_male
										bloodline_is_active_for = PREV
									}
								}
							}
						}
					}
					modifier = {
						factor = 0.15
						true_father_even_if_dead = { trait = magic_potential_4 }
					}
					modifier = {
						factor = 0.15
						mother_even_if_dead = { trait = magic_potential_4 }
					}
					modifier = {
						factor = 0.25
						true_father_even_if_dead = { trait = magic_potential_3 }
					}
					modifier = {
						factor = 0.25
						mother_even_if_dead = { trait = magic_potential_3 }
					}
					modifier = {
						factor = 0.5
						true_father_even_if_dead = { trait = magic_potential_2 }
					}
					modifier = {
						factor = 0.5
						mother_even_if_dead = { trait = magic_potential_2 }
					}
					modifier = {
						factor = 0
						true_father_even_if_dead = { has_character_flag = magic_potential_flag_4 }
						mother_even_if_dead = { has_character_flag = magic_potential_flag_4 }
					}
					modifier = {
						factor = 0.25
						true_father_even_if_dead = { has_character_flag = magic_potential_flag_4 }
					}
					modifier = {
						factor = 0.25
						mother_even_if_dead = { has_character_flag = magic_potential_flag_4 }
					}
					modifier = {
						factor = 0.45
						true_father_even_if_dead = { has_character_flag = magic_potential_flag_3 }
					}
					modifier = {
						factor = 0.45
						mother_even_if_dead = { has_character_flag = magic_potential_flag_3 }
					}
					modifier = {
						factor = 0.75
						true_father_even_if_dead = { has_character_flag = magic_potential_flag_2 }
					}
					modifier = {
						factor = 0.75
						mother_even_if_dead = { has_character_flag = magic_potential_flag_2 }
					}
					modifier = {
						factor = 0.25
						true_father_even_if_dead = { has_character_modifier = magic_power_4 }
					}
					modifier = {
						factor = 0.25
						mother_even_if_dead = { has_character_modifier = magic_power_4 }
					}
					modifier = {
						factor = 0.5
						true_father_even_if_dead = { has_character_modifier = magic_power_3 }
					}
					modifier = {
						factor = 0.5
						mother_even_if_dead = { has_character_modifier = magic_power_3 }
					}
					modifier = {
						factor = 0.75
						true_father_even_if_dead = { has_character_modifier = magic_power_2 }
					}
					modifier = {
						factor = 0.75
						mother_even_if_dead = { has_character_modifier = magic_power_2 }
					}
					modifier = {
						factor = 0.95
						true_father_even_if_dead = { has_character_modifier = magic_power_1 }
					}
					modifier = {
						factor = 0.95
						mother_even_if_dead = { has_character_modifier = magic_power_1 }
					}
					modifier = {
						factor = 0.5
						true_father_even_if_dead = { has_character_flag = recessive_mage }
					}
					modifier = {
						factor = 0.5
						mother_even_if_dead = { has_character_flag = recessive_mage }
					}
					modifier = {
						factor = 0.6
						true_father_even_if_dead = { trait = creature_elf }
					}
					modifier = {
						factor = 0.6
						mother_even_if_dead = { trait = creature_elf }
					}
					modifier = {
						factor = 0.95
						religion = tzeentch
					}
					modifier = {
						factor = 1.25
						religion = khorne
					}
					modifier = {
						factor = 0.5
						trait = the_witchling_star
					}
					modifier = {
						factor = 2
						is_doom_very_low_trigger = yes
					}
					set_character_flag = recessive_mage		#flag only used in the trigger of this event
				}
				35 = { 				#No checks for magic potential 1, as that level is very hard to inherit.
					modifier = {
						factor = 1.35
						true_father_even_if_dead = { trait = magic_potential_2 }
					}
					modifier = {
						factor = 1.35
						mother_even_if_dead = { trait = magic_potential_2 }
					}
					modifier = {
						factor = 1.5
						true_father_even_if_dead = { trait = magic_potential_3 }
					}
					modifier = {
						factor = 1.5
						mother_even_if_dead = { trait = magic_potential_3 }
					}
					modifier = {
						factor = 1.75
						true_father_even_if_dead = { trait = magic_potential_4 }
					}
					modifier = {
						factor = 1.75
						mother_even_if_dead = { trait = magic_potential_4 }
					}
					modifier = {
						factor = 0.75
						true_father_even_if_dead = {
							NOR = {
								trait = magic_potential_1
								trait = magic_potential_2
								trait = magic_potential_3
								trait = magic_potential_4
								has_character_flag = magic_potential_flag_1
								has_character_flag = magic_potential_flag_2
								has_character_flag = magic_potential_flag_3
								has_character_flag = magic_potential_flag_4
							}
						}
					}
					modifier = {
						factor = 0.75
						mother_even_if_dead = {
							NOR = {
								trait = magic_potential_1
								trait = magic_potential_2
								trait = magic_potential_3
								trait = magic_potential_4
								has_character_flag = magic_potential_flag_1
								has_character_flag = magic_potential_flag_2
								has_character_flag = magic_potential_flag_3
								has_character_flag = magic_potential_flag_4
							}
						}
					}
					modifier = {
						factor = 1.25
						true_father_even_if_dead = { has_character_flag = magic_potential_flag_2 }
					}
					modifier = {
						factor = 1.25
						mother_even_if_dead = { has_character_flag = magic_potential_flag_2 }
					}
					modifier = {
						factor = 1.35
						true_father_even_if_dead = { has_character_flag = magic_potential_flag_3 }
					}
					modifier = {
						factor = 1.35
						mother_even_if_dead = { has_character_flag = magic_potential_flag_3 }
					}
					modifier = {
						factor = 1.5
						true_father_even_if_dead = { has_character_flag = magic_potential_flag_4 }
					}
					modifier = {
						factor = 1.5
						mother_even_if_dead = { has_character_flag = magic_potential_flag_4 }
					}
					modifier = {
						factor = 1.05
						true_father_even_if_dead = { has_character_modifier = magic_power_1 }
					}
					modifier = {
						factor = 1.05
						mother_even_if_dead = { has_character_modifier = magic_power_1 }
					}
					modifier = {
						factor = 1.15
						true_father_even_if_dead = { has_character_modifier = magic_power_2 }
					}
					modifier = {
						factor = 1.15
						mother_even_if_dead = { has_character_modifier = magic_power_2 }
					}
					modifier = {
						factor = 1.25
						true_father_even_if_dead = { has_character_modifier = magic_power_3 }
					}
					modifier = {
						factor = 1.25
						mother_even_if_dead = { has_character_modifier = magic_power_3 }
					}
					modifier = {
						factor = 1.35
						true_father_even_if_dead = { has_character_modifier = magic_power_4 }
					}
					modifier = {
						factor = 1.35
						mother_even_if_dead = { has_character_modifier = magic_power_4 }
					}
					modifier = {
						factor = 1.5
						true_father_even_if_dead = { has_character_flag = recessive_mage }
					}
					modifier = {
						factor = 1.5
						mother_even_if_dead = { has_character_flag = recessive_mage }
					}
					modifier = {
						factor = 3
						trait = the_witchling_star
					}
					modifier = {
						factor = 1.5
						is_doom_high_trigger = yes
					}
					modifier = {
						factor = 2
						is_doom_very_high_trigger = yes
					}
					set_character_flag = magic_potential_flag_1
				}
				25 = {
					modifier = {
						factor = 1.5
						true_father_even_if_dead = { trait = magic_potential_2 }
					}
					modifier = {
						factor = 1.5
						mother_even_if_dead = { trait = magic_potential_2 }
					}
					modifier = {
						factor = 1.75
						true_father_even_if_dead = { trait = magic_potential_3 }
					}
					modifier = {
						factor = 1.75
						mother_even_if_dead = { trait = magic_potential_3 }
					}
					modifier = {
						factor = 1.95
						true_father_even_if_dead = { trait = magic_potential_4 }
					}
					modifier = {
						factor = 1.95
						mother_even_if_dead = { trait = magic_potential_4 }
					}
					modifier = {
						factor = 0.5
						true_father_even_if_dead = {
							NOR = {
								trait = magic_potential_1
								trait = magic_potential_2
								trait = magic_potential_3
								trait = magic_potential_4
								has_character_flag = magic_potential_flag_1
								has_character_flag = magic_potential_flag_2
								has_character_flag = magic_potential_flag_3
								has_character_flag = magic_potential_flag_4
							}
						}
					}
					modifier = {
						factor = 0.5
						mother_even_if_dead = {
							NOR = {
								trait = magic_potential_1
								trait = magic_potential_2
								trait = magic_potential_3
								trait = magic_potential_4
								has_character_flag = magic_potential_flag_1
								has_character_flag = magic_potential_flag_2
								has_character_flag = magic_potential_flag_3
								has_character_flag = magic_potential_flag_4
							}
						}
					}
					modifier = {
						factor = 1.35
						true_father_even_if_dead = { has_character_flag = magic_potential_flag_2 }
					}
					modifier = {
						factor = 1.35
						mother_even_if_dead = { has_character_flag = magic_potential_flag_2 }
					}
					modifier = {
						factor = 1.5
						true_father_even_if_dead = { has_character_flag = magic_potential_flag_3 }
					}
					modifier = {
						factor = 1.5
						mother_even_if_dead = { has_character_flag = magic_potential_flag_3 }
					}
					modifier = {
						factor = 1.75
						true_father_even_if_dead = { has_character_flag = magic_potential_flag_4 }
					}
					modifier = {
						factor = 1.75
						mother_even_if_dead = { has_character_flag = magic_potential_flag_4 }
					}
					modifier = {
						factor = 1.25
						true_father_even_if_dead = { has_character_modifier = magic_power_2 }
					}
					modifier = {
						factor = 1.25
						mother_even_if_dead = { has_character_modifier = magic_power_2 }
					}
					modifier = {
						factor = 1.35
						true_father_even_if_dead = { has_character_modifier = magic_power_3 }
					}
					modifier = {
						factor = 1.35
						mother_even_if_dead = { has_character_modifier = magic_power_3 }
					}
					modifier = {
						factor = 1.45
						true_father_even_if_dead = { has_character_modifier = magic_power_4 }
					}
					modifier = {
						factor = 1.45
						mother_even_if_dead = { has_character_modifier = magic_power_4 }
					}
					modifier = {
						factor = 3
						trait = the_witchling_star
					}
					modifier = {
						factor = 1.5
						is_doom_high_trigger = yes
					}
					modifier = {
						factor = 2
						is_doom_very_high_trigger = yes
					}
					set_character_flag = magic_potential_flag_2
				}
				10 = {
					modifier = {
						factor = 2
						true_father_even_if_dead = { trait = magic_potential_3 }
					}
					modifier = {
						factor = 2
						mother_even_if_dead = { trait = magic_potential_3 }
					}
					modifier = {
						factor = 2.5
						true_father_even_if_dead = { trait = magic_potential_4 }
					}
					modifier = {
						factor = 2.5
						mother_even_if_dead = { trait = magic_potential_4 }
					}
					modifier = {
						factor = 0.25
						true_father_even_if_dead = {
							NOR = {
								trait = magic_potential_1
								trait = magic_potential_2
								trait = magic_potential_3
								trait = magic_potential_4
								has_character_flag = magic_potential_flag_1
								has_character_flag = magic_potential_flag_2
								has_character_flag = magic_potential_flag_3
								has_character_flag = magic_potential_flag_4
							}
						}
					}
					modifier = {
						factor = 0.25
						mother_even_if_dead = {
							NOR = {
								trait = magic_potential_1
								trait = magic_potential_2
								trait = magic_potential_3
								trait = magic_potential_4
								has_character_flag = magic_potential_flag_1
								has_character_flag = magic_potential_flag_2
								has_character_flag = magic_potential_flag_3
								has_character_flag = magic_potential_flag_4
							}
						}
					}
					modifier = {
						factor = 1.75
						true_father_even_if_dead = { has_character_flag = magic_potential_flag_3 }
					}
					modifier = {
						factor = 1.75
						mother_even_if_dead = { has_character_flag = magic_potential_flag_3 }
					}
					modifier = {
						factor = 2
						true_father_even_if_dead = { has_character_flag = magic_potential_flag_4 }
					}
					modifier = {
						factor = 2
						mother_even_if_dead = { has_character_flag = magic_potential_flag_4 }
					}
					modifier = {
						factor = 1.45
						true_father_even_if_dead = { has_character_modifier = magic_power_3 }
					}
					modifier = {
						factor = 1.45
						mother_even_if_dead = { has_character_modifier = magic_power_3 }
					}
					modifier = {
						factor = 1.5
						true_father_even_if_dead = { has_character_modifier = magic_power_4 }
					}
					modifier = {
						factor = 1.5
						mother_even_if_dead = { has_character_modifier = magic_power_4 }
					}
					modifier = {
						factor = 1.5
						is_doom_high_trigger = yes
					}
					modifier = {
						factor = 2
						is_doom_very_high_trigger = yes
					}
					set_character_flag = magic_potential_flag_3
				}
				5 = {
					modifier = {
						factor = 2.75
						true_father_even_if_dead = { trait = magic_potential_4 }
					}
					modifier = {
						factor = 2.75
						mother_even_if_dead = { trait = magic_potential_4 }
					}
					modifier = {
						factor = 0.15
						true_father_even_if_dead = {
							NOR = {
								trait = magic_potential_1
								trait = magic_potential_2
								trait = magic_potential_3
								trait = magic_potential_4
								has_character_flag = magic_potential_flag_1
								has_character_flag = magic_potential_flag_2
								has_character_flag = magic_potential_flag_3
								has_character_flag = magic_potential_flag_4
							}
						}
					}
					modifier = {
						factor = 0.15
						mother_even_if_dead = {
							NOR = {
								trait = magic_potential_1
								trait = magic_potential_2
								trait = magic_potential_3
								trait = magic_potential_4
								has_character_flag = magic_potential_flag_1
								has_character_flag = magic_potential_flag_2
								has_character_flag = magic_potential_flag_3
								has_character_flag = magic_potential_flag_4
							}
						}
					}
					modifier = {
						factor = 2.25
						true_father_even_if_dead = { has_character_flag = magic_potential_flag_4 }
					}
					modifier = {
						factor = 2.25
						mother_even_if_dead = { has_character_flag = magic_potential_flag_4 }
					}
					modifier = {
						factor = 1.65
						true_father_even_if_dead = { has_character_modifier = magic_power_4 }
					}
					modifier = {
						factor = 1.65
						mother_even_if_dead = { has_character_modifier = magic_power_4 }
					}
					modifier = {
						factor = 1.25
						religion = tzeentch
					}
					modifier = {
						factor = 3
						trait = the_witchling_star
					}
					modifier = {
						factor = 1.5
						is_doom_high_trigger = yes
					}
					modifier = {
						factor = 2
						is_doom_very_high_trigger = yes
					}
					set_character_flag = magic_potential_flag_4
				}
			}
		}
		if = {
			limit = {
				is_adult = yes
				OR = {
					has_character_flag = magic_potential_flag_1
					has_character_flag = magic_potential_flag_2
					has_character_flag = magic_potential_flag_3
					has_character_flag = magic_potential_flag_4
				}
			}
			character_event = { id = magicpotential.2 days = 120 random = 1200 }
		}
	}
}


# Your magic reveals itself, what do you do?
character_event = {
	id = magicpotential.2
	desc = EVTDESCmagicpotential2
	picture = "GFX_evt_apprentice"

	trigger = { OR = { has_character_flag = magic_potential_flag_1
			has_character_flag = magic_potential_flag_2
			has_character_flag = magic_potential_flag_3
			has_character_flag = magic_potential_flag_4 } }

	is_triggered_only = yes

	option = { #No reason to hide!
		name = EVTOPTAmagicpotential2
		trigger = {
			NOR = {
				liege = {
					check_if_mage_should_be_burned_trigger = yes
				}
				AND = {
					is_female = no
					top_liege = {
						trait = malekith
					}
				}
				AND = {
					liege = {
						religion = kislev_gods
					}
					is_female = no
				}
				AND = {
					liege = {
						OR = {
							religion = ormazd
							religion = kitabid
						}
					}
					is_female = yes
				}
			}
		}
		set_character_flag = magic_potential_known
		hidden_tooltip = { character_event = { id = magicpotential.3 days = 120 random = 120 } }
		ai_chance =  {
			factor = 95
			modifier = {
				factor = 0.25
				religion = khorne
			}
		}
	}
	option = { #I'm scared!
		name = EVTOPTBmagicpotential2
		hidden_tooltip = {
			random_list = {
				33 = { #has no liege, doesn't get discovered
					modifier = {
						factor = 0
						independent = no
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = {
						factor = 1.5
						trait = shy
					}
					modifier = {
						factor = 1.75
						trait = paranoid
					}
					modifier = {
						factor = 2
						is_smart_trigger = yes
					}
					modifier = {
						factor = 0.95
						has_character_flag = magic_potential_flag_2
					}
					modifier = {
						factor = 0.85
						has_character_flag = magic_potential_flag_3
					}
					modifier = {
						factor = 0.75
						has_character_flag = magic_potential_flag_4
					}
					set_character_flag = magic_potential_successfully_hidden
					character_event = { id = magicpotential.4 days = 120 random = 120 }
				}
				33 = { #has liege, doesn't get discovered
					modifier = {
						factor = 0
						independent = yes
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = {
						factor = 1.5
						trait = shy
					}
					modifier = {
						factor = 0.95
						has_character_flag = magic_potential_flag_2
					}
					modifier = {
						factor = 0.85
						has_character_flag = magic_potential_flag_3
					}
					modifier = {
						factor = 0.75
						has_character_flag = magic_potential_flag_4
					}
					modifier = {
						factor = 1.75
						trait = paranoid
					}
					modifier = {
						factor = 2
						is_smart_trigger = yes
					}
					modifier = {
						factor = 0.1
						liege = { trait = creature_elf }
					}
					set_character_flag = magic_potential_successfully_hidden
					character_event = { id = magicpotential.5 days = 120 random = 120 }
				}
				34 = { #has liege, gets discovered
					modifier = {
						factor = 0
						independent = yes
					}
					modifier = {
						factor = 1.75
						trait = gregarious
					}
					modifier = {
						factor = 1.75
						trait = trusting
					}
					modifier = {
						factor = 1.5
						trait = brave
					}
					modifier = {
						factor = 0.75
						liege = { trait = trusting }
					}
					modifier = {
						factor = 0.5
						liege = { trait = imbecile }
					}
					modifier = {
						factor = 0.75
						liege = { trait = idiot }
					}
					modifier = {
						factor = 0.75
						liege = { trait = slow }
					}
					modifier = {
						factor = 0.75
						liege = { trait = dim }
					}
					modifier = {
						factor = 1.75
						liege = { trait = bright }
					}
					modifier = {
						factor = 1.75
						liege = { trait = brilliant }
					}
					modifier = {
						factor = 1.75
						liege = { trait = quick }
					}
					modifier = {
						factor = 2
						liege = { trait = genius }
					}
					modifier = {
						factor = 1.75
						liege = { trait = deceitful }
					}
					modifier = {
						factor = 1.75
						liege = { trait = paranoid }
					}
					modifier = {
						factor = 1.75
						liege = { trait = creature_elf }
					}
					modifier = {
						factor = 1.75
						liege = { has_character_modifier = magic_power_1 }
					}
					modifier = {
						factor = 2
						liege = { has_character_modifier = magic_power_2 }
					}
					modifier = {
						factor = 2.5
						liege = { has_character_modifier = magic_power_3 }
					}
					modifier = {
						factor = 2.75
						liege = { has_character_modifier = magic_power_4 }
					}
					set_character_flag = magic_potential_known
					character_event = { id = magicpotential.6 days = 120 random = 120 }
				}
			}
		}
		ai_chance =  {
			factor = 5
			modifier = {
				factor = 10
				religion_group = old_world_group
				check_if_mage_should_be_burned_trigger = yes
			}
			modifier = {
				factor = 1.5
				trait = craven
			}
			modifier = {
				factor = 1.5
				trait = shy
			}
			modifier = {
				factor = 1.75
				trait = paranoid
			}
		}
	}
}

#The youth has no reason to fear their gift - Safecheck event for any trait assignement
character_event = {
	id = magicpotential.3
	desc = { text = EVTDESCmagicpotentialA3
		trigger = { has_character_flag = magic_potential_flag_1 } }
	desc = { text = EVTDESCmagicpotentialB3
		trigger = { has_character_flag = magic_potential_flag_2 } }
	desc = { text = EVTDESCmagicpotentialC3
		trigger = { has_character_flag = magic_potential_flag_3 } }
	desc = { text = EVTDESCmagicpotentialD3
		trigger = { has_character_flag = magic_potential_flag_4 } }
	picture = "GFX_evt_apprentice"

	is_triggered_only = yes


	option = {
		name = EVTOPTAmagicpotential3
			if = { limit = { has_character_flag = magic_potential_flag_4 }
				add_trait = magic_potential_4
				clr_character_flag = magic_potential_flag_4 }
			if = { limit = { has_character_flag = magic_potential_flag_3 }
				add_trait = magic_potential_3
				clr_character_flag = magic_potential_flag_3 }
			if = { limit = { has_character_flag = magic_potential_flag_2 }
				add_trait = magic_potential_2
				clr_character_flag = magic_potential_flag_2 }
			if = { limit = { has_character_flag = magic_potential_flag_1 }
				add_trait = magic_potential_1
				clr_character_flag = magic_potential_flag_1 }
		hidden_tooltip = {
			if = { limit = { independent = no }
			liege = { character_event = { id = magicpotential.3005 } } }
			}
		}
}

#Notify the liege
character_event = {
	id = magicpotential.3005
	desc = { text = EVTDESCmagicpotentialA3005
		trigger = { FROM = { trait = magic_potential_1 } } }
	desc = { text = EVTDESCmagicpotentialB3005
		trigger = { FROM = { trait = magic_potential_2 } } }
	desc = { text = EVTDESCmagicpotentialC3005
		trigger = { FROM = { trait = magic_potential_3 } } }
	desc = { text = EVTDESCmagicpotentialD3005
		trigger = { FROM = { trait = magic_potential_4 } } }
	picture = "GFX_evt_apprentice"
	is_triggered_only = yes

	option = {
		name = EVTOPTAmagicpotential3005
		}
}

#The youth fears for the gift and keeps it hidden
character_event = {
	id = magicpotential.4
	desc = { text = EVTDESCmagicpotentialA4
		trigger = { has_character_flag = magic_potential_flag_1 } }
	desc = { text = EVTDESCmagicpotentialB4
		trigger = { has_character_flag = magic_potential_flag_2 } }
	desc = { text = EVTDESCmagicpotentialC4
		trigger = { has_character_flag = magic_potential_flag_3 } }
	desc = { text = EVTDESCmagicpotentialD4
		trigger = { has_character_flag = magic_potential_flag_4 } }
	picture = "GFX_evt_apprentice"

	is_triggered_only = yes

	option = { 		#player doesn't care and wants to show off
		name = EVTOPTBmagicpotential4
		trigger = { ai = no }
			if = { limit = { has_character_flag = magic_potential_flag_4 }
				add_trait = magic_potential_4
				clr_character_flag = magic_potential_flag_4 }
			if = { limit = { has_character_flag = magic_potential_flag_3 }
				add_trait = magic_potential_3
				clr_character_flag = magic_potential_flag_3 }
			if = { limit = { has_character_flag = magic_potential_flag_2 }
				add_trait = magic_potential_2
				clr_character_flag = magic_potential_flag_2 }
			if = { limit = { has_character_flag = magic_potential_flag_1 }
				add_trait = magic_potential_1
				clr_character_flag = magic_potential_flag_1 }
		hidden_tooltip = {
			if = { limit = { independent = no }
			liege = { character_event = { id = magicpotential.3005 } } }
			}
		ai_chance = { factor = 0 }
		}
	option = {
		name = EVTOPTAmagicpotential4
		ai_chance = { factor = 1 }
		}
}

#The youth fears for the gift and keeps it hidden from the liege
character_event = {
	id = magicpotential.5
	desc = { text = EVTDESCmagicpotentialA5
		trigger = { has_character_flag = magic_potential_flag_1 } }
	desc = { text = EVTDESCmagicpotentialB5
		trigger = { has_character_flag = magic_potential_flag_2 } }
	desc = { text = EVTDESCmagicpotentialC5
		trigger = { has_character_flag = magic_potential_flag_3 } }
	desc = { text = EVTDESCmagicpotentialD5
		trigger = { has_character_flag = magic_potential_flag_4 } }
	picture = "GFX_evt_apprentice"

	is_triggered_only = yes

	option = {
		name = EVTOPTAmagicpotential5
		random = { chance = 20
			add_trait = craven }
		}
}

#The youth fears for the gift and the liege discovers it
character_event = {
	id = magicpotential.6
	desc = { text = EVTDESCmagicpotentialA6
		trigger = { has_character_flag = magic_potential_flag_1 } }
	desc = { text = EVTDESCmagicpotentialB6
		trigger = { has_character_flag = magic_potential_flag_2 } }
	desc = { text = EVTDESCmagicpotentialC6
		trigger = { has_character_flag = magic_potential_flag_3 } }
	desc = { text = EVTDESCmagicpotentialD6
		trigger = { has_character_flag = magic_potential_flag_4 } }
	picture = "GFX_evt_apprentice"

	is_triggered_only = yes

	option = {
		name = EVTOPTAmagicpotential6
			if = { limit = { has_character_flag = magic_potential_flag_4 }
				add_trait = magic_potential_4
				clr_character_flag = magic_potential_flag_4 }
			if = { limit = { has_character_flag = magic_potential_flag_3 }
				add_trait = magic_potential_3
				clr_character_flag = magic_potential_flag_3 }
			if = { limit = { has_character_flag = magic_potential_flag_2 }
				add_trait = magic_potential_2
				clr_character_flag = magic_potential_flag_2 }
			if = { limit = { has_character_flag = magic_potential_flag_1 }
				add_trait = magic_potential_1
				clr_character_flag = magic_potential_flag_1 }
		hidden_tooltip = {
			liege = { character_event = { id = magicpotential.6005 } }
			}
		}
}

#The liege decides what to do
character_event = {
	id = magicpotential.6005
	desc = { text = EVTDESCmagicpotentialA6005
		trigger = { FROM = { trait = magic_potential_1 } } }
	desc = { text = EVTDESCmagicpotentialB6005
		trigger = { FROM = { trait = magic_potential_2 } } }
	desc = { text = EVTDESCmagicpotentialC6005
		trigger = { FROM = { trait = magic_potential_3 } } }
	desc = { text = EVTDESCmagicpotentialD6005
		trigger = { FROM = { trait = magic_potential_4 } } }
	picture = "GFX_evt_apprentice"

	is_triggered_only = yes

	option = { #Burn!
		name = EVTOPTAmagicpotential6005
		trigger = {
			NOT = { has_magic_law_1_or_above_trigger = yes }
			OR = {
				religion = taalite
				religion = ulrican
				religion = manannite
				religion = shallyan
				religion = myrmidian
				religion = grail
				religion = sigmarite
				religion = morrian
			}
		}
		FROM = {
			if = {
				limit = {
					is_invincible_trigger = yes
				}
				antideath_effect = yes
				break = yes
			}
			death = { death_reason = death_execution killer = ROOT }
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.75
				FROM = { dynasty = ROOT }
			}
			modifier = {
				factor = 0.5
				FROM = { mother = { character = ROOT } }
			}
			modifier = {
				factor = 0.5
				FROM = { father = { character = ROOT } }
			}
			modifier = {
				factor = 100
				trait = malekith
			}
			modifier = {
				factor = 2
				hates_legal_magic_trigger = yes
			}
		}
	}
	option = { #Hollow the dangerous little beast.
		name = EVTOPTDmagicpotential6005
		trigger = {
			OR = {
				AND = {
					OR = {
						religion = ormazd
						religion = kitabid
					}
					FROM = { is_female = yes }
				}
				AND = {
					religion = kislev_gods
					FROM = { is_female = no }
				}
			}
		}
		FROM = { add_trait = hollowed }
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.75
				FROM = { dynasty = ROOT }
			}
			modifier = {
				factor = 0.5
				FROM = { mother = { character = ROOT } }
			}
			modifier = {
				factor = 0.5
				FROM = { father = { character = ROOT } }
			}
		}
	}
	option = { #Kill the chosen one!
		name = EVTOPTCmagicpotential6005
		trigger = {
			top_liege = { trait = malekith }
			FROM = { is_female = no }
		}
		FROM = {
			if = {
				limit = {
					is_invincible_trigger = yes
				}
				antideath_effect = yes
				break = yes
			}
			death = { death_reason = death_execution killer = ROOT }
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.75
				FROM = { dynasty = ROOT }
			}
			modifier = {
				factor = 0.5
				FROM = { mother = { character = ROOT } }
			}
			modifier = {
				factor = 0.5
				FROM = { father = { character = ROOT } }
			}
			modifier = {
				factor = 100
				trait = malekith
			}
		}
	}
	option = {
		name = EVTOPTBmagicpotential6005
		if = {
			limit = { NOT = { has_magic_law_1_or_above_trigger = yes } }
			increase_visibility_minor_effect = yes
		}


		any_vassal = {
			limit = {
				OR = {
					religion = taalite
					religion = ulrican
					religion = manannite
					religion = shallyan
					religion = myrmidian
					religion = grail
					religion = sigmarite
					religion = morrian
				}
				NOR = {
					is_trained_mage_trigger = yes
					magic_potential_trigger = yes
				}
				OR = {
					NOT = { has_magic_law_1_or_above_trigger = yes }
					AND = {
						has_magic_law_1_or_above_trigger = yes
						hates_legal_magic_trigger = yes
					}
				}
			}
			opinion = { modifier = opinion_spared_witch who = ROOT }
		}
		any_courtier = {
			limit = {
				OR = {
					religion = taalite
					religion = ulrican
					religion = manannite
					religion = shallyan
					religion = myrmidian
					religion = grail
					religion = sigmarite
					religion = morrian
				}
				is_ruler = no
				NOT = { is_trained_mage_trigger = yes }
				NOT = { magic_potential_trigger = yes }
				OR = {
					NOT = { has_magic_law_1_or_above_trigger = yes }
					AND = {
						has_magic_law_1_or_above_trigger = yes
						hates_legal_magic_trigger = yes
					}
				}
			}
			opinion = { modifier = opinion_spared_witch who = ROOT }
		}
		FROM = { opinion = { modifier = opinion_protected_me who = ROOT } }
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				FROM = { any_spouse = { character = ROOT } }
			}
			modifier = {
				factor = 2
				FROM = { any_lover = { character = ROOT } }
			}
			modifier = {
				factor = 2
				FROM = { any_friend = { character = ROOT } }
			}
			modifier = {
				factor = 0
				FROM = { any_rival = { character = ROOT } }
			}
			modifier = {
				factor = 2
				supports_legal_magic_trigger = yes
			}
			modifier = {
				factor = 5
				has_magic_law_1_or_above_trigger = yes
			}
		 }
	}
}


##WITCH HUNTERS##
### Now the Witch Hunter goes after actual mages##
character_event = {
	id = magicpotential.7
	title = WITCH_HUNT			# Witch Hunt
	desc = EVTDESCmagicpotential7
	picture = "GFX_evt_witch_hunters"

	capable_only = yes

	trigger = {
		age = 16
		trait = on_witch_hunt
		top_liege = { NOT = { has_character_modifier = expelled_k_witch_hunters_order } }
		any_courtier = {
			NOT = { trait = in_hiding }
			NOT = { trait = incapable }
			NOT = { is_daemon_race_trigger = yes }
			check_if_mage_should_be_burned_trigger = yes
			OR = {
				has_character_modifier = magic_power_1
				has_character_modifier = magic_power_2
				has_character_modifier = magic_power_3
				has_character_modifier = magic_power_4
				magic_potential_trigger = yes
			}
		}
	}

	mean_time_to_happen = { months = 9 }

	option = { #confront the mage
		name = EVTOPTAmagicpotential7
		random_courtier = {
			limit = {
				NOT = { trait = in_hiding }
				NOT = { trait = incapable }
				check_if_mage_should_be_burned_trigger = yes
				OR = {
					has_character_modifier = magic_power_1
					has_character_modifier = magic_power_2
					has_character_modifier = magic_power_3
					has_character_modifier = magic_power_4
					magic_potential_trigger = yes
				}
			}
			character_event = { id = magicpotential.8 }
	   }
   }
}

#courtier is confronted#
character_event = {
    id = magicpotential.8
    title = WITCH_HUNT
    desc = EVTDESCmagicpotential8
		picture = "GFX_evt_witch_hunters"

	is_triggered_only = yes

	#If not independent, appeal to your liege##
	option = {
		name = EVTOPTAmagicpotential8
		trigger = { independent = no }
		liege = { character_event = { id = magicpotential.9 } }
	}

	option = { #Banish Witch Hunter
		name = EVTOPTBmagicpotential8
		trigger = { independent = yes }
		increase_visibility_minor_effect = yes
		FROM = { banish = yes }
		FROM = { remove_trait = on_witch_hunt }
	}

	option = { #Imprison Witch Hunter
		name = EVTOPTCmagicpotential8
		trigger = { independent = yes }
		increase_visibility_effect = yes
		FROM = { imprison = yes }
		FROM = { remove_trait = on_witch_hunt }
	}
}

#liege is informed one of this courtiers is a suspected mage
	character_event = {
    id = magicpotential.9
    title = WITCH_HUNT # Witch Hunt
    desc = EVTDESCmagicpotential9
		picture = "GFX_evt_witch_hunters"

	is_triggered_only = yes

	option = { #Burn it!
	name = EVTOPTAmagicpotential9
	trigger = {
	OR = {
	ai = no
	trait = zealous
	trait = paranoid
	trait = arbitrary
	trait = cruel
	NOT = { ROOT = { opinion = { who = FROM value = 1 } } }
	}
	}
	decrease_visibility_effect = yes
	FROM = { character_event = { id = witchhunter.25 } }
	}

	option = { #Mercy
	name = EVTOPTBmagicpotential9
	trigger = {
	OR = {
	ai = no
	ROOT = { opinion = { who = FROM value = 50 } }
	}
	}
	increase_visibility_minor_effect = yes
	FROM = { character_event = { id = witchhunter.27 } }
	}

	option = { #Imprison
	name = EVTOPTCmagicpotential9
	decrease_visibility_effect = yes
	FROM = { character_event = { id = witchhunter.26 } }
	}
}

##Mages or potential mages not hiding in Human lands are eventually exposed and put to the stake
character_event = {
    id = magicpotential.10
    title = WITCH_WITCH
    desc = EVTDESCmagicpotential10
    picture = "GFX_evt_burning_stake"
	capable_only = yes
	min_age = 16
	trigger = {
		NOR = {
			top_liege = {
				is_trained_mage_trigger = yes
			}
			top_liege = {
				trait = mage_apprentice
			}
		}
		check_if_mage_should_be_burned_trigger = yes
		independent = no
		liege = {
			OR = {
				religion = taalite
				religion = ulrican
				religion = manannite
				religion = shallyan
				religion = myrmidian
				religion = grail
				religion = sigmarite
				religion = morrian
				AND = {
					religion = kislev_gods
					ROOT = { is_female = no }
				}
				AND = {
					OR = {
						religion = ormazd
						religion = kitabid
					}
					FROM = { is_female = yes }
				}
			}
		}
		is_trained_mage_trigger = yes
		NOT = { trait = in_hiding }
		NOT = { is_daemon_race_trigger = yes }
	}

	mean_time_to_happen = { years = 10
				modifier = {
					factor = 3
					trait = magic_potential_1
					}
				modifier = {
					factor = 2
					trait = magic_potential_2
					}
				modifier = {
					factor = 1.75
					trait = magic_potential_3
					}
				modifier = {
					factor = 1.5
					trait = magic_potential_4
					}
				modifier = {
					factor = 1.25
					has_character_modifier = magic_power_1
					}
				modifier = {
					factor = 0.75
					has_character_modifier = magic_power_2
					}
				modifier = {
					factor = 0.5
					has_character_modifier = magic_power_3
					}
				modifier = {
					factor = 0.25
					has_character_modifier = magic_power_4
					}

				 }

	option = {
		name = EVTOPTAmagicpotential10
		if = {
			limit = {
				is_invincible_trigger = yes
			}
			antideath_effect = yes
			break = yes
		}
		death = { death_reason = death_execution }
		if = {
			limit = { higher_tier_than = BARON }
			any_realm_lord = {
				limit = {
					ai = no
					NOT = { has_character_flag = no_witch_notifications }
				}
				character_event = { id = magicpotential.11 }
			}
		}
		else_if = {
			limit = {
				is_lowborn = no
			}
			any_dynasty_member = {
				character_event = { id = magicpotential.11 }
			}
		}
	}
}

##PC rulers are informed if a fellow realm lord has been killed as a sorcerer##
character_event = {
    id = magicpotential.11
    title = WITCH_WITCH
    desc = EVTDESCmagicpotential11
    picture = "GFX_evt_burning_stake"

	is_triggered_only = yes

	option = {
	name = EVTOPTAmagicpotential11
	set_character_flag = no_witch_notifications
	}

	option = {
		name = EVTOPTBmagicpotential11
	}
}


##ICE WITCHES AND ARABYAN SCHOLARS##
### Kislev discriminates against men, Araby against women##

#Kislev event for Witches hunting
character_event = {
	id = magicpotential.12
	desc = EVTDESCiwitchHunt
	picture = "GFX_evt_kislev_ice_witch"
	is_triggered_only=yes

	#mean_time_to_happen = { years = 1}

	option = { #confront the mage
		name = EVTOPTAiwitchHunt
		event_target:the_accused = { character_event = { id = magicpotential.12005 } }
	}

}

#courtier is confronted#
character_event = {
	id = magicpotential.12005
	desc = EVTDESCmagicpotential12005
	picture = "GFX_evt_kislev_ice_witch"

	is_triggered_only = yes

	#If not independent, appeal to your liege##
	option = {
		name = EVTOPTAmagicpotential12005
		trigger = { independent = no }
		liege = { character_event = { id = magicpotential.12006 } }
	}

	option = { #Banish Witch
		name = EVTOPTBmagicpotential12005
		trigger = { independent = yes }
		piety = -250
		FROM = { banish = yes }
	}

	option = { #Imprison Witch
		name = EVTOPTCmagicpotential12005
		trigger = { independent = yes }
		piety = -350
		FROM = { imprison = yes }
	}
}

#liege is informed one of this courtiers is a suspected mage
character_event = {
	id = magicpotential.12006
	desc = EVTDESCmagicpotential12006
	picture = "GFX_evt_kislev_ice_witch"

	is_triggered_only = yes

	option = { #Burn it!
		name = EVTOPTAmagicpotential12006
		trigger = {
			OR = { ai = no
				trait = zealous
				trait = paranoid
				trait = arbitrary
				trait = cruel
				NOT = { ROOT = { opinion = { who = FROM value = 20 } } }
			}
		}
		FROM = { character_event = { id = magicpotential.12007 } }
		ai_chance = {
			factor = 5
			modifier={
				factor=1.2
				event_target:witch_hunter={martial=10}
			}
			modifier={
				factor=1.2
				event_target:witch_hunter={martial=15}
			}
			modifier={
				factor=1.2
				event_target:witch_hunter={intrigue=15}
			}
			modifier={
				factor=2
				martial=10
			}
			modifier={
				factor=2
				trait=cruel
			}
			modifier={
				factor=2
				trait=wroth
			}
			modifier={
				factor=0.5
				from={dynasty=root}
			}
			modifier={
				factor=0.5
				from={is_close_relative=root}
			}
		}
		custom_tooltip={
			FROM={
				death = { death_reason = death_execution_burning killer = ROOT }
				add_trait = staked
			}
		}
		if = { limit = { event_target:witch_hunter={ society_member_of = ice_witch_sisterhood } }
			event_target:witch_hunter={character_event={id=iwitch.5}}
		}
		else = {
			event_target:witch_hunter={character_event={id= bretonmagic.5}}
		}
	}
	option = { #Neutralize it.
		name = EVTOPTBmagicpotential12006
		FROM = { character_event = { id = magicpotential.12008 } }
		ai_chance = { factor = 20
			modifier={
				factor=2
				event_target:witch_hunter={intrigue=15}
			}
			modifier={
				factor=1.5
				event_target:witch_hunter={diplomacy=10}
			}
			modifier={
				factor=2
				event_target:witch_hunter={diplomacy=15}
			}
		}
		custom_tooltip={
			FROM={
				add_trait = hollowed
				abdicate = yes
			}
		}
		if = { limit = { event_target:witch_hunter={ society_member_of = ice_witch_sisterhood } }
			event_target:witch_hunter={character_event={id=iwitch.5}}
		}
		else = {
			event_target:witch_hunter={character_event={id= bretonmagic.5}}
		}
	}

	option = { #Mercy
		name = EVTOPTCmagicpotential12006
		trigger = {
			OR = {
			ai = no
			ROOT = { opinion = { who = FROM value = 50 } }
			NOT={culture_group=kislevite_group}
			}
		}
		ai_chance = {
			factor = 5
			modifier={
				factor=4
				not={culture_group=kislevite_group}
			}
			modifier={
				factor=8
				from={culture=root}
				not={culture_group=kislevite_group}
			}
			modifier={
				factor=8
				from={culture=root}
				not={culture_group=kislevite_group}
			}
		}
		piety = -250
		any_vassal = {
			limit = { religion_group = old_world_group }
			opinion = {  modifier = opinion_spared_witch who = ROOT }
		}
		any_courtier = {
			limit = {
				religion_group = old_world_group
				is_ruler = no
			}
			opinion = { modifier = opinion_spared_witch who = ROOT }
		}
		FROMFROM = { opinion = { modifier = opinion_protected_me who = ROOT } }
		FROM = { character_event = { id = magicpotential.12009 } }
		ai_chance = { factor = 25 }
		if = { limit = { event_target:witch_hunter={ society_member_of = ice_witch_sisterhood } }
			event_target:witch_hunter={character_event={id=iwitch.6}}
		}
		else = {
			event_target:witch_hunter={character_event={id= bretonmagic.6}}
		}
	}
}

character_event = {
	id = magicpotential.12007
	desc = EVTDESCmagicpotential12007
	picture = "GFX_evt_kislev_ice_witch"

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_25A #"Nooooo!"
		if = {limit = {is_invincible_trigger = yes}
			antideath_effect = yes
			break = yes
		}
		add_trait = staked
		death = { death_reason = death_execution_burning killer = FROM }
	}
}

character_event = {
	id = magicpotential.12008
	desc = EVTDESCmagicpotential12008
	picture = "GFX_evt_kislev_ice_witch"

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_26A #"Nooooo!"
		add_trait = hollowed
		hidden_tooltip = {
			remove_character_modifier = magic_power_1
			remove_character_modifier = magic_power_2
			remove_character_modifier = magic_power_3
			remove_character_modifier = magic_power_4
			remove_trait = lore_ice
			remove_trait = lore_fire
			remove_trait = lore_beasts
			remove_trait = lore_metal
			remove_trait = lore_light
			remove_trait = lore_life
			remove_trait = lore_heavens
			remove_trait = lore_death
			remove_trait = lore_shadows
			remove_trait = lore_high_magic
			remove_trait = lore_dark_magic
			remove_trait = lore_nurgle
			remove_trait = lore_slaanesh
			remove_trait = lore_tzeentch
			remove_trait = lore_necromancy
			remove_trait = lore_waaagh
		}
		abdicate = yes
	}
}

character_event = {
	id = magicpotential.12009
	desc = EVTDESCmagicpotential12009
	picture = "GFX_evt_kislev_ice_witch"

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_27A #"A close call!"
	}
}

#Araby event for Scholars hunting
character_event = {
		id = magicpotential.13
		desc = EVTDESCmagicpotential13
		picture = "GFX_evt_mage_lore_light"

		capable_only = yes

	    trigger = {
		is_incapacitated_trigger = no
	        age = 16
		top_liege = { OR = { religion = ormazd
					religion = kitabid } }
		trait = arabyan_scholar
		OR = { religion = ormazd
			religion = kitabid }
	    any_courtier = { NOT = { trait = in_hiding }
				NOT = { trait = incapable }
				NOT = { is_daemon_race_trigger = yes }
				NOT = { trait = hollowed }
				is_female = yes
				OR = { has_character_modifier = magic_power_1
					has_character_modifier = magic_power_2
					has_character_modifier = magic_power_3
					has_character_modifier = magic_power_4
					trait = mage_apprentice } }
	    	}

	    mean_time_to_happen = { years = 1}

	    option = { #confront the mage
	        name = EVTOPTAmagicpotential13
	        random_courtier = {
	            limit = {
	                    NOT = { trait = in_hiding }
				NOT = { trait = incapable }
				NOT = { is_daemon_race_trigger = yes }
				NOT = { trait = hollowed }
				is_female = yes
				OR = { has_character_modifier = magic_power_1
					has_character_modifier = magic_power_2
					has_character_modifier = magic_power_3
					has_character_modifier = magic_power_4
					trait = mage_apprentice }
	            }
		character_event = { id = magicpotential.13005 }
	        }
	    }

}

#courtier is confronted#
character_event = {
	id = magicpotential.13005
	desc = EVTDESCmagicpotential13005
	picture = "GFX_evt_mage_lore_light"

	is_triggered_only = yes

	#If not independent, appeal to your liege##
	option = {
	name = EVTOPTAmagicpotential13005
	trigger = { independent = no }
	liege = { character_event = { id = magicpotential.13006 } }
	}

	option = { #Banish Witch
	name = EVTOPTBmagicpotential13005
	trigger = { independent = yes }
		piety = -250
	FROM = { banish = yes }
	}

	option = { #Imprison Witch
	name = EVTOPTCmagicpotential13005
	trigger = { independent = yes }
		piety = -350
	FROM = { imprison = yes }
	}
}

#liege is informed one of this courtiers is a suspected mage
character_event = {
	id = magicpotential.13006
	desc = EVTDESCmagicpotential13006
	picture = "GFX_evt_mage_lore_light"

	is_triggered_only = yes

	option = { #Burn it!
	name = EVTOPTAmagicpotential13006
	trigger = {
		OR = { ai = no
			trait = zealous
			trait = paranoid
			trait = arbitrary
			trait = cruel
			NOT = { ROOT = { opinion = { who = FROM value = 20 } } }
			}
		}
	FROM = { character_event = { id = magicpotential.13007 } }
	ai_chance = { factor = 25 }
	}
	option = { #Neutralize it.
	name = EVTOPTBmagicpotential13006
	FROM = { character_event = { id = magicpotential.13008 } }
	ai_chance = { factor = 50 }
	}

	option = { #Mercy
	name = EVTOPTCmagicpotential13006
	trigger = { OR = {
			ai = no
			ROOT = { opinion = { who = FROM value = 50 } }
			}
		}
		piety = -250
		any_vassal = { limit = { religion_group = old_world_group }
				opinion = { modifier = opinion_spared_witch
						who = ROOT }
			 }
		any_courtier = { limit = { religion_group = old_world_group
					is_ruler = no }
				opinion = { modifier = opinion_spared_witch
						who = ROOT }
			 }
		any_vassal = { limit = { OR = { religion = ormazd
						religion = kitabid } }
				opinion = { modifier = opinion_spared_witch
						who = ROOT }
			 }
		any_courtier = { limit = { OR = { religion = ormazd
						religion = kitabid }
					is_ruler = no }
				opinion = { modifier = opinion_spared_witch
						who = ROOT }
			 }
			FROMFROM = { opinion = { modifier = opinion_protected_me
						who = ROOT } }
	FROM = { character_event = { id = magicpotential.13009 } }
	ai_chance = { factor = 25 }
	}
}


character_event = {
	id = magicpotential.13007
	desc = EVTDESCmagicpotential13007
	picture = "GFX_evt_mage_lore_light"

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_25A #"Nooooo!"
		if = {limit = {is_invincible_trigger = yes}
			antideath_effect = yes
			break = yes
		}
		add_trait = staked
		death = { death_reason = death_execution_burning
			killer = FROM }
	}
}

character_event = {
	id = magicpotential.13008
	desc = EVTDESCmagicpotential13008
	picture = "GFX_evt_mage_lore_light"

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_26A #"Nooooo!"
		add_trait = hollowed
		hidden_tooltip = {
 remove_character_modifier = magic_power_1
					remove_character_modifier = magic_power_2
					remove_character_modifier = magic_power_3
					remove_character_modifier = magic_power_4
					remove_trait = lore_ice
					remove_trait = lore_fire
					remove_trait = lore_beasts
					remove_trait = lore_metal
					remove_trait = lore_light
					remove_trait = lore_life
					remove_trait = lore_heavens
					remove_trait = lore_death
					remove_trait = lore_shadows
					remove_trait = lore_high_magic
					remove_trait = lore_dark_magic
					remove_trait = lore_nurgle
					remove_trait = lore_slaanesh
					remove_trait = lore_tzeentch
					remove_trait = lore_necromancy
					remove_trait = lore_waaagh
					 }

		abdicate = yes
	}
}

character_event = {
	id = magicpotential.13009
	desc = EVTDESCmagicpotential13009
	picture = "GFX_evt_mage_lore_light"

	is_triggered_only = yes

	option = {
		name = EVTOPT_WITCHHUNTER_27A #"A close call!"
	}
}
