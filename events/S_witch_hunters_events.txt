namespace = swhunters
#####################################
#Witch Hunters Flavor Tombolas
#WB.25200 Arm wrestling
#MNM.4217 #I own heretical books!
#HF.500 Train a Member
#whunters 61-80 misc
#whunters 51-61 Investigation Tombola
#Incapable Master gets removed by the others.

character_event = {
	id = swhunters.1
	desc = EVTDESCswhunters1
	picture = GFX_evt_witch_hunters

	is_triggered_only = yes

	option = {
		name = EVTOPTAswhunters1
		clr_character_flag = witch_hunter_accusation
		if = {
			limit = { NOT = { has_landed_title = k_witch_hunters_order } }
			character_event = { id = shunters.1 }
			FROM = {
				character_event = { id = swhunters.4 }
			}
		}
		if = {
			limit = { has_landed_title = k_witch_hunters_order }
			character_event = { id = shunters.20002 }
			FROM = {
				character_event = { id = swhunters.4 }
			}
		}
	}
}

#Incapable Master removed - Notify the accuser.
character_event = {
	id = swhunters.4
	desc = EVTDESCswhunters10001
	picture = GFX_evt_witch_hunters

	is_triggered_only = yes

	option = {
		name = EVTOPTAswhunters10001
		piety = 50
		clr_character_flag = witch_hunter_accusation
	}
}

#Master accused of bad conduct.
character_event = {
	id = swhunters.2
	desc = EVTDESCswhunters2
	picture = GFX_evt_witch_hunters

	is_triggered_only = yes

	option = {
		name = EVTOPTAswhunters2
		clr_character_flag = witch_hunter_accusation
		hidden_tooltip = {
			k_witch_hunters_order = { holder_scope = { character_event = { id = swhunters.3 days = 2 } } } #verdict
			k_witch_hunters_order = { holder_scope = { character_event = { id = swhunters.20001 } } }
			d_witch_hunter_seat_1 = { holder_scope = { character_event = { id = swhunters.20001 } } }
			d_witch_hunter_seat_2 = { holder_scope = { character_event = { id = swhunters.20001 } } }
			d_witch_hunter_seat_3 = { holder_scope = { character_event = { id = swhunters.20001 } } }
			d_witch_hunter_seat_4 = { holder_scope = { character_event = { id = swhunters.20001 } } }
			d_witch_hunter_seat_5 = { holder_scope = { character_event = { id = swhunters.20001 } } }
			d_witch_hunter_seat_6 = { holder_scope = { character_event = { id = swhunters.20001 } } }
			d_witch_hunter_seat_7 = { holder_scope = { character_event = { id = swhunters.20001 } } }
			d_witch_hunter_seat_8 = { holder_scope = { character_event = { id = swhunters.20001 } } }
			d_witch_hunter_seat_9 = { holder_scope = { character_event = { id = swhunters.20001 } } }
			d_witch_hunter_seat_10 = { holder_scope = { character_event = { id = swhunters.20001 } } }
			d_witch_hunter_seat_11 = { holder_scope = { character_event = { id = swhunters.20001 } } }
			d_witch_hunter_seat_12 = { holder_scope = { character_event = { id = swhunters.20001 } } }
		}
	}
}

#Council-Knights receive notification and vote.
character_event = {
	id = swhunters.20001
	desc = EVTDESCswhunters20001
	picture = GFX_evt_witch_hunters

	trigger = {
		NOT = { character = FROM }
		NOT = { character = FROMFROMFROM }
	} #accuser and accused don't get a vote

	is_triggered_only = yes

	option = {
		name = EVTOPTAswhunters20001
		FROM = {
			change_variable = { which = witch_hunter_investigation_proof value = 1 }
		}
		ai_chance = { factor = 50 }
	} #closesoption

	option = {
		name = EVTOPTBswhunters20001
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				opinion = { who = FROM value = 75 }
			}
			modifier = {
				factor = 0.65
				opinion = { who = FROM value = 60 }
			}
			modifier = {
				factor = 0.75
				opinion = { who = FROM value = 50 }
			}
			modifier = {
				factor = 0.85
				opinion = { who = FROM value = 40 }
			}
			modifier = {
				factor = 0.85
				opinion = { who = FROM value = 30 }
			}
			modifier = {
				factor = 0.95
				opinion = { who = FROM value = 20 }
			}
			modifier = {
				factor = 0.95
				opinion = { who = FROM value = 10 }
			}
			modifier = {
				factor = 1.25
				NOT = { opinion = { who = FROM value = -10 } }
			}
			modifier = {
				factor = 1.25
				NOT = { opinion = { who = FROM value = -20 } }
			}
			modifier = {
				factor = 1.25
				NOT = { opinion = { who = FROM value = -30 } }
			}
			modifier = {
				factor = 1.25
				NOT = { opinion = { who = FROM value = -40 } }
			}
			modifier = {
				factor = 1.25
				NOT = { opinion = { who = FROM value = -50 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = -60 } }
			}
			modifier = {
				factor = 1.75
				NOT = { opinion = { who = FROM value = -75 } }
			}
			modifier = {
				factor = 0.01
				FROM = {
					OR = {
						trait = incapable
				trait = inbred
				trait = possessed
				trait = excommunicated
				trait = lunatic_3
				is_mutated_trigger = yes
				trait = mage_apprentice
				trait = monstrous
				trait = immortal
				has_character_modifier = magic_power_1
				has_character_modifier = magic_power_2
				has_character_modifier = magic_power_3
				has_character_modifier = magic_power_4
				trait = magic_potential_1
				trait = magic_potential_2
				trait = magic_potential_3
				trait = magic_potential_4 } }
			}
			modifier = {
				factor = 0.1
				FROM = { trait = possessed }
			}
			modifier = {
				factor = 0
				FROM = { is_mutated_trigger = yes }
			}
			modifier = {
				factor = 0
				FROM = { NOT = { trait = witch_hunter } }
			}
			modifier = {
				factor = 0.25
				FROM = { OR = { has_character_modifier = magic_power_1
					has_character_modifier = magic_power_2
					has_character_modifier = magic_power_3
					has_character_modifier = magic_power_4 } }
			}
			modifier = {
				factor = 0.25
				FROM = { OR = { trait = magic_potential_1
					trait = magic_potential_2
					trait = magic_potential_3
					trait = magic_potential_4 } }
			}
			modifier = {
				factor = 0.1
				FROM = { trait = incapable }
			}
			modifier = {
				factor = 0.5
				FROM = { has_minor_mutation_trigger = yes }
			}
			modifier = {
				factor = 1.5
				FROM = { has_landed_title = k_witch_hunters_order }
			}
			modifier = {
				factor = 3
				FROM = { has_landed_title = k_witch_hunters_order }
				trait = envious
			}
			modifier = {
				factor = 0.1
				FROM = { has_major_mutation_trigger = yes }
			}
			modifier = {
				factor = 0
				FROM = { has_massive_mutation_trigger = yes }
			}
			modifier = {
				factor = 0.5
				trait = paranoid
			}
			modifier = {
				factor = 0.5
				FROM = { trait = cynical }
				trait = zealous
			}
			modifier = {
				factor = 0.85
				FROM = { trait = lunatic_1 }
			}
			modifier = {
				factor = 0.75
				FROM = { trait = lunatic_2 }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = lunatic_3 }
			}
			modifier = {
				factor = 1.25
				FROM = { trait = shy }
			}
			modifier = {
				factor = 0.85
				FROM = { trait = mystic }
			}
			modifier = {
				factor = 0.85
				FROM = { trait = intricate_webweaver }
			}
			modifier = {
				factor = 0.75
				FROM = { trait = intricate_webweaver }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = elusive_shadow }
			}
			modifier = {
				factor = 1.15
				FROM = { trait = charismatic_negotiator }
			}
			modifier = {
				factor = 1.25
				FROM = { trait = grey_eminence }
			}
			modifier = {
				factor = 0.95
				FROM = { trait = fortune_builder }
			}
			modifier = {
				factor = 0.75
				FROM = { trait = midas_touched }
			}
			modifier = {
				factor = 1.15
				FROM = { trait = tough_soldier }
			}
			modifier = {
				factor = 1.25
				FROM = { trait = skilled_tactician }
			}
			modifier = {
				factor = 1.45
				FROM = { trait = brilliant_strategist }
			}
			modifier = {
				factor = 1.25
				FROM = { trait = detached_priest  }
			}
			modifier = {
				factor = 1.35
				FROM = { trait = martial_cleric }
			}
			modifier = {
				factor = 1.5
				FROM = { trait = scholarly_theologian }
			}
			modifier = {
				factor = 1.75
				FROM = { trait = mastermind_theologian }
			}
			modifier = {
				factor = 0.95
				FROM = { trait = stressed }
			}
			modifier = {
				factor = 0.75
				FROM = { trait = infirm }
			}
			modifier = {
				factor = 0.75
				FROM = { trait = drunkard }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = addict }
			}
			modifier = {
				factor = 0.75
				FROM = { trait = pregnant }
			}
			modifier = {
				factor = 0.75
				FROM = { trait = homosexual }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = kinslayer }
			}
			modifier = {
				factor = 0.75
				FROM = { trait = clubfooted }
			}
			modifier = {
				factor = 0.75
				FROM = { trait = harelip }
			}
			modifier = {
				factor = 0.75
				FROM = { trait = hunchback }
			}
			modifier = {
				factor = 0.75
				FROM = { trait = lisp }
			}
			modifier = {
				factor = 0.75
				FROM = { trait = stutter }
			}
			modifier = {
				factor = 1.75
				FROM = { trait = dwarf }
			}
			modifier = {
				factor = 2
				FROM = { trait = inbred }
			}
			modifier = {
				factor = 0.75
				FROM = { trait = celibate }
			}
			modifier = {
				factor = 1.5
				FROM = { trait = hedonist }
			}
			modifier = {
				factor = 0.75
				FROM = { trait = scholar }
			}
			modifier = {
				factor = 1.25
				FROM = { trait = impaler }
			}
			modifier = {
				factor = 1.25
				FROM = { trait = poet }
			}
			modifier = {
				factor = 0.85
				FROM = { trait = lustful }
			}
			modifier = {
				factor = 1.15
				FROM = { trait = chaste }
			}
			modifier = {
				factor = 0.85
				FROM = { trait = gluttonous }
			}
			modifier = {
				factor = 1.15
				FROM = { trait = temperate }
			}
			modifier = {
				factor = 0.85
				FROM = { trait = greedy }
			}
			modifier = {
				factor = 0.95
				FROM = { trait = charitable }
			}
			modifier = {
				factor = 0.85
				FROM = { trait = slothful }
			}
			modifier = {
				factor = 1.25
				FROM = { trait = diligent }
			}
			modifier = {
				factor = 0.85
				FROM = { trait = envious }
			}
			modifier = {
				factor = 0.85
				FROM = { trait = kind }
			}
			modifier = {
				factor = 0.95
				FROM = { trait = wroth }
			}
			modifier = {
				factor = 1.15
				FROM = { trait = patient }
			}
			modifier = {
				factor = 0.85
				FROM = { trait = proud }
			}
			modifier = {
				factor = 1.15
				FROM = { trait = humble }
			}
			modifier = {
				factor = 0.85
				FROM = { trait = deceitful }
			}
			modifier = {
				factor = 0.85
				FROM = { trait = craven }
			}
			modifier = {
				factor = 0.75
				FROM = { trait = cynical }
			}
			modifier = {
				factor = 1.75
				FROM = { trait = zealous }
			}
			modifier = {
				factor = 0.95
				FROM = { trait = cruel }
			}
		}
	}
}

#Verdict given to the Grand Master
character_event = {
	id = swhunters.3
	desc = {
		text = EVTDESCAswhunters3
		trigger = { FROM = { check_variable = { which = witch_hunter_investigation_proof value = 6 } } }
	}
	desc = {
		text = EVTDESCBswhunters3
		trigger = { NOT = { FROM = { check_variable = { which = witch_hunter_investigation_proof value = 6 } } } }
	}
	picture = GFX_evt_witch_hunters

	is_triggered_only = yes

	option = {
		name = EVTOPTAswhunters3 #Kill
		trigger = {
			FROM = { check_variable = { which = witch_hunter_investigation_proof value = 6 } }
			NOT = { character = FROM }
		}
		FROM = { character_event = { id = swhunters.33 } }
		FROMFROMFROM = { character_event = { id = swhunters.35 } }
		ai_chance = { factor = 50 }
	}
	option = { name = EVTOPTBswhunters3 #Exile
		trigger = { FROM = { check_variable = { which = witch_hunter_investigation_proof value = 6 } } }
		FROM = { character_event = { id = swhunters.34 } }
		FROMFROMFROM = { character_event = { id = swhunters.36 } }
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				FROM = {
					OR = {
						trait = lunatic_3
						NOT = { trait = witch_hunter }
						trait = possessed
						trait = leper
						trait = dwarf
						trait = has_nurgles_rot
					}
				}
			}
			modifier = {
				factor = 0.5
				trait = cruel
			}
			modifier = {
				factor = 0.5
				trait = paranoid
			}
			modifier = {
				factor = 0.5
				trait = zealous
			}
		}
	}

	option = { name = EVTOPTCswhunters3 #Innocent
		trigger = { NOT = { FROM = { check_variable = { which = witch_hunter_investigation_proof value = 6 } } } }
		FROM = { character_event = { id = swhunters.37 } }
		FROMFROMFROM = { character_event = { id = swhunters.38 } }
	}
}

#Burned for bad conduct
character_event = {
	id = swhunters.33
	desc = EVTDESCswhunters_33
	picture = GFX_evt_burning_stake

	is_triggered_only = yes

	option = { name = EVTOPTAswhunters_33
		piety = -250
		clr_character_flag = witch_hunter_accusation
		if = {
			limit = {is_invincible_trigger = yes}
			antideath_effect = yes
			break = yes
		}
		add_trait = staked
		death = { death_reason = death_execution_burning killer = FROM }
	}
}

#Exiled for bad conduct
character_event = {
	id = swhunters.34
	desc = EVTDESCswhunters_34
	picture = GFX_evt_witch_hunters

	is_triggered_only = yes

	option = { name = EVTOPTAswhunters_34
		piety = -250
		set_variable = { which = witch_hunter_investigation_proof value = 0 }
		clr_character_flag = witch_hunter_accusation
		if = { limit = { NOT = { has_landed_title = k_witch_hunters_order } }
			character_event = { id = shunters.1 }
		}
		if = { limit = { has_landed_title = k_witch_hunters_order }
			character_event = { id = shunters.20002 }
		}
		random_independent_ruler = {
			limit = { religion_group = ROOT }
			ROOT = { move_character = PREV }
		}
		remove_trait = witch_hunter
		opinion = { who = FROMFROMFROMFROM modifier = opinion_framed_me months = 180 }
		location = { ROOT = { culture = PREV } }
	}
}

#Burned for bad conduct - Notify Accuser
character_event = {
	id = swhunters.35
	desc = EVTDESCswhunters_35
	picture = GFX_evt_burning_stake

	is_triggered_only = yes

	option = { name = EVTOPTAswhunters_35
		piety = 250
		clr_character_flag = witch_hunter_accusation
	}
}

#Exiled for bad conduct - Notify Accuser
character_event = {
	id = swhunters.36
	desc = EVTDESCswhunters_36
	picture = GFX_evt_witch_hunters

	is_triggered_only = yes

	option = { name = EVTOPTAswhunters_36
		piety = 150
		clr_character_flag = witch_hunter_accusation
	}
}

#Found innocent of charges
character_event = {
	id = swhunters.37
	desc = EVTDESCswhunters_37
	picture = GFX_evt_witch_hunters

	is_triggered_only = yes

	option = { name = EVTOPTAswhunters_37
		piety = 50
		clr_character_flag = witch_hunter_accusation
		set_variable = { which = witch_hunter_investigation_proof value = 0 }
		opinion = {
			who = FROMFROMFROMFROM
			modifier = opinion_accused_me
			months = 36
		}
		add_character_modifier = {
			name = accused_recently
			duration = 900
			hidden = yes
		}
	}
}

#Found innocent of charges - Notify Accuser
character_event = {
	id = swhunters.38
	desc = EVTDESCswhunters_38
	picture = GFX_evt_witch_hunters

	is_triggered_only = yes

	option = { name = EVTOPTAswhunters_38
		piety = -150
		clr_character_flag = witch_hunter_accusation
	} #closesoption
}

# A ruler asks for a loan.
letter_event = {
	id = swhunters.5
	desc = EVTDESCswhunters5
	#picture = GFX_evt_witch_hunters
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes

	option = {
		name = EVTOPTAswhunters5
		trigger = { wealth = 500 }
		wealth = -500
		FROM = { letter_event = { id = swhunters.68 } }
		ai_chance = {
			factor = 70
			modifier = {
				factor = 1.75
				trait = trusting
			}
		}
	}
	option = {
		name = EVTOPTBswhunters5
		FROM = { letter_event = { id = swhunters.69 } }
		FROM = { opinion = { who = ROOT modifier = opinion_refused_loan } }
		ai_chance = {
			factor = 30
			modifier = {
				factor = 1.75
				trait = paranoid
			}
		}
	}
}

# Notification event when borrowing money from the Witch Hunters
letter_event = {
	id = swhunters.68
	desc = EVTDESCswhunters_51
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes

	option = {
		name = EXCELLENT
		wealth = 500
		add_character_modifier = {
			name = borrowed_from_k_witch_hunters_order
			duration = -1
			inherit = yes
		}

	}
}
# Notification the loan was refused.
letter_event = {
	id = swhunters.69
	desc = EVTDESCswhunters_69
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes

	option = {
		name = EVTOPTAswhunters_69
	}
}

#Received donation
character_event = {
	id = swhunters.6
	desc = EVTDESCswhunters6
	notification = yes

	is_triggered_only = yes

	immediate = {
		wealth = 500
		opinion = { who = FROM modifier = opinion_generous_donation }
		FROM = { letter_event = { id = swhunters.60001 } }
	}
	option = {
	}
}

# Notification Witch Hunters received payment
letter_event = {
	id = swhunters.60001
	desc = EVTDESCswhunters60001
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes

	option = {
		name = EXCELLENT
	}
}


# Ping event when expelling Witch Hunters from a Realm
character_event = {
	id = swhunters.7

	hide_window = yes

	is_triggered_only = yes

	immediate = {
		any_title_under = {
			limit = {
				tier = BARON
				location = { owner = {
						OR = {
							character = FROM
							is_liege_or_above = FROM
						}
					}
				}
			}
			usurp_title = FROM
		}

		if = { limit = { is_liege_or_above = FROM }
			set_defacto_liege = THIS
		}
		letter_event = { id = swhunters.75 }

		FROM = { letter_event = { id = swhunters.74 } }

		opinion = { who = FROM modifier = opinion_expelled_from_realm }
	}
}

# Answer from the Witch Hunters Order
letter_event = {
	id = swhunters.74
	desc = EVTDESCswhunters_71
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes

	immediate = {
		remove_character_modifier = donated_to_holy_order
	}

	option = {
		name = EVTOPTAswhunters_71
	}
}

# Notification event when the Order has been expelled from a province
letter_event = {
	id = swhunters.75
	desc = EVTDESCswhunters_72
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes

	option = {
		name = EVTOPTAswhunters_72
	}
}

# Notification a ruler welcomes Witch Hunters in his realm once more
letter_event = {
	id = swhunters.8
	desc = EVTDESCswhunters8
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes

	option = {
		name = EXCELLENT
		FROM = { letter_event = { id = swhunters.81 } }
		random_courtier = {
			limit = {
				is_ruler = no
				trait = witch_hunter
			}
			move_character = FROM
			random_courtier = {
				limit = {
					is_ruler = no
					trait = witch_hunter
					NOT = { character = PREV }
				}
				move_character = FROM
			}
		}
	}
}

# Notification from the Order returning in the realm
letter_event = {
	id = swhunters.81
	desc = EVTDESCswhunters_81
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes

	option = {
		name = EVTOPTAswhunters_81
	}
}


# The Grand Master demands one of your sons due to debt (only for AI, player asks by decision)
character_event = {
	id = swhunters.9

	hide_window = yes

	only_playable = yes
	religion_group = old_world_group

	trigger = {
		OR = {
			religion = sigmarite
			religion = myrmidian
			religion = ulrican
			religion = taalite
			religion = shallyan
			religion = manannite
		}
		is_heretic = no
		has_character_modifier = borrowed_from_k_witch_hunters_order
		NOT = { has_character_flag = sent_son_to_witch_hunters }
		k_witch_hunters_order = { holder_scope = { ai = yes } }
		any_child = {
			is_female = no
			is_adult = yes
			is_ruler = no
			prisoner = no
			NOT = { trait = incapable }
			NOR = { has_character_modifier = magic_power_1
				has_character_modifier = magic_power_2
				has_character_modifier = magic_power_3
				has_character_modifier = magic_power_4
				trait = magic_potential_1
				trait = magic_potential_2
				trait = magic_potential_3
				trait = magic_potential_4
				trait = maimed
				trait = has_nurgles_rot
				trait = incapable
				trait = blinded
				is_vampire_visible_trigger = yes
				is_mutated_trigger = yes
			}
		}
		has_dlc = "Sons of Abraham"
	}

	mean_time_to_happen = {
		years = 10
	}

	immediate = {
		random_child = {
			limit = {
				is_female = no
				is_adult = yes
				is_ruler = no
				prisoner = no
				NOT = { trait = incapable }
				NOR = { has_character_modifier = magic_power_1
					has_character_modifier = magic_power_2
					has_character_modifier = magic_power_3
					has_character_modifier = magic_power_4
					trait = magic_potential_1
					trait = magic_potential_2
					trait = magic_potential_3
					trait = magic_potential_4
					trait = maimed
					trait = has_nurgles_rot
					trait = incapable
					trait = blinded
					is_vampire_visible_trigger = yes
					is_mutated_trigger = yes
				}
			}
			character_event = { id = swhunters.91 }
		}
	}

	option = {
		name = OK
	}
}

character_event = {
	id = swhunters.91

	hide_window = yes

	is_triggered_only = yes

	immediate = {
		k_witch_hunters_order = { holder_scope = { character_event = { id = swhunters.92 } } }
	}
}

character_event = {
	id = swhunters.92

	hide_window = yes

	is_triggered_only = yes

	immediate = {
		FROMFROM = { letter_event = { id = swhunters.93 } }
	}
}

letter_event = {
	id = swhunters.93
	desc = EVTDESCswhunters_93
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes

	option = {
		name = EVTOPTA_SOA_1003 # Agree
		ai_chance = {
			factor = 90
		}

		set_character_flag = sent_son_to_witch_hunters

		piety = 100

		k_witch_hunters_order = {
			holder_scope = {
				FROMFROM = {
					move_character = PREV
					hidden_tooltip = {
						clear_wealth = PREV
					}
					spouse = {
						remove_spouse = spouse
						hidden_tooltip = { character_event = { id = SoA.2862 } }
					}
					add_trait = witch_hunter
					culture = witchhunter_culture
					religion = sigmarite
					any_spouse = { remove_spouse = PREV }
					if = {
						limit = { trait = in_hiding }
						remove_trait = in_hiding
						clr_character_flag = do_not_disturb
						add_character_modifier = {
							name = went_out_of_hiding_timer
							duration = 180
							hidden = yes
						}
						hidden_tooltip = { character_event = { id = CM.6400 } } # Notify plotters and family
					}
				}
			}
		}
	}

	option = {
		name = EVTOPTB_SOA_1003 # Pay them back
		wealth = -500
		hidden_tooltip = {
			remove_character_modifier = borrowed_from_k_witch_hunters_order
		}
		FROM = {
			wealth = 500
		}
		ai_chance = {
			factor = 100
		}

	}

	option = {
		name = EVTOPTC_SOA_1003 # Refuse
		piety = -1000
		ai_chance = {
			factor = 10
		}

	}
}



# The Grand Master demands the right to build a castle in your demesne (only AI, player uses decision)
character_event = {
	id = swhunters.10

	hide_window = yes

	only_playable = yes
	religion_group = old_world_group

	trigger = {
		OR = {
			religion = sigmarite
			religion = myrmidian
			religion = ulrican
			religion = taalite
			religion = shallyan
			religion = manannite
		}
		is_heretic = no

		has_character_modifier = borrowed_from_k_witch_hunters_order
		NOT = { has_character_flag = sent_son_to_witch_hunters }

		any_demesne_province = {
			has_empty_holding = yes
		}

		k_witch_hunters_order = {
			holder_scope = {
				ai = yes
				wealth = 300
			}
		}
		has_dlc = "Sons of Abraham"

		NOT = { has_character_modifier = expelled_k_witch_hunters_order }
		NOT = { any_liege = { has_character_modifier = expelled_k_witch_hunters_order } }
	}

	mean_time_to_happen = {
		years = 5
	}

	immediate = {
		random_demesne_province = {
			limit = {
				has_empty_holding = yes
			}
			province_event = {
				id = swhunters.11
			}
		}
	}

	option = {
		name = OK
	}
}

province_event = {
	id = swhunters.11

	hide_window = yes

	is_triggered_only = yes

	immediate = {
		k_witch_hunters_order = {
			holder_scope = { character_event = { id = swhunters.12 } }
		}
	}

}

character_event = {
	id = swhunters.12

	hide_window = yes

	is_triggered_only = yes

	immediate = {
		FROMFROM = { letter_event = { id = swhunters.13 } }
	}

}

letter_event = {
	id = swhunters.13
	desc = EVTDESCswhunters13
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes

	option = {
		name = EVTOPTA_SOA_1023 # Agree
		ai_chance = {
			factor = 100
		}

		hidden_tooltip = {
			remove_character_modifier = borrowed_from_k_witch_hunters_order
			remove_character_modifier = expelled_k_witch_hunters_order
			FROMFROM = {
				province_event = { id = swhunters.14 }
			}
		}

		piety = 100
	}

	option = {
		name = EVTOPTB_SOA_1003 # Pay them back
		wealth = -500
		hidden_tooltip = {
			remove_character_modifier = borrowed_from_k_witch_hunters_order
		}
		FROM = {
			wealth = 500
		}
	}

	option = {
		name = EVTOPTC_SOA_1003 # Refuse
		piety = -1000
	}
}

# Castle has been erected
province_event = {
	id = swhunters.14
	desc = EVTDESCswhunters14
	picture = GFX_evt_castle_construction
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	immediate = {
		FROMFROM = {
			wealth = -300
		}
	}

	option = {
		name = EVTOPTA_SOA_1024
		build_holding = {
		   type = castle
		   holder = FROMFROM
		}
	}
}

# The Grand Master humbly requests the right to build a castle in your demesne
character_event = {
	id = swhunters.15

	hide_window = yes

	only_playable = yes
	religion_group = old_world_group

	trigger = {
		OR = { religion = sigmarite
			religion = myrmidian
			religion = ulrican
			religion = taalite
			religion = shallyan
			religion = manannite }
		is_heretic = no

		k_witch_hunters_order = {
			holder_scope = {
				ai = yes
				wealth = 300
				NOT = { realm_size = 10 }
				NOT = { num_of_count_titles = 2 }
			}
		}

		any_demesne_province = {
			has_empty_holding = yes
			region = world_old_world
		}
		has_dlc = "Sons of Abraham"

		NOT = { has_character_modifier = expelled_k_witch_hunters_order }
		NOT = { any_liege = { has_character_modifier = expelled_k_witch_hunters_order } }
	}

	mean_time_to_happen = {
		years = 20
		modifier = {
			factor = 0.5
			k_witch_hunters_order = { holder_scope = { NOT = { demesne_size = 1 } } }
		}
		modifier = {
			factor = 0.5
			k_witch_hunters_order = { holder_scope = { NOT = { demesne_size = 2 } } }
		}
		modifier = {
			factor = 2.0
			k_witch_hunters_order = { holder_scope = { realm_size = 5 } }
		}
	}

	immediate = {
		random_demesne_province = {
			limit = {
				has_empty_holding = yes
				region = world_old_world
			}
			province_event = { id = swhunters.16 }
		}
	}
}

province_event = {
	id = swhunters.16

	hide_window = yes

	is_triggered_only = yes

	immediate = {
		k_witch_hunters_order = { holder_scope = { character_event = { id = swhunters.17 } } }
	}
}

character_event = {
	id = swhunters.17

	hide_window = yes

	is_triggered_only = yes

	immediate = {
		FROMFROM = { letter_event = { id = swhunters.18 } }
	}
}

letter_event = {
	id = swhunters.18
	desc = EVTDESCswhunters18
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes

	option = {
		name = EVTOPTA_SOA_1023 # Agree
		ai_chance = {
			factor = 80
			modifier = {
				factor = 0
				has_character_modifier = expelled_k_witch_hunters_order
			}
		}

		hidden_tooltip = { FROMFROM = { province_event = { id = swhunters.19 } }
			remove_character_modifier = expelled_k_witch_hunters_order
		}

		piety = 200
		wealth = 100
	}

	option = {
		name = EVTOPTB_SOA_1031 # Refuse
		ai_chance = { factor = 20 }

		piety = -100
	}
}

# Castle has been erected
province_event = {
	id = swhunters.19
	desc = EVTDESCswhunters19
	picture = GFX_evt_castle_construction
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	immediate = {
		FROMFROM = { wealth = -300 }
	}

	option = {
		name = EVTOPTA_SOA_1024
		build_holding = {
			type = castle
		 	holder = FROMFROM
		}
	}
}

####################Requesting recruits and fortresses as a player#######################

# Ping to possible recruit by player's decision
character_event = {
	id = swhunters.20
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		liege = { letter_event = { id = swhunters.21 } }
	}
}

# Liege receives request by player
letter_event = {
	id = swhunters.21
	desc = EVTDESCswhunters21
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes


	option = {
		name = EVTOPTAswhunters21
		FROM = {
			add_trait = celibate	#He'll lose them once and if he becomes a Witch Hunter
			add_trait = disinherited
			move_character = FROMFROMFROM

		}
		FROM = {
			IF={limit={FROMFROMFROM={society_member_of=sigmar_witch_hunters}}
				join_society=sigmar_witch_hunters
			}
		}
		FROMFROMFROM = { letter_event = { id = swhunters.21001 } }
		ai_chance = {
			factor = 50
			modifier = { factor = 2.5
				has_character_modifier = borrowed_from_k_witch_hunters_order
				NOT = { wealth = 500 }
			}
			modifier = { factor = 0
				has_character_modifier = borrowed_from_k_witch_hunters_order
				wealth = 500
			}
			modifier = { factor = 2.5
				has_character_modifier = borrowed_from_k_witch_hunters_order
			}
			modifier = { factor = 1.5
				trait = zealous
			}
			modifier = { factor = 1.25
				trait = greedy
			}
			modifier = { factor = 1.25
				trait = shy
			}
			modifier = { factor = 1.5
				religion = sigmarite
			}
			modifier = { factor = 1.5
				religion_group = old_world_group
			}
			modifier = { factor = 0.15
				current_heir = { character = FROM }
			}
			modifier = { factor = 0.15
				any_spouse = { character = FROM }
			}
			modifier = { factor = 0.15
				mother = { character = FROM }
			}
			modifier = { factor = 0.15
				father = { character = FROM }
			}
			modifier = { factor = 0.05
				any_lover = { character = FROM }
			}
			modifier = { factor = 0.25
				any_friend = { character = FROM }
			}
			modifier = { factor = 0.25
				NOT = { opinion = { who = FROMFROMFROM value = -95 } }
			}
			modifier = { factor = 0.5
				NOT = { opinion = { who = FROMFROMFROM value = -75 } }
			}
			modifier = { factor = 0.5
				NOT = { opinion = { who = FROMFROMFROM value = -50 } }
			}
			modifier = { factor = 0.75
				NOT = { opinion = { who = FROMFROMFROM value = -25 } }
			}
			modifier = { factor = 1.25
				opinion = { who = FROMFROMFROM value = 25 }
			}
			modifier = { factor = 1.25
				opinion = { who = FROMFROMFROM value = 50 }
			}
			modifier = { factor = 1.5
				opinion = { who = FROMFROMFROM value = 75 }
			}
			modifier = { factor = 1.75
				opinion = { who = FROMFROMFROM value = 100 }
			}
		}
	}
	option = {
		name = EVTOPTBswhunters21
		trigger = {
			has_character_modifier = borrowed_from_k_witch_hunters_order
			wealth = 500
		}
		FROMFROMFROM = { letter_event = { id = swhunters.21002 } }
		wealth = -500
		remove_character_modifier = borrowed_from_k_witch_hunters_order
		ai_chance = {
			factor = 75
			modifier = { factor = 0
				religion_group = chaos_gods_group
			}
			modifier = { factor = 0.25
				NOT = { opinion = { who = FROMFROMFROM value = -95 } }
			}
			modifier = { factor = 0.5
				NOT = { opinion = { who = FROMFROMFROM value = -75 } }
			}
			modifier = { factor = 0.5
				NOT = { opinion = { who = FROMFROMFROM value = -50 } }
			}
			modifier = { factor = 0.75
				NOT = { opinion = { who = FROMFROMFROM value = -25 } }
			}
			modifier = { factor = 1.25
				opinion = { who = FROMFROMFROM value = 25 }
			}
			modifier = { factor = 1.25
				opinion = { who = FROMFROMFROM value = 50 }
			}
			modifier = { factor = 1.5
				opinion = { who = FROMFROMFROM value = 75 }
			}
			modifier = { factor = 1.75
				opinion = { who = FROMFROMFROM value = 100 }
			}
		}
	}
	option = {
		name = EVTOPTCswhunters21
		increase_visibility_minor_effect = yes
		if = { limit = { religion = sigmarite }
			piety = -1000
		}
		if = { limit = {
				NOT = { religion = sigmarite }
				religion_group = old_world_group
			}
			piety = -500
		}
		if = { limit = { NOT = { religion_group = old_world_group }
			NOT = { religion_group = chaos_gods_group } }
			piety = -250
		}
		if = { limit = { religion_group = chaos_gods_group }
			piety = 150
		}
		FROMFROMFROM = { letter_event = { id = swhunters.21003 } }
		ai_chance = { factor = 50
			modifier = { factor = 1.85
				NOT = { religion_group = old_world_group }
			}
			modifier = { factor = 3
				religion_group = chaos_gods_group
			}
			modifier = { factor = 1.5
				OR = {
					has_character_modifier = magic_power_1
					has_character_modifier = magic_power_2
					has_character_modifier = magic_power_3
					has_character_modifier = magic_power_4
					trait = magic_potential_1
					trait = magic_potential_2
					trait = magic_potential_3
					trait = magic_potential_4
					trait = maimed
					trait = has_nurgles_rot
					trait = incapable
					trait = blinded
					is_vampire_trigger = yes
					society_member_of = cult_of_khorne
					society_member_of = cult_of_khorne2
					society_member_of = cult_of_khorne3
					society_member_of = cult_of_nurgle
					society_member_of = cult_of_nurgle2
					society_member_of = cult_of_nurgle3
					society_member_of = cult_of_slaanesh
					society_member_of = cult_of_slaanesh2
					society_member_of = cult_of_slaanesh3
					society_member_of = cult_of_tzeentch
					society_member_of = cult_of_tzeentch2
					society_member_of = cult_of_tzeentch3
					is_mutated_trigger = yes
				}
			}
		}
	}
}
# Accepted request, courtier arrives
letter_event = {
	id = swhunters.21001
	desc = EVTDESCswhunters21001
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes


	option = {
		name = EVTOPTAswhunters21001
	}
}
# Denied request, exstinguished debt instead
letter_event = {
	id = swhunters.21002
	desc = EVTDESCswhunters21002
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes


	option = {
		name = EVTOPTAswhunters21002
		wealth = 500
	}
}
# Denied request
letter_event = {
	id = swhunters.21003
	desc = EVTDESCswhunters21003
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes


	option = {
		name = EVTOPTAswhunters21003
	}
}

# Ping to possible castle province by player's decision
province_event = {
	id = swhunters.22
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		owner = { letter_event = { id = swhunters.23 } }
	}
}

# Liege receives request by player
letter_event = {
	id = swhunters.23
	desc = EVTDESCswhunters23
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes


	option = {
		name = EVTOPTAswhunters23
		FROM = {
			build_holding = {
				type = castle
		 		holder = FROMFROMFROM
			}
		}
		FROMFROMFROM = { letter_event = { id = swhunters.23001 } }
		ai_chance = { factor = 50
			modifier = { factor = 2.5
				has_character_modifier = borrowed_from_k_witch_hunters_order
				NOT = { wealth = 500 }
			}
			modifier = { factor = 0
				has_character_modifier = borrowed_from_k_witch_hunters_order
				wealth = 500
			}
			modifier = { factor = 2.5
				has_character_modifier = borrowed_from_k_witch_hunters_order
			}
			modifier = { factor = 1.5
				trait = zealous
			}
			modifier = { factor = 1.25
				trait = greedy
			}
			modifier = { factor = 1.25
				trait = shy
			}
			modifier = { factor = 1.5
				religion = sigmarite
			}
			modifier = { factor = 1.5
				religion_group = old_world_group
			}
			modifier = { factor = 0.25
				FROM = { is_capital = yes }
			}
			modifier = { factor = 0.25
				NOT = { opinion = { who = FROMFROMFROM value = -95 } }
			}
			modifier = { factor = 0.5
				NOT = { opinion = { who = FROMFROMFROM value = -75 } }
			}
			modifier = { factor = 0.5
				NOT = { opinion = { who = FROMFROMFROM value = -50 } }
			}
			modifier = { factor = 0.75
				NOT = { opinion = { who = FROMFROMFROM value = -25 } }
			}
			modifier = { factor = 1.25
				opinion = { who = FROMFROMFROM value = 25 }
			}
			modifier = { factor = 1.25
				opinion = { who = FROMFROMFROM value = 50 }
			}
			modifier = { factor = 1.5
				opinion = { who = FROMFROMFROM value = 75 }
			}
			modifier = { factor = 1.75
				opinion = { who = FROMFROMFROM value = 100 }
			}
		}
	}
	option = {
		name = EVTOPTBswhunters23
		trigger = {
			has_character_modifier = borrowed_from_k_witch_hunters_order
			wealth = 500
		}
		FROMFROMFROM = { letter_event = { id = swhunters.23002 } }
		wealth = -500
		remove_character_modifier = borrowed_from_k_witch_hunters_order
		ai_chance = { factor = 75
			modifier = { factor = 0
				religion_group = chaos_gods_group
			}
			modifier = { factor = 0.25
				NOT = { opinion = { who = FROMFROMFROM value = -95 } }
			}
			modifier = { factor = 0.5
				NOT = { opinion = { who = FROMFROMFROM value = -75 } }
			}
			modifier = { factor = 0.5
				NOT = { opinion = { who = FROMFROMFROM value = -50 } }
			}
			modifier = { factor = 0.75
				NOT = { opinion = { who = FROMFROMFROM value = -25 } }
			}
			modifier = { factor = 1.25
				opinion = { who = FROMFROMFROM value = 25 }
			}
			modifier = { factor = 1.25
				opinion = { who = FROMFROMFROM value = 50 }
			}
			modifier = { factor = 1.5
				opinion = { who = FROMFROMFROM value = 75 }
			}
			modifier = { factor = 1.75
				opinion = { who = FROMFROMFROM value = 100 }
			}
		}
	}
	option = {
		name = EVTOPTCswhunters23
				increase_visibility_minor_effect = yes
				if = { limit = { religion = sigmarite }
					piety = -1000 }
				if = { limit = { NOT = { religion = sigmarite }
						religion_group = old_world_group }
					piety = -500 }
				if = { limit = { NOT = { religion_group = old_world_group }
						NOT = { religion_group = chaos_gods_group } }
					piety = -250 }
				if = { limit = { religion_group = chaos_gods_group }
					piety = 150 }
				FROMFROMFROM = { letter_event = { id = swhunters.23003 } }
		ai_chance = { factor = 50
			modifier = { factor = 1.85
				NOT = { religion_group = old_world_group }
			}
			modifier = { factor = 3
				religion_group = chaos_gods_group
			}
			modifier = { factor = 1.5
				OR = {
					has_character_modifier = magic_power_1
					has_character_modifier = magic_power_2
					has_character_modifier = magic_power_3
					has_character_modifier = magic_power_4
					trait = magic_potential_1
					trait = magic_potential_2
					trait = magic_potential_3
					trait = magic_potential_4
					trait = maimed
					trait = has_nurgles_rot
					trait = incapable
					trait = blinded
					is_vampire_trigger = yes
					society_member_of = cult_of_khorne
					society_member_of = cult_of_khorne2
					society_member_of = cult_of_khorne3
					society_member_of = cult_of_nurgle
					society_member_of = cult_of_nurgle2
					society_member_of = cult_of_nurgle3
					society_member_of = cult_of_slaanesh
					society_member_of = cult_of_slaanesh2
					society_member_of = cult_of_slaanesh3
					society_member_of = cult_of_tzeentch
					society_member_of = cult_of_tzeentch2
					society_member_of = cult_of_tzeentch3
					is_mutated_trigger = yes
				}
			}
		}
	}
}
# Accepted request, castle is built
letter_event = {
	id = swhunters.23001
	desc = EVTDESCswhunters23001
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes


	option = {
		name = EVTOPTAswhunters23001
		wealth = -500
	}
}
# Denied request, exstinguished debt instead
letter_event = {
	id = swhunters.23002
	desc = EVTDESCswhunters23002
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes


	option = {
		name = EVTOPTAswhunters23002
		wealth = 500
	}
}
# Denied request
letter_event = {
	id = swhunters.23003
	desc = EVTDESCswhunters23003
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes


	option = {
		name = EVTOPTAswhunters23003
	}
}

# Witch Hunters join your war for free
letter_event = {
	id = swhunters.24
	desc = EVTDESCswhunters24
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes


	option = {
		name = EVTOPTAswhunters24
	}
}

# Witch Hunters refuse to join war
letter_event = {
	id = swhunters.24001
	desc = EVTDESCswhunters240001
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes


	option = {
		name = EVTOPTAswhunters240001
		wealth = 50
	}
}

# Realm asks for help in a war
letter_event = {
	id = swhunters.25
	desc = EVTDESCswhunters25
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes

	option = {
		name = EVTOPTDswhunters25
		join_defender_wars = FROM
		join_attacker_wars = FROM
		piety = 100
		wealth = 50
		opinion = {
			modifier = opinion_asked_assistance
			who = FROM
			years = 15
		}
		FROM = { letter_event = { id = swhunters.24 days = 1 } }
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5		# help pious ruler
				FROM = { has_character_modifier = donated_to_holy_order }
			}
			modifier = {
				factor = 0.1	# I think you've got that
				FROM = { any_war = { attacker = { war_score = -10 } } }
			}
			modifier = {
				factor = 0.25	# I think you've got that
				FROM = { any_war = { defender = { war_score = 30 } } }
			}
			modifier = {
				factor = 2 # Hold thight, we're coming!
				FROM = { any_war = { defender = { NOT = { war_score = -30 } } } }
			}
			modifier = {
				factor = 0.75
				NOT = { opinion = { who = FROM value = 0 } }
			}
			modifier = {
				factor = 0.5
				FROM = { NOT = { religion = sigmarite } }
			}
			modifier = {
				factor = 0.15
				FROM = {
					OR = {
						has_character_modifier = magic_power_1
						has_character_modifier = magic_power_2
						has_character_modifier = magic_power_3
						has_character_modifier = magic_power_4
					}
				}
			}
		}
	}
	option = {
		name = EVTOPTCswhunters25
		piety = -150
		FROM = { letter_event = { id = swhunters.24001 days = 1 } }
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.75		# I've got my own problems
				any_war = { defender = { NOT = { war_score = 10 } } }
			}
			modifier = {
				factor = 1.25		# I've got my own problems
				war = yes
			}
			modifier = {
				factor = 0.75
				FROM = { has_character_modifier = donated_to_holy_order }
			}
			modifier = {
				factor = 0.85
				FROM = { piety = 500 }
			}
			modifier = {
				factor = 0.75
				FROM = { piety = 1000 }
			}
			modifier = {
				factor = 0.5
				FROM = { piety = 1500 }
			}
			modifier = {
				factor = 0.85
				is_friend = FROM
			}
			modifier = {
				factor = 0.75
				is_lover = FROM
			}
			modifier = {
				factor = 0.95
				opinion = { who = FROM value = 20 }
			}
			modifier = {
				factor = 0.85
				opinion = { who = FROM value = 40 }
			}
			modifier = {
				factor = 0.85
				opinion = { who = FROM value = 60 }
			}
			modifier = {
				factor = 0.85
				opinion = { who = FROM value = 80 }
			}
			modifier = {
				factor = 0.85
				opinion = { who = FROM value = 100 }
			}
			modifier = {
				factor = 1.25
				NOT = { opinion = { who = FROM value = 0 } }
			}
			modifier = {
				factor = 1.25
				NOT = { opinion = { who = FROM value = -20 } }
			}
			modifier = {
				factor = 1.25
				NOT = { opinion = { who = FROM value = -40 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = -60 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = -80 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = -100 } }
			}
		}
	}
}

###Asking to investigate in a province
# Ping to possible castle province by player's decision
province_event = {
	id = swhunters.26
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		FROMFROM={save_event_target_as=chapter_master}
		save_event_target_as=target_province
		owner = { letter_event = { id = swhunters.27 } }
	}
}

# Liege receives request by player
letter_event = {
	id = swhunters.27
	desc = EVTDESCswhunters27
	border = GFX_event_letter_frame_religion
	show_from_from_from=yes
	is_triggered_only = yes

	option = {
		name = EVTOPTAswhunters27
		event_target:chapter_master={
			society={
				any_society_member ={
					limit = {
						is_ruler = no
						NOT={distance={ who = event_target:chapter_master value=500}}
						NOT = { trait = on_witch_hunt }
						OR={
							NOT={ has_character_flag = recently_returned }
							had_character_flag = {
								flag = recently_returned
								years >= 1
							}
						}
						OR={
							event_target:chapter_master={ #Cant Order from Within Direct court of the Kween
								society_rank == 4
							}
							NOT={
								employer={
									society_member_of = PREV
									society_rank = 4
								}
							}
						}
					}
					clr_character_flag=recently_returned
					score_value = { #Prioritizes selecting some kind of proper candidate
						value = 10
						witch_hunter_candidate_score = yes
					}
					score_value = { #Prioritizes selecting some kind of proper candidate
						value = 10
						interesting_courtier_selection_score = yes
					}
					save_event_target_as=witch_hunter
					liege={
						save_event_target_as=original_liege
					}
					save_persistent_event_target = {name=my_chapter_master scope=event_target:original_liege}

					letter_event = { id = swhunters.28 }
					move_character = ROOT
				}
			}
			letter_event = { id = swhunters.27001 }
		}
		ai_chance = { factor = 50
			modifier = { factor = 2.5
				has_character_modifier = borrowed_from_k_witch_hunters_order
				NOT = { wealth = 500 }
			}
			modifier = { factor = 0
				has_character_modifier = borrowed_from_k_witch_hunters_order
				wealth = 500
			}
			modifier = { factor = 2.5
				has_character_modifier = borrowed_from_k_witch_hunters_order
			}
			modifier = { factor = 1.5
				trait = zealous
			}
			modifier = { factor = 1.25
				trait = greedy
			}
			modifier = { factor = 1.25
					trait = shy
			}
			modifier = { factor = 1.5
				religion = sigmarite
			}
			modifier = { factor = 1.5
				religion_group = old_world_group
			}
			modifier = { factor = 0.25
				FROM = { is_capital = yes }
			}
			modifier = { factor = 0.25
				NOT = { opinion = { who = FROMFROMFROM value = -95 } }
			}
			modifier = { factor = 0.5
				NOT = { opinion = { who = FROMFROMFROM value = -75 } }
			}
			modifier = { factor = 0.5
				NOT = { opinion = { who = FROMFROMFROM value = -50 } }
			}
			modifier = { factor = 0.75
				NOT = { opinion = { who = FROMFROMFROM value = -25 } }
			}
			modifier = { factor = 1.25
				opinion = { who = FROMFROMFROM value = 25 }
			}
			modifier = { factor = 1.25
				opinion = { who = FROMFROMFROM value = 50 }
			}
			modifier = { factor = 1.5
				opinion = { who = FROMFROMFROM value = 75 }
			}
			modifier = { factor = 1.75
				opinion = { who = FROMFROMFROM value = 100 }
			}
		}
	}
	option = {
		name = EVTOPTBswhunters27
		trigger = {
			has_character_modifier = borrowed_from_k_witch_hunters_order
			wealth = 500
		}
		FROMFROMFROM = { letter_event = { id = swhunters.27002 } }
		wealth = -500
		remove_character_modifier = borrowed_from_k_witch_hunters_order
		ai_chance = { factor = 75
			modifier = { factor = 0
				religion_group = chaos_gods_group
			}
			modifier = { factor = 0.25
				NOT = { opinion = { who = FROMFROMFROM value = -95 } }
			}
			modifier = { factor = 0.5
				NOT = { opinion = { who = FROMFROMFROM value = -75 } }
			}
			modifier = { factor = 0.5
				NOT = { opinion = { who = FROMFROMFROM value = -50 } }
			}
			modifier = { factor = 0.75
				NOT = { opinion = { who = FROMFROMFROM value = -25 } }
			}
			modifier = { factor = 1.25
				opinion = { who = FROMFROMFROM value = 25 }
			}
			modifier = { factor = 1.25
				opinion = { who = FROMFROMFROM value = 50 }
			}
			modifier = { factor = 1.5
				opinion = { who = FROMFROMFROM value = 75 }
			}
			modifier = { factor = 1.75
				opinion = { who = FROMFROMFROM value = 100 }
			}
		}
	}
	option = {
		name = EVTOPTCswhunters27
		if={limit={religion_group=old_world_group}
			increase_visibility_minor_effect = yes
		}
		if = { limit = { religion = sigmarite }
			piety = -500 }
		if = { limit = { NOT = { religion = sigmarite }
				religion_group = old_world_group }
			piety = -250 }
		if = { limit = { NOT = { religion_group = old_world_group }
				NOT = { religion_group = chaos_gods_group } }
			piety = -100 }
		if = { limit = { religion_group = chaos_gods_group }
			piety = 150 }
				FROMFROMFROM = { letter_event = { id = swhunters.27003 } }
		ai_chance = {
			factor = 25
			modifier = { factor = 1.85
				NOT = { religion_group = old_world_group }
			}
			modifier = { factor = 3
				religion_group = chaos_gods_group
			}
			modifier = { factor = 0.35
				religion = sigmarite
			}
			modifier = { factor = 1.35
				trait = schemer
			}
			modifier = { factor = 1.5
				OR = { has_character_modifier = magic_power_1
					has_character_modifier = magic_power_2
					has_character_modifier = magic_power_3
					has_character_modifier = magic_power_4
					trait = magic_potential_1
					trait = magic_potential_2
					trait = magic_potential_3
					trait = magic_potential_4
					trait = maimed
					trait = has_nurgles_rot
					trait = incapable
					trait = blinded
					is_vampire_trigger = yes
					society_member_of = cult_of_khorne
					society_member_of = cult_of_khorne2
					society_member_of = cult_of_khorne3
					society_member_of = cult_of_nurgle
					society_member_of = cult_of_nurgle2
					society_member_of = cult_of_nurgle3
					society_member_of = cult_of_slaanesh
					society_member_of = cult_of_slaanesh2
					society_member_of = cult_of_slaanesh3
					society_member_of = cult_of_tzeentch
					society_member_of = cult_of_tzeentch2
					society_member_of = cult_of_tzeentch3
					is_mutated_trigger = yes
				}
			}
		}
	}
}
# Accepted request
letter_event = {
	id = swhunters.27001
	desc = EVTDESCswhunters27001
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes

	option = {
		show_portrait = event_target:witch_hunter
		name = EVTOPTAswhunters27001
		event_target:witch_hunter={
			give_minor_title=title_court_state_witchhunter
			add_trait=on_witch_hunt
			set_character_flag=scourging_witch_hunter
		}
	}
}
# Denied request, exstinguished debt instead
letter_event = {
	id = swhunters.27002
	desc = EVTDESCswhunters27002
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes


	option = {
		name = EVTOPTAswhunters27002
		wealth = 500
	}
}
# Denied request
letter_event = {
	id = swhunters.27003
	desc = EVTDESCswhunters27003
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes


	option = {
		name = EVTOPTAswhunters27003
	}
}

# Agent receives message and goes on mission
letter_event = {
	id = swhunters.28
	desc = EVTDESCswhunters28
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes

	option = {
		name = EVTOPTAswhunters28
		random_list = {
			60 = {
				modifier = { factor = 1.5
					trait = paranoid
				}
				modifier = { factor = 0.5
					NOT = { intrigue = 10 }
				}
				modifier = { factor = 1.5
					intrigue = 15
				}
				modifier = { factor = 1.5
					intrigue = 20
				}
				modifier = { factor = 1.5
					learning = 10
				}
				modifier = { factor = 1.5
					learning = 15
				}
				modifier = { factor = 1.5
					learning = 20
				}
				modifier = { factor = 1.5
					trait = bright
				}
				modifier = { factor = 1.65
					trait = smart
				}
				modifier = { factor = 1.75
					trait = quick
				}
				modifier = { factor = 1.85
					trait = brilliant
				}
				modifier = { factor = 1.95
					trait = genius
				}
				modifier = { factor = 0.95
					trait = dim
				}
				modifier = { factor = 0.85
					trait = dumb
				}
				modifier = { factor = 0.75
					trait = slow
				}
				modifier = { factor = 0.65
					trait = idiot
				}
				modifier = { factor = 0.5
					trait = imbecile
				}
				modifier = { factor = 0.5
					trait = trusting
				}
				modifier = { factor = 0.85
					trait = just
				}
				modifier = { factor = 0.85
					trait = lunatic_1
				}
				modifier = { factor = 0.75
					trait = lunatic_2
				}
				modifier = { factor = 0.5
					trait = lunatic_3
				}
				piety = 150
				prestige = 50
				event_target:chapter_master = { letter_event = { id = swhunters.28002 days = 60 } }
			}
			40 = {
				modifier = {
					factor = 0
					location = {
						NOR = {
							has_province_modifier = nurgle_province_disease
							has_province_modifier = beastmen_unrest
							has_province_modifier = warpdust_traces
							has_province_modifier = slaanesh_hedonism
							has_province_modifier = warpstone_meteor
							has_province_modifier = lahmian_presence
						}
					}
					location = {
						owner = {
							NOR = {
								society_member_of = cult_of_khorne
								society_member_of = cult_of_khorne2
								society_member_of = cult_of_khorne3
								society_member_of = cult_of_nurgle
								society_member_of = cult_of_nurgle2
								society_member_of = cult_of_nurgle3
								society_member_of = cult_of_slaanesh
								society_member_of = cult_of_slaanesh2
								society_member_of = cult_of_slaanesh3
								society_member_of = cult_of_tzeentch
								society_member_of = cult_of_tzeentch2
								society_member_of = cult_of_tzeentch3
							}
						}
					}
				}
				if = {
					limit = {
					is_invincible_trigger = yes
					}
					antideath_effect = yes
					break = yes
				}
				death = { death_reason = death_murder_unknown }
				event_target:chapter_master = { letter_event = { id = swhunters.28003 days = 150 } }
			}
		}
	}
}

# Province has been ridden of any evil presence
province_event = {
	id = swhunters.28001
	desc = EVTDESCswhunters28001
	picture = GFX_evt_witch_hunters

	trigger = {
		OR = {
			has_province_modifier = nurgle_province_disease
			has_province_modifier = beastmen_unrest
			has_province_modifier = warpdust_traces
			has_province_modifier = slaanesh_hedonism
			has_province_modifier = warpstone_meteor
			has_province_modifier = lahmian_presence
		}
	}
	is_triggered_only = yes

	option = {
		event_target:witch_hunter={set_character_flag=cleansed_province}
		name = EVTOPTAswhunters28001
		hidden_tooltip = {
			remove_province_modifier = nurgle_province_disease
			remove_province_modifier = beastmen_unrest
			remove_province_modifier = warpdust_traces
			remove_province_modifier = slaanesh_hedonism
			remove_province_modifier = warpstone_meteor
			remove_province_modifier = lahmian_presence
		}
	}
}

# Agent has finished with the provincial cleansing and asks to proceed further with his suspects
letter_event = {
	id = swhunters.28002
	desc = EVTDESCswhunters28002
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes
	trigger = { FROM = { is_alive = yes } }


	option = { #Find and burn any heretic and corrupt in the province
		name = EVTOPTAswhunters28002
		hidden_tooltip = {
			character_event = { id = swhunters.31 days = 70 }
			FROM = {
				liege = { character_event = { id = swhunters.29 days = 200 random = 30 }
					any_courtier = { character_event = { id = swhunters.29 days = 200 random = 30 } }
				}
			}
		}
	}
	option = { #Find and burn any heretic and corrupt in the province
		name = EVTOPTAwhuntersCleanse
		trigger={event_target:witch_hunter={NOT={has_character_flag=cleansed_province}}
			event_target:target_province = {
				OR = {
					has_province_modifier = nurgle_province_disease
					has_province_modifier = beastmen_unrest
					has_province_modifier = warpdust_traces
					has_province_modifier = slaanesh_hedonism
					has_province_modifier = warpstone_meteor
					has_province_modifier = lahmian_presence
				}
			}
		}
		hidden_tooltip = {
			random_list={
				33={
					modifier={
						factor=1.2
						event_target:witch_hunter={
							OR={
								trait=cruel
								trait=impaler
							}
						}
					}
					repeat_event = { id = swhunters.28002 days = 360 }
					event_target:target_province = {
						province_event = { id = swhunters.28001 days = 360 }
						add_province_modifier = { name = witch_hunter_purge_in_progress duration = 720 stacking=yes }
					}
				}
				33={
					modifier={
						factor=1.2
						event_target:witch_hunter={
							OR={
								trait=kind
								trait=generous
							}
						}
					}
					repeat_event = { id = swhunters.28002 days = 120 }
					event_target:target_province = {
						province_event = { id = swhunters.28001 days = 120 }
						add_province_modifier = { name = witch_hunter_purge_in_progress duration = 200 stacking=yes }
					}
				}
				33={
					repeat_event = { id = swhunters.28002 days = 359 }
					event_target:target_province = {
						province_event = { id = swhunters.28001 days = 360 }
						add_province_modifier = { name = witch_hunter_purge_in_progress duration = 360 stacking=yes }
					}
				}
			}
			random_list={ #Flavor Tombola for later?
				33={}
				33={}
				33={}
			}
		}
		ai_chance={
			factor=75
		}
	}
	option = { #Find and catch any heretic and corrupt in the province
		name = EVTOPTBswhunters28002
		hidden_tooltip = {
			character_event = { id = swhunters.90 days = 70 }
			FROM = {
				liege = { character_event = { id = swhunters.30 days = 200 random = 30 }
					any_courtier = { character_event = { id = swhunters.30 days = 200 random = 30 } }
				}
			}
		}
	}
	option = { #Return
		name = EVTOPTCswhunters28002
		trigger={event_target:witch_hunter={
			OR={
				has_character_flag=cleansed_province
				has_character_flag=burned_a_witch
			}
		}}
		if={
			limit={
				event_target:original_liege={
					is_alive=yes
					same_society_as=event_target:chapter_master
				}
			}
			FROM = {
				move_character = event_target:original_liege
				remove_title=title_court_state_witchhunter
				remove_trait = on_witch_hunt
			}
		}
		else={
			FROM = {
				move_character = ROOT
				remove_title=title_court_state_witchhunter
				remove_trait = on_witch_hunt
			}
		}
		if={event_target:witch_hunter={has_character_flag=cleansed_province}
			custom_tooltip = { text = cleansed_the_province_TT }
			change_society_currency=300
		}
		if={event_target:witch_hunter={has_character_flag=burned_a_witch}
			custom_tooltip = { text = burned_a_witch_TT }
			change_society_currency=100
		}
		From={
			set_character_flag=recently_returned
			clr_character_flag=cleansed_province
			clr_character_flag=burned_a_witch
			clr_character_flag=desires_a_mission
		}
		ai_chance={
			factor=35
		}
	}
	option = { #Return
		trigger={event_target:witch_hunter={
			OR={
				has_character_flag=cleansed_province
				has_character_flag=burned_a_witch
			}
		}}
		name = EVTOPTCswhunters282b
		trigger={
			from={not={has_character_modifier=witch_hunter_politicking_cooldown}}
			event_target:original_liege={NOT={character=event_target:chapter_master}}
			OR={
				society_currency >= 500
				event_target:original_liege={is_state_witch_hunter_trigger=no}
			}
		}
		if={
			limit={event_target:original_liege={is_state_witch_hunter_trigger=no}}
			FROM = {
				move_character = ROOT
				remove_trait = on_witch_hunt
				clr_character_flag=desires_a_mission
				remove_title=title_court_state_witchhunter
			}
		}
		else={
			add_character_modifier = {
				name = witch_hunter_politicking_cooldown
				months = 24
			}
			change_society_currency = -500
			FROM = {
				move_character = ROOT
				remove_trait = on_witch_hunt
				remove_title=title_court_state_witchhunter
			}

		}
		if={event_target:witch_hunter={has_character_flag=cleansed_province}
			custom_tooltip = { text = cleansed_the_province_TT }
			change_society_currency=300
		}
		if={event_target:witch_hunter={has_character_flag=burned_a_witch}
			custom_tooltip = { text = burned_a_witch_TT }
			change_society_currency=100
		}
		From={
			set_character_flag=recently_returned
			clr_character_flag=burned_a_witch
			clr_character_flag=cleansed_province
			clr_character_flag=desires_a_mission
		}
		ai_chance={
			factor=25

		}
	}
}

# The Agent was killed
letter_event = {
	id = swhunters.28003
	desc = EVTDESCswhunters28003
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes


	option = {
		name = EVTOPTAswhunters28003
		piety = -50
		change_society_currency=-50
	}
}

# Witch Hunter bust!
character_event = {
	id = swhunters.29
	hide_window = yes

	trigger = {
		NOT = { character = FROM }
		NOT = { character = FROMFROM }
		FROMFROM = { is_alive = yes }
		OR = {
			trait = magic_potential_1
			trait = magic_potential_2
			trait = magic_potential_3
			trait = magic_potential_4
			has_character_flag = magic_potential_1
			has_character_flag = magic_potential_2
			has_character_flag = magic_potential_3
			has_character_flag = magic_potential_4
			has_character_modifier = magic_power_1
			has_character_modifier = magic_power_2
			has_character_modifier = magic_power_3
			has_character_modifier = magic_power_4
			intrigue = 20
			trait = elusive_shadow
			trait = mystic
			trait = hunchback
			trait = dwarf
			trait = stutter
			trait = harelip
			trait = seducer
			trait = seductress
			trait = monstrous
			trait = beautiful
			trait = unsightly
			trait = creature_toad
			trait = creature_pig
			trait = homosexual
			trait = transgender
			trait = shy
			trait = addict
			trait = hedonist
			religion_group = chaos_gods_group
			is_vampire_trigger = yes
			trait = lunatic_1
			trait = lunatic_2
			trait = lunatic_3
			society_member_of = cult_of_khorne
			society_member_of = cult_of_nurgle
			society_member_of = cult_of_slaanesh
			society_member_of = cult_of_tzeentch
			society_member_of = cult_of_undivided
			is_mutated_trigger = yes
		}
	}

	is_triggered_only = yes


	immediate = {
		random_list = {
			60 = {
				modifier = {
					factor = 5
					has_character_modifier = known_satanist
				}
				modifier = {
					factor = 2.5
					has_character_modifier = highly_suspect
				}
				modifier = {
					factor = 1.5
					has_character_modifier = under_suspicion
				}
				if = {
					limit = {is_invincible_trigger = yes}
					antideath_effect = yes
					break = yes
				}
				add_trait = staked
				death = {
					death_reason = death_execution_burning
					killer = FROM
				}
				if = {
					limit = {
						OR = {
							society_member_of = cult_of_khorne
							society_member_of = cult_of_nurgle
							society_member_of = cult_of_slaanesh
							society_member_of = cult_of_tzeentch
							society_member_of = cult_of_undivided
						}
						set_discovered_society = yes
					}
				}
				liege = {
					opinion = {
						modifier = opinion_meddling_hunters
						who = FROM
						years = 3
					}
					opinion = { modifier = opinion_meddling_hunters
						who = FROMFROM
						years = 5
					}
				}
			}
			40 = { #Safe!
				modifier = { factor = 1.85
					is_vampire_trigger = yes
				}
				modifier = { factor = 1.75
					OR = {
						has_character_modifier = magic_power_3
						has_character_modifier = magic_power_4
					}
				}
				modifier = { factor = 0.5
					FROM = {
						NOR = {
							has_minor_title = title_court_state_witchhunter
							has_minor_title = title_court_witchhunter
						}
					}
				}
				modifier = { factor = 1.75
					trait = genius
				}
				modifier = { factor = 1.5
					trait = paranoid
				}
				modifier = { factor = 0.75
					trait = drunkard
				}
				modifier = { factor = 0.5
					trait = addict
				}
				modifier = { factor = 0.5
					trait = imbecile
				}
				modifier = { factor = 0.5
					trait = gregarious
				}
			}
		}
	}
}

# Witch Hunter bust! - Imprisoning
character_event = {
	id = swhunters.30
	hide_window = yes

	trigger = {
		NOT = { character = FROM }
		NOT = { character = FROMFROM }
		FROMFROM = { is_alive = yes }
		OR = {
			trait = magic_potential_1
			trait = magic_potential_2
			trait = magic_potential_3
			trait = magic_potential_4
			has_character_flag = magic_potential_1
			has_character_flag = magic_potential_2
			has_character_flag = magic_potential_3
			has_character_flag = magic_potential_4
			has_character_modifier = magic_power_1
			has_character_modifier = magic_power_2
			has_character_modifier = magic_power_3
			has_character_modifier = magic_power_4
			intrigue = 20
			trait = elusive_shadow
			trait = mystic
			trait = hunchback
			trait = dwarf
			trait = stutter
			trait = harelip
			trait = seducer
			trait = seductress
			trait = monstrous
			trait = beautiful
			trait = unsightly
			trait = creature_toad
			trait = creature_pig
			trait = homosexual
			trait = transgender
			trait = shy
			trait = addict
			trait = hedonist
			religion_group = chaos_gods_group
			is_vampire_trigger = yes
			trait = lunatic_1
			trait = lunatic_2
			trait = lunatic_3
			society_member_of = cult_of_khorne
			society_member_of = cult_of_khorne2
			society_member_of = cult_of_khorne3
			society_member_of = cult_of_nurgle
			society_member_of = cult_of_nurgle2
			society_member_of = cult_of_nurgle3
			society_member_of = cult_of_slaanesh
			society_member_of = cult_of_slaanesh2
			society_member_of = cult_of_slaanesh3
			society_member_of = cult_of_tzeentch
			society_member_of = cult_of_tzeentch2
			society_member_of = cult_of_tzeentch3
			is_mutated_trigger = yes
		}
	}

	is_triggered_only = yes

	immediate = {
		random_list = {
			40 = {
				modifier = {
					factor = 5
					has_character_modifier = known_satanist
				}
				modifier = {
					factor = 2.5
					has_character_modifier = highly_suspect
				}
				modifier = {
					factor = 1.5
					has_character_modifier = under_suspicion
				}
				imprison = FROM
				 opinion = { modifier = opinion_meddling_hunters
						who = FROM
						years = 3 }
				 opinion = { modifier = opinion_meddling_hunters
						who = FROMFROM
						years = 5 }
				liege = {
					opinion = { modifier = opinion_meddling_hunters
						who = FROM
						years = 3
					}
					opinion = { modifier = opinion_meddling_hunters
						who = FROMFROM
						years = 5
					}
				}
			}
			60 = { #Safe!
				modifier = {
					factor = 2.5	#Vampires are hardly captured
					is_vampire_visible_trigger = yes
				}
				modifier = { factor = 1.75
					OR = {
						has_character_modifier = magic_power_3
						has_character_modifier = magic_power_4
					}
				}
				modifier = { factor = 1.75
					trait = genius
				}
				modifier = { factor = 1.5
					trait = paranoid
				}
				modifier = { factor = 0.75
					trait = drunkard
				}
				modifier = { factor = 0.5
					trait = addict
				}
				modifier = { factor = 0.5
					trait = imbecile
				}
				modifier = { factor = 0.5
					trait = gregarious
				}
			}
		}
	}
}

# The Agent has finished purging
character_event = {
	id = swhunters.31
	desc = EVTDESCswhunters31
	picture = GFX_evt_burning_stake

	is_triggered_only = yes

	option = {
		name = EVTOPTCswhunters28002
		if={
			limit={
				event_target:original_liege={
					is_alive=yes
					same_society_as=event_target:chapter_master
				}
			}
			FROM = {
				move_character = event_target:original_liege
				remove_title=title_court_state_witchhunter
				remove_trait = on_witch_hunt
			}
		}
		else={
			FROM = {
				move_character = ROOT
				remove_title=title_court_state_witchhunter
				remove_trait = on_witch_hunt
			}
		}
		change_society_currency=25
		if={event_target:witch_hunter={has_character_flag=cleansed_province}
			custom_tooltip = { text = cleansed_the_province_TT }
			change_society_currency=300
		}
		if={event_target:witch_hunter={has_character_flag=burned_a_witch}
			custom_tooltip = { text = burned_a_witch_TT }
			change_society_currency=100
		}
		FROMFROM = {
			change_society_currency=50
			piety = 50
			set_character_flag=recently_returned
			clr_character_flag=burned_a_witch
			clr_character_flag=cleansed_province
			clr_character_flag=desires_a_mission
		}
		ai_chance={
			factor=75
		}
	}
	option = { #Return
		name = EVTOPTCswhunters282b
		trigger={
			from={not={has_character_modifier=witch_hunter_politicking_cooldown}}
			event_target:original_liege={NOT={character=event_target:chapter_master}}
			OR={
				society_currency >= 500
				event_target:original_liege={is_state_witch_hunter_trigger=no}
			}
		}
		if={
			limit={event_target:original_liege={is_state_witch_hunter_trigger=no}}
			FROM = {
				move_character = ROOT
				remove_trait = on_witch_hunt
				clr_character_flag=desires_a_mission
				remove_title=title_court_state_witchhunter
			}
		}
		else={
			add_character_modifier = {
				name = witch_hunter_politicking_cooldown
				months = 24
			}
			change_society_currency = -500
			FROM = {
				move_character = ROOT
				remove_trait = on_witch_hunt
				remove_title=title_court_state_witchhunter
			}

		}
		change_society_currency=25
		change_society_currency=25
		piety = 10
		if={event_target:witch_hunter={has_character_flag=cleansed_province}
			custom_tooltip = { text = cleansed_the_province_TT }
			change_society_currency=300
		}
		if={event_target:witch_hunter={has_character_flag=burned_a_witch}
			custom_tooltip = { text = burned_a_witch_TT }
			change_society_currency=100
		}
		FROMFROM = {
			change_society_currency=50
			piety = 50
			set_character_flag=recently_returned
			clr_character_flag=burned_a_witch
			clr_character_flag=cleansed_province
			clr_character_flag=desires_a_mission
		}
		ai_chance={
			factor=25

		}
	}
}

# The Agent has finished capturing
character_event = {
	id = swhunters.32
	desc = EVTDESCswhunters32
	picture = GFX_evt_burning_stake

	is_triggered_only = yes


	option = {
		name = EVTOPTCswhunters28002
		if={
			limit={
				event_target:original_liege={
					is_alive=yes
					same_society_as=event_target:chapter_master
				}
			}
			FROM = {
				move_character = event_target:original_liege
				remove_title=title_court_state_witchhunter
				remove_trait = on_witch_hunt
			}
		}
		else={
			FROM = {
				move_character = ROOT
				remove_title=title_court_state_witchhunter
				remove_trait = on_witch_hunt
			}
		}
		if={event_target:witch_hunter={has_character_flag=burned_a_witch}
			custom_tooltip = { text = burned_a_witch_TT }
			change_society_currency=100
		}
		if={event_target:witch_hunter={has_character_flag=cleansed_province}
			custom_tooltip = { text = cleansed_the_province_TT }
			change_society_currency=300
		}
		From={
			set_character_flag=recently_returned
			clr_character_flag=burned_a_witch
			clr_character_flag=cleansed_province
			clr_character_flag=desires_a_mission
		}
		ai_chance={
			factor=75
		}
	}
	option = { #Return
		name = EVTOPTCswhunters282b
		trigger={
			from={not={has_character_modifier=witch_hunter_politicking_cooldown}}
			event_target:original_liege={NOT={character=event_target:chapter_master}}
			OR={
				society_currency >= 500
				event_target:original_liege={is_state_witch_hunter_trigger=no}
			}
		}
		if={
			limit={event_target:original_liege={is_state_witch_hunter_trigger=no}}
			FROM = {
				move_character = ROOT
				remove_trait = on_witch_hunt
				clr_character_flag=desires_a_mission
				remove_title=title_court_state_witchhunter
			}
		}
		else={
			add_character_modifier = {
				name = witch_hunter_politicking_cooldown
				months = 24
			}
			change_society_currency = -500
			FROM = {
				move_character = ROOT
				remove_trait = on_witch_hunt
				remove_title=title_court_state_witchhunter
			}

		}
		change_society_currency=25
		piety = -10
		if={event_target:witch_hunter={has_character_flag=cleansed_province}
			custom_tooltip = { text = cleansed_the_province_TT }
			change_society_currency=300
		}
		if={event_target:witch_hunter={has_character_flag=burned_a_witch}
			custom_tooltip = { text = burned_a_witch_TT }
			change_society_currency=100
		}
		FROMFROM = {
			change_society_currency=50
			piety = 50
			set_character_flag=recently_returned
			clr_character_flag=cleansed_province
			clr_character_flag=burned_a_witch
			clr_character_flag=desires_a_mission
		}
		From={
			set_character_flag=recently_returned
			clr_character_flag=cleansed_province
			clr_character_flag=burned_a_witch
			clr_character_flag=desires_a_mission
		}
		ai_chance={
			factor=25

		}
	}
}

##WITCH HUNTERS##
### Now the Witch Hunter goes after actual mages##
character_event = {
	id = swhunters.40
	title = WITCH_HUNT			# Witch Hunt
	desc = EVTDESCmagicpotential7
	picture = "GFX_evt_witch_hunters"

	capable_only = yes

	trigger = {
		age = 16
		trait = on_witch_hunt
		OR={
			has_minor_title=title_court_witchhunter
			has_minor_title=title_court_state_witchhunter
		}
		top_liege = { NOT = { has_character_modifier = expelled_k_witch_hunters_order } }
		any_courtier = {
			NOT = { trait = in_hiding }
			NOT = { trait = incapable }
			NOT = { is_daemon_race_trigger = yes }
			check_if_mage_should_be_burned = yes
			OR = {
				has_character_modifier = magic_power_1
				has_character_modifier = magic_power_2
				has_character_modifier = magic_power_3
				has_character_modifier = magic_power_4
				has_magic_potential = yes
			}
		}
	}

	mean_time_to_happen = {
		months = 9
		modifier = {
			factor = 0.8 #Slow Down Fella
			has_minor_title=title_court_witchhunter
		}
		modifier = {
			factor = 3 #What, an witch?!?!
			has_minor_title=title_court_state_witchhunter
		}
	}

	option = { #confront the mage
		name = EVTOPTAmagicpotential7
		random_courtier = {
			limit = {
				NOT = { trait = in_hiding }
				NOT = { trait = incapable }
				check_if_mage_should_be_burned = yes
				OR = {
					has_character_modifier = magic_power_1
					has_character_modifier = magic_power_2
					has_character_modifier = magic_power_3
					has_character_modifier = magic_power_4
					has_magic_potential = yes
				}
			}
			character_event = { id = swhunters.41 }
	   }
   }
}

#courtier is confronted#
character_event = {
    id = swhunters.41
    title = WITCH_HUNT
    desc = EVTDESCmagicpotential8
		picture = "GFX_evt_witch_hunters"

	is_triggered_only = yes

	#If not independent, appeal to your liege##
	option = {
		name = EVTOPTAmagicpotential8
		trigger = { independent = no }
		liege = { character_event = { id = swhunters.42 } }
	}

	option = { #Banish Witch Hunter
		name = EVTOPTBmagicpotential8
		trigger = { independent = yes }
		increase_visibility_minor_effect = yes
		FROM={
			if={
				limit={
					has_minor_title=title_court_state_witchhunter
					persistent_event_target:my_chapter_master={always=yes}
				}
				move_character=persistent_event_target:my_chapter_master
				clr_character_flag=desires_a_mission
				set_character_flag=recently_returned
				persistent_event_target:my_chapter_master={character_event={ id=swhunters.53 }}
				clear_persistent_event_target=my_chapter_master
			}
			else={ banish = yes }
		}
		FROM = { remove_trait = on_witch_hunt }
	}

	option = { #Imprison Witch Hunter
		name = EVTOPTCmagicpotential8
		trigger = { independent = yes }
		increase_visibility_effect = yes
		FROM = { imprison = yes }
		FROM = { remove_trait = on_witch_hunt }
	}
}

#liege is informed one of this courtiers is a suspected mage
character_event = {
    id = swhunters.42
    title = WITCH_HUNT # Witch Hunt
    desc = EVTDESCmagicpotential9
		picture = "GFX_evt_witch_hunters"

	is_triggered_only = yes

	option = { #Burn it!
		name = EVTOPTAmagicpotential9
		trigger = {
			OR = {
				ai = no
				trait = zealous
				trait = paranoid
				trait = arbitrary
				trait = cruel
				NOT = { ROOT = { opinion = { who = FROM value = 1 } } }
			}
		}
		FROMFROM={
			if={
				limit={
					has_minor_title=title_court_state_witchhunter
					persistent_event_target:my_chapter_master={always=yes}
				}
				set_character_flag=burned_a_witch
			}
			random_list={
				33={
					trigger={not={martial=10}}
					change_martial=1
				}
				33={
					trigger={not={learning=10}}
					change_learning=1
				}
				33={
					trigger={not={intrigue=10}}
					change_intrigue=1
				}
			}
		}
		decrease_visibility_effect = yes
		FROM = { character_event = { id = witchhunter.25 } }
	}

	option = { #Mercy
		name = EVTOPTBmagicpotential9
		trigger = {
			OR = {
				ai = no
				ROOT = { opinion = { who = FROM value = 50 } }
			}
		}
		increase_visibility_minor_effect = yes
		FROM = { character_event = { id = witchhunter.27 } }
	}

	option = { #Imprison
		name = EVTOPTCmagicpotential9
		decrease_visibility_effect = yes
		FROM = { character_event = { id = witchhunter.26 } }
	}
}
# The son of a ruler volunteers to join the Witch Hunters
character_event = {
	id = swhunters.43
	desc = EVTDESCswhunters4
	picture = GFX_evt_witch_hunters
	border = GFX_event_normal_frame_religion

	min_age = 14
	max_age = 45
	only_capable = yes
	prisoner = no
	religion = sigmarite

	trigger = {
		NOT = { trait = witch_hunter }
		trait = creature_human
		is_ruler = no
		is_heretic = no
		martial = 6
		is_title_active = k_witch_hunters_order
		NOR = { has_character_modifier = magic_power_1
			has_character_modifier = magic_power_2
			has_character_modifier = magic_power_3
			has_character_modifier = magic_power_4
			trait = magic_potential_1
			trait = magic_potential_2
			trait = magic_potential_3
			trait = magic_potential_4
			trait = maimed
			trait = has_nurgles_rot
			trait = incapable
			trait = blinded
			is_vampire_trigger = yes
			society_member_of = cult_of_khorne
			society_member_of = cult_of_khorne2
			society_member_of = cult_of_khorne3
			society_member_of = cult_of_nurgle
			society_member_of = cult_of_nurgle2
			society_member_of = cult_of_nurgle3
			society_member_of = cult_of_slaanesh
			society_member_of = cult_of_slaanesh2
			society_member_of = cult_of_slaanesh3
			society_member_of = cult_of_tzeentch
			society_member_of = cult_of_tzeentch2
			society_member_of = cult_of_tzeentch3
			is_mutated_trigger = yes
		}
		OR = {
			father_even_if_dead = {
				primary_title = { higher_tier_than = BARON }
			}
			mother_even_if_dead = {
				primary_title = { higher_tier_than = BARON }
			}
		}

		liege = {
			holy_order = no
			liege = {
				holy_order = no
			}
		}
		NOT = { has_character_modifier = expelled_k_witch_hunters_order }
		NOT = { any_liege = { has_character_modifier = expelled_k_witch_hunters_order } }
		NOT = { is_pregnant = yes }
		NOT = { any_spouse = {
				is_pregnant = yes
				father_of_unborn = { character = ROOT } # Won't happen if spouse is pregnant with non-bastard child
			}
		}
	}

	mean_time_to_happen = {
		years = 100
		modifier = {
			factor = 0.25
			trait = zealous
		}
		modifier = {
			factor = 0.5
			trait = celibate
		}
		modifier = {
			factor = 1.75
			is_female = yes
		}
		modifier = {
			factor = 0.5
			trait = homosexual
		}
		modifier = {
			factor = 0.7
			trait = content
		}
		modifier = {
			factor = 0.75
			trait = chaste
		}
		modifier = {
			factor = 0.75
			NOT = { age = 25 }
		}
		modifier = {
			factor = 1.5
			trait = slothful
		}
		modifier = {
			factor = 2.0
			trait = lustful
		}
		modifier = {
			factor = 2.0
			trait = cynical
		}
		modifier = {
			factor = 2.0
			trait = hedonist
		}
		modifier = {
			factor = 2.0
			trait = ambitious
		}
		modifier = {
			factor = 2.0
			any_heir_title = {
				always = yes
			}
		}
		modifier = {
			factor = 2.0
			is_primary_heir = yes
		}
		modifier = {
			factor = 2
			any_spouse = {
				reverse_opinion = { who = ROOT value = 100 }
			}
		}
		modifier = {
			factor = 3.0
			NOT = { culture_group = imperial_group }
		}
		modifier = {
			factor = 2.0
			culture_group = kislevite_group
		}
	}

	option = {
		name = EVTOPTAswhunters4
		ai_chance = {
			factor = 100
		}
		liege = {
			character_event = { id = swhunters.44 }
		}
	}
	option = {
		name = EVTOPTBswhunters4
	}
}

# Son or brother asks to join the Witch Hunters
character_event = {
	id = swhunters.44
	desc = EVTDESCswhunters41
	picture = GFX_evt_witch_hunters
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	option = {
		name = EVTOPTAswhunters_41
		ai_chance = {
			factor = 100
		}
		piety = 100
		FROM = { character_event = { id = swhunters.45 tooltip = EVTTOOLTIP_SOA_1032 } }
	}

	option = {
		name = EVTOPTBswhunters_41
		piety = -100
		FROM = {
			character_event = { id = swhunters.46 tooltip = EVTTOOLTIP_SOA_1033 }
		}
	}
}

# Son or brother joins the Witch Hunters
character_event = {
	id = swhunters.45
	desc = EVTDESCswhunters_42
	picture = GFX_evt_witch_hunters
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	option = {
		name = EXCELLENT

		k_witch_hunters_order = {
			holder_scope = {
				ROOT = {
					move_character = PREV
					hidden_tooltip = {
						clear_wealth = PREV
					}
					spouse = {
						remove_spouse = spouse
						hidden_tooltip = { character_event = { id = SoA.2863 } }
					}
					add_trait = witch_hunter
					join_society=sigmar_witch_hunters
					culture = witchhunter_culture
					religion = sigmarite
					any_spouse = { remove_spouse = PREV }
					if = {
						limit = { trait = in_hiding }
						remove_trait = in_hiding
						clr_character_flag = do_not_disturb
						add_character_modifier = {
							name = went_out_of_hiding_timer
							duration = 180
							hidden = yes
						}
						hidden_tooltip = { character_event = { id = CM.6400 } } # Notify plotters and family
					}
				}
			}
		}
	}
}

# Liege refuses request to join the Witch Hunters
character_event = {
	id = swhunters.46
	desc = EVTDESCswhunters_43
	picture = GFX_evt_witch_hunters
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	option = {
		name = EVTOPTAswhunters_43

		opinion = {
			who = FROM
			modifier = opinion_refused_request_holy_order
		}
	}
}

##Witch Hunters Mission Tombola
character_event = {
	id = swhunters.50
	hide_window = yes

	is_triggered_only = yes
	is_in_society = yes
	only_capable = yes

	trigger = {
		is_state_witch_hunter_trigger = yes
		has_any_quest = no
		NOT = { has_character_modifier = quest_cooldown_timer }
		NOT = { is_inaccessible_trigger = yes }
	}

	immediate = {
		random_society_member = {
			limit = {
				NOT = { character = ROOT }
				society_rank == 4
				same_society_as = ROOT
			}
			save_event_target_as = lodge_hero #Character for handing out missions...
		}
		if = {
			limit = { is_landed = yes }
			capital_scope = { save_event_target_as = home_capital } #For some distance checks...
		}

		### AVAILABLE MISSIONS: ###
		# Raid and loot barony. ....................... WB.25501
		# Lose Weak Focus.............................. WB.25504
		# Duel <someone>. First blood. ................ WB.10500
		# Duel <someone>. To the death! ............... swhunters.51
		# Wage war against someone! ................... WB.10512
		# Recruit child into warrior lodge! ........... WB.10520

		random_list = {
			20 = {
				trigger = {
					has_dlc = "Way of Life"
					is_landed = yes
					NOR = {
						has_focus = focus_war
						has_focus = focus_hunting
						has_focus = focus_rulership
						has_focus = focus_carousing
					}
				}
				event_target:lodge_hero = {
					character_event = { id = WB.25504 } #Lose Weak Focus.
				}
			}
			20 = {
				trigger = {
					has_dlc = "Way of Life"
					is_landed = no
				}
				set_character_flag=desires_a_mission
			}

			20 = {
				trigger = {
					age = 16
					society = {
						any_society_member = {
			                ai = yes
			                age = 16
							NOT = { character = ROOT }
			                is_inaccessible_or_incapable_trigger = no
			                NOT = { has_character_modifier = bedridden_illness }
				            NOT = { has_character_modifier = severe_illness }
				            NOT = { has_character_flag = call_to_legend_active }
						}
					}
				}
				event_target:lodge_hero = {
					character_event = { id = WB.10500 } #Duel <someone>. First blood. to hone skill
				}
			}
			50 = {
				trigger = {
					society_rank=2
					age = 16
					OR = {
						any_realm_character = {
							is_ruler=yes
							is_inaccessible_or_incapable_trigger = no
							NOT={has_character_modifier=accused_recently}
							OR = {
								has_character_modifier = under_suspicion
								has_character_modifier = highly_suspect
								has_character_modifier = known_satanist
								trait = mutation_minor
								trait = mutation_major
								trait = mutation_massive
								trait = mystic
							}
							NOT = { any_spouse = { character = ROOT } }
							is_adult = yes
						}
						any_neighbor_independent_ruler = {NOT = { has_character_modifier = expelled_k_witch_hunters_order }
							religion_group=old_world_group
							any_realm_character = {
								is_ruler=yes
								is_inaccessible_or_incapable_trigger = no
								NOT={has_character_modifier=accused_recently}
								OR = {
									has_character_modifier = under_suspicion
									has_character_modifier = highly_suspect
									has_character_modifier = known_satanist
									trait = mutation_minor
									trait = mutation_major
									trait = mutation_massive
									trait = mystic
								}
								NOT = { any_spouse = { character = ROOT } }
								is_adult = yes
								ROOT = { capital_scope = { distance = { where = PREV distance < 1000 } } }
							}
						}
						any_independent_ruler = {NOT = { has_character_modifier = expelled_k_witch_hunters_order }
							religion_group=old_world_group
							any_realm_character = {
								is_inaccessible_or_incapable_trigger = no
								NOT={has_character_modifier=accused_recently}
								is_ruler=yes
								OR = {
									has_character_modifier = under_suspicion
									has_character_modifier = highly_suspect
									has_character_modifier = known_satanist
									trait = mutation_minor
									trait = mutation_major
									trait = mutation_massive
									trait = mystic
								}
								NOT = { any_spouse = { character = ROOT } }
								is_adult = yes
								ROOT = { capital_scope = { distance = { where = PREV distance < 1000 } } }
							}
						}
					}
				}
				event_target:lodge_hero = {
					character_event = { id = swhunters.51 } #Investigate a Heretic
				}
			}
			75 = { # AI bypasses missions at times
				trigger = {
					ai = yes
				}
				random_list = {
					70 = {
						modifier = {
							factor = 0.9
							society_influence >= 30
						}
						modifier = {
							factor = 0.9
							society_influence >= 40
						}
						modifier = {
							factor = 0.8
							society_influence >= 50
						}
						modifier = {
							factor = 0.7
							society_influence >= 70
						}
						modifier = {
							factor = 0.6
							society_influence >= 80
						}
						modifier = {
							factor = 0.5
							society_influence >= 90
						}
						add_mission_succeed_influence_effect = yes
					}
					30 = {
						add_mission_fail_influence_effect = yes
					}
				}
				random = {
					chance = 10
					character_event = { id = WB.25070 } #Small chance for tattoos to Rank 3 and 4s.
				}
			}
		}
	}
}
#MISSION:
#Ping event for the mission Duel & Slay <someone>
character_event = {
	id = swhunters.51
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		FROM = { society_quest_event = { id = swhunters.52 days = 7 random = 7 } }
	}
}

#Witch Hunter General character wants you to investigate someone!
society_quest_event = {
	id = swhunters.52
	is_triggered_only = yes
	is_in_society = yes
	only_capable = yes

	trigger = {
		FROM = { is_alive = yes }
		is_state_witch_hunter_trigger = yes
		same_society_as = FROM
		has_any_quest = no
		NOT = { has_character_modifier = quest_cooldown_timer }
		NOT = { is_inaccessible_trigger = yes }
		is_landed = yes
	}

	desc = {
		text = EVTDESCswhunters_52 #default
		trigger = { event_target:investigate_target = { is_state_witch_hunter_trigger = no } }
	}
	desc = {
		text = EVTDESCswhunters_52_b #default non member
		trigger = { event_target:investigate_target = { is_state_witch_hunter_trigger = yes } }
	}
	immediate = {
		if = { #Best case... (a society member of *another* warrior lodge, who matches or is below your PCS)
			limit = {
				any_player = {NOT = { has_character_modifier = expelled_k_witch_hunters_order }
					NOT = { has_character_modifier = accused_recently }
					OR = {
						any_neighbor_independent_ruler = { character = event_target:lodge_hero }
						same_realm = event_target:lodge_hero
					}
	           		NOT = { same_society_as = ROOT }
					NOR={
						trait=zealous
						trait=holy_warrior
					} #immunity <3
	                is_inaccessible_or_incapable_trigger = no
					OR = {
						has_character_modifier = highly_suspect
						has_character_modifier = known_satanist
						trait = mutation_major
						trait = mutation_massive
						trait = mystic
					}
					is_within_diplo_range = ROOT
	            }
			}
			random_player = {
				limit = { NOT = { has_character_modifier = expelled_k_witch_hunters_order }
					NOT = { has_character_modifier = accused_recently }
					OR = {
						any_neighbor_independent_ruler = { character = event_target:lodge_hero }
						same_realm = event_target:lodge_hero
					}
	           		NOT = { same_society_as = ROOT }
					NOR = {
						trait = zealous
						trait = holy_warrior
					}
	                is_inaccessible_or_incapable_trigger = no
					OR = {
						has_character_modifier = highly_suspect
						has_character_modifier = known_satanist
						has_major_mutation_trigger = yes
						has_massive_mutation_trigger = yes
						trait = mystic
					}
					is_within_diplo_range = ROOT
	            }
                score_value = { #Prioritizes selecting some kind of character you wouldn't get along with...
                	value = 10
                	potential_rival_score = yes
	            }
	            score_value = { #Extra weight for characters you've encountered before...
	                value = 10
	                disliked_target_selection_score = yes
	            }
	            score_value = { #Reduced chance to pick people currently at war (unable to duel)...
	                value = 10
	            	at_war_reduction_score = yes
	            }
				save_event_target_as = investigate_target
				break = yes
            }
		}
		if = { #2nd best case (a rival) - PCS is second prio...
			limit = {
				any_realm_character = {
					NOT = { has_character_modifier = accused_recently }
					is_ruler=yes
					is_inaccessible_or_incapable_trigger = no
					OR = {
						has_character_modifier = under_suspicion
						has_character_modifier = highly_suspect
						has_character_modifier = known_satanist
						is_mutated_trigger = yes
						trait = mystic
					}
					NOT = { any_spouse = { character = ROOT } }
					is_adult = yes
				}
			}
			random_realm_character = {
				limit = {
					NOT = { has_character_modifier = accused_recently }
					is_ruler=yes
					is_inaccessible_or_incapable_trigger = no
					OR = {
						has_character_modifier = under_suspicion
						has_character_modifier = highly_suspect
						has_character_modifier = known_satanist
						is_mutated_trigger = yes
						trait = mystic
					}
					NOT = { any_spouse = { character = ROOT } }
					is_adult = yes
				}
                score_value = { #Prioritizes selecting some kind of character you wouldn't get along with...
                	value = 10
                	potential_rival_score = yes
	            }
	            score_value = { #Extra weight for characters you've encountered before...
	                value = 10
	                disliked_target_selection_score = yes
	            }
				save_event_target_as = investigate_target
				break = yes
            }
		}
		if = { #3rd best case (a realm character) who fits the bill...
			limit = {
				any_neighbor_independent_ruler = {
					NOT = { has_character_modifier = expelled_k_witch_hunters_order }
					religion_group=old_world_group
					any_realm_character = {
						is_ruler=yes
						NOT = { has_character_modifier = accused_recently }
						is_inaccessible_or_incapable_trigger = no
						OR = {
							has_character_modifier = under_suspicion
							has_character_modifier = highly_suspect
							has_character_modifier = known_satanist
							is_mutated_trigger = yes
							trait = mystic
						}
						NOT = { any_spouse = { character = ROOT } }
						is_adult = yes
						ROOT = { capital_scope = { distance = { where = PREV distance < 1000 } } }
					}
	            }
			}
			random_neighbor_independent_ruler = {
				limit = {
					NOT = { has_character_modifier = expelled_k_witch_hunters_order }
					religion_group=old_world_group
					any_realm_character = {
						is_ruler=yes
						NOT = { has_character_modifier = accused_recently }
						is_inaccessible_or_incapable_trigger = no
						OR = {
							has_character_modifier = under_suspicion
							has_character_modifier = highly_suspect
							has_character_modifier = known_satanist
							is_mutated_trigger = yes
							trait = mystic
						}
						NOT = { any_spouse = { character = ROOT } }
						is_adult = yes
						ROOT = { capital_scope = { distance = { where = PREV distance < 1000 } } }
					}
				}
				any_realm_character={
					limit = {
						is_ruler=yes
						is_inaccessible_or_incapable_trigger = no
						NOT = { has_character_modifier = accused_recently }
						OR = {
							has_character_modifier = under_suspicion
							has_character_modifier = highly_suspect
							has_character_modifier = known_satanist
							is_mutated_trigger = yes
							trait = mystic
						}
						NOT = { any_spouse = { character = ROOT } }
						is_adult = yes
						ROOT = { capital_scope = { distance = { where = PREV distance < 1000 } } }
					}
					score_value = { #Prioritizes selecting some kind of character you wouldn't get along with...
						value = 10
						potential_rival_score = yes
					}
					score_value = { #Extra weight for characters you've encountered before...
						value = 10
						disliked_target_selection_score = yes
					}
					save_event_target_as = investigate_target
					break = yes
				}
			}
		}
		if = { #4th case Any realm's...
			limit = {
				any_independent_ruler = {NOT = { has_character_modifier = expelled_k_witch_hunters_order }
					religion_group=old_world_group
					any_realm_character = {
						religion_group=old_world_group
						NOT = { has_character_modifier = accused_recently }
						is_inaccessible_or_incapable_trigger = no
						is_ruler=yes
						OR = {
							has_character_modifier = under_suspicion
							has_character_modifier = highly_suspect
							has_character_modifier = known_satanist
							is_mutated_trigger = yes
							trait = mystic
						}
						NOT = { any_spouse = { character = ROOT } }
						is_adult = yes
						ROOT = { capital_scope = { distance = { where = PREV distance < 1000 } } }
					}
	            }
			}
			random_independent_ruler = {
				limit = {
					NOT = { has_character_modifier = expelled_k_witch_hunters_order }
					religion_group=old_world_group
					any_realm_character = {
						religion_group=old_world_group
						NOT = { has_character_modifier = accused_recently }
						is_inaccessible_or_incapable_trigger = no
						is_ruler=yes
						OR = {
							has_character_modifier = under_suspicion
							has_character_modifier = highly_suspect
							has_character_modifier = known_satanist
							is_mutated_trigger = yes
							trait = mystic
						}
						NOT = { any_spouse = { character = ROOT } }
						is_adult = yes
						ROOT = { capital_scope = { distance = { where = PREV distance < 1000 } } }
					}
				}
				any_realm_character = {
					limit = {
						religion_group=old_world_group
						is_inaccessible_or_incapable_trigger = no
						NOT = { has_character_modifier = accused_recently }
						is_ruler=yes
						OR = {
							has_character_modifier = under_suspicion
							has_character_modifier = highly_suspect
							has_character_modifier = known_satanist
							is_mutated_trigger = yes
							trait = mystic
						}
						NOT = { any_spouse = { character = ROOT } }
						is_adult = yes
						ROOT = { capital_scope = { distance = { where = PREV distance < 1000 } } }
					}
	                score_value = { #Prioritizes selecting some kind of character you wouldn't get along with...
	                	value = 10
	                	potential_rival_score = yes
		            }
		            score_value = { #Extra weight for characters you've encountered before...
		                value = 10
		                disliked_target_selection_score = yes
		            }
					save_event_target_as = investigate_target
					break = yes
				}
            }
		}
	}

	quest_target = event_target:investigate_target

	option = {
		name = ACCEPT
		event_target:investigate_target = {
			show_scope_change = no
			set_quest_target = {
				id = quest_inquisitorial_investigation
				holder = ROOT
			}
			add_character_modifier = {
				name = accused_recently
				duration = 360
				hidden = yes
			}
		}
		save_event_target_as = witch_hunter
		add_trait=travelling
		set_variable = {
			which = witch_hunter_investigation_proof
			value = 0
		}
		event_target:lodge_hero = {character_event = { id = swhunters.53 days = 7}}
	}
	option = {
		name = DECLINE
		custom_tooltip = { text = decline_quest_tooltip }

		add_character_modifier = {
			name = quest_cooldown_timer
			hidden = yes
			days = 1000
		}

		ai_chance = { factor = 0 }
	}
}
letter_event = {
	id = swhunters.53
	hide_window = yes

	is_triggered_only = yes
	immediate={
		event_target:investigate_target={character_event={id=witchhunter.28 days=7}}

	}
}
letter_event = {
	id = swhunters.54
	desc = EVTDESCswhunters_54
	picture = GFX_evt_burning_stake

	is_triggered_only = yes
	immediate={
		change_variable = {
			which = witch_hunter_investigation_events
			value = 1
		}
		if = {
			limit = {
				intrigue=5
			}
			change_variable = {
				which = witch_hunter_investigation_events
				value = 1
			}
		}
		if = {
			limit = {
				OR={
					trait=genius
					trait=shrewd
					trait=quick
				}
			}
			change_variable = {
				which = witch_hunter_investigation_events
				value = 1
			}
		}
		if = {
			limit = {
				learning=5
			}
			change_variable = {
				which = witch_hunter_investigation_events
				value = 1
			}
		}
		if = {
			limit = {
				OR={
					AND={
						learning=5
						intrigue=10
					}
					AND={
						learning=10
						intrigue=5
					}
				}
			}
			change_variable = {
				which = witch_hunter_investigation_events
				value = 1
			}
		}
		if = {
			limit = {
				OR={
					AND={
						learning=10
						intrigue=15
					}
					AND={
						learning=15
						intrigue=10
					}
				}
			}
			change_variable = {
				which = witch_hunter_investigation_events
				value = 1
			}
		}
		if = {
			limit = {
				learning=15
				intrigue=15
			}
			change_variable = {
				which = witch_hunter_investigation_events
				value = 1
			}
		}
		if = { # In or around the Middle East and beyond
			limit = {
				OR={
					trait=shrewd
					trait=quick
					trait=genius
					trait=schemer
					trait=diligent
					trait=patient
				}
			}
			change_variable = {
				which = witch_hunter_investigation_events
				value = 1
			}
		}
		if = {
			limit = {
				from={is_landed=no}
			}
			set_variable = {
				which = witch_hunter_investigation_events
				value = 3
			}
		}
	}
	option={
		name=EVTOPTswhunters_54
		character_event={id=swhunters.55 days=3}
	}
}
character_event = {
	id = swhunters.55
	hide_window = yes

	trigger = {
		has_quest = quest_inquisitorial_investigation
	}
	fail_trigger_effect={
		clr_quest= quest_inquisitorial_investigation
		remove_trait=travelling
		set_variable = {
			which = witch_hunter_investigation_events
			value = 0
		}
	}

	is_triggered_only = yes

	immediate = {
		# Fire a random travel event
		if={limit={
			check_variable = {
				which = witch_hunter_investigation_events
				value >= 1
			} }
			random_list = {
				25 = {
					trigger = {
						check_variable = {
							which = witch_hunter_investigation_events
							value = 3
						}
					}
					change_variable = {
						which = witch_hunter_investigation_proof
						value = 1
					}
					repeat_event={ id = swhunters.55 days=1}
				}
				50 = {
					character_event = { id = swhunters.56 }  # Homesick (I really miss <person>)
					trigger = {
						check_variable = {
							which = witch_hunter_investigation_events
							value = 2
						}
						NOT = { has_character_flag = missed_loved_one }
						any_courtier_or_vassal = {
							OR = {
								is_lover = ROOT
								any_spouse = { character = ROOT }
								AND = {
									OR = {
										is_mother = ROOT
										is_father = ROOT
									}
									NOR = {
										is_lover = ROOT
										any_spouse = { character = ROOT }
									}
								}
								AND = {
									is_child_of = ROOT
									NOR = {
										is_lover = ROOT
										any_spouse = { character = ROOT }
									}
								}
								AND = {
									is_friend = ROOT
									NOR = {
										is_lover = ROOT
										any_spouse = { character = ROOT }
										is_mother = ROOT
										is_father = ROOT
										is_child_of = ROOT
									}
								}
							}
						}
					}
				}
				50 = { #Bust a Courtiers
					trigger={
						check_variable = {
							which = witch_hunter_investigation_events
							value = 2
						}
						NOT={has_character_flag=busted_courtiers}
					}
					event_target:investigate_target = {
						any_courtier = { character_event = { id = swhunters.29 days = 50 random = 30 } }
					}
					repeat_event={ id = swhunters.55 days=30}
					change_variable = {
						which = witch_hunter_investigation_proof
						value = 1
					}
					set_character_flag=busted_courtiers
				}
				50 = { #Inquire about Lord from Friend and Family
					trigger={
						event_target:investigate_target={is_landed=yes}
						check_variable = {
							which = witch_hunter_investigation_events
							value = 2
						}
					}
					character_event = { id = swhunters.57 days = 15 random = 30 }
				}
				50 = { #Plan
					trigger={
						event_target:investigate_target={is_landed=yes}
						check_variable = {
							which = witch_hunter_investigation_events
							value = 2
						}
					}
					character_event = { id = swhunters.59 days = 10 random = 15 }
				}
				50 = { #Confront the Lowborn
					trigger={
						event_target:investigate_target={is_landed=no}
						check_variable = {
							which = witch_hunter_investigation_events
							value == 1
						}
					}
					event_target:investigate_target = {
						character_event = { id = witchhunter.9 }
					}
					set_character_flag=mission_hunt
					set_variable = {
						which = witch_hunter_investigation_events
						value = 0
					}
				}
				50 = { #Confront the Noble
					trigger={
						event_target:investigate_target={is_landed=yes}
						check_variable = {
							which = witch_hunter_investigation_events
							value == 1
						}
					}
					if={limit={event_target:investigate_target={is_cultist_trigger=no}}
						event_target:witch_hunter={
							change_variable = {
								which = witch_hunter_investigation_proof_negative
								value = 1
							}
						}
					}
					random_list={ #Some Randomness Involved
						33={
							event_target:witch_hunter={
								change_variable = {
									which = witch_hunter_investigation_proof
									value = 1
								}
							}
						}
						33={
						}
						33={
							event_target:witch_hunter={
								change_variable = {
									which = witch_hunter_investigation_proof_negative
									value = 1
								}
							}
						}
					}
					subtract_variable={
						which=witch_hunter_investigation_proof
						which=witch_hunter_investigation_proof_negative
					}
					event_target:investigate_target = {
						if={
							limit={intrigue=12}
							character_event = { id = swhunters.61 } #Try to stop the Witch Hunter
						}
					}
					character_event = { id = swhunters.60 days=30 }
					set_variable = {
						which = witch_hunter_investigation_events
						value = 0
					}
				}
			}
		}
	}
}
#You feel homesick...
character_event = {
    id = swhunters.56 #I really miss X
	title = EVT_TITLE_WITCH_HUNT
    desc = EVTDESC_JD_15010
    picture = GFX_evt_carriage_default
    border = GFX_event_normal_frame_diplomacy
    is_triggered_only = yes

	trigger = {
		has_quest = quest_inquisitorial_investigation
	}
	fail_trigger_effect={
		clr_quest= quest_inquisitorial_investigation
		remove_trait=travelling
		set_variable = {
			which = witch_hunter_investigation_events
			value = 0
		}
	}

    immediate = {
    	set_character_flag = missed_loved_one
        random_courtier_or_vassal = { #Select someone you sort of care about at least...!
    		limit = {
    			OR = {
					is_lover = ROOT
					any_spouse = { character = ROOT }
					AND = {
						OR = {
							is_mother = ROOT
							is_father = ROOT
						}
						NOR = {
							is_lover = ROOT
							any_spouse = { character = ROOT }
						}
					}
					AND = {
						is_child_of = ROOT
						NOR = {
							is_lover = ROOT
							any_spouse = { character = ROOT }
						}
					}
					AND = {
						is_friend = ROOT
						NOR = {
							is_lover = ROOT
							any_spouse = { character = ROOT }
							is_mother = ROOT
							is_father = ROOT
							is_child_of = ROOT
						}
					}
				}
    		}
    		save_event_target_as = person_missed
    	}
    }

    option = { #I will write a letter to my lover...
        name = EVTOPTA_JD_15010
        custom_tooltip = { text = will_receive_a_letter }
        event_target:person_missed = { set_character_flag = is_lover } #for follow up event

		scaled_wealth = { value = -0.1 min = -5 }

        tooltip = {
	        reverse_opinion = {
				who = event_target:person_missed
				modifier = opinion_love_letters
				years = 15
			}
		}

		trigger = {
			event_target:person_missed = {
				is_lover = ROOT
			}
		}
    }
    option = { #I will write a letter to my friend...
        name = EVTOPTB_JD_15010
		custom_tooltip = { text = will_receive_a_letter }
		event_target:person_missed = { set_character_flag = is_friend } #for follow up event

		scaled_wealth = { value = -0.1 min = -5 }

		tooltip = {
	        reverse_opinion = {
				who = event_target:person_missed
				modifier = opinion_pen_pal
				years = 15
			}
		}

		trigger = {
			event_target:person_missed = {
				is_friend = ROOT
				NOR = {
					is_lover = ROOT
					any_spouse = { character = ROOT }
					is_mother = ROOT
					is_father = ROOT
					is_child_of = ROOT
				}
			}
		}
    }
    option = { #I will write a letter to my spouse...!
        name = EVTOPTC_JD_15010
        custom_tooltip = { text = will_receive_a_letter }
        event_target:person_missed = { set_character_flag = is_spouse } #for follow up event

        scaled_wealth = { value = -0.1 min = -5 }

        tooltip = {
	        reverse_opinion = {
				who = event_target:person_missed
				modifier = opinion_love_letters
				years = 15
			}
		}

		trigger = {
			event_target:person_missed = {
				any_spouse = { character = ROOT }
				NOT = { is_lover = ROOT }
			}
		}
    }
    option = { #I will write a letter to my parent...
        name = EVTOPTD_JD_15010
        custom_tooltip = { text = will_receive_a_letter }
        event_target:person_missed = { set_character_flag = is_parent } #for follow up event

        scaled_wealth = { value = -0.1 min = -5 }

        tooltip = {
        	reverse_opinion = {
				who = event_target:person_missed
				modifier = opinion_delighted_parent
				years = 15
			}
		}
		trigger = {
			event_target:person_missed = {
				OR = {
					is_mother = ROOT
					is_father = ROOT
				}
				NOR = {
					is_lover = ROOT
					any_spouse = { character = ROOT }
				}
			}
		}
    }
    option = { #I will write a letter to my child...
        name = EVTOPTE_JD_15010
        custom_tooltip = { text = will_receive_a_letter }
        event_target:person_missed = { set_character_flag = is_child } #for follow up event

        scaled_wealth = { value = -0.1 min = -5 }

        tooltip = {
	        reverse_opinion = {
				who = event_target:person_missed
				modifier = opinion_pen_pal
				years = 15
			}
        }

		trigger = {
			OR = {
				is_mother = event_target:person_missed
				is_father = event_target:person_missed
			}
			event_target:person_missed = {
				NOR = {
					is_lover = ROOT
					any_spouse = { character = ROOT }
				}
			}
		}
    }
    option = { #No! Time is of the essence...!
        name = EVTOPTF_JD_15010
        hidden_effect = { set_character_flag = do_nothing }
    }

    after = {
    	if = { limit = { NOT = { has_character_flag = do_nothing } }
    		event_target:person_missed = { character_event = { id = JD.15011 } }
    	}
    	else = {
    		clr_character_flag = do_nothing
    	}
    	repeat_event = {id=swhunters.55}
		subtract_variable = {
			which = witch_hunter_investigation_events
			value = 1
		}
    }
}

#Question People
character_event = {
    id = swhunters.57 #Ask from Courtiers or Family
	title = EVT_TITLE_WITCH_HUNT
    desc = EVTDESC_swhunters_57 #I have Decided to ask around in the court information of lord and his family
    picture = GFX_evt_carriage_default
    border = GFX_event_normal_frame_diplomacy
    is_triggered_only = yes

	trigger = {
		has_quest = quest_inquisitorial_investigation
	}
	fail_trigger_effect={
		clr_quest= quest_inquisitorial_investigation
		remove_trait=travelling
		set_variable = {
			which = witch_hunter_investigation_events
			value = 0
		}
	}
    immediate = {
		clear_event_target=person_questioned
		clear_event_target=person_questioned_2
		event_target:investigate_target={
			random_courtier_or_vassal = { #Select someone you sort of care about at least...!
				limit = {
					NOT = { has_character_modifier = accused_recently }
					OR = {
						is_lover = PREV
						any_spouse = { character = PREV }
						AND = {
							OR = {
								is_mother = PREV
								is_father = PREV
							}
							NOR = {
								is_lover = PREV
								any_spouse = { character = PREV }
							}
						}
						AND = {
							is_child_of = PREV
							NOR = {
								is_lover = PREV
								any_spouse = { character = PREV }
							}
						}
						AND = {
							is_friend = PREV
							NOR = {
								is_lover = PREV
								any_spouse = { character = PREV }
								is_mother = PREV
								is_father = PREV
								is_child_of = PREV
							}
						}
					}
				}
				save_event_target_as = person_questioned
				add_character_modifier = {
					name = accused_recently
					duration = 90
					hidden = yes
				}
			}
			random_courtier_or_vassal = { #Select someone you sort of care about at least...!
				limit = {
					NOT = { has_character_modifier = accused_recently }
					OR = {
						is_rival = PREV
						AND={
							opinion = {
								who = ROOT
								value < 0
							}
							OR={
								intrigue=12
								learning=15
							}
						}
						AND={
							opinion = {
								who = ROOT
								value < 50
							}
							trait=drunkard
							trait=gregarious
							learning=8 #Not too stupid to know anything
						}
					}
				}
				add_character_modifier = {
					name = accused_recently
					duration = 90
					hidden = yes
				}
				save_event_target_as = person_questioned_2
			}
		}
    }

    option = { #I shall Question someone close to the family
        name = EVTOPTA_swhunters_57
        custom_tooltip = { text = will_receive_a_letter }
		trigger={event_target:person_questioned={always=yes}}
		event_target:person_questioned={
			show_portrait=yes
		}
		random_list={
			30={
				custom_tooltip={text=success_tip}
				if={limit={
						event_target:investigate_target={
							is_cultist_trigger=yes
						}
					}
					change_variable = {
						which = witch_hunter_investigation_proof
						value = 1
					}
				}
				change_variable = {
					which = witch_hunter_investigation_proof
					value = 1
				}
				modifier = {
					factor = 1.2
					learning=10
				}
				modifier = {
					factor = 1.2
					intrigue=10
				}
				modifier = {
					factor = 1.2
					learning=15
				}
				modifier = {
					factor = 1.2
					intrigue=15
				}
				modifier = {
					factor = 1.5
					event_target:person_questioned={opinion = { who = ROOT value = 50 }}
				}
				modifier = {
					factor = 0.8
					event_target:investigate_target={intrigue=12}
					event_target:investigate_target={is_cultist_trigger=yes}
				}
				modifier = {
					factor = 0.5
					event_target:investigate_target={intrigue=15}
					event_target:investigate_target={is_cultist_trigger=yes}
				}
				modifier = {
					factor = 0.5
					event_target:investigate_target={intrigue=20}
					event_target:investigate_target={is_cultist_trigger=yes}
				}
				modifier = {
					factor = 0.6
					event_target:investigate_target={
						is_cultist_trigger=no
					}
				}
			}
			15={
				custom_tooltip={text=great_success_tip}
				if={limit={
						event_target:investigate_target={
							is_cultist_trigger=yes
						}
					}
					change_variable = {
						which = witch_hunter_investigation_proof
						value = 1
					}
				}
				change_variable = {
					which = witch_hunter_investigation_proof
					value = 2
				}
				modifier = {
					factor = 0.8
					event_target:investigate_target={intrigue=12}
					event_target:investigate_target={is_cultist_trigger=yes}
				}
				modifier = {
					factor = 0.5
					event_target:investigate_target={intrigue=15}
					event_target:investigate_target={is_cultist_trigger=yes}
				}
				modifier = {
					factor = 0.5
					event_target:investigate_target={intrigue=20}
					event_target:investigate_target={is_cultist_trigger=yes}
				}
				modifier = {
					factor = 0.6
					event_target:investigate_target={
						is_cultist_trigger=no
					}
				}
				modifier = {
					factor = 1.5
					learning=20
				}
				modifier = {
					factor = 1.5
					intrigue=20
				}
				modifier = {
					factor = 1.2
					learning=15
				}
				modifier = {
					factor = 1.2
					intrigue=15
				}
				modifier = {
					factor = 1.5
					event_target:person_questioned={opinion = { who = ROOT value = 50 }}
				}
			}
			40={
				custom_tooltip={text=failure_tip}
				change_variable = {
					which = witch_hunter_investigation_proof
					value = 1
				}
				modifier = {
					factor = 2
					event_target:person_questioned={opinion = { who = ROOT value < 0 }}
				}
				modifier = {
					factor = 0
					event_target:person_questioned={opinion = { who = event_target:investigate_target value < 10 }}
				}
			}
			15={
				custom_tooltip={text=critical_failure_tip}
				random = {
					chance = 10
					imprison = event_target:investigate_target
					character_event={ id=swhunters.58 }
					event_target:investigate_target={character_event={ id=swhunters.58 }}
				}
				if={limit={
						event_target:investigate_target={
							is_cultist_trigger=yes
						}
					}
					change_variable = {
						which = witch_hunter_investigation_proof_negative
						value = 2
					}
				}
				change_variable = {
					which = witch_hunter_investigation_proof_negative
					value = 1
				}
				modifier = {
					factor = 2
					event_target:person_questioned={opinion = { who = ROOT value < 0 }}
				}
				modifier = {
					factor = 1.5
					NOT={learning=10}
				}
				modifier = {
					factor = 1.5
					NOT={intrigue=10}
				}
				modifier = {
					factor = 1.5
					NOT={learning=15}
				}
				modifier = {
					factor = 1.5
					NOT={intrigue=15}
				}
				modifier = {
					factor = 0
					event_target:person_questioned={opinion = { who = event_target:investigate_target value < 10 }}
				}
			}
		}
    }
    option = { #I will inquire from someone who dislikes them in the court
        name = EVTOPTB_swhunters_57
		event_target:person_questioned_2={
			show_portrait=yes
		}
		random_list={
			70={
				change_variable = {
					which = witch_hunter_investigation_proof
					value = 1
				}
				custom_tooltip={text=success_tip}
				modifier = {
					factor = 1.2
					learning=10
				}
				modifier = {
					factor = 0.2 #Random Non Existant Courtier Malus
					NOT={
						event_target:person_questioned_2={
							always=yes
						}
					}
				}
				modifier = {
					factor = 1.2
					intrigue=10
				}
				modifier = {
					factor = 1.2
					learning=15
				}
				modifier = {
					factor = 1.2
					intrigue=15
				}
				modifier = {
					factor = 1.5
					event_target:person_questioned_2={opinion = { who = ROOT value = 50 }}
				}
				modifier = {
					factor = 0.8
					event_target:investigate_target={diplomacy=12}
					event_target:investigate_target={is_cultist_trigger=yes}
				}
				modifier = {
					factor = 0.5
					event_target:investigate_target={diplomacy=15}
					event_target:investigate_target={is_cultist_trigger=yes}
				}
				modifier = {
					factor = 0.5
					event_target:investigate_target={diplomacy=20}
					event_target:investigate_target={is_cultist_trigger=yes}
				}
				modifier = {
					factor = 0.8
					event_target:investigate_target={learning=12}
					event_target:investigate_target={is_cultist_trigger=yes}
				}
				modifier = {
					factor = 0.5
					event_target:investigate_target={learning=15}
					event_target:investigate_target={is_cultist_trigger=yes}
				}
				modifier = {
					factor = 0.5
					event_target:investigate_target={learning=20}
					event_target:investigate_target={is_cultist_trigger=yes}
				}
				modifier = {
					factor = 0.8
					event_target:investigate_target={intrigue=12}
					event_target:investigate_target={is_cultist_trigger=yes}
				}
				modifier = {
					factor = 0.5
					event_target:investigate_target={intrigue=15}
					event_target:investigate_target={is_cultist_trigger=yes}
				}
				modifier = {
					factor = 0.5
					event_target:investigate_target={intrigue=20}
					event_target:investigate_target={is_cultist_trigger=yes}
				}
				modifier = {
					factor = 1.2
					event_target:investigate_target={
						is_cultist_trigger=no
					}
				}
			}
			15={
				custom_tooltip={text=failure_tip}
				change_variable = {
					which = witch_hunter_investigation_proof_negative
					value = 1
				}
				modifier = {
					factor = 2
					opinion = { who = ROOT value < 0 }
				}
				modifier = {
					factor = 0
					event_target:person_questioned_2={opinion = { who = event_target:investigate_target value < 10 }}
				}
			}
			15={
				change_variable = {
					which = witch_hunter_investigation_proof_negative
					value = 2
				}
				modifier = {
					factor = 2
					opinion = { who = ROOT value < 0 }
				}
				modifier = {
					factor = 1.5
					NOT={learning=10}
				}
				modifier = {
					factor = 1.5
					NOT={intrigue=10}
				}
				modifier = {
					factor = 1.5
					NOT={learning=15}
				}
				modifier = {
					factor = 1.5
					NOT={intrigue=15}
				}
				modifier = {
					factor = 0
					event_target:person_questioned_2={opinion = { who = event_target:investigate_target value < 10 }}
				}
				custom_tooltip={text=critical_failure_tip}
			}
		}
    }
    after = {
		if={limit={prisoner=yes}}
		else={
    	repeat_event = {id=swhunters.55}
		}
		subtract_variable = {
			which = witch_hunter_investigation_events
			value = 1
		}
    }
}
character_event = {
    id = swhunters.58 #Ask from Courtiers or Family Caught
	title = EVT_TITLE_WITCH_HUNT
	desc = {
		text = EVTDESC_swhunters_58a #default
		trigger = { character=event_target:investigate_target}
	}
	desc = {
		text = EVTDESC_swhunters_58b #default
		trigger = { character=from }
	}
    picture = GFX_evt_carriage_default
    border = GFX_event_normal_frame_diplomacy
    is_triggered_only = yes

    option = { #Burn this meddle some Witch Hunter
        name = EVTOPTA_swhunters_58
		trigger={character=event_target:investigate_target}
		if={limit={NOT={trait=cruel}}
			add_trait=cruel
		}
		from={
			show_portrait=yes
			if = {
				limit = {is_invincible_trigger = yes}
				antideath_effect = yes
				break = yes
			}
			add_trait = staked
			death = { death_reason = death_execution_burning killer = ROOT }
		}
		ai_chance={
			factor=5
			modifier={
				factor=0
				OR={
					trait=kind
					trait=just
				}
			}
		}
	}
    option = { #Let Him rot
        name = ransomall.0.ww1 #Let Them Rot
		trigger={character=event_target:investigate_target}
		from={
			remove_trait=travelling
			clr_quest= quest_inquisitorial_investigation
			set_variable = {
				which = witch_hunter_investigation_events
				value = 0
			}
			show_portrait=yes
		}
		ai_chance={
			factor=5
		}
	}
    option = { #Damn
        name = EVTOPTA_WITCHHUNTER_INITIATION_3
		trigger={character=from}
		from={
			show_portrait=yes
			clr_quest= quest_inquisitorial_investigation
			remove_trait=travelling
			set_variable = {
				which = witch_hunter_investigation_events
				value = 0
			}
		}
	}
}
character_event = {
    id = swhunters.59 #To Plan
	title = EVT_TITLE_WITCH_HUNT
    desc = EVTDESC_swhunters_59 #I have Decided to ask around in the court information of lord and his family
    picture = GFX_evt_carriage_default
    border = GFX_event_normal_frame_diplomacy
    is_triggered_only = yes

	trigger = {
		has_quest = quest_inquisitorial_investigation
	}
	fail_trigger_effect={
		clr_quest= quest_inquisitorial_investigation
		remove_trait=travelling
		set_variable = {
			which = witch_hunter_investigation_events
			value = 0
		}
	}
    immediate = {
		clear_event_target=person_questioned
		clear_event_target=person_questioned_2
	}

    option = { #I shall Lay an trap
        name = EVTOPTA_swhunters_59
        custom_tooltip = { text = will_receive_a_letter }
		event_target:investigate_target={
			show_portrait=yes
		}
		scaled_wealth = { value = -0.1 min = -5 }
		random_list={
			30={
				custom_tooltip={text=success_tip}
				if={limit={
						event_target:investigate_target={
							is_cultist_trigger=yes
						}
					}
					change_variable = {
						which = witch_hunter_investigation_proof
						value = 1
					}
				}
				change_variable = {
					which = witch_hunter_investigation_proof
					value = 1
				}
				modifier = {
					factor = 1.2
					learning=10
				}
				modifier = {
					factor = 1.2
					intrigue=10
				}
				modifier = {
					factor = 1.2
					learning=15
				}
				modifier = {
					factor = 1.2
					intrigue=15
				}
				modifier = {
					factor = 3
					event_target:investigate_target={trait=trusting}
				}
				modifier = {
					factor = 0.8
					event_target:investigate_target={intrigue=12}
					event_target:investigate_target={is_cultist_trigger=yes}
				}
				modifier = {
					factor = 0.8
					event_target:investigate_target={trait=paranoid}
				}
				modifier = {
					factor = 0.5
					event_target:investigate_target={intrigue=15}
					event_target:investigate_target={is_cultist_trigger=yes}
				}
				modifier = {
					factor = 0.5
					event_target:investigate_target={intrigue=20}
					event_target:investigate_target={is_cultist_trigger=yes}
				}
				modifier = {
					factor = 0.6
					event_target:investigate_target={
						is_cultist_trigger=no
					}
				}
			}
			15={
				modifier = {
					factor = 3
					event_target:investigate_target={trait=trusting}
				}
				custom_tooltip={text=great_success_tip}
				if={limit={
						event_target:investigate_target={
							is_cultist_trigger=yes
						}
					}
					change_variable = {
						which = witch_hunter_investigation_proof
						value = 1
					}
				}
				change_variable = {
					which = witch_hunter_investigation_proof
					value = 2
				}
				modifier = {
					factor = 0.8
					event_target:investigate_target={trait=paranoid}
				}
				modifier = {
					factor = 0.8
					event_target:investigate_target={intrigue=12}
					event_target:investigate_target={is_cultist_trigger=yes}
				}
				modifier = {
					factor = 0.5
					event_target:investigate_target={intrigue=15}
					event_target:investigate_target={is_cultist_trigger=yes}
				}
				modifier = {
					factor = 0.5
					event_target:investigate_target={intrigue=20}
					event_target:investigate_target={is_cultist_trigger=yes}
				}
				modifier = {
					factor = 0.6
					event_target:investigate_target={
						is_cultist_trigger=no
					}
				}
				modifier = {
					factor = 1.5
					learning=20
				}
				modifier = {
					factor = 1.5
					intrigue=20
				}
				modifier = {
					factor = 1.2
					learning=15
				}
				modifier = {
					factor = 1.2
					intrigue=15
				}
			}
			40={
				custom_tooltip={text=failure_tip}
				change_variable = {
					which = witch_hunter_investigation_proof_negative
					value = 1
				}
				modifier = {
					factor = 1.2
					event_target:investigate_target={trait=paranoid}
				}
				modifier = {
					factor = 2
					event_target:person_questioned={opinion = { who = ROOT value < 0 }}
				}
				modifier = {
					factor = 0
					event_target:person_questioned={opinion = { who = event_target:investigate_target value < 10 }}
				}
			}
			15={
				custom_tooltip={text=critical_failure_tip}
				random = {
					chance = 10
					imprison = event_target:investigate_target
					character_event={ id=swhunters.58 }
					event_target:investigate_target={character_event={ id=swhunters.58 }}
				}
				modifier = {
					factor = 1.2
					event_target:investigate_target={trait=paranoid}
				}
				if={limit={
						event_target:investigate_target={
							is_cultist_trigger=yes
						}
					}
					change_variable = {
						which = witch_hunter_investigation_proof_negative
						value = 2
					}
				}
				change_variable = {
					which = witch_hunter_investigation_proof_negative
					value = 1
				}
				modifier = {
					factor = 2
					event_target:investigate_target={opinion = { who = ROOT value < 0 }}
				}
				modifier = {
					factor = 1.5
					NOT={learning=10}
				}
				modifier = {
					factor = 1.5
					NOT={intrigue=10}
				}
				modifier = {
					factor = 1.5
					NOT={learning=15}
				}
				modifier = {
					factor = 1.5
					NOT={intrigue=15}
				}
			}
		}
    }
    option = { #Shall Follow
        name = EVTOPTB_swhunters_59
		event_target:investigate_target={
			show_portrait=yes
		}

		random_list={
			30={
				change_variable = {
					which = witch_hunter_investigation_proof
					value = 1
				}
				custom_tooltip={text=success_tip}
				modifier = {
					factor = 1.2
					learning=10
				}
				modifier = {
					factor = 1.2
					intrigue=10
				}
				modifier = {
					factor = 1.2
					learning=15
				}
				modifier = {
					factor = 1.2
					intrigue=15
				}
				modifier = {
					factor = 1.2
					trait=shrewd
				}
				modifier = {
					factor = 1.2
					event_target:investigate_target={
						is_cultist_trigger=yes
					}
				}
				modifier = {
					factor = 0
					OR={
						event_target:investigate_target={ trait=just }
						event_target:person_questioned_2={ trait=zealous }
					}
				}
			}
			30={
				custom_tooltip={text=failure_tip}
				change_variable = {
					which = witch_hunter_investigation_proof_negative
					value = 1
				}
				modifier = {
					factor = 1.2
					event_target:investigate_target={
						is_cultist_trigger=no
					}
				}
			}
			15={
				custom_tooltip={text=critical_failure_tip}
				random = {
					chance = 10
					imprison = event_target:investigate_target
					character_event={ id=swhunters.58 }
					event_target:investigate_target={character_event={ id=swhunters.58 }}
				}
				modifier = {
					factor = 1.2
					event_target:investigate_target={trait=paranoid}
				}
				if={limit={
						event_target:investigate_target={
							is_cultist_trigger=yes
						}
					}
					change_variable = {
						which = witch_hunter_investigation_proof_negative
						value = 2
					}
				}
				change_variable = {
					which = witch_hunter_investigation_proof_negative
					value = 1
				}
				modifier = {
					factor = 2
					event_target:investigate_target={opinion = { who = ROOT value < 0 }}
				}
				modifier = {
					factor = 1.5
					trait=quick
				}
				modifier = {
					factor = 1.2
					trait=shrewd
				}
				modifier = {
					factor = 1.5
					NOT={learning=10}
				}
				modifier = {
					factor = 1.5
					NOT={intrigue=10}
				}
				modifier = {
					factor = 1.5
					NOT={learning=15}
				}
				modifier = {
					factor = 1.5
					NOT={intrigue=15}
				}
			}
		}
    }
    option = { #I will fabricate
        name = EVTOPTC_swhunters_59
		trigger={
			OR={
				trait=deceitful
				trait=schemer
			}
		}
		tooltip_info_custom=schemer_deceitful
		event_target:investigate_target={
			show_portrait=yes
		}
		scaled_wealth = { value = -0.1 min = -5 }

		random_list={
			70={
				change_variable = {
					which = witch_hunter_investigation_proof
					value = 1
				}
				custom_tooltip={text=success_tip}
				modifier = {
					factor = 1.2
					learning=10
				}
				modifier = {
					factor = 1.2
					intrigue=10
				}
				modifier = {
					factor = 1.2
					learning=15
				}
				modifier = {
					factor = 1.2
					intrigue=15
				}
				modifier = {
					factor = 1.5
					trait=genius
				}
				modifier = {
					factor = 1.2
					event_target:investigate_target={trait=mutation_minor}
				}
				modifier = {
					factor = 1.8
					event_target:investigate_target={trait=mutation_major}
				}
				modifier = {
					factor = 2.4
					event_target:investigate_target={trait=mutation_massive}
				}
				modifier = {
					factor = 1.5
					event_target:person_questioned_2={opinion = { who = ROOT value = 50 }}
				}
				modifier = {
					factor = 0.8
					event_target:investigate_target={diplomacy=12}
					event_target:investigate_target={is_cultist_trigger=yes}
				}
				modifier = {
					factor = 0.5
					event_target:investigate_target={diplomacy=15}
					event_target:investigate_target={is_cultist_trigger=yes}
				}
				modifier = {
					factor = 0.5
					event_target:investigate_target={diplomacy=20}
					event_target:investigate_target={is_cultist_trigger=yes}
				}
				modifier = {
					factor = 0.8
					event_target:investigate_target={learning=12}
					event_target:investigate_target={is_cultist_trigger=yes}
				}
				modifier = {
					factor = 0.5
					event_target:investigate_target={learning=15}
					event_target:investigate_target={is_cultist_trigger=yes}
				}
				modifier = {
					factor = 0.5
					event_target:investigate_target={learning=20}
					event_target:investigate_target={is_cultist_trigger=yes}
				}
				modifier = {
					factor = 0.8
					event_target:investigate_target={intrigue=12}
					event_target:investigate_target={is_cultist_trigger=yes}
				}
				modifier = {
					factor = 0.5
					event_target:investigate_target={intrigue=15}
					event_target:investigate_target={is_cultist_trigger=yes}
				}
				modifier = {
					factor = 0.5
					event_target:investigate_target={intrigue=20}
					event_target:investigate_target={is_cultist_trigger=yes}
				}
				modifier = {
					factor = 1.2
					event_target:investigate_target={
						is_cultist_trigger=no
					}
				}
			}
			15={
				custom_tooltip={text=failure_tip}
				change_variable = {
					which = witch_hunter_investigation_proof_negative
					value = 1
				}
				modifier = {
					factor = 2
					opinion = { who = ROOT value < 0 }
				}
				modifier = {
					factor = 0
					event_target:person_questioned_2={opinion = { who = event_target:investigate_target value < 10 }}
				}
			}
			15={
				change_variable = {
					which = witch_hunter_investigation_proof_negative
					value = 2
				}
				modifier = {
					factor = 2
					opinion = { who = ROOT value < 0 }
				}
				modifier = {
					factor = 1.5
					NOT={learning=10}
				}
				modifier = {
					factor = 1.5
					NOT={intrigue=10}
				}
				modifier = {
					factor = 1.5
					NOT={learning=15}
				}
				modifier = {
					factor = 1.5
					NOT={intrigue=15}
				}
				modifier = {
					factor = 0
					event_target:person_questioned_2={opinion = { who = event_target:investigate_target value < 10 }}
				}
				custom_tooltip={text=critical_failure_tip}
			}
		}
    }
    after = {
		if={limit={prisoner=yes}}
		else={
			repeat_event = {id=swhunters.55}
		}
		subtract_variable = {
			which = witch_hunter_investigation_events
			value = 1
		}
    }
}
character_event = {
    id = swhunters.60 #To Confrontation
	title = EVT_TITLE_WITCH_HUNT
    picture = GFX_evt_witch_hunters
    border = GFX_event_normal_frame_intrigue
    is_triggered_only = yes
	trigger = {
		from={has_quest = quest_inquisitorial_investigation}
	}
	fail_trigger_effect={
		from={
			clr_quest= quest_inquisitorial_investigation
			remove_trait=travelling
			set_variable = {
				which = witch_hunter_investigation_events
				value = 0
			}
		}
	}
    desc = {
		text = EVTDESCswhunters_60A #Target Is Found quilty
		trigger = {
			event_target:witch_hunter = {check_variable={which = witch_hunter_investigation_proof value = 1 }}
			character=event_target:witch_hunter
		}
	}
    desc = {
		text = EVTDESCswhunters_60B #Target Is Found Not Quilty
		trigger = {
			event_target:witch_hunter = {check_variable={which = witch_hunter_investigation_proof value < 1 }}
			character=event_target:witch_hunter
		}
	}
    desc = {
		text = EVTDESCBswhunters_60A #Target Is Found quilty
		trigger = {
			event_target:witch_hunter = {check_variable={which = witch_hunter_investigation_proof value = 1 }}
			NOT={character=event_target:witch_hunter}
		}
	}
    desc = {
		text = EVTDESCBswhunters_60B #Target Is Found Not Quilty
		trigger = {
			event_target:witch_hunter = {check_variable={which = witch_hunter_investigation_proof value < 1 }}
			NOT={character=event_target:witch_hunter}
		}
	}
	option = {
		name=EVTOPTA_swhunters_60
		trigger={
			event_target:witch_hunter = {check_variable={which = witch_hunter_investigation_proof value < 1 }}
			NOT={character=event_target:witch_hunter}
			is_cultist_trigger=yes
		}
		ai_chance={
			factor=10
		}
	}
	option = {
		name=EVTOPTB_swhunters_60
		trigger={
			event_target:witch_hunter = {check_variable={which = witch_hunter_investigation_proof value < 1 }}
			NOT={character=event_target:witch_hunter}
			is_cultist_trigger=no
		}
		ai_chance={
			factor=10
		}
	}
	option = {
		name=EVTOPTC_swhunters_60
		trigger={
			event_target:witch_hunter = {check_variable={which = witch_hunter_investigation_proof value = 1 }}
			NOT={character=event_target:witch_hunter}
			is_cultist_trigger=yes
		}
		if = {
			limit = {is_invincible_trigger = yes}
			antideath_effect = yes
			break = yes
		}
		add_trait = staked
		death = { death_reason = death_execution_burning killer = FROM }
		ai_chance={
			factor=10
		}
	}
	option = {
		name=EVTOPTD_swhunters_60
		trigger={
			event_target:witch_hunter = {check_variable={which = witch_hunter_investigation_proof value = 1 }}
			NOT={character=event_target:witch_hunter}
			is_cultist_trigger=no
		}
		if = {
			limit = {is_invincible_trigger = yes}
			antideath_effect = yes
			break = yes
		}
		add_trait = staked
		death = { death_reason = death_execution_burning killer = FROM }
		ai_chance={
			factor=10
		}
	}
	option = {
		name=EVTOPTA_swhunters_60B
		trigger={
			event_target:witch_hunter = {check_variable={which = witch_hunter_investigation_proof value = 1 }}
			character=event_target:witch_hunter
		}
		if={limit={not={martial=15}}
			change_martial=1
		}
		if={limit={not={learning=15}}
			change_learning=1
		}
		if={event_target:investigate_target={is_cultist_trigger=yes}
			custom_tooltip = { text = burned_heretic_tt }
			change_society_currency=300
		}
		if={event_target:investigate_target={is_cultist_trigger=no}
			change_society_currency=100
		}
		event_target:investigate_target={
			if = {
				limit = {is_invincible_trigger = yes}
				antideath_effect = yes
				break = yes
			}
			add_trait = staked
			death = { death_reason = death_execution_burning killer = event_target:witch_hunter }
		}
		ai_chance={
			factor=50
		}
	}
	option = {
		name=EVTOPTB_swhunters_60B
		trigger={
			event_target:witch_hunter = {check_variable={which = witch_hunter_investigation_proof value = 1 }}
			character=event_target:witch_hunter
		}
		if={limit={not={intrigue=15}}
			change_intrigue=1
		}
		if={limit={not={learning=15}}
			change_learning=1
		}
		if={event_target:investigate_target={is_cultist_trigger=yes}
			change_society_currency=150
		}
		if={event_target:investigate_target={is_cultist_trigger=no}
			change_society_currency=100
		}
		if={limit={from={is_landed=yes}}
			event_target:investigate_target={
				imprison = event_target:witch_hunter
			}
		}
		ai_chance={
			factor=10
		}
	}
	option = {
		name=EVTOPTC_swhunters_60B
		trigger={
			event_target:witch_hunter = {check_variable={which = witch_hunter_investigation_proof value < 1 }}
			character=event_target:witch_hunter
		}
		change_society_currency=-250
		ai_chance={
			factor=10
		}
	}
	after={
		event_target:witch_hunter={
			if={limit={has_character_flag=busted_courtiers}
				clr_character_flag=busted_courtiers
				change_society_currency=50
			}
			clr_quest= quest_inquisitorial_investigation
			hidden_effect={
				remove_trait=travelling
			}
		}
	}
}
character_event = {
    id = swhunters.61 #To defense of the target
	title = EVT_TITLE_WITCH_HUNT
    picture = GFX_evt_witch_hunters
    border = GFX_event_normal_frame_intrigue
    is_triggered_only = yes
    desc = {
		text = EVTDESCAswhunters_61 #Target Does not know
		trigger = {
			OR={
				event_target:witch_hunter = {check_variable={which = witch_hunter_investigation_proof value < 0 }}
				NOT={intrigue=15}
			}
		}
	}
    desc = {
		text = EVTDESCBswhunters_61 #Target Is Found quilty
		trigger = {
			event_target:witch_hunter = {check_variable={which = witch_hunter_investigation_proof value = 1 }}
			intrigue=15
		}
	}
    desc = {
		text = EVTDESCCswhunters_61 #Target Is Found Not Quilty
		trigger = {
			event_target:witch_hunter = {check_variable={which = witch_hunter_investigation_proof value < 0 }}
			intrigue=15
		}
	}
	immediate={
	}
	option = {
		increase_visibility_minor_effect = yes
		name=EVTOPTA_swhunters_61 #Try to Murder the Witch Hunter
		trigger={
			or={
				is_cultist_trigger=yes
				intrigue=12
			}
		}
		event_target:witch_hunter={
			show_scope = yes
		}
		random_list={
			33={
				trigger={is_cultist_trigger=no}
				if={limit={event_target:witch_hunter = {check_variable={which = witch_hunter_investigation_proof value = 1 }}}
					increase_visibility_effect=yes
				}
				event_target:witch_hunter={
					death = { death_reason = death_murder_unknown }
				}
				modifier = {
					factor = 1.9
					event_target:witch_hunter={NOT={intrigue=10}}
				}
				modifier = {
					factor = 1.7
					event_target:witch_hunter={NOT={intrigue=14}}
				}
				modifier = {
					factor = 1.7
					event_target:witch_hunter={NOT={intrigue=16}}
				}
				modifier = {
					factor = 0.8
					event_target:witch_hunter={NOT={trait=paranoid}}
				}
				modifier = {
					factor = 0.2
					event_target:witch_hunter={NOT={trait=schemer}}
				}
				modifier = {
					factor = 1.9
					NOT={intrigue=10}
				}
				modifier = {
					factor = 1.7
					NOT={intrigue=14}
				}
				modifier = {
					factor = 1.7
					NOT={intrigue=16}
				}
				modifier = {
					factor = 1.5
					trait=schemer
				}
			}
			33={
				#Fail
				modifier = {
					factor = 1.9
					event_target:witch_hunter={intrigue=10}
				}
				modifier = {
					factor = 1.7
					event_target:witch_hunter={intrigue=14}
				}
				modifier = {
					factor = 1.7
					event_target:witch_hunter={intrigue=16}
				}
				modifier = {
					factor = 1.5
					event_target:witch_hunter={trait=paranoid}
				}
				modifier = {
					factor = 1.9
					NOT={intrigue=10}
				}
				modifier = {
					factor = 1.7
					NOT={intrigue=14}
				}
				modifier = {
					factor = 1.7
					NOT={intrigue=16}
				}
				modifier = {
					factor = 0.5
					trait=schemer
				}
			}
			33={
				trigger={is_cultist_trigger=yes}
				change_society_currency=100
				if={limit={event_target:witch_hunter = {check_variable={which = witch_hunter_investigation_proof value = 1 }}}
					increase_visibility_effect=yes
				}
				modifier = {
					factor = 1.9
					event_target:witch_hunter={NOT={intrigue=10}}
				}
				modifier = {
					factor = 1.7
					event_target:witch_hunter={NOT={intrigue=14}}
				}
				modifier = {
					factor = 1.7
					event_target:witch_hunter={NOT={intrigue=16}}
				}
				modifier = {
					factor = 0.8
					event_target:witch_hunter={NOT={trait=paranoid}}
				}
				modifier = {
					factor = 0.2
					event_target:witch_hunter={NOT={trait=schemer}}
				}
				modifier = {
					factor = 1.9
					NOT={intrigue=10}
				}
				modifier = {
					factor = 1.7
					NOT={intrigue=14}
				}
				modifier = {
					factor = 1.7
					NOT={intrigue=16}
				}
				modifier = {
					factor = 1.5
					trait=schemer
				}
			}
		}
		ai_chance={
			factor=10
		}
	}
	option = {
		increase_visibility_effect = yes
		name=EVTOPTB_swhunters_61 #)Imprison the Hunter
		trigger={
			or={
				is_cultist_trigger=yes
				martial=12
			}
		}
		random_list={
			33={
				modifier = {
					factor = 1.9
					event_target:witch_hunter={NOT={intrigue=10}}
				}
				modifier = {
					factor = 1.7
					event_target:witch_hunter={NOT={intrigue=14}}
				}
				modifier = {
					factor = 1.7
					event_target:witch_hunter={NOT={intrigue=16}}
				}
				modifier = {
					factor = 0.8
					event_target:witch_hunter={NOT={trait=paranoid}}
				}
				modifier = {
					factor = 0.2
					event_target:witch_hunter={NOT={trait=schemer}}
				}
				modifier = {
					factor = 1.9
					martial=10
				}
				modifier = {
					factor = 1.7
					martial=14
				}
				modifier = {
					factor = 1.7
					martial=16
				}
				modifier = {
					factor = 1.5
					trait=schemer
				}
				modifier = {
					factor = 1.5
					trait=just
				}
				event_target:witch_hunter={
					imprison = event_target:investigate_target
				}
				if={limit={event_target:witch_hunter = {check_variable={which = witch_hunter_investigation_proof value = 1 }}}
					increase_visibility_effect=yes
				}
			}
			33={
				#Fail
				modifier = {
					factor = 1.9
					event_target:witch_hunter={intrigue=10}
				}
				modifier = {
					factor = 1.7
					event_target:witch_hunter={intrigue=14}
				}
				modifier = {
					factor = 1.7
					event_target:witch_hunter={intrigue=16}
				}
				modifier = {
					factor = 1.5
					event_target:witch_hunter={trait=paranoid}
				}
				modifier = {
					factor = 1.5
					event_target:witch_hunter={trait=schemer}
				}
				modifier = {
					factor = 1.9
					NOT={martial=10}
				}
				modifier = {
					factor = 1.7
					NOT={martial=14}
				}
				modifier = {
					factor = 1.7
					NOT={martial=16}
				}
				modifier = {
					factor = 0.5
					trait=schemer
				}
			}
			33={
				trigger={is_cultist_trigger=yes}
				change_society_currency=50
				modifier = {
					factor = 1.9
					event_target:witch_hunter={NOT={intrigue=10}}
				}
				modifier = {
					factor = 1.7
					event_target:witch_hunter={NOT={intrigue=14}}
				}
				modifier = {
					factor = 1.7
					event_target:witch_hunter={NOT={intrigue=16}}
				}
				modifier = {
					factor = 0.8
					event_target:witch_hunter={NOT={trait=paranoid}}
				}
				modifier = {
					factor = 0.2
					event_target:witch_hunter={NOT={trait=schemer}}
				}
				modifier = {
					factor = 1.9
					martial=10
				}
				modifier = {
					factor = 1.7
					martial=14
				}
				modifier = {
					factor = 1.7
					martial=16
				}
				modifier = {
					factor = 1.5
					trait=schemer
				}
				modifier = {
					factor = 1.5
					trait=just
				}
				event_target:witch_hunter={
					imprison = event_target:investigate_target
				}
				if={limit={event_target:witch_hunter = {check_variable={which = witch_hunter_investigation_proof value = 1 }}}
					increase_visibility_effect=yes
				}
			}
		}
		ai_chance={
			factor=10
		}
	}
	option = {
		name=EVTOPTC_swhunters_61
		random_list={
			33={
				custom_tooltip={text=success_tip}
				modifier = {
					factor = 1.9
					event_target:witch_hunter={NOT={learning=10}}
				}
				modifier = {
					factor = 1.7
					event_target:witch_hunter={NOT={learning=14}}
				}
				modifier = {
					factor = 0.2
					event_target:witch_hunter={NOT={trait=schemer}}
				}
				modifier = {
					factor = 1.3
					intrigue=10
				}
				modifier = {
					factor = 1.4
					intrigue=14
				}
				modifier = {
					factor = 1.5
					intrigue=16
				}
				modifier = {
					factor = 1.5
					trait=schemer
				}
				event_target:witch_hunter={
					subtract_variable = {
						which = witch_hunter_investigation_proof
						value = 1
					}
				}
			}
			15={
				custom_tooltip={text=great_success_tip}
				event_target:witch_hunter={
					subtract_variable = {
						which = witch_hunter_investigation_proof
						value = 2
					}
				}
				modifier = {
					factor = 0.3
					event_target:witch_hunter={learning=10}
				}
				modifier = {
					factor = 0.3
					event_target:witch_hunter={learning=14}
				}
				modifier = {
					factor = 0.3
					event_target:witch_hunter={learning=16}
				}
				modifier = {
					factor = 0.1
					event_target:witch_hunter={trait=schemer}
				}
				modifier = {
					factor = 1.9
					intrigue=10
				}
				modifier = {
					factor = 1.7
					intrigue=14
				}
				modifier = {
					factor = 1.7
					intrigue=16
				}
				modifier = {
					factor = 1.5
					trait=schemer
				}
			}
			33={
				custom_tooltip={text=failure_tip}
			}
		}
		ai_chance={
			factor=10
		}
	}
	option = {
		name=EVTOPTD_swhunters_61
		ai_chance={
			factor=5
		}
	}
	after={
		if={limit={event_target:witch_hunter = {check_variable={which = witch_hunter_investigation_proof value = 3 }}} #Information has Leaked
			increase_visibility_effect=yes
		}
	}
}
#From on_character_ask_to_join_society
character_event = {
    id  = swhunters.70
	hide_window = yes
    is_triggered_only = yes
    trigger = {
    	FROM = { leader = { society_member_of = sigmar_witch_hunters } }
    }
    immediate = {
    	FROM = { leader = { character_event = { id = swhunters.71 } } }
    }
}

#Ping event
character_event = {
    id  = swhunters.71
	hide_window = yes
    is_triggered_only = yes
    immediate = {
    	FROM = { letter_event = { id = swhunters.72 } }
    }
}

#Welcome letter
letter_event = {
    id  = swhunters.72
    desc = EVTDESC_MNM_102 #Shamefully borrowing from the Pomandres
    border = GFX_event_letter_frame_religion

    is_triggered_only = yes

    option = {
        name = EVTOPTA_MNM_102
		join_society = sigmar_witch_hunters
    }
}
#Random relic reward for lvl 3 event
letter_event = {
	id = swhunters.73
	desc = EVTDESC_MNM_4431

	is_triggered_only = yes

	trigger = {
		society_rank >= 3
	}

	option = {
	 	name = EVTOPTA_MNM_4428
		add_artifact = witch_hunter_rapier
	}
}
