#######################
# MOUNT Events
#######################
# Market Window
#######################
# market.0			# Open Market Window and choose type
# market.1 			# Skaven market pg1
# market.2			# Skaven market pg2
# market.3			# Ogre market
# market.4			# Lizardmen Market pg1
# market.5			# Lizardmen Market pg2
# market.6			# Greenskin Market
#######################
# STANDARD MOUNTS
#######################
# market.7			# Horses
# market.8 			# Tier 1+2 pg1
# market.9			# Tier 1+2 pg2
# market.10			# Tier 3 pg1
# market.11			# Tier 4+5 pg1
# market.12			# Tier 4+5 pg2
# market.13			# Tier 4+5 pg3
#######################
# Camels, Elephants, and Mammoths
#######################
# market.14			# Camels, Elephants, Mammoths
# market.15			# Camels
# market.16			# Elephants
# market.17 		# Mammoths
#######################
# Exotic Mounts
#######################
# market.18			# Exotic Mounts
# market.19 		# Exotic pg2
#######################
namespace = mountshop
namespace = market
#######################
# Market Window
#######################

# Open Market Window and choose type
character_event = {
	id = market.0
	title = EVTTITLEmarket.1
	desc = EVTDESCmarket.1
	picture = GFX_evt_market

	is_triggered_only = yes

	# Skaven
	option = {
		name = EVTOPTAmarket.0
		trigger = {
			trait = creature_skaven
		}
		hidden_tooltip = {
			character_event = { id = market.1 }
		}
	}
	# Ogre
	option = {
		name = EVTOPTAmarket.0
		trigger = {
			trait = creature_ogre
		}
		hidden_tooltip = {
			character_event = { id = market.3 }
		}
	}
	# Lizardmen
	option = {
		name = EVTOPTAmarket.0
		trigger = {
			OR = {
				trait = creature_skink
				trait = creature_saurus
				trait = creature_slann
			}
		}
		hidden_tooltip = {
			character_event = { id = market.4 }
		}
	}
	# Greenskin
	option = {
		name = EVTOPTAmarket.0
		trigger = {
			can_buy_greenskin_items_trigger = yes
		}
		hidden_tooltip = {
			character_event = { id = market.6 }
		}
	}
	# Exotic for greenskins
	option = {
		name = EVTOPTBmarket.0
		trigger = {
			can_buy_greenskin_items_trigger = yes
		}
		hidden_tooltip = {
			character_event = { id = market.18 }
		}
	}
	# Horses
	option = {
		name = EVTOPTCmarket.0
		trigger = {
			NOR = {
				trait = creature_skaven
				trait = creature_ogre
				trait = creature_skink
				trait = creature_slann
				trait = creature_saurus
				can_buy_greenskin_items_trigger = yes
			}
		}
		hidden_tooltip = {
			character_event = { id = market.7 }
		}
	}
	# Camels and Elephants
	option = {
		name = EVTOPTDmarket.0
		trigger = {
			OR = {
				can_buy_arabyan_items_trigger = yes
				can_buy_cophic_items_trigger = yes
				can_buy_ind_items_trigger = yes
				can_buy_southlands_items_trigger = yes
			}
			NOR = {
				trait = creature_skaven
				trait = creature_ogre
				trait = creature_skink
				trait = creature_slann
				trait = creature_saurus
				can_buy_greenskin_items_trigger = yes
			}
		}
		hidden_tooltip = {
			character_event = { id = market.14 }
		}
	}
	# Exotic Mounts
	option = {
		name = EVTOPTBmarket.0
		trigger = {
			OR = {
				can_buy_ind_items_trigger = yes
				can_buy_kislev_items_trigger = yes
				can_buy_asur_items_trigger = yes
				can_buy_griffon_items_trigger = yes
				can_buy_pegasus_items_trigger = yes
				trait = creature_amazon
			}
			NOR = {
				trait = creature_skaven
				trait = creature_ogre
				trait = creature_skink
				trait = creature_slann
				trait = creature_saurus
				can_buy_greenskin_items_trigger = yes
			}
		}
		hidden_tooltip = {
			character_event = { id = market.18 }
		}
	}
	# EXIT
	option = {
		name = EVTOPTEXIT
		hidden_tooltip = {
			clr_character_flag = visiting_mount_market
		}
	}
}
# Skaven market pg1
character_event = {
	id = market.1
	title = EVTTITLEmarket.1
	desc = EVTDESCmarket.1
	picture = GFX_evt_warpstone_market

	is_triggered_only = yes

	option = {
		name = EVTOPTAmarket.1
		scaled_wealth = {
			value = -0.25
			min = -25
			max = -200
		}
		clr_character_flag = visiting_mount_market
		set_character_flag = has_mount
		add_artifact = giant_rat_mount
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	option = {
		name = EVTOPTBmarket.1
		scaled_wealth = {
			value = -1.15
			min = -50
			max = -300
		}
		clr_character_flag = visiting_mount_market
		set_character_flag = has_mount
		add_artifact = brood_horror_mount
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	option = {
		name = EVTOPTCmarket.1
		if = {
			limit = {
				culture = moulder
			}
			scaled_wealth = {
				value = -1.85
				min = -200
				max = -400
			}
		}
		else = {
			scaled_wealth = {
				value = -2.00
				min = -300
				max = -600
			}
		}
		clr_character_flag = visiting_mount_market
		set_character_flag = has_mount
		add_artifact = rat_ogre_mount
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# NEXT
	option = {
		name = EVTOPTNEXT
		hidden_tooltip = {
			# Skaven market pg2
			character_event = { id = market.2 }
		}
	}
}
# Skaven market pg2
character_event = {
	id = market.2
	title = EVTTITLEmarket.1
	desc = EVTDESCmarket.1
	picture = GFX_evt_warpstone_market

	is_triggered_only = yes

	# BACK
	option = {
		name = EVTOPTBACK
		hidden_tooltip = {
			# Skaven market pg1
			character_event = { id = market.1 }
		}
	}
	option = {
		name = EVTOPTDmarket.1
		prestige = -100
		scaled_wealth = {
			value = -2.25
			min = -200
			max = -400
		}
		clr_character_flag = visiting_mount_market
		set_character_flag = has_mount
		add_artifact = doomwheel_mount
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	option = {
		name = EVTOPTEmarket.1
		prestige = -250
		scaled_wealth = {
			value = -2.75
			min = -300
			max = -600
		}
		clr_character_flag = visiting_mount_market
		set_character_flag = has_mount
		add_artifact = doomflayer_mount
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# EXIT
	option = {
		name = EVTOPTEXIT
		hidden_tooltip = {
			clr_character_flag = visiting_mount_market
		}
	}
}
# Ogre market
character_event = {
	id = market.3
	title = EVTTITLEmarket.3
	desc = EVTDESCmarket.3
	picture = GFX_evt_greenskinhuts

	is_triggered_only = yes

	option = {
		name = EVTOPTAmarket.3
		scaled_wealth = {
			value = -1.0
			min = -75
			max = -250
		}
		clr_character_flag = visiting_mount_market
		set_character_flag = has_mount
		add_artifact = Mournfang
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	option = {
		name = EVTOPTBmarket.3
		scaled_wealth = {
			value = -1.5
			min = -150
			max = -500
		}
		clr_character_flag = visiting_mount_market
		set_character_flag = has_mount
		add_artifact = Stonehorn
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# EXIT
	option = {
		name = EVTOPTEXIT
		hidden_tooltip = {
			clr_character_flag = visiting_mount_market
		}
	}
}
# Lizardmen Market pg1
character_event = {
	id = market.4
	title = EVTTITLEmarket.4
	desc = EVTDESCmarket.4
	picture = GFX_evt_lizardmen_coatl

	is_triggered_only = yes

	option = {
		name = EVTOPTAmarket.4
		trigger = {
			trait = creature_skink
		}
		scaled_wealth = {
			value = -0.75
			min = -100
			max = -200
		}
		clr_character_flag = visiting_mount_market
		set_character_flag = has_mount
		add_artifact = ripperdactyl_mount
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	option = {
		name = EVTOPTBmarket.4
		trigger = {
			OR = {
				trait = creature_skink
				trait = creature_saurus
			}
		}
		scaled_wealth = {
			value = -0.80
			min = -150
			max = -250
		}
		clr_character_flag = visiting_mount_market
		set_character_flag = has_mount
		add_artifact = cold_one_mount
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	option = {
		name = EVTOPTCmarket.4
		trigger = {
			trait = creature_saurus
		}
		scaled_wealth = {
			value = -1.0
			min = -250
			max = -500
		}
		clr_character_flag = visiting_mount_market
		set_character_flag = has_mount
		add_artifact = carnosaur_mount
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# NEXT
	option = {
		name = EVTOPTNEXT
		hidden_tooltip = {
			# Lizardmen Market pg2
			character_event = { id = market.5 }
		}
	}
}
# Lizardmen Market pg2
character_event = {
	id = market.5
	title = EVTTITLEmarket.4
	desc = EVTDESCmarket.4
	picture = GFX_evt_lizardmen_coatl

	is_triggered_only = yes

	# BACK
	option = {
		name = EVTOPTBACK
		hidden_tooltip = {
			# Lizardmen Market pg1
			character_event = { id = market.4 }
		}
	}
	option = {
		name = EVTOPTAmarket.5
		trigger = {
			OR = {
				trait = creature_skink
				trait = creature_saurus
				trait = creature_slann
			}
		}
		scaled_wealth = {
			value = -1.25
			min = -250
			max = -500
		}
		clr_character_flag = visiting_mount_market
		set_character_flag = has_mount
		add_artifact = stegadon_mount
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	option = {
		name = EVTOPTBmarket.5
		trigger = {
			OR = {
				trait = creature_skink
				trait = creature_saurus
				trait = creature_slann
			}
		}
		scaled_wealth = {
			value = -1.75
			min = -250
			max = -700
		}
		clr_character_flag = visiting_mount_market
		set_character_flag = has_mount
		add_artifact = bastiladon_mount
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	option = {
		name = EVTOPTCmarket.5
		trigger = {
			any_artifact = { artifact_type = cold_one_mount }
		}
		prestige = -200
		scaled_wealth = {
			value = -1.0
			min = -150
			max = -500
		}
		clr_character_flag = visiting_mount_market
		set_character_flag = has_mount
		unsafe_destroy_artifact = cold_one_mount
		add_artifact = druchii_artifact_cold_one_chariot
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# EXIT
	option = {
		name = EVTOPTEXIT
		hidden_tooltip = {
			clr_character_flag = visiting_mount_market
		}
	}
}
# Greenskin Market
character_event = {
	id = market.6
	title = EVTTITLEmarket.3
	desc = EVTDESCmarket.6
	picture = GFX_evt_greenskinhuts

	is_triggered_only = yes

	option = {
		name = EVTOPTAmarket.6
		trigger = {
			religion = spider_god
		}
		piety = -100
		scaled_wealth = {
			value = -0.25
			min = -25
			max = -175
		}
		custom_tooltip = {
			text = EVTTOOLTIPAmarket.6
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = spider_mount
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	option = {
		name = EVTOPTBmarket.6
		trigger = {
			trait = creature_goblin
			NOT = {
				religion = spider_god
			}
		}
		prestige = -100
		scaled_wealth = {
			value = -0.25
			min = -25
			max = -175
		}
		custom_tooltip = {
			text = EVTTOOLTIPBmarket.6
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		random_list = {
			30 = { add_artifact = great_cave_squig }
			70 = { add_artifact = squig }
		}
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	option = {
		name = EVTOPTCmarket.6
		trigger = {
			OR = {
				trait = creature_goblin
				trait = creature_hobgoblin
			}
		}
		prestige = -150
		scaled_wealth = {
			value = -0.30
			min = -50
			max = -225
		}
		custom_tooltip = {
			text = EVTTOOLTIPCmarket.6
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = wolf
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	option = {
		name = EVTOPTDmarket.6
		trigger = {
			NOR = {
				trait = creature_goblin
				trait = creature_hobgoblin
			}
		}
		prestige = -150
		scaled_wealth = {
			value = -0.50
			min = -100
			max = -300
		}
		custom_tooltip = {
			text = EVTTOOLTIPDmarket.6
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = boar
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	option = {
		name = EVTOPTEmarket.6
		trigger = {
			any_artifact = { artifact_type = boar }
		}
		prestige = -200
		scaled_wealth = {
			value = -1.0
			min = -150
			max = -500
		}
		custom_tooltip = {
			text = EVTTOOLTIPEmarket.6
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		unsafe_destroy_artifact = boar
		add_artifact = boar_chariot
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# EXIT
	option = {
		name = EVTOPTEXIT
		hidden_tooltip = {
			clr_character_flag = visiting_mount_market
		}
	}
}

#######################
# STANDARD MOUNTS
#######################

# Horses
character_event = {
	id = market.7
	title = EVTTITLEmarket.7
	desc = EVTDESCmarket.7
	picture = GFX_evt_market

	is_triggered_only = yes

	# Tier 1+2
	option = {
		name = EVTOPTAmarket.7
		hidden_tooltip = {
			character_event = { id = market.8 }
		}
	}
	# Tier 3
	option = {
		name = EVTOPTBmarket.7
		trigger = {
			NOT = {
				trait = creature_halfling
			}
		}
		hidden_tooltip = {
			character_event = { id = market.10 }
		}
	}
	# Tier 4+5
	option = {
		name = EVTOPTCmarket.7
		trigger = {
			NOT = {
				trait = creature_halfling
			}
		}
		hidden_tooltip = {
			character_event = { id = market.11 }
		}
	}
	# BACK TO MAIN
	option = {
		name = EVTOPTBACK
		hidden_tooltip = {
			character_event = { id = market.0 }
		}
	}
}
# Tier 1+2 pg1
character_event = {
	id = market.8
	title = EVTTITLEmarket.8
	desc = EVTDESCmarket.8
	picture = GFX_evt_market

	is_triggered_only = yes

	# Halfling Pony
	option = {
		name = EVTOPTHALFmarket.8
		trigger = {
			trait = creature_halfling
		}
		wealth = -25
		clr_character_flag = visiting_mount_market
		set_character_flag = has_mount
		add_artifact = pony
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# BACK TO MAIN for Halflings
	option = {
		name = EVTOPTBACK
		trigger = {
			trait = creature_halfling
		}
		hidden_tooltip = {
			character_event = { id = market.7 }
		}
	}
	# Dray horse
	option = {
		name = EVTOPTAmarket.8
		trigger = {
			NOT = {
				trait = creature_halfling
			}
		}
		wealth = -25
		custom_tooltip = {
			text = EVTTOOLTIPAmarket.8
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = dray_horse
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# Rouncey
	option = {
		name = EVTOPTBmarket.8
		trigger = {
			NOT = {
				trait = creature_halfling
			}
		}
		wealth = -25
		custom_tooltip = {
			text = EVTTOOLTIPBmarket.8
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = rouncey
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# Palfry
	option = {
		name = EVTOPTCmarket.8
		trigger = {
			NOT = {
				trait = creature_halfling
			}
		}
		wealth = -75
		custom_tooltip = {
			text = EVTTOOLTIPCmarket.8
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = palfry
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# NEXT page for Everyone Else
	option = {
		name = EVTOPTNEXT
		trigger = {
			NOT = { trait = creature_halfling }
		}
		hidden_tooltip = {
			character_event = { id = market.9 }
		}
	}
}
# Tier 1+2 pg2
character_event = {
	id = market.9
	title = EVTTITLEmarket.8
	desc = EVTDESCmarket.8
	picture = GFX_evt_market

	is_triggered_only = yes

	# BACK
	option = {
		name = EVTOPTBACK
		hidden_tooltip = {
			character_event = { id = market.8 }
		}
	}
	# Hobby
	option = {
		name = EVTOPTAmarket.9
		trigger = {
			can_buy_albion_items_trigger = yes
		}
		wealth = -75
		custom_tooltip = {
			text = EVTTOOLTIPAmarket.9
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = hobby
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# Jennet
	option = {
		name = EVTOPTBmarket.9
		trigger = {
			can_buy_estalian_items_trigger = yes
		}
		wealth = -75
		custom_tooltip = {
			text = EVTTOOLTIPBmarket.9
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = jennet
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# BACK TO MAIN
	option = {
		name = EVTOPTBACK
		hidden_tooltip = {
			character_event = { id = market.7 }
		}
	}
}
# Tier 3 pg1
character_event = {
	id = market.10
	title = EVTTITLEmarket.10
	desc = EVTDESCmarket.10
	picture = GFX_evt_market

	is_triggered_only = yes

	# Courser
	option = {
		name = EVTOPTAmarket.10
		wealth = -150
		custom_tooltip = {
			text = EVTTOOLTIPAmarket.10
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = courser
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# Destrier
	option = {
		name = EVTOPTBmarket.10
		wealth = -200
		set_character_flag = has_mount
		custom_tooltip = {
			text = EVTTOOLTIPBmarket.10
			clr_character_flag = visiting_mount_market
		}
		add_artifact = destrier
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# Breton charger
	option = {
		name = EVTOPTCmarket.10
		trigger = {
			can_buy_breton_items_trigger = yes
		}
		if = {
			limit = { breton_discount_trigger = yes }
			wealth = -150
		}
		else = {
			wealth = -200
		}
		custom_tooltip = {
			text = EVTTOOLTIPCmarket.10
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = bretonnian_charger
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# Galician horse
	option = {
		name = EVTOPTDmarket.10
		trigger = {
			can_buy_estalian_items_trigger = yes
		}
		if = {
			limit = { estalian_discount_trigger = yes }
			wealth = -175
		}
		else = {
			wealth = -225
		}
		custom_tooltip = {
			text = EVTTOOLTIPCmarket.10
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = irrana_mountain_horse
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# BACK TO MAIN
	option = {
		name = EVTOPTBACK
		hidden_tooltip = {
			character_event = { id = market.7 }
		}
	}
}
# Tier 4+5 pg1
character_event = {
	id = market.11
	title = EVTTITLEmarket.11
	desc = EVTDESCmarket.11
	picture = GFX_evt_market

	is_triggered_only = yes

	# Druchii Destrier
	option = {
		name = EVTOPTAmarket.11
		trigger = {
			culture_group = druchii_group
		}
		prestige = -50
		wealth = -225
		custom_tooltip = {
			text = EVTTOOLTIPAmarket.11
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = druchii_destrier
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# Druchii Cold One
	option = {
		name = EVTOPTBmarket.11
		trigger = {
			culture_group = druchii_group
		}
		prestige = -100
		wealth = -250
		custom_tooltip = {
			text = EVTTOOLTIPBmarket.11
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = cold_one_mount
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# Druchii Cold One Chariot
	option = {
		name = EVTOPTCmarket.11
		trigger = {
			culture_group = druchii_group
			any_artifact = { artifact_type = cold_one_mount }
		}
		prestige = -200
		scaled_wealth = {
			value = -1.0
			min = -150
			max = -500
		}
		custom_tooltip = {
			text = EVTTOOLTIPCmarket.11
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		unsafe_destroy_artifact = cold_one_mount
		add_artifact = druchii_artifact_cold_one_chariot
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# Charger
	option = {
		name = EVTOPTDmarket.11
		trigger = {
			NOT = {
				culture_group = druchii_group
			}
		}
		wealth = -225
		custom_tooltip = {
			text = EVTTOOLTIPDmarket.11
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		if = {
			limit = {
				religion_group = chaos_gods_group
			}
			add_artifact = chaos_destrier
		}
		else = {
			add_artifact = charger
		}
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# Steppe Courser
	option = {
		name = EVTOPTEmarket.11
		trigger = {
			can_buy_steppes_items_trigger = yes
			NOT = {
				culture_group = druchii_group
			}
		}
		wealth = -250
		custom_tooltip = {
			text = EVTTOOLTIPEmarket.11
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = steppe_courser
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# NEXT if available
	option = {
		name = EVTOPTNEXT
		trigger = {
			OR = {
				can_buy_asur_items_trigger = yes
				can_buy_steppes_items_trigger = yes
				can_buy_arabyan_items_trigger = yes
				can_buy_breton_items_trigger = yes
				can_buy_cophic_items_trigger = yes
			}
		}
		hidden_tooltip = {
			#check for pg2
			if = {
				limit = {
					OR = {
						can_buy_asur_items_trigger = yes
						can_buy_arabyan_items_trigger = yes
					}
				}
				character_event = {
					id = market.12
				}
			}
			#check for pg3
			else = {
				character_event = {
					id = market.13
				}
			}
		}
	}
	# Back to Main
	option = {
		name = EVTOPTBACK
		trigger = {
			NOR = {
				can_buy_asur_items_trigger = yes
				can_buy_steppes_items_trigger = yes
				can_buy_arabyan_items_trigger = yes
				can_buy_breton_items_trigger = yes
				can_buy_cophic_items_trigger = yes
			}
		}
		hidden_tooltip = {
			character_event = { id = market.7 }
		}
	}
}
# Tier 4+5 pg2
character_event = {
	id = market.12
	title = EVTTITLEmarket.11
	desc = EVTDESCmarket.11
	picture = GFX_evt_market

	is_triggered_only = yes

	# Asur courser
	option = {
		name = EVTOPTAmarket.12
		trigger = {
			can_buy_asur_items_trigger = yes
		}
		if = {
			limit = {
				araby_discount_trigger = yes
			}
			wealth = -250
		}
		else = {
			wealth = -300
		}
		custom_tooltip = {
			text = EVTTOOLTIPAmarket.12
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = asur_courser
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# Arabyan courser
	option = {
		name = EVTOPTBmarket.12
		trigger = {
			can_buy_arabyan_items_trigger = yes
		}
		if = {
			limit = {
				arabyan_discount_trigger = yes
			}
			wealth = -250
		}
		else = {
			wealth = -300
		}
		custom_tooltip = {
			text = EVTTOOLTIPBmarket.12
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = arabyan_courser
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# Arabyan charger
	option = {
		name = EVTOPTCmarket.12
		trigger = {
			can_buy_arabyan_items_trigger = yes
		}
		if = {
			limit = {
				arabyan_discount_trigger = yes
			}
			wealth = -275
		}
		else = {
			wealth = -325
		}
		custom_tooltip = {
			text = EVTTOOLTIPCmarket.12
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = arabyan_charger
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# NEXT or loop back to Main
	option = {
		name = EVTOPTNEXT
		hidden_tooltip = {
			#check for pg3
			if = {
				limit = {
					OR = {
						can_buy_steppes_items_trigger = yes
						can_buy_breton_items_trigger = yes
						can_buy_cophic_items_trigger = yes
					}
				}
				character_event = { id = market.13 }
			}
			#Back to Main
			else = {
				character_event = { id = market.7 }
			}
		}
	}
}
# Tier 4+5 pg3
character_event = {
	id = market.13
	title = EVTTITLEmarket.11
	desc = EVTDESCmarket.11
	picture = GFX_evt_market

	is_triggered_only = yes

	# Tong Steppe horse
	option = {
		name = EVTOPTAmarket.13
		trigger = {
			can_buy_steppes_items_trigger = yes
		}
		if = {
			limit = {
				is_within_diplo_range = offmap_cathay
			}
			wealth = -275
		}
		else = {
			wealth = -300
		}
		custom_tooltip = {
			text = EVTTOOLTIPAmarket.13
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = tong_steppe_horse
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# Chaos Warhorse
	option = {
		name = EVTOPTBmarket.13
		trigger = {
			can_buy_steppes_items_trigger = yes
		}
		if = {
			limit = {
				culture_group = hung_group
			}
			wealth = -275
		}
		else = {
			wealth = -300
		}
		custom_tooltip = {
			text = EVTTOOLTIPBmarket.13
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = chaos_wastes_war_horse
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# Breton warhorse
	option = {
		name = EVTOPTCmarket.13
		trigger = {
			can_buy_breton_items_trigger = yes
		}
		if = {
			limit = {
				breton_discount_trigger = yes
			}
			wealth = -275
		}
		else = {
			wealth = -300
		}
		custom_tooltip = {
			text = EVTTOOLTIPCmarket.13
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = bretonnian_warhorse_mount
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	#Teverian horse
	option = {
		name = EVTOPTDmarket.13
		trigger = {
			can_buy_cophic_items_trigger = yes
		}
		if = {
			limit = {
				cophic_discount_trigger = yes
			}
			wealth = -275
		}
		else = {
			wealth = -300
		}
		custom_tooltip = {
			text = EVTTOOLTIPDmarket.13
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = teverian_horse
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	#loop back to Main
	option = {
		name = EVTOPTBACK
		hidden_tooltip = {
			character_event = { id = market.7 }
		}
	}
}

#######################
# Camels, Elephants, and Mammoths
#######################

character_event = {
	id = market.14
	title = EVTTITLEmarket.14
	desc = EVTDESCmarket.14
	picture = GFX_evt_market

	is_triggered_only = yes

	# Camels
	option = {
		name = EVTOPTAmarket.14
		trigger = {
			OR = {
				can_buy_arabyan_items_trigger = yes
				can_buy_cophic_items_trigger = yes
			}
		}
		hidden_tooltip = {
			character_event = { id = market.15 }
		}
	}
	# Elephants
	option = {
		name = EVTOPTBmarket.14
		trigger = {
			OR = {
				can_buy_ind_items_trigger = yes
				can_buy_southlands_items_trigger = yes
			}
		}
		hidden_tooltip = {
			character_event = { id = market.16 }
		}
	}
	# Mammoths
	option = {
		name = EVTOPTCmarket.14
		trigger = {
			OR = {
				can_buy_steppes_items_trigger = yes
				culture_group = norscan_group
				culture_group = ogre_group
			}
		}
		hidden_tooltip = {
			character_event = { id = market.17 }
		}
	}
	# BACK
	option = {
		name = EVTOPTBACK
		hidden_tooltip = {
			character_event = { id = market.0 }
		}
	}
}
# Camels
character_event = {
	id = market.15
	title = EVTTITLEmarket.15
	desc = EVTDESCmarket.14
	picture = GFX_evt_market

	is_triggered_only = yes

	# Arabyan camel
	option = {
		name = EVTOPTAmarket.15
		trigger = {
			can_buy_arabyan_items_trigger = yes
		}
		if = {
			limit = {
				arabyan_discount_trigger = yes
			}
			wealth = -75
		}
		else = {
			wealth = -200
		}
		custom_tooltip = {
			text = EVTTOOLTIPAmarket.151
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = arabyan_camel
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# Cophic camel
	option = {
		name = EVTOPTBmarket.15
		trigger = {
			can_buy_cophic_items_trigger = yes
		}
		if = {
			limit = {
				arabyan_discount_trigger = yes
			}
			wealth = -125
		}
		else = {
			wealth = -225
		}
		custom_tooltip = {
			text = EVTTOOLTIPBmarket.15
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = cophic_camel
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# BACK
	option = {
		name = EVTOPTBACK
		hidden_tooltip = {
			character_event = { id = market.0 }
		}
	}
}
# Elephants
character_event = {
	id = market.16
	title = EVTTITLEmarket.16
	desc = EVTDESCmarket.14
	picture = GFX_evt_market

	is_triggered_only = yes

	# Ind elephant
	option = {
		name = EVTOPTAmarket.16
		trigger = {
			can_buy_ind_items_trigger = yes
		}
		if = {
			limit = {
				arabyan_discount_trigger = yes
			}
			wealth = -225
		}
		else = {
			wealth = -450
		}
		custom_tooltip = {
			text = EVTTOOLTIPAmarket.16
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = ind_elephant
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# Southlander elephant
	option = {
		name = EVTOPTBmarket.16
		trigger = {
			can_buy_southlands_items_trigger = yes
		}
		if = {
			limit = { southlander_discount_trigger = yes }
			wealth = -250
		}
		else = {
			wealth = -500
		}
		custom_tooltip = {
			text = EVTTOOLTIPBmarket.16
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = southlander_elephant
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# BACK
	option = {
		name = EVTOPTBACK
		hidden_tooltip = {
			character_event = { id = market.0 }
		}
	}
}
# Mammoths
character_event = {
	id = market.17
	title = EVTTITLEmarket.17
	desc = EVTDESCmarket.14
	picture = GFX_evt_market

	is_triggered_only = yes

	# Mammoth
	option = {
		name = EVTOPTAmarket.17
		trigger = {
			OR = {
				can_buy_steppes_items_trigger = yes
				culture_group = norscan_group
				culture_group = ogre_group
			}
		}
		if = {
			limit = {
				OR = {
					culture_group = norscan_group
					culture_group = ogre_group
				}
			}
			wealth = -225
		}
		else = {
			wealth = -450
		}
		custom_tooltip = {
			text = EVTTOOLTIPAmarket.17
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = mammoth_mount
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# BACK
	option = {
		name = EVTOPTBACK
		hidden_tooltip = {
			character_event = { id = market.0 }
		}
	}
}

#######################
# Exotic Mounts
#######################

character_event = {
	id = market.18
	title = EVTTITLEmarket.18
	desc = EVTDESCmarket.18
	picture = GFX_evt_market

	is_triggered_only = yes


	# Lamassu
	option = {
		name = EVTOPTAmarket.18
		trigger = {
			religion = hashut
		}
		scaled_wealth = {
			value = -2.5
			min = -250
			max = -500
		}
		custom_tooltip = {
			text = EVTTOOLTIPAmarket.18
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = lamassu_mount
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# Taurus
	option = {
		name = EVTOPTBmarket.18
		trigger = {
			religion = hashut
		}
		scaled_wealth = {
			value = -2.5
			min = -450
			max = -750
		}
		custom_tooltip = {
			text = EVTTOOLTIPBmarket.18
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = great_taurus_mount
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# Amazon tiger
	option = {
		name = EVTOPTCmarket.18
		trigger = {
			OR = {
				trait = creature_amazon
				religion = draconite
				can_buy_southlands_items_trigger = yes
			}
		}
		wealth = -150
		custom_tooltip = {
			text = EVTTOOLTIPCmarket.18
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = amazon_tiger
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# Arabyan Flying Carpet
	option = {
		name = EVTOPTDmarket.18
		trigger = {
			culture_group = arabyan_group
		}
		wealth = -200
		custom_tooltip = {
			text = EVTTOOLTIPDmarket.18
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = arabyan_carpet
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# Wyvern
	option = {
		name = EVTOPTEmarket.18
		trigger = {
			culture_group = orc_group
		}
		scaled_wealth = {
			value = -2.5
			min = -450
			max = -750
		}
		custom_tooltip = {
			text = EVTTOOLTIPEmarket.18
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = wyvern_mount
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# Kislev bear
	option = {
		name = EVTOPTFmarket.18
		trigger = {
			can_buy_kislev_items_trigger = yes
		}
		if = {
			limit = {
				kislevite_discount_trigger = yes
			}
			scaled_wealth = {
				value = -2.0
				min = -250
				max = -750
			}
		}
		else = {
			scaled_wealth = {
				value = -2.5
				min = -450
				max = -750
			}
		}
		custom_tooltip = {
			text = EVTTOOLTIPFmarket.18
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = war_bear_mount
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	#Pegasus Mount
	option = {
		name = EVTOPTGmarket.18
		trigger = {
			can_buy_pegasus_items_trigger = yes
		}
		scaled_wealth = {
			value = -2.5
			min = -450
			max = -750
		}
		custom_tooltip = {
			text = EVTTOOLTIPGmarket.18
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = pegasus_mount
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	#Imperial Gryphon
	option = {
		name = EVTOPTGmarket.18
		trigger = {
			can_buy_griffon_items_trigger = yes
		}
		scaled_wealth = {
			value = -2.5
			min = -450
			max = -750
		}
		custom_tooltip = {
			text = EVTTOOLTIPGmarket.18
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = gryphon_mount
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# NEXT or loop back to pg1
	option = {
		name = EVTOPTNEXT
		hidden_tooltip = {
			#check for pg2
			if = {
				limit = {
					OR = {
						can_buy_asrai_items_trigger = yes
						can_buy_asur_items_trigger = yes
						can_buy_griffon_items_trigger = yes
					}
					OR={
						trait=creature_human
						trait=creature_elf
					}
				}
				character_event = { id = market.19 }
			}
			#back to Main
			else = {
				character_event = { id = market.0 }
			}
		}
	}
}
# Exotic pg2
character_event = {
	id = market.19
	title = EVTTITLEmarket.18
	desc = EVTDESCmarket.18
	picture = GFX_evt_market

	is_triggered_only = yes

	#Asrai Stag
	option = {
		name = EVTOPTAmarket.19
		trigger = {
			can_buy_asrai_items_trigger = yes
			OR={
				trait=creature_elf
				any_friend={
					trait=creature_elf
					religion=asrai_cadai
				}
			}
		}
		if = {
			limit = {
				loren_discount_trigger = yes
			}
			scaled_wealth = {
				value = -3.0
				min = -250
				max = -750
			}
		}
		else = {
			scaled_wealth = {
				value = -3.5
				min = -450
				max = -750
			}
		}
		custom_tooltip = {
			text = EVTTOOLTIPAmarket.19
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = asrai_stag
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	#Asur Phoenix
	option = {
		name = EVTOPTBmarket.19
		trigger = {
			can_buy_asur_items_trigger = yes
			trait=creature_elf
		}
		scaled_wealth = {
			value = -3.5
			min = -450
			max = -750
		}
		custom_tooltip = {
			text = EVTTOOLTIPBmarket.19
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		random_list = {
			55 = {
				add_artifact = asur_artifact_flamespyre_phoenix_mount
			}
			45 = {
				add_artifact = asur_artifact_frostheart_phoenix_mount
			}
		}
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	#Asur/Asrai great eagle
	option = {
		name = EVTOPTCmarket.19
		trigger = {
			OR = {
				can_buy_asur_items_trigger = yes
				can_buy_asrai_items_trigger = yes
				can_buy_griffon_items_trigger = yes
			}
			OR={
				trait=creature_elf
				any_friend={
					trait=creature_elf
					religion=asrai_cadai
				}
			}
		}
		if = {
			limit = {
				loren_discount_trigger = yes
			}
			scaled_wealth = {
				value = -3.0
				min = -250
				max = -750
			}
		}
		else = {
			scaled_wealth = {
				value = -3.5
				min = -450
				max = -750
			}
		}
		custom_tooltip = {
			text = EVTTOOLTIPCmarket.19
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = asur_artifact_great_eagle_mount
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	#Asur/Asrai Wyvern
	option = {
		name = EVTOPTEmarket.18
		trigger = {
			OR = {
				can_buy_asur_items_trigger = yes
				can_buy_asrai_items_trigger = yes
			}
			OR={
				trait=creature_elf
				any_friend={
					trait=creature_elf
				}
			}
		}
		if = {
			limit = {
				loren_discount_trigger = yes
			}
			scaled_wealth = {
				value = -3.0
				min = -250
				max = -750
			}
		}
		else = {
			scaled_wealth = {
				value = -3.5
				min = -450
				max = -750
			}
		}
		custom_tooltip = {
			text = EVTTOOLTIPEmarket.18
			clr_character_flag = visiting_mount_market
		}
		set_character_flag = has_mount
		add_artifact = wyvern_mount
		new_artifact = { save_event_target_as = mount_bought_item }
	}
	# BACK
	option = {
		name = EVTOPTBACK
		hidden_tooltip = {
			character_event = { id = market.0 }
		}
	}
}

#######################
# DECISION RELATED
#######################

# Cathayan horse decision governor ping
character_event = {
    id = market.20
    hide_window = yes

    is_triggered_only = yes

	immediate = {
		FROMFROM = {
			letter_event = {
				id = market.21
				days = 1
			}
		}
	}

	option = {
		name = OK
	}
}
# Give cathayan horse
letter_event = {
    id = market.21
    desc = EVTDESCmarket.21
    border = GFX_event_letter_frame_diplomacy

    is_triggered_only = yes

    option = {
        name = EVTOPTAmarket.21
		random_list = {
			65 = {
				add_artifact = cathayan_ceromonial_horse
			}
			34 = {
				add_artifact = cathayan_war_horse
			}
			1 = {
				trigger = {
					NOR = {
						has_global_flag = red_hare_alive
						offmap_cathay = {
							OR = {
								has_status = china_famine
								has_status = china_plague
							}
						}
					}
				}
				modifier = {
					factor = 5
					offmap_cathay = {
						has_status = china_golden_age
					}
				}
				add_artifact = red_hare
				set_global_flag = red_hare_alive
			}
		}
		set_character_flag = has_mount
		if = {
			limit = {
				offmap_cathay = {
					OR = {
						has_status = china_famine
						has_status = china_plague
					}
				}
			}
			custom_tooltip = {
				text = EVTTOOLTIPAmarket.21
				new_artifact = { decrease_mount_health_effect = yes }
			}
		}
    }
}
# Grant commander mount checks
character_event = {
	id = market.22
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		if = {
			limit = { has_character_flag = grant_commander_mount_no_mounts }
			character_event = { id = market.23 }
		}
		else = {
			character_event = { id = market.24 }
		}
	}
}
# No mounts available for commander
character_event = {
	id = market.23
	desc = EVTDESAmountshop.106
	picture = GFX_evt_emissary_byzantine

	is_triggered_only = yes

	option = {
		name = EVTOPTAmountshop.106
		hidden_tooltip = {
			clr_character_flag = grant_commander_mount_no_mounts
			clr_character_flag = grant_commander_mount_block
		}
	}
}
# Give unlanded commander mount
character_event = {
	id = market.24
	desc = EVTDESAmountshop.107
	picture = GFX_evt_emissary_byzantine

	is_triggered_only = yes

	#courser
	option = {
		name = EVTOPTAmountshop.107
		wealth = -150
		FROMFROM = {
			if = {
				limit = { can_use_horse_archery_trigger = yes }
				add_artifact = mount_bow
			}
			else = { add_artifact = mount_lance }
			hidden_tooltip = { new_artifact = { set_artifact_flag = commander_addon } }
			set_character_flag = has_mount
			add_artifact = courser
			hidden_tooltip = {
				new_artifact = {
					set_artifact_flag = commander_mount
					decrease_mount_health_effect = yes
				}
				check_fair_mount_modifiers_effect = yes
				set_character_flag = has_mount_commander
			}
			opinion = { modifier = opinion_loyal_servant who = ROOT }
		}
		ai_chance = {
			factor = 25
			modifier = {
				factor = 1.5
				FROMFROM = { can_use_horse_archery_trigger = yes }
			}
			modifier = {
				factor = 3
				FROMFROM = { is_skilled_horse_archer_trigger = yes}
			}
		}
	}

	#destrier
	option = {
		name = EVTOPTBmountshop.107
		wealth = -150
		FROMFROM = {
			add_artifact = mount_lance
			hidden_tooltip = { new_artifact = { set_artifact_flag = commander_addon } }

			add_artifact = destrier
			set_character_flag = has_mount
			hidden_tooltip = {
				new_artifact = {
					set_artifact_flag = commander_mount
					decrease_mount_health_effect = yes
				}
				check_fair_mount_modifiers_effect = yes
				set_character_flag = has_mount_commander
			}
			opinion = { modifier = opinion_loyal_servant who = ROOT }
		}
		ai_chance = { factor = 25 }
	}

	#charger
	option = {
		name = EVTOPTCmountshop.107
		wealth = -200
		FROMFROM = {
			add_artifact = mount_lance
			hidden_tooltip = { new_artifact = { set_artifact_flag = commander_addon } }

			add_artifact = charger
			set_character_flag = has_mount
			hidden_tooltip = {
				new_artifact = {
					set_artifact_flag = commander_mount
					decrease_mount_health_effect = yes
				}
				check_fair_mount_modifiers_effect = yes
				set_character_flag = has_mount_commander
			}
			opinion = { modifier = opinion_loyal_servant who = ROOT }
		}
		ai_chance = {
			factor = 25
			modifier = {
				factor = 1.5
				FROMFROM = { dynasty = ROOT }
			}
		}
	}

	#nvm
	option = {
		name = EVTOPTDmountshop.107
		ai_chance = { factor = 0 }
	}

	after = { clr_character_flag = grant_commander_mount_block }
}

###############Character flavor###############

# mounts gets hit by arrow in combat
character_event = {
	id = market.25
	desc = EVTDESAmountshop.211
	picture = GFX_evt_horsemanship

	is_triggered_only = yes

	only_playable = yes
	has_character_flag = has_mount
	min_age = 16

	trigger = {
		any_artifact = {
			has_artifact_flag = mount
			has_artifact_flag = alive
			NOR = {
				has_artifact_flag = mount_health_10
				has_artifact_flag = mount_health_9
				has_artifact_flag = mount_health_8
				has_artifact_flag = mount_health_7
			}
			NOT = { has_artifact_flag = immortal }
			is_artifact_equipped = yes
		}
	}

	weight_multiplier = {
		days = 1

		modifier = {
			factor = 1.25
			trait = aggressive_leader
		}
		modifier = {
			factor = 1.25
			trait = arbitrary
		}
		modifier = {
			factor = 2
			trait = one_eyed
		}
	}

	immediate = { get_current_mount_effect = yes }

	option = {
		name = EVTOPTAmountshop.211
		event_target:current_mount = { decrease_mount_health_effect = yes }
	}
}
# Province Flavor for mount system
province_event = {
	id = market.26
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_province_flag = mount_province
		NOT = { has_province_modifier = province_flavor_timer }
		holder_scope = {
			is_adult = yes
			war = no
		}
	}

	weight_multiplier = {
		months = 60
		modifier = {
			factor = 1.1
			has_province_flag = crown_focus_province
		}
		modifier = {
			factor = 1.1
			holder_scope = { has_ambition = obj_see_the_realm_prosper }
		}
		modifier = {
			factor = 1.1
			holder_scope = { has_education_stewardship_trigger = yes }
		}
		modifier = {
			factor = 1.1
			holder_scope = {
				OR = {
					has_focus = focus_business
					has_focus = focus_rulership
				}
			}
		}
		modifier = {
			factor = 1.1
			holder_scope = { stewardship = 12 }
		}
		modifier = {
			factor = 1.1
			holder_scope = { stewardship = 16 }
		}
		modifier = {
			factor = 1.1
			holder_scope = { stewardship = 18 }
		}
		modifier = {
			factor = 1.2
			holder_scope = { has_lifestyle_stewardship_trigger = yes }
		}
	}

	immediate = {
		add_province_modifier = {
			modifier = province_flavor_timer
			years = 8
			hidden = yes
		}
		random_list = {
			#fallback
			1 = { remove_province_modifier = province_flavor_timer }
			###business brings prosperity
			50 = {
				if = {
					limit = {
						has_trade_post = no
						holder_scope = {
							OR = {
								stewardship >= 14
								has_focus = focus_business
								has_focus = focus_rulership
							}
						}
					}
					province_event = { id = market.27 }
				}
			}
			###trade post brings prosperity
			100 = {
				if = {
					limit = {
						NOT = { has_province_modifier = mount_increased_trade }
						has_trade_post = yes
						holder_scope = {
							OR = {
								stewardship >= 8
								is_patrician = yes
							}
						}
					}
					province_event = { id = market.28 }
				}
			}
			###craftsmen looking for sponser
			50 = {
				if = {
					limit = {
						NOT = { has_province_modifier = mount_craftsmen }
					}
					province_event = { id = market.29 }
				}
			}
			###hospital improves general sanitation, less mounts die
			100 = {
				if = {
					limit = {
						NOT = { has_province_modifier = mount_doctors }
						has_hospital = yes
					}
					province_event = { id = market.30 }
				}
			}
			###lend land for grazing
			50 = {
				if = {
					limit = {
						NOT = { has_province_modifier = mount_lend_grazing_land }
					}
					province_event = { id = market.31 }
				}
			}
			###organize horse races
			50 = {
				if = {
					limit = {
						NOT = { has_province_modifier = mount_horse_races }
					}
					province_event = { id = market.32 }
				}
			}
		}
	}
}
# business brings prosperity
province_event = {
	id = market.27
	desc = EVTDESAmountshop.301
	picture = GFX_evt_market

	is_triggered_only = yes

	option = {
		name = EVTOPTAmountshop.301
		if = {
			limit = { has_dlc = "Reapers" }
			holder_scope = { show_scope_change = no scaled_wealth = 0.2 }
		}
		else = { holder_scope = { show_scope_change = no scaled_wealth = 0.4 } }
		mount_increase_prosperity_effect = yes
	}
}
# trade post brings prosperity
province_event = {
	id = market.28
	desc = EVTDESAmountshop.302
	picture = GFX_evt_trade_post_republic

	is_triggered_only = yes

	option = {
		name = EVTOPTAmountshop.302
		if = {
			limit = { has_dlc = "Reapers" }
			holder_scope = { show_scope_change = no scaled_wealth = 0.2 }
		}
		else = { holder_scope = { show_scope_change = no scaled_wealth = 0.4 } }
		add_province_modifier = { modifier = mount_increased_trade years = 10 }
		mount_increase_prosperity_effect = yes
	}
}
# craftsmen looking for sponser
province_event = {
	id = market.29
	desc = EVTDESAmountshop.303
	picture = GFX_evt_construction_site

	is_triggered_only = yes

	option = {
		name = EVTOPTAmountshop.303
		holder_scope = { scaled_wealth = { value = -0.4 min = -30 max = -500 } }
		add_province_modifier = { modifier = mount_craftsmen years = 5 }
		ai_chance = {
			factor = 75
		}
	}

	option = {
		name = EVTOPTBmountshop.303
		ai_chance = {
			factor = 25
			modifier = {
				factor = 2
				holder_scope = { trait = greedy }
			}
			modifier = {
				factor = 3
				holder_scope = { wealth < 50 }
			}
		}
	}
}
# hospital improves general sanitation, less mounts die
province_event = {
	id = market.30
	desc = EVTDESAmountshop.304
	picture = GFX_evt_court_physician

	is_triggered_only = yes

	option = {
		name = EVTOPTAmountshop.304
		add_province_modifier = { modifier = mount_doctors years = 7 }
		holder_scope = { prestige = 50 }
	}
}
# lend land for grazing
province_event = {
	id = market.31
	desc = EVTDESAmountshop.305
	picture = GFX_evt_merchant_caravan

	is_triggered_only = yes

	#yes
	option = {
		name = EVTOPTAmountshop.305
		holder_scope = {
			random_list = {
				25 = { scaled_wealth = 0.2 }
				25 = { scaled_wealth = 0.3 }
				25 = { scaled_wealth = 0.4 }
				25 = { scaled_wealth = 0.5 }
			}
		}
		add_province_modifier = { modifier = mount_lend_grazing_land years = 10 }
		mount_slightly_increase_prosperity_effect = yes
		ai_chance = {
			factor = 75
			modifier = {
				factor = 2
				holder_scope = { trait = charitable }
			}
			modifier = {
				factor = 2
				holder_scope = { trait = kind }
			}
		}
	}

	#no
	option = {
		name = EVTOPTBmountshop.305
		ai_chance = {
			factor = 25
			modifier = {
				factor = 2
				holder_scope = { trait = greedy }
			}
			modifier = {
				factor = 2
				holder_scope = { monthly_income < 5 }
			}
		}
	}
}
# organize horse races
province_event = {
	id = market.32
	desc = EVTDESAmountshop.307
	picture = GFX_evt_hippodrome_byzantine

	is_triggered_only = yes

	#yes
	option = {
		name = EVTOPTAmountshop.307
		holder_scope = {
			scaled_wealth = { value = -1.5 min = -100 max = -750 }
		}
		add_province_modifier = { modifier = mount_horse_races years = 10 }
		mount_increase_prosperity_effect = yes
		ai_chance = {
			factor = 75
		}
	}

	#no
	option = {
		name = EVTOPTBmountshop.307
		ai_chance = {
			factor = 25
			modifier = {
				factor = 3
				holder_scope = { trait = dull }
			}
			modifier = {
				factor = 3
				holder_scope = { trait = greedy }
			}
			modifier = {
				factor = 3
				holder_scope = { trait = slothful }
			}
			modifier = {
				factor = 2
				holder_scope = { wealth < 50 }
			}
			modifier = {
				factor = 3
				holder_scope = { tier = count }
			}
		}
	}
}

##############Character Flavor Tombola Events################
character_event = {
	id = market.33

	is_triggered_only = yes
	hide_window = yes

	only_playable = yes
	only_capable = yes
	has_character_flag = has_mount

	trigger = {
		NOT = { has_character_modifier = character_flavor_timer }
		is_inaccessible_trigger = no
	}

	weight_multiplier = {
		days = 1

		#more likely to spend time on other stuff
		modifier = {
			factor = 2
			OR = {
				trait = stressed
				trait = depressed
			}
		}
		#nothing else to do
		modifier = {
			factor = 2
			trait = content
		}
		#relevant lifestyles
		modifier = {
			factor = 3
			OR = {
				trait = administrator
				trait = gamer
				trait = gardener
				trait = hunter
				trait = falconer
			}
		}
		#cares more about possessions/animals
		modifier = {
			factor = 1.5
			OR = {
				trait = diligent
				trait = kind
			}
		}
		#wants to show off
		modifier = {
			factor = 1.5
			trait = proud
		}
	}

	immediate = {
		add_character_modifier = { modifier = character_flavor_timer years = 4 hidden = yes }
		check_mount_flags_effect = yes

		if = {
			limit = { NOT = { has_character_flag = has_mount } }
			break = yes
		}

		random_list = {
			###nomad's horse becomes swift from running too much
			100 = {
				if = {
					limit = {
						is_nomadic = yes
						any_artifact = {
							is_mount_trigger = yes
							is_healthy_mount_trigger = yes
							can_have_more_mount_traits_trigger = yes
							has_artifact_flag = horse
							NOT = { has_artifact_flag = swift }
						}
					}
					character_event = { id = market.34 }
				}
			}
			###go on a ride
			100 = {
				if = {
					limit = {
						any_artifact = {
							is_mount_trigger = yes
							NOT = { has_artifact_flag = elephant }
						}
					}
					character_event = { id = market.35 }
				}
			}
			###stablemaster gives mount trait
			75 = {
				if = {
					limit = {
						has_stable_master_trigger = yes
						any_artifact = {
							is_mount_trigger = yes
							is_healthy_mount_trigger = yes
							can_have_more_mount_traits_trigger = yes
						}
					}
					random_list = {
						#random trait
						75 = {
							character_event = { id = market.36 }
						}
						#selected trait+health
						25 = {
							modifier = {
								factor = 0.9
								has_weak_stable_master_trigger = yes
							}
							modifier = {
								factor = 1.25
								has_normal_stable_master_trigger = yes
							}
							modifier = {
								factor = 1.5
								has_great_stable_master_trigger = yes
							}
							character_event = {
								id = market.37
							}
						}
					}
				}
			}
			###stablemaster gets into arguement
			100 = {
				if = {
					limit = {
						has_stable_master_trigger = yes
					}
					character_event = { id = market.38 }
				}
			}
			###stablemaster improves all mounts' health
			50 = {
				modifier = {
					factor = 0.9
					has_weak_stable_master_trigger = yes
				}
				modifier = {
					factor = 1.25
					has_normal_stable_master_trigger = yes
				}
				modifier = {
					factor = 1.5
					has_great_stable_master_trigger = yes
				}
				if = {
					limit = {
						has_stable_master_trigger = yes
					}
					character_event = { id = market.39 }
				}
			}
			###stables on fire
			50 = {
				modifier = {
					factor = 0.9
					has_weak_stable_master_trigger = yes
				}
				modifier = {
					factor = 0.8
					has_normal_stable_master_trigger = yes
				}
				modifier = {
					factor = 0.7
					has_great_stable_master_trigger = yes
				}
				modifier = {
					factor = 0.9
					capital_holding = {
						OR = {
							has_building = ca_stable_3
							has_building = ca_stable_4
							has_building = ca_steppe_stable_3
							has_building = ca_steppe_stable_4
							has_building = ca_desert_stable_3
							has_building = ca_desert_stable_4
						}
					}
				}
				modifier = {
					factor = 0.8
					capital_holding = {
						OR = {
							has_building = ca_stable_5
							has_building = ca_stable_6
							has_building = ca_steppe_stable_5
							has_building = ca_steppe_stable_6
							has_building = ca_desert_stable_5
							has_building = ca_desert_stable_6
						}
					}
				}
				if = {
					limit = {
						has_stable_master_trigger = yes
					}
					character_event = { id = market.40 }
				}
			}
		}
	}
}
###nomad's horse becomes swift from running too much
character_event = {
	id = market.34
	desc = EVTDESAmountshop.403
	picture = GFX_evt_mongols

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				any_artifact = {
					is_mount_trigger = yes
					is_healthy_mount_trigger = yes
					can_have_more_mount_traits_trigger = yes
					has_artifact_flag = horse
					NOT = { has_artifact_flag = swift }
					is_artifact_equipped = yes
				}
			}
			random_artifact = {
				limit = {
					is_mount_trigger = yes
					is_healthy_mount_trigger = yes
					can_have_more_mount_traits_trigger = yes
					has_artifact_flag = horse
					NOT = { has_artifact_flag = swift }
					is_artifact_equipped = yes
				}
				save_event_target_as = improved_horse
			}
		}
		else = {
			random_artifact = {
				limit = {
					is_mount_trigger = yes
					is_healthy_mount_trigger = yes
					has_artifact_flag = horse
					NOT = { has_artifact_flag = swift }
				}
				save_event_target_as = improved_horse
			}
		}
	}

	option = {
		name = EVTOPTAmountshop.403
		event_target:improved_horse = {
			custom_tooltip = {
				text = EVTTOOLTIPAmountshop.403
				set_artifact_flag = swift
			}
		}
	}
}
###go on a ride
character_event = {
	id = market.35
	desc = EVTDESAmountshop.404
	picture = GFX_evt_hunt

	is_triggered_only = yes

	immediate = {
		random_artifact = {
			limit = {
				is_mount_trigger = yes
				NOT = { has_artifact_flag = elephant }
			}
			save_event_target_as = random_mount
		}
	}

	#ride around demesne
	option = {
		name = EVTOPTAmountshop.404
		if = {
			limit = { trait = stressed }
			remove_trait = stressed
		}
		random_list = {
			65 = { prestige = 50 }
			20 = {
				trigger = { NOT = { trait = proud } }
				add_trait = proud
			}
			10 = {
				trigger = { NOT = { trait = gregarious } }
				add_trait = gregarious
			}
			5 = {
				trigger = {
					NOR = {
						trait = wounded
						trait = severely_injured
					}
				}
				add_trait_wounded_effect = yes
			}
		}
		ai_chance = {
			factor = 40
			modifier = {
				factor = 2
				has_education_diplomacy_trigger = yes
			}
			modifier = {
				factor = 2
				has_lifestyle_diplomacy_trigger = yes
			}
		}
	}

	#go hunting
	option = {
		name = EVTOPTBmountshop.404
		if = {
			limit = { trait = depressed }
			remove_trait = depressed
		}
		random_list = {
			50 = {
				if = {
					limit = { society_member_of = hermetics }
					hermetic_add_animal_ingredient_effect = yes
				}
				else = { scaled_wealth = { value = 0.15 max = 100 } }
			}
			20 = {
				trigger = { has_any_lifestyle_trait = no }
				add_trait = hunter
			}
			10 = {
				trigger = { NOT = { trait = diligent } }
				add_trait = diligent
			}
			20 = {
				trigger = {
					NOR = {
						trait = wounded
						trait = severely_injured
					}
				}
				add_trait_wounded_effect = yes
			}
		}
		ai_chance = {
			factor = 40
			modifier = {
				factor = 2
				has_education_martial_trigger = yes
			}
			modifier = {
				factor = 2
				OR = {
					trait = wroth
					trait = proud
				}
			}
		}
	}

	#no
	option = {
		name = EVTOPTCmountshop.404
		if = {
			limit = { NOT = { trait = arbitrary } }
			random = {
				chance = 15
				add_trait = arbitrary
			}
		}
		else = { prestige = -25 }
		ai_chance = {
			factor = 20
			modifier = {
				factor = 3
				trait = dull
			}
			modifier = {
				factor = 3
				trait = slothful
			}
			modifier = {
				factor = 3
				trait = stubborn
			}
		}
	}
}
###stablemaster gives mount trait
character_event = {
	id = market.36
	desc = EVTDESAcsm.402
	picture = GFX_evt_horse_friend

	is_triggered_only = yes

	immediate = { get_stable_master_effect = yes }

	option = {
		name = EVTOPTAcsm.402
		random_artifact = {
			limit = {
				is_mount_trigger = yes
				is_healthy_mount_trigger = yes
				can_have_more_mount_traits_trigger = yes
			}
			custom_tooltip = {
				text = EVTTOOLTIPAcsm.402
				random_list = {
					20 = {
						trigger = { NOT = { has_artifact_flag = fair } }
						set_artifact_flag = fair
						add_mount_trait_limit_effect = yes
						ROOT = { check_fair_mount_modifiers_effect = yes }
					}
					20 = {
						trigger = { NOT = { has_artifact_flag = robust } }
						set_artifact_flag = robust
						add_mount_trait_limit_effect = yes
					}
					20 = {
						trigger = { NOT = { has_artifact_flag = powerful } }
						set_artifact_flag = powerful
						add_mount_trait_limit_effect = yes
					}
					20 = {
						trigger = { NOT = { has_artifact_flag = swift } }
						set_artifact_flag = swift
						add_mount_trait_limit_effect = yes
					}
				}
			}
		}
	}
}
###stablemaster improves health+trait
character_event = {
	id = market.37
	desc = EVTDESAcsm.409
	picture = GFX_evt_courier

	is_triggered_only = yes

	immediate = {
		get_stable_master_effect = yes
		if = {
			limit = {
				any_artifact = {
					is_mount_trigger = yes
					is_healthy_mount_trigger = yes
					can_have_more_mount_traits_trigger = yes
					is_artifact_equipped = yes
				}
			}
			random_artifact = {
				limit = {
					is_mount_trigger = yes
					is_healthy_mount_trigger = yes
					can_have_more_mount_traits_trigger = yes
					is_artifact_equipped = yes
				}
				save_event_target_as = improved_mount
			}
		}
		else = {
			random_artifact = {
				limit = {
					is_mount_trigger = yes
					is_healthy_mount_trigger = yes
					can_have_more_mount_traits_trigger = yes
				}
				save_event_target_as = improved_mount
			}
		}
	}

	#fair
	option = {
		trigger = { event_target:improved_mount = { NOT = { has_artifact_flag = fair } } }
		name = EVTOPTAcsm.409
		event_target:improved_mount = {
			show_scope_change = no
			increase_mount_health_effect = yes
			custom_tooltip = {
				text = EVTTOOLTIPAcsm.409
				set_artifact_flag = fair
				add_mount_trait_limit_effect = yes
			}
		}
		opinion = { modifier = opinion_grateful who = event_target:stable_master years = 5 }
		ai_chance = { factor = 25 }
	}

	#robust
	option = {
		trigger = { event_target:improved_mount = { NOT = { has_artifact_flag = robust } } }
		name = EVTOPTBcsm.409
		event_target:improved_mount = {
			show_scope_change = no
			increase_mount_health_effect = yes
			custom_tooltip = {
				text = EVTTOOLTIPBcsm.409
				set_artifact_flag = robust
				add_mount_trait_limit_effect = yes
			}
		}
		opinion = { modifier = opinion_grateful who = event_target:stable_master years = 5 }
		ai_chance = { factor = 25 }
	}

	#powerful
	option = {
		trigger = { event_target:improved_mount = { NOT = { has_artifact_flag = powerful } } }
		name = EVTOPTCcsm.409
		event_target:improved_mount = {
			show_scope_change = no
			increase_mount_health_effect = yes
			custom_tooltip = {
				text = EVTTOOLTIPCcsm.409
				set_artifact_flag = powerful
				add_mount_trait_limit_effect = yes
			}
		}
		opinion = { modifier = opinion_grateful who = event_target:stable_master years = 5 }
		ai_chance = { factor = 25 }
	}

	#swift
	option = {
		trigger = { event_target:improved_mount = { NOT = { has_artifact_flag = swift } } }
		name = EVTOPTDcsm.409
		event_target:improved_mount = {
			show_scope_change = no
			increase_mount_health_effect = yes
			custom_tooltip = {
				text = EVTTOOLTIPDcsm.409
				set_artifact_flag = swift
				add_mount_trait_limit_effect = yes
			}
		}
		opinion = { modifier = opinion_grateful who = event_target:stable_master years = 5 }
		ai_chance = { factor = 25 }
	}
}
###stablemaster gets into arguement
character_event = {
	id = market.38
	desc = EVTDESAcsm.406
	picture = GFX_evt_son_asking_father

	is_triggered_only = yes

	immediate = {
		get_stable_master_effect = yes
		random_courtier = {
			limit = {
				is_adult = yes
				prisoner = no
				NOR = {
					character = ROOT
					character = event_target:stable_master
				}
			}
			save_event_target_as = stable_master_arguement_courtier
		}
	}

	#break em up
	option = {
		name = EVTOPTAcsm.406
		trigger_switch = {
			on_trigger = tier

			emperor = { piety = 75 }
			king = { piety = 50 }
			duke = { piety = 25 }
			count = { piety = 10 }
		}
		if = {
			limit = { NOT = { trait = humble } }
			random = {
				chance = 25
				add_trait = humble
			}
		}
		reverse_opinion = { modifier = opinion_grateful who = event_target:stable_master years = 5 }
		reverse_opinion = { modifier = opinion_grateful who = event_target:stable_master_arguement_courtier years = 5 }
		ai_chance = {
			factor = 40
			modifier = {
				factor = 2
				has_education_diplomacy_trigger = yes
			}
			modifier = {
				factor = 2
				has_lifestyle_diplomacy_trigger = yes
			}
			modifier = {
				factor = 2
				OR = {
					trait = charitable
					trait = kind
				}
			}
		}
	}

	#use authority
	option = {
		name = EVTOPTBcsm.406
		trigger_switch = {
			on_trigger = tier

			emperor = { prestige = 100 }
			king = { prestige = 75 }
			duke = { prestige = 50 }
			count = { prestige = 25 }
		}
		if = {
			limit = { NOT = { trait = proud } }
			random = {
				chance = 25
				add_trait = proud
			}
		}
		reverse_opinion = { modifier = strengthened_loyalty who = event_target:stable_master years = 5 }
		reverse_opinion = { modifier = strengthened_loyalty who = event_target:stable_master_arguement_courtier years = 5 }
		ai_chance = {
			factor = 40
			modifier = {
				factor = 2
				has_education_martial_trigger = yes
			}
			modifier = {
				factor = 2
				trait = wroth
			}
			modifier = {
				factor = 2
				trait = cruel
			}
		}
	}


	#dont care
	option = {
		name = EVTOPTCcsm.406
		event_target:stable_master = { show_scope_change = no add_rival = event_target:stable_master_arguement_courtier }
		ai_chance = {
			factor = 20
			modifier = {
				factor = 3
				trait = envious
			}
			modifier = {
				factor = 3
				trait = proud
			}
			modifier = {
				factor = 3
				trait = slothful
			}
			modifier = {
				factor = 3
				trait = stubborn
			}
		}
	}
}
###stablemaster improves all mounts' health
character_event = {
	id = market.39
	desc = EVTDESAcsm.405
	picture = GFX_evt_stone_church

	is_triggered_only = yes

	immediate = { get_stable_master_effect = yes }

	option = {
		name = EVTOPTAcsm.405
		any_artifact = {
			limit = {
				is_mount_trigger = yes
				NOT = { has_artifact_flag = immortal }
			}
			increase_mount_health_effect = yes
		}
		event_target:stable_master = {
			transfer_scaled_wealth = { from = ROOT value = 0.2 max = 100 }
			opinion = { modifier = opinion_grateful who = ROOT years = 5 }
		}
	}
}
###stables on fire
character_event = {
	id = market.40
	desc = EVTDESAcsm.408
	picture = GFX_evt_burning_house

	is_triggered_only = yes

	immediate = {
		get_random_mount_no_immortal_effect = yes
		get_random_mount_no_immortal_2_effect = yes
	}

	option = {
		name = EVTOPTAcsm.408
		event_target:random_mount = { decrease_mount_health_effect = yes }
		event_target:random_mount_2 = { decrease_mount_health_effect = yes }
	}
}

###dead stable master notification
character_event = {
	id = market.41
	desc = EVTDESAcsmm.009
	picture = GFX_evt_died_old_age

	notification = yes

	is_triggered_only = yes

	option = { name = EVTOPTAcsmm.009 }
}
