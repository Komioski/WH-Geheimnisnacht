####ID Ranges####
#General 0-199
#AI-only 200-399
#
namespace = mountmaint

##initialization
character_event = {
	id = mountmaint.0

	hide_window = yes
	is_triggered_only = yes

	ai = no

	trigger = {
		is_save_game = no
		ai = no
	}

	immediate = {
		character_event = { id = mountmaint.3 days = 5 }
	}
}
##vanilla initialization
character_event = {
	id = mountmaint.3

	is_triggered_only = yes
	hide_window = yes

	immediate = {

		#Albion, Great Ogham
		2409 = {
			save_global_event_target_as = albion_mount_province
			add_province_modifier = { modifier = albion_mount_counter duration = -1 }
			set_province_flag = mount_province
		}

		#Bretonnia, Quenelles
		884 = {
			save_global_event_target_as = bretonnia_mounts
			add_province_modifier = { modifier = breton_mount_counter duration = -1 }
			set_province_flag = mount_province
		}

		#Empire, Gruenwald
		959 = {
			save_global_event_target_as = imperial_mounts
			add_province_modifier = { modifier = imperial_mount_counter duration = -1 }
			set_province_flag = mount_province
		}

		#Tilea, Trantio
		591 = {
			save_global_event_target_as = tilea_mounts
			add_province_modifier = { modifier = tilea_mount_counter duration = -1 }
			set_province_flag = mount_province
		}


		#Estalia, Almagora
		557 = {
			save_global_event_target_as = estalian_mounts
			if = {
				limit = {
					year = 769
					NOT = { year = 1066 }
				}
			}
			add_province_modifier = { modifier = estalia_mount_counter duration = -1 }
			set_province_flag = mount_province
		}

		#Tor Elyr, Ulthuan
		1553 = {
			save_global_event_target_as = ellyrian_mounts
			add_province_modifier = { modifier = ellyrian_mount_counter duration = -1 }
			set_province_flag = mount_province
		}

		#Steppes, Khamchata
		1221 = {
			save_global_event_target_as = steppes_mount_province
			add_province_modifier = { modifier = steppes_mount_counter duration = -1 }
			set_province_flag = mount_province
		}

		#Araby, El Kalabad
		1019 = {
			save_global_event_target_as = araby1_mounts
			add_province_modifier = { modifier = araby_mount_counter duration = -1 }
			set_province_flag = mount_province
		}

		#Araby, Al Haikk
		1038 = {
			save_global_event_target_as = araby2_mounts
			add_province_modifier = { modifier = cophic_mount_counter duration = -1 }
			set_province_flag = mount_province
		}

		#Ind, Pigbarter
		1274 = {
			save_global_event_target_as = pigbarter_ind_mounts
			add_province_modifier = { modifier = ind_mount_counter duration = -1 }
			set_province_flag = mount_province
		}

		#Southlands, Olohrad
		1061 = {
			save_global_event_target_as = southlands_mounts
			add_province_modifier = { modifier = southlands_mount_counter duration = -1 }
			set_province_flag = mount_province
		}


		#Kislev, Bolgasgrad
		180 = {
			save_global_event_target_as = kislev_mounts
			add_province_modifier = { modifier = kislev_mount_counter duration = -1 }
			set_province_flag = mount_province
		}

		#Athel Loren, Equos
		2318 = {
			save_global_event_target_as = asrai_mounts
			add_province_modifier = { modifier = loren_mount_counter duration = -1 }
			set_province_flag = mount_province
		}
		set_global_flag = mount_initialized
	}
}
###mount master maintenance event
character_event = {
	id = mountmaint.10

	is_triggered_only = yes
	hide_window = yes

	has_global_flag = mount_initialized
	only_playable = yes
	has_character_flag = has_mount

	immediate = {
		check_mount_flags_effect = yes
		if = {
			limit = { NOT = { has_character_flag = has_mount } }
			break = yes
		}

		#health decrease
		any_artifact = {
			limit = {
				has_artifact_flag = mount
				has_artifact_flag = alive
				NOR = {
					has_artifact_flag = immortal
					artifact_type = foal
				}
			}
			random_list = {
				#no change
				#decrease health
				60 = {
					modifier = {
						factor = 0.8
						has_artifact_flag = robust
					}
					modifier = {
						factor = 0.7
						has_artifact_flag = unique
					}
					decrease_mount_health_effect = yes
				}
			}
		}

		#age foals
		any_artifact = {
			limit = { artifact_type = foal }
			age_foal_effect = yes
		}

		#clrs fair modifiers and checks if can reapply
		check_fair_mount_modifiers_effect = yes
		##AI with multiple mounts recalcs which to use
		if = {
			limit = {
				ai = yes
				war = no
				any_artifact = {
					count = 2
					is_mount_trigger = yes
				}
			}
			set_character_flag = ai_recalc_equipped_mount
			character_event = { id = mountmaint.204 days = 5 }
		}

		##check commander mounts
		any_realm_character = {
			limit = {
				has_character_flag = has_mount_commander
				OR = {
					AND = {
						host = { character = ROOT }
						liege = { character = ROOT }
						is_ruler = no
					}
					AND = {
						liege = { character = ROOT }
						is_ruler = yes
					}
				}
			}
			#mount is dead, remove addon and flag
			if = {
				limit = { NOT = { any_artifact = { has_artifact_flag = commander_mount } } }
				any_artifact = {
					limit = { has_artifact_flag = commander_addon }
					destroy_artifact = yes
				}
				clr_character_flag = has_mount_commander
				check_fair_mount_modifiers_effect = yes
			}

			#no longer commander, get rid of artifacts and flag
			else_if = {
				limit = { NOT = { has_minor_title = title_commander } }
				any_artifact = {
					limit = {
						OR = {
							has_artifact_flag = commander_mount
							has_artifact_flag = commander_addon
						}
					}
					unsafe_destroy_artifact = yes
				}
				clr_character_flag = has_mount_commander
				check_fair_mount_modifiers_effect = yes
			}

			#is now landed, remove artifacts and flag
			else_if = {
				limit = { is_ruler = yes }
				any_artifact = {
					limit = {
						OR = {
							has_artifact_flag = commander_mount
							has_artifact_flag = commander_addon
						}
					}
					unsafe_destroy_artifact = yes
				}
				clr_character_flag = has_mount_commander
				check_fair_mount_modifiers_effect = yes
			}

			#age commander mount
			else = {
				any_artifact = {
					limit = { has_artifact_flag = commander_mount }
					random_list = {
						#no change
						35 = {}

						#decrease health
						65 = {
							modifier = {
								factor = 0.8
								has_artifact_flag = robust
							}
							decrease_mount_health_effect = yes
						}
					}
				}
			}
		}
	}
}
###dead mount notification
character_event = {
	id = mountmaint.11
	desc = EVTDESAmountmaint.11
	picture = GFX_evt_horse_friend

	is_triggered_only = yes

	option = {
		name = EVTOPTAmountmaint.11
		hidden_tooltip = {
			if = {
				limit = { has_character_flag = has_mount_commander }
				clr_character_flag = has_mount_commander
				any_artifact = {
					limit = { has_artifact_flag = commander_addon }
					destroy_artifact = yes
				}
			}
		}
		event_target:dying_mount = { show_scope_change = no unsafe_destroy_artifact = yes }
		check_mount_flags_effect = yes
	}
}
###foal grown up
character_event = {
	id = mountmaint.13
	desc = EVTDESAmountmaint.13
	picture = GFX_evt_horse_friend

	is_triggered_only = yes

	option = {
		name = EVTOPTAmountmaint.13
		event_target:growing_foal = {
			show_scope_change = no
			trigger_switch = {
				on_trigger = has_artifact_flag

				###tier 1
				change_to_dray_horse = { ROOT = { show_scope_change = no add_artifact = dray_horse foal_inherit_traits_effect = yes } }
				change_to_rouncey = { ROOT = { show_scope_change = no add_artifact = rouncey foal_inherit_traits_effect = yes } }

				###tier 2
				change_to_hobby = { ROOT = { show_scope_change = no add_artifact = hobby foal_inherit_traits_effect = yes } }
				change_to_jennet = { ROOT = { show_scope_change = no add_artifact = jennet foal_inherit_traits_effect = yes } }
				change_to_palfry = { ROOT = { show_scope_change = no add_artifact = palfry foal_inherit_traits_effect = yes } }

				###tier 3
				change_to_courser = { ROOT = { show_scope_change = no add_artifact = courser foal_inherit_traits_effect = yes } }
				change_to_destrier = { ROOT = { show_scope_change = no add_artifact = destrier foal_inherit_traits_effect = yes } }
				change_to_irrana_mountain_horse = { ROOT = { show_scope_change = no add_artifact = irrana_mountain_horse foal_inherit_traits_effect = yes } }
				change_to_druchii_destrier = { ROOT = { show_scope_change = no add_artifact = druchii_destrier foal_inherit_traits_effect = yes } }
				change_to_cathayan_ceromonial_horse = { ROOT = { show_scope_change = no add_artifact = cathayan_ceromonial_horse foal_inherit_traits_effect = yes } }

				###tier 4
				change_to_charger = { ROOT = { show_scope_change = no add_artifact = charger foal_inherit_traits_effect = yes } }
				change_to_cathayan_war_horse = { ROOT = { show_scope_change = no add_artifact = cathayan_war_horse foal_inherit_traits_effect = yes } }
				change_to_steppe_courser = { ROOT = { show_scope_change = no add_artifact = steppe_courser foal_inherit_traits_effect = yes } }
				change_to_arabyan_courser = { ROOT = { show_scope_change = no add_artifact = arabyan_courser foal_inherit_traits_effect = yes } }
				change_to_asur_courser = { ROOT = { show_scope_change = no add_artifact = asur_courser foal_inherit_traits_effect = yes } }
				change_to_teverian_horse = { ROOT = { show_scope_change = no add_artifact = teverian_horse foal_inherit_traits_effect = yes } }

				###tier 5
				change_to_tong_steppe_horse = { ROOT = { show_scope_change = no add_artifact = tong_steppe_horse foal_inherit_traits_effect = yes } }
				change_to_chaos_wastes_war_horse = { ROOT = { show_scope_change = no add_artifact = chaos_wastes_war_horse foal_inherit_traits_effect = yes } }
				change_to_arabyan_charger = { ROOT = { show_scope_change = no add_artifact = arabyan_charger foal_inherit_traits_effect = yes } }
				change_to_bretonnian_warhorse_mount = { ROOT = { show_scope_change = no add_artifact = bretonnian_warhorse_mount foal_inherit_traits_effect = yes } }
			}
		}
		event_target:growing_foal = { show_scope_change = no unsafe_destroy_artifact = yes }
	}
}
###fair mounts modifier, modifiers are cleared with scripted effect first
character_event = {
	id = mountmaint.14

	hide_window = yes
	is_triggered_only = yes

	immediate = {
		set_variable = { which = fair_mounts_counter value = 0 }
		any_artifact = {
			limit = { is_fair_mount_trigger = yes }
			ROOT = { change_variable = { which = fair_mounts_counter value = 1 } }
		}
		if = {
			limit = { check_variable = { which = fair_mounts_counter value >= 5 } }
			add_character_modifier = { modifier = fair_mounts_5 duration = -1 }
		}
		else_if = {
			limit = { check_variable = { which = fair_mounts_counter value == 4 } }
			add_character_modifier = { modifier = fair_mounts_4 duration = -1 }
		}
		else_if = {
			limit = { check_variable = { which = fair_mounts_counter value == 3 } }
			add_character_modifier = { modifier = fair_mounts_3 duration = -1 }
		}
		else_if = {
			limit = { check_variable = { which = fair_mounts_counter value == 2 } }
			add_character_modifier = { modifier = fair_mounts_2 duration = -1 }
		}
		else_if = {
			limit = { check_variable = { which = fair_mounts_counter value == 1 } }
			add_character_modifier = { modifier = fair_mounts_1 duration = -1 }
		}
	}
}
###generic mounts empty, refund money
character_event = {
	id = mountmaint.15
	desc = EVTDESAmountmaint.15
	picture = GFX_evt_market

	is_triggered_only = yes

	option = {
		name = EVTOPTAmountmaint.15
		if = {
			limit = {
				ai = yes
				is_nomadic=yes
			}
			trigger_switch = {
				on_trigger = has_character_flag

				mount_nomad_250_prestige = { prestige = 250 }
				mount_nomad_375_prestige = { prestige = 375 }
				mount_nomad_500_prestige = { prestige = 500 }
			}
			clr_character_flag = mount_nomad_250_prestige
			clr_character_flag = mount_nomad_375_prestige
			clr_character_flag = mount_nomad_500_prestige
		}
		event_target:mount_bought_item = { unsafe_destroy_artifact = yes }
		check_mount_flags_effect = yes
	}
}
character_event = {
	id = mountmaint.19

	hide_window = yes
	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				any_artifact = {
					has_artifact_flag = mount
					previous_owner = {
						is_alive = yes
						OR = {
							has_landed_title = event_target:mount_looted_holding
							top_liege = { has_landed_title = event_target:mount_looted_holding }
							war_with = ROOT
							top_liege = { war_with = ROOT }
						}
					}
				}
			}
			random_artifact = {
				limit = {
					has_artifact_flag = mount
					previous_owner = {
						is_alive = yes
						OR = {
							has_landed_title = event_target:mount_looted_holding
							top_liege = { has_landed_title = event_target:mount_looted_holding }
							war_with = ROOT
							top_liege = { war_with = ROOT }
						}
					}
				}
				previous_owner = { save_event_target_as = previous_mount_owner }
				transfer_artifact = {
					from = ROOT
					to = event_target:previous_mount_owner
				}
			}
		}
	}
}
#############AI Stuff###############
#buying mount from decision
character_event = {
	id = mountmaint.200

	hide_window = yes
	is_triggered_only = yes

	immediate = {

		random_list = {

			####horses
			100 = {
				random_list = {

					###tier 1
					20 = {
						trigger = {
							NOR = {
								higher_tier_than = count
								has_character_flag = ai_get_breeding_mount
							}
						}
						random_list = {

							#dray_horse
							20 = {
								wealth = -25
								add_artifact = dray_horse
								new_artifact = { save_event_target_as = mount_bought_item }
							}

							#rouncey
							80 = {
								wealth = -25
								add_artifact = rouncey
								new_artifact = { save_event_target_as = mount_bought_item }
							}
						}
					}

					###tier 2
					20 = {
						modifier = {
							factor = 0.5
							higher_tier_than = count
						}
						modifier = {
							factor = 0.2
							tier = emperor
						}
						random_list = {

							#hobby
							20 = {
								trigger = { can_buy_albion_items_trigger = yes }
								modifier = {
									factor = 2
									has_character_flag = ai_get_breeding_mount
								}
								modifier = {
									factor = 1.5
									culture_group = albion_group
								}
								wealth = -50
								add_artifact = hobby
							}

							#jennet
							20 = {
								trigger = { can_buy_estalian_items_trigger = yes }
								modifier = {
									factor = 0.5
									asur_discount_trigger = yes
								}
								modifier = {
									factor = 2
									has_character_flag = ai_get_breeding_mount
								}
								modifier = {
									factor = 3
									estalian_discount_trigger = yes
								}
								wealth = -50
								add_artifact = jennet
							}

							#palfry
							20 = {
								modifier = {
									factor = 1.5
									trait = content
								}
								modifier = {
									factor = 1.5
									any_vassal = {
										count = 4
										higher_tier_than = count
										NOT = { opinion = { who = ROOT value = 10 } }
									}
								}
								wealth = -50
								add_artifact = palfry
								new_artifact = { save_event_target_as = mount_bought_item }
							}
						}
					}

					###tier 3
					20 = {
						random_list = {

							#courser
							20 = {
								modifier = {
									factor = 1.25
									can_use_horse_archery_trigger = yes
								}
								modifier = {
									factor = 3
									is_skilled_horse_archer_trigger = yes
								}
								modifier = {
									factor = 1.5
									OR = {
										trait = light_foot_leader
										trait = flanker
										trait = flat_terrain_leader
									}
								}
								wealth = -125
								add_artifact = courser
								new_artifact = { save_event_target_as = mount_bought_item }
							}

							#destrier
							20 = {
								modifier = {
									factor = 1.5
									OR = {
										trait = experimenter #direct leader
										trait = inspiring_leader
										trait = aggressive_leader
										trait = cavalry_leader
									}
								}
								wealth = -125
								add_artifact = destrier
								new_artifact = { save_event_target_as = mount_bought_item }
							}

							#Irranan horse
							20 = {
								trigger = { can_buy_estalian_items_trigger = yes }
								modifier = {
									factor = 0.5
									asur_discount_trigger = yes
								}
								modifier = {
									factor = 1.5
									estalian_discount_trigger = yes
								}
								modifier = {
									factor = 2
									capital_scope = {
										OR = {
											terrain = hills
											terrain = mountain
										}
									}
								}
								modifier = {
									factor = 3
									capital_scope = {
										any_neighbor_province = {
											count = 3
											OR = {
												terrain = hills
												terrain = mountain
											}
										}
									}
								}
								wealth = -125
								add_artifact = irrana_mountain_horse
							}
						}
					}

					###tier 4
					30 = {
						trigger = {
							OR = {
								wealth = 300
								monthly_income = 20
							}
							OR = {
								higher_tier_than = count
								prestige = 500
								demesne_size = 3
								is_patrician = yes
							}
						}
						random_list = {

							#charger
							20 = {
								modifier = {
									factor = 1.5
									OR = {
										trait = experimenter #direct leader
										trait = inspiring_leader
										trait = aggressive_leader
										trait = cavalry_leader
									}
								}
								wealth = -225
								add_artifact = charger
								new_artifact = { save_event_target_as = mount_bought_item }
							}

							#steppe courser
							20 = {
								trigger = { can_buy_steppes_items_trigger = yes }
								modifier = {
									factor = 1.5
									can_use_horse_archery_trigger = yes
								}
								modifier = {
									factor = 1.5
									OR = {
										trait = light_foot_leader
										trait = flanker
										trait = flat_terrain_leader
									}
								}
								wealth = -225
								add_artifact = steppe_courser
							}

							#asur courser
							20 = {
								trigger = { can_buy_asur_items_trigger = yes }
								modifier = {
									factor = 0.5
									asur_discount_trigger = no
									wealth < 400
								}
								modifier = {
									factor = 0.5
									estalian_discount_trigger = yes
								}
								modifier = {
									factor = 2
									has_character_flag = ai_get_breeding_mount
								}
								modifier = {
									factor = 5
									asur_discount_trigger = yes
								}
								wealth = -225
								add_artifact = asur_courser
							}

							#arabyan courser
							20 = {
								trigger = { can_buy_arabyan_items_trigger = yes }
								modifier = {
									factor = 0.5
									arabyan_discount_trigger = no
									wealth < 400
								}
								modifier = {
									factor = 1.5
									arabyan_discount_trigger = yes
								}
								modifier = {
									factor = 1.5
									capital_scope = { terrain = desert }
								}
								wealth = -225
								add_artifact = arabyan_courser
							}

							#teveran horse
							20 = {
								trigger = { can_buy_cophic_items_trigger = yes }
								modifier = {
									factor = 0.5
									cophic_discount_trigger = no
									wealth < 400
								}
								modifier = {
									factor = 1.5
									cophic_discount_trigger = yes
								}
								modifier = {
									factor = 1.5
									trait = wroth
								}
								wealth = -225
								add_artifact = teverian_horse
							}
						}
					}

					###tier 5
					40 = {
						trigger = {
							OR = {
								wealth = 500
								monthly_income = 40
							}
							OR = {
								higher_tier_than = count
								prestige = 1000
								demesne_size = 5
								is_patrician = yes
							}
							OR = {
								can_buy_arabyan_items_trigger = yes
								can_buy_steppes_items_trigger = yes
								can_buy_breton_items_trigger = yes
							}
						}
						random_list = {
							#arabyan charger
							20 = {
								trigger = { can_buy_arabyan_items_trigger = yes }
								modifier = {
									factor = 2
									has_character_flag = ai_get_breeding_mount
								}
								modifier = {
									factor = 1.5
									arabyan_discount_trigger = yes
								}
								modifier = {
									factor = 1.5
									capital_scope = {
										OR = {
											terrain = desert
											terrain = plains
										}
									}
								}
								wealth = -250
								add_artifact = arabyan_charger
							}

							#Tong steppe horse
							20 = {
								trigger = { can_buy_steppes_items_trigger = yes }
								modifier = {
									factor = 1.5
									capital_scope = { terrain = steppe }
								}
								modifier = {
									factor = 2
									culture = tong
								}
								if = {
									limit = { offmap_cathay = { has_status = china_jurchen_invasion } }
									wealth = -800
								}
								wealth = -250
								add_artifact = tong_steppe_horse
							}

							#breton charger
							20 = {
								trigger = { can_buy_breton_items_trigger = yes }
								modifier = {
									factor = 1.5
									breton_discount_trigger = yes
								}
								modifier = {
									factor = 1.5
									trait = brave
								}
								modifier = {
									factor = 1.5
									trait = experimenter #direct leader
								}

								wealth = -250
								add_artifact = bretonnian_warhorse_mount
							}
						}
					}
				}
				modifier = {
					factor = 0
					OR={
						trait=creature_amazon
						trait=creature_orc
						trait=creature_goblin
						trait=creature_hobgoblin
						trait=creature_fimir
						trait=creature_skaven
						trait=creature_slann
						trait=creature_saurus
						trait=creature_skink
						trait=creature_ogre
					}
				}
			}

			####camels
			30 = {
				trigger = {
					NOT = { has_character_flag = ai_get_breeding_mount }
					OR = {
						can_buy_arabyan_items_trigger = yes
						AND = {
							can_buy_cophic_items_trigger = yes
							martial < 12
						}
					}
				}
				random_list = {

					#arabyan camel
					30 = {
						trigger = { can_buy_arabyan_items_trigger = yes }
						wealth = -250
						add_artifact = arabyan_camel
					}

					#cophic camel
					20 = {
						trigger = { can_buy_cophic_items_trigger = yes }
						modifier = {
							factor = 0.1
							higher_tier_than = duke
						}
						modifier = {
							factor = 1.5
							martial < 8
						}
						wealth = -200
						add_artifact = cophic_camel
					}
				}
				modifier = {
					factor = 0
					OR={
						trait=creature_amazon
						trait=creature_orc
						trait=creature_goblin
						trait=creature_hobgoblin
						trait=creature_fimir
						trait=creature_skaven
						trait=creature_slann
						trait=creature_saurus
						trait=creature_skink
						trait=creature_ogre
					}
				}
			}

			####elephants
			25 = {
				trigger = {
					NOT = { has_character_flag = ai_get_breeding_mount }
					OR = {
						can_buy_ind_items_trigger = yes
						can_buy_southlands_items_trigger = yes
					}
					OR = {
						wealth = 350
						AND = {
							wealth = 300
							monthly_income = 20
						}
					}
				}
				modifier = {
					factor = 1.5
					southlander_discount_trigger = yes
				}
				modifier = {
					factor = 2
					trait = cruel
				}
				modifier = {
					factor = 1.5
					OR = {
						trait = lunatic_1
						trait = lunatic_2
						trait = lunatic_3
					}
				}
				modifier = {
					factor = 5
					trait = war_elephant_leader
				}

				random_list = {

					#indn elephant
					20 = {
						trigger = { can_buy_ind_items_trigger = yes }
						wealth = -650
						add_artifact = ind_elephant
					}

					#southlander elephant
					20 = {
						trigger = { can_buy_southlands_items_trigger = yes }
						if = {
							limit = { southlander_discount_trigger = yes }
							wealth = -400
						}
						else = { wealth = -650 }
						add_artifact = southlander_elephant
					}
				}
				modifier = {
					factor = 0
					OR={
						trait=creature_amazon
						trait=creature_orc
						trait=creature_goblin
						trait=creature_hobgoblin
						trait=creature_fimir
						trait=creature_slann
						trait=creature_saurus
						trait=creature_skink
						trait=creature_ogre
					}
				}
			}

			####exotic
			20 = {
				modifier = {
					factor = 0
					OR={
						trait=creature_orc
						trait=creature_goblin
						trait=creature_hobgoblin
						trait=creature_fimir
						trait=creature_skaven
						trait=creature_slann
						trait=creature_saurus
						trait=creature_skink
						trait=creature_ogre
					}
				}
				trigger = {
					NOT = { has_character_flag = ai_get_breeding_mount }
					OR = {
						can_buy_lamassu_items_trigger = yes
						can_buy_ind_items_trigger = yes
						can_buy_kislev_items_trigger = yes
						can_buy_asur_items_trigger = yes
					}
					wealth = 200
				}
				modifier = {
					factor = 2
					trait = brave
				}
				modifier = {
					factor = 2
					OR = {
						trait = lunatic_1
						trait = lunatic_2
						trait = lunatic_3
					}
				}
				modifier = {
					factor = 2
					trait = possessed
				}
				modifier = {
					factor = 2
					prestige = 500
				}
				modifier = {
					factor = 1.5
					OR = {
						capital_scope = { terrain = forest }
						AND = {
							capital_scope = { terrain = mountain }
							can_buy_lamassu_items_trigger = yes
						}
						AND = {
							capital_scope = { terrain = jungle }
							can_buy_ind_items_trigger = yes
						}
					}
				}
				random_list = {
					#Amazon tiger
					20 = {
						trigger = {
							trait=creature_amazon
						}
						wealth = -125
						add_artifact = amazon_tiger
					}

					#kislev bear
					20 = {
						trigger = {
							can_buy_kislev_items_trigger = yes
							trait = creature_human
						}
						if = {
							limit = { kislevite_discount_trigger = yes }
							wealth = -200
						}
						else = { wealth = -300 }
						add_artifact = war_bear_mount
					}

					#Asur Stag
					20 = {
						trigger = {
							can_buy_asur_items_trigger = yes
						}
						if = {
							limit = { loren_discount_trigger = yes }
							wealth = -200
						}
						else = { wealth = -300 }
						add_artifact = asrai_stag
					}
					#Lamassu
					20 = {
						trigger = {
							can_buy_lamassu_items_trigger = yes
						}
						wealth = -340
						add_artifact = lamassu_mount
					}
				}
			}
			####Ogre
			20 = {
				trigger = {
					NOT = { has_character_flag = ai_get_breeding_mount }
					trait=creature_ogre
				}
				random_list = {
					20 = {
						modifier = {
							factor = 1.5
						}
						add_artifact = Stonehorn
						wealth = -267
					}
					20 = {
						modifier = {
							factor = 1.1
						}
						wealth = -225
						add_artifact = Mournfang
					}
				}
			}
			####Skink
			20 = {
				trigger = {
					NOT = { has_character_flag = ai_get_breeding_mount }
					trait=creature_skink
				}
				random_list = {
					20 = {
						modifier = {
							factor = 1.5
						}
						add_artifact = ripperdactyl_mount
						wealth = -125
					}
					20 = {
						modifier = {
							factor = 1.1
						}
						wealth = -225
						add_artifact = stegadon_mount
					}
					20 = {
						modifier = {
							factor = 1.1
						}
						wealth = -356
						add_artifact = bastiladon_mount
					}
				}
			}
			20 = {
				trigger = {
					NOT = { has_character_flag = ai_get_breeding_mount }
					trait=creature_saurus
				}
				add_artifact = carnosaur_mount
				wealth = -265
			}
			20 = {
				trigger = {
					NOT = { has_character_flag = ai_get_breeding_mount }
					trait=creature_slann
				}
				random_list = {
					20 = {
						modifier = {
							factor = 1.5
						}
						add_artifact = bastiladon_mount
						wealth = -325
					}
					20 = {
						modifier = {
							factor = 1.1
						}
						wealth = -356
						add_artifact = stegadon_mount
					}
				}
			}
			####greenskin
			20 = {
				trigger = {
					NOT = { has_character_flag = ai_get_breeding_mount }
					OR = {
						trait=creature_orc
						trait=creature_goblin
						trait=creature_hobgoblin
					}
				}
				random_list = {
					20 = {
						trigger = {
							trait=creature_goblin
						}
						modifier = {
							factor = 2
							culture = goblin_night
						}
						random_list={
							30={add_artifact = great_cave_squig}
							70={add_artifact = squig}
						}
						wealth = -65
					}
					20 = {
						trigger = {
							OR = {
								trait=creature_goblin
								trait=creature_hobgoblin
							}
						}
						modifier = {
							factor = 2
							NOT={culture = goblin_night}
						}
						add_artifact = wolf
						wealth = -65
					}
					20 = {
						trigger = {
							religion=spider_god
						}
						wealth = -65
						add_artifact = spider_mount
					}
					20 = {
						trigger = {
							OR = {
								trait=creature_orc
								trait=creature_hobgoblin
							}
						}
						wealth = -65
						add_artifact = boar
						}
					20 = {
						trigger = {
							OR = {
								trait=creature_orc
								trait=creature_hobgoblin
							}
						}
						wealth = -125
						add_artifact = boar_chariot
					}
				}
			}
			####skaven
			20 = {
				trigger = {
					NOT = { has_character_flag = ai_get_breeding_mount }
					trait=creature_skaven
				}
				random_list = {
					20 = {
						modifier = {
							factor = 1.5
							NOT={culture = moulder}
						}
						add_artifact = giant_rat_mount
						wealth = -25
					}
					20 = {
						modifier = {
							factor = 1.1
							culture = moulder
						}
						wealth = -65
						add_artifact = brood_horror_mount
					}
					20 = {
						modifier = {
							factor = 1.5
							culture = moulder
						}
						modifier = {
							factor = 1.5
							tier = king
						}
						wealth = -125
						add_artifact = rat_ogre_mount
					}
					5 = {
						modifier = {
							factor = 1.5
							culture = skryre
						}
						modifier = {
							factor = 0.1
							NOT={culture = skryre}
						}
						random_list={
							30={add_artifact = doomheel_mount}
							70={add_artifact = doomflayer_mount}
						}
						wealth = -225
					}
				}
			}
		}
		set_character_flag = has_mount
		clr_character_flag = ai_get_breeding_mount
	}
}
###nomad buying horses
character_event = {
	id = mountmaint.201

	hide_window = yes
	is_triggered_only = yes

	immediate = {
		random_list = {

			###tier 3
			20 = {
				random_list = {

					#courser
					20 = {
						modifier = {
							factor = 1.25
							can_use_horse_archery_trigger = yes
						}
						modifier = {
							factor = 3
							is_skilled_horse_archer_trigger = yes
						}
						modifier = {
							factor = 1.5
							OR = {
								trait = light_foot_leader
								trait = flanker
								trait = flat_terrain_leader
							}
						}
						modifier = {
							factor = 3
							trait = hunter
						}
						prestige = -125
						add_artifact = courser
						set_character_flag = mount_nomad_250_prestige
						new_artifact = { save_event_target_as = mount_bought_item }
					}

					#destrier
					20 = {
						modifier = {
							factor = 1.5
							OR = {
								trait = experimenter #direct leader
								trait = inspiring_leader
								trait = aggressive_leader
								trait = cavalry_leader
							}
						}
						modifier = {
							factor = 3
							trait = impaler
						}
						prestige = -125
						add_artifact = destrier
						set_character_flag = mount_nomad_250_prestige
						new_artifact = { save_event_target_as = mount_bought_item }
					}

					#galician horse
					20 = {
						trigger = { can_buy_estalian_items_trigger = yes }
						modifier = {
							factor = 0.5
							asur_discount_trigger = yes
						}
						modifier = {
							factor = 1.5
							estalian_discount_trigger = yes
						}
						modifier = {
							factor = 2
							capital_scope = {
								OR = {
									terrain = hills
									terrain = mountain
								}
							}
						}
						modifier = {
							factor = 3
							capital_scope = {
								any_neighbor_province = {
									count = 3
									OR = {
										terrain = hills
										terrain = mountain
									}
								}
							}
						}
						prestige = -125
						add_artifact = irrana_mountain_horse
					}
				}
				modifier = {
					factor = 0
					OR={
						trait=creature_amazon
						trait=creature_orc
						trait=creature_goblin
						trait=creature_fimir
						trait=creature_hobgoblin
						trait=creature_skaven
						trait=creature_slann
						trait=creature_saurus
						trait=creature_skink
						trait=creature_ogre
					}
				}
			}
			###tier 4
			40 = {
				trigger = {
					OR = {
						prestige = 400
						AND = {
							independent = yes
							prestige = 275
						}
					}
				}
				random_list = {

					#charger
					20 = {
						modifier = {
							factor = 1.5
							OR = {
								trait = experimenter #direct leader
								trait = inspiring_leader
								trait = aggressive_leader
								trait = cavalry_leader
							}
						}
						if = {
							limit = { independent = yes }
							prestige = -225
						}
						else = {
							prestige = -325
						}
						add_artifact = charger
						set_variable = { which = mount_prestige_spent value = 350 }
						new_artifact = { save_event_target_as = mount_bought_item }
					}

					#steppe courser
					20 = {
						trigger = { can_buy_steppes_items_trigger = yes }
						modifier = {
							factor = 1.5
							can_use_horse_archery_trigger = yes
						}
						modifier = {
							factor = 1.5
							OR = {
								trait = light_foot_leader
								trait = flanker
								trait = flat_terrain_leader
							}
						}
						if = {
							limit = { independent = yes }
							prestige = -125
						}
						else = { prestige = -200 }
						add_artifact = steppe_courser
					}

					#asur courser
					20 = {
						trigger = { can_buy_asur_items_trigger = yes }
						modifier = {
							factor = 2
							has_character_flag = ai_get_breeding_mount
						}
						modifier = {
							factor = 3
							asur_discount_trigger = yes
						}
						if = {
							limit = { independent = yes }
							prestige = -125
						}
						else = { prestige = -200 }
						add_artifact = asur_courser
					}

					#arabyan courser
					20 = {
						trigger = { can_buy_arabyan_items_trigger = yes }
						modifier = {
							factor = 1.5
							arabyan_discount_trigger = yes
						}
						modifier = {
							factor = 1.5
							capital_scope = { terrain = desert }
						}
						modifier = {
							factor = 3
							religion_group = ormazd_gods_group
						}
						if = {
							limit = { independent = yes }
							prestige = -125
						}
						else = { prestige = -200 }
						add_artifact = arabyan_courser
					}

					#teveran horse
					20 = {
						trigger = { can_buy_cophic_items_trigger = yes }
						modifier = {
							factor = 1.5
							cophic_discount_trigger = yes
						}
						modifier = {
							factor = 1.5
							trait = wroth
						}
						if = {
							limit = { independent = yes }
							prestige = -125
						}
						else = { prestige = -200 }
						add_artifact = teverian_horse
					}
				}
				modifier = {
					factor = 0
					OR={
						trait=creature_amazon
						trait=creature_orc
						trait=creature_goblin
						trait=creature_fimir
						trait=creature_hobgoblin
						trait=creature_skaven
						trait=creature_slann
						trait=creature_saurus
						trait=creature_skink
						trait=creature_ogre
					}
				}
			}
			###tier 5
			60 = {
				trigger = {
					OR = {
						prestige = 650
						AND = {
							independent = yes
							prestige = 525
						}
					}
					OR = {
						can_buy_arabyan_items_trigger = yes
						can_buy_steppes_items_trigger = yes
						can_buy_breton_items_trigger = yes
					}
				}
				random_list = {
					#arabyan charger
					20 = {
						trigger = { can_buy_arabyan_items_trigger = yes }
						modifier = {
							factor = 2
							has_character_flag = ai_get_breeding_mount
						}
						modifier = {
							factor = 1.5
							arabyan_discount_trigger = yes
						}
						modifier = {
							factor = 1.5
							capital_scope = {
								OR = {
									terrain = desert
									terrain = plains
								}
							}
						}
						modifier = {
							factor = 3
							religion_group = ormazd_gods_group
						}
						if = {
							limit = { independent = yes }
							prestige = -325
						}
						else = { prestige = -425 }
						add_artifact = arabyan_charger
					}

					#jurchen steppe horse
					20 = {
						trigger = { can_buy_steppes_items_trigger = yes }
						modifier = {
							factor = 1.5
							capital_scope = { terrain = steppe }
						}
						if = {
							limit = { independent = yes }
							prestige = -325
						}
						else = { prestige = -425 }
						add_artifact = tong_steppe_horse
					}

					#breton charger
					20 = {
						trigger = { can_buy_breton_items_trigger = yes }
						modifier = {
							factor = 1.5
							breton_discount_trigger = yes
						}
						modifier = {
							factor = 1.5
							trait = brave
						}
						modifier = {
							factor = 1.5
							trait = experimenter #direct leader
						}
						if = {
							limit = { independent = yes }
							prestige = -325
						}
						else = { prestige = -425 }
						add_artifact = bretonnian_warhorse_mount
					}
				}
				modifier = {
					factor = 0
					OR={
						trait=creature_amazon
						trait=creature_orc
						trait=creature_goblin
						trait=creature_fimir
						trait=creature_hobgoblin
						trait=creature_skaven
						trait=creature_slann
						trait=creature_saurus
						trait=creature_skink
						trait=creature_ogre
					}
				}
			}
			####Ogre
			20 = {
				trigger = {
					NOT = { has_character_flag = ai_get_breeding_mount }
					trait=creature_ogre
				}
				random_list = {
					20 = {
						modifier = {
							factor = 1.5
						}
						add_artifact = Stonehorn
						wealth = -267
					}
					20 = {
						modifier = {
							factor = 1.1
						}
						wealth = -225
						add_artifact = Mournfang
					}
				}
			}
			####Skink
			20 = {
				trigger = {
					NOT = { has_character_flag = ai_get_breeding_mount }
					trait=creature_skink
				}
				random_list = {
					20 = {
						modifier = {
							factor = 1.5
						}
						add_artifact = ripperdactyl_mount
						wealth = -125
					}
					20 = {
						modifier = {
							factor = 1.1
						}
						wealth = -225
						add_artifact = stegadon_mount
					}
					20 = {
						modifier = {
							factor = 1.1
						}
						wealth = -356
						add_artifact = bastiladon_mount
					}
				}
			}
			20 = {
				trigger = {
					NOT = { has_character_flag = ai_get_breeding_mount }
					trait=creature_saurus
				}
				add_artifact = carnosaur_mount
				wealth = -265
			}
			20 = {
				trigger = {
					NOT = { has_character_flag = ai_get_breeding_mount }
					trait=creature_slann
				}
				random_list = {
					20 = {
						modifier = {
							factor = 1.5
						}
						add_artifact = bastiladon_mount
						wealth = -325
					}
					20 = {
						modifier = {
							factor = 1.1
						}
						wealth = -356
						add_artifact = stegadon_mount
					}
				}
			}
			####greenskin
			20 = {
				trigger = {
					NOT = { has_character_flag = ai_get_breeding_mount }
					OR = {
						trait=creature_orc
						trait=creature_goblin
						trait=creature_hobgoblin
					}
				}
				random_list = {
					20 = {
						trigger = {
							trait=creature_goblin
						}
						modifier = {
							factor = 2
							culture = goblin_night
						}
						random_list={
							30={add_artifact = great_cave_squig}
							70={add_artifact = squig}
						}
						wealth = -65
					}
					20 = {
						trigger = {
							OR = {
								trait=creature_goblin
								trait=creature_hobgoblin
							}
						}
						modifier = {
							factor = 2
							NOT={culture = goblin_night}
						}
						add_artifact = wolf
						wealth = -65
					}
					20 = {
						trigger = {
							religion=spider_god
						}
						wealth = -65
						add_artifact = spider_mount
					}
					20 = {
						trigger = {
							OR = {
								trait=creature_orc
								trait=creature_hobgoblin
							}
						}
						wealth = -65
						add_artifact = boar
						}
					20 = {
						trigger = {
							OR = {
								trait=creature_orc
								trait=creature_hobgoblin
							}
						}
						wealth = -125
						add_artifact = boar_chariot
					}
				}
			}
			####skaven
			20 = {
				trigger = {
					NOT = { has_character_flag = ai_get_breeding_mount }
					trait=creature_skaven
				}
				random_list = {
					20 = {
						modifier = {
							factor = 1.5
							NOT={culture = moulder}
						}
						add_artifact = giant_rat_mount
						wealth = -25
					}
					20 = {
						modifier = {
							factor = 1.1
							culture = moulder
						}
						wealth = -65
						add_artifact = brood_horror_mount
					}
					20 = {
						modifier = {
							factor = 1.5
							culture = moulder
						}
						modifier = {
							factor = 1.5
							tier = king
						}
						wealth = -125
						add_artifact = rat_ogre_mount
					}
					5 = {
						modifier = {
							factor = 1.5
							culture = skryre
						}
						modifier = {
							factor = 0.1
							NOT={culture = skryre}
						}
						random_list={
							30={add_artifact = doomheel_mount}
							70={add_artifact = doomflayer_mount}
						}
						wealth = -225
					}
				}
			}
		}
		set_character_flag = has_mount
		clr_character_flag = ai_get_breeding_mount
	}
}
###ai recalcs which mount to use
character_event = {
	id = mountmaint.204

	hide_window = yes
	is_triggered_only = yes

	immediate = { clr_character_flag = ai_recalc_equipped_mount }
}
